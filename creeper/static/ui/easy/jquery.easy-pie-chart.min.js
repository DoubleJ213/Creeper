(function(A){A.easyPieChart=function(C,G){var B,J,H,F,L,D,E,I,K=this;this.el=C;this.$el=A(C);this.$el.data("easyPieChart",this);this.init=function(){var M,N;K.options=A.extend({},A.easyPieChart.defaultOptions,G);M=parseInt(K.$el.data("percent"),10);K.percentage=0;K.canvas=A("<canvas width='"+K.options.size+"' height='"+K.options.size+"'></canvas>").get(0);K.$el.append(K.canvas);if(typeof G_vmlCanvasManager!=="undefined"&&G_vmlCanvasManager!==null){G_vmlCanvasManager.initElement(K.canvas)}K.ctx=K.canvas.getContext("2d");if(window.devicePixelRatio>1){N=window.devicePixelRatio;A(K.canvas).css({width:K.options.size,height:K.options.size});K.canvas.width*=N;K.canvas.height*=N;K.ctx.scale(N,N)}K.ctx.translate(K.options.size/2,K.options.size/2);K.ctx.rotate(K.options.rotate*Math.PI/180);K.$el.addClass("easyPieChart");K.$el.css({width:K.options.size,height:K.options.size,lineHeight:""+K.options.size+"px"});K.update(M);return K};this.update=function(M){M=parseFloat(M)||0;if(K.options.animate===false){H(M)}else{if(K.options.delay){J(K.percentage,0);setTimeout(function(){return J(K.percentage,M)},K.options.delay)}else{J(K.percentage,M)}}return K};E=function(){var M,N,O;K.ctx.fillStyle=K.options.scaleColor;K.ctx.lineWidth=1;O=[];for(M=N=0;N<=24;M=++N){O.push(B(M))}return O};B=function(M){var N;N=M%6===0?0:K.options.size*0.017;K.ctx.save();K.ctx.rotate(M*Math.PI/12);K.ctx.fillRect(K.options.size/2-N,0,-K.options.size*0.05+N,1);K.ctx.restore()};I=function(){var M;M=K.options.size/2-K.options.lineWidth/2;if(K.options.scaleColor!==false){M-=K.options.size*0.08}K.ctx.beginPath();K.ctx.arc(0,0,M,0,Math.PI*2,true);K.ctx.closePath();K.ctx.strokeStyle=K.options.trackColor;K.ctx.lineWidth=K.options.lineWidth;K.ctx.stroke()};D=function(){if(K.options.scaleColor!==false){E()}if(K.options.trackColor!==false){I()}};H=function(M){var N;D();K.ctx.strokeStyle=A.isFunction(K.options.barColor)?K.options.barColor(M):K.options.barColor;K.ctx.lineCap=K.options.lineCap;K.ctx.lineWidth=K.options.lineWidth;N=K.options.size/2-K.options.lineWidth/2;if(K.options.scaleColor!==false){N-=K.options.size*0.08}K.ctx.save();K.ctx.rotate(-Math.PI/2);K.ctx.beginPath();K.ctx.arc(0,0,N,0,Math.PI*2*M/100,false);K.ctx.stroke();K.ctx.restore()};L=(function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(M){return window.setTimeout(M,1000/60)}})();J=function(M,O){var N,P;K.options.onStart.call(K);K.percentage=O;Date.now||(Date.now=function(){return +(new Date)});P=Date.now();N=function(){var R,Q;Q=Math.min(Date.now()-P,K.options.animate);K.ctx.clearRect(-K.options.size/2,-K.options.size/2,K.options.size,K.options.size);D.call(K);R=[F(Q,M,O-M,K.options.animate)];K.options.onStep.call(K,R);H.call(K,R);if(Q>=K.options.animate){return K.options.onStop.call(K,R,O)}else{return L(N)}};L(N)};F=function(Q,P,R,N){var M,O;M=function(S){return Math.pow(S,2)};O=function(S){if(S<1){return M(S)}else{return 2-M((S/2)*-2+2)}};Q/=N/2;return R/2*O(Q)+P};return this.init()};A.easyPieChart.defaultOptions={barColor:"#ef1e25",trackColor:"#f2f2f2",scaleColor:"#dfe0e0",lineCap:"round",rotate:0,size:110,lineWidth:3,animate:false,delay:false,onStart:A.noop,onStop:A.noop,onStep:A.noop};A.fn.easyPieChart=function(B){return A.each(this,function(D,C){var E,F;E=A(C);if(!E.data("easyPieChart")){F=A.extend({},B,E.data());return E.data("easyPieChart",new A.easyPieChart(C,F))}})};return void 0})(jQuery);