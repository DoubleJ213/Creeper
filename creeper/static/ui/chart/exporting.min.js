(function(O){var U=O.Chart,H=O.addEvent,P=O.removeEvent,N=O.createElement,K=O.discardElement,J=O.css,L=O.merge,A=O.each,G=O.extend,Q=Math.max,M=document,T=window,R=O.isTouchDevice,S=O.Renderer.prototype.symbols,F=O.getOptions(),I;G(F.lang,{printChart:"Print chart",downloadPNG:"Download PNG image",downloadJPEG:"Download JPEG image",downloadPDF:"Download PDF document",downloadSVG:"Download SVG vector image",contextButtonTitle:"Chart context menu"});F.navigation={menuStyle:{border:"1px solid #A0A0A0",background:"#FFFFFF",padding:"5px 0"},menuItemStyle:{padding:"0 10px",background:"none",color:"#303030",fontSize:R?"14px":"11px"},menuItemHoverStyle:{background:"#4572A5",color:"#FFFFFF"},buttonOptions:{symbolFill:"#E0E0E0",symbolSize:14,symbolStroke:"#666",symbolStrokeWidth:3,symbolX:12.5,symbolY:10.5,align:"right",buttonSpacing:3,height:22,theme:{fill:"white",stroke:"none"},verticalAlign:"top",width:24}};F.exporting={type:"image/png",url:"http://export.highcharts.com/",buttons:{contextButton:{symbol:"menu",_titleKey:"contextButtonTitle",menuItems:[{textKey:"printChart",onclick:function(){this.print()}},{separator:!0},{textKey:"downloadPNG",onclick:function(){this.exportChart()}},{textKey:"downloadJPEG",onclick:function(){this.exportChart({type:"image/jpeg"})}},{textKey:"downloadPDF",onclick:function(){this.exportChart({type:"application/pdf"})}},{textKey:"downloadSVG",onclick:function(){this.exportChart({type:"image/svg+xml"})}}]}}};O.post=function(E,C){var D,B;B=N("form",{method:"post",action:E,enctype:"multipart/form-data"},{display:"none"},M.body);for(D in C){N("input",{type:"hidden",name:D,value:C[D]},null,B)}B.submit();K(B)};G(U.prototype,{getSVG:function(W){var D=this,E,C,V,B,X=L(D.options,W);if(!M.createElementNS){M.createElementNS=function(Z,Y){return M.createElement(Y)}}W=N("div",null,{position:"absolute",top:"-9999em",width:D.chartWidth+"px",height:D.chartHeight+"px"},M.body);C=D.renderTo.style.width;B=D.renderTo.style.height;C=X.exporting.sourceWidth||X.chart.width||/px$/.test(C)&&parseInt(C,10)||600;B=X.exporting.sourceHeight||X.chart.height||/px$/.test(B)&&parseInt(B,10)||400;G(X.chart,{animation:!1,renderTo:W,forExport:!0,width:C,height:B});X.exporting.enabled=!1;X.chart.plotBackgroundImage=null;X.series=[];A(D.series,function(Y){V=L(Y.options,{animation:!1,showCheckbox:!1,visible:Y.visible});V.isInternal||X.series.push(V)});E=new O.Chart(X,D.callback);A(["xAxis","yAxis"],function(Y){A(D[Y],function(h,a){var i=E[Y][a],c=h.getExtremes(),Z=c.userMin,c=c.userMax;(Z!==void 0||c!==void 0)&&i.setExtremes(Z,c,!0,!1)})});C=E.container.innerHTML;X=null;E.destroy();K(W);C=C.replace(/zIndex="[^"]+"/g,"").replace(/isShadow="[^"]+"/g,"").replace(/symbolName="[^"]+"/g,"").replace(/jQuery[0-9]+="[^"]+"/g,"").replace(/url\([^#]+#/g,"url(#").replace(/<svg /,'<svg xmlns:xlink="http://www.w3.org/1999/xlink" ').replace(/ href=/g," xlink:href=").replace(/\n/," ").replace(/<\/svg>.*?$/,"</svg>").replace(/&nbsp;/g," ").replace(/&shy;/g,"­").replace(/<IMG /g,"<image ").replace(/height=([^" ]+)/g,'height="$1"').replace(/width=([^" ]+)/g,'width="$1"').replace(/hc-svg-href="([^"]+)">/g,'xlink:href="$1"/>').replace(/id=([^" >]+)/g,'id="$1"').replace(/class=([^" ]+)/g,'class="$1"').replace(/ transform /g," ").replace(/:(path|rect)/g,"$1").replace(/style="([^"]+)"/g,function(Y){return Y.toLowerCase()});C=C.replace(/(url\(#highcharts-[0-9]+)&quot;/g,"$1").replace(/&quot;/g,"'");C.match(/ xmlns="/g).length===2&&(C=C.replace(/xmlns="[^"]+"/,""));return C},exportChart:function(D,B){var D=D||{},C=this.options.exporting,C=this.getSVG(L({chart:{borderRadius:0}},C,B,{exporting:{sourceWidth:D.sourceWidth||C.sourceWidth,sourceHeight:D.sourceHeight||C.sourceHeight}})),D=L(this.options.exporting,D);O.post(D.url,{filename:D.filename||"chart",type:D.type,width:D.width||0,scale:D.scale||2,svg:C})},print:function(){var W=this,E=W.container,V=[],C=E.parentNode,D=M.body,B=D.childNodes;if(!W.isPrinting){W.isPrinting=!0,A(B,function(Y,X){if(Y.nodeType===1){V[X]=Y.style.display,Y.style.display="none"}}),D.appendChild(E),T.focus(),T.print(),setTimeout(function(){C.appendChild(E);A(B,function(Y,X){if(Y.nodeType===1){Y.style.display=V[X]}});W.isPrinting=!1},1000)}},contextMenu:function(t,p,r,x,y,w,v){var W=this,C=W.options.navigation,Y=C.menuItemStyle,Z=W.chartWidth,X=W.chartHeight,z="cache-"+t,m=W[z],V=Q(y,w),D,E,B;if(!m){W[z]=m=N("div",{className:"highcharts-"+t},{position:"absolute",zIndex:1000,padding:V+"px"},W.container),D=N("div",null,G({MozBoxShadow:"3px 3px 10px #888",WebkitBoxShadow:"3px 3px 10px #888",boxShadow:"3px 3px 10px #888"},C.menuStyle),m),E=function(){J(m,{display:"none"});v&&v.setState(0)},H(m,"mouseleave",function(){B=setTimeout(E,500)}),H(m,"mouseenter",function(){clearTimeout(B)}),A(p,function(d){if(d){var c=d.separator?N("hr",null,null,D):N("div",{onmouseover:function(){J(this,C.menuItemHoverStyle)},onmouseout:function(){J(this,Y)},onclick:function(){E();d.onclick.apply(W,arguments)},innerHTML:d.text||W.options.lang[d.textKey]},G({cursor:"pointer"},Y),D);W.exportDivElements.push(c)}}),W.exportDivElements.push(D,m),W.exportMenuWidth=m.offsetWidth,W.exportMenuHeight=m.offsetHeight}t={display:"block"};r+W.exportMenuWidth>Z?t.right=Z-r-y-V+"px":t.left=r-V+"px";x+w+W.exportMenuHeight>X?t.bottom=X-x-V+"px":t.top=x+w-V+"px";J(m,t)},addButton:function(e){var Y=this,Z=Y.renderer,e=L(Y.options.navigation.buttonOptions,e),p=e.onclick,E=e.menuItems,l,k,D={stroke:e.symbolStroke,fill:e.symbolFill},B=e.symbolSize||12;if(!Y.btnCount){Y.btnCount=0}Y.btnCount++;if(!Y.exportDivElements){Y.exportDivElements=[],Y.exportSVGElements=[]}if(e.enabled!==!1){var V=e.theme,W=V.states,X=W&&W.hover,W=W&&W.select,C;delete V.states;p?C=function(){p.apply(Y,arguments)}:E&&(C=function(){Y.contextMenu("contextmenu",E,k.translateX,k.translateY,k.width,k.height,k);k.setState(2)});e.text&&e.symbol?V.paddingLeft=O.pick(V.paddingLeft,25):e.text||G(V,{width:e.width,height:e.height,padding:0});k=Z.button(e.text,0,0,C,V,X,W).attr({title:Y.options.lang[e._titleKey],"stroke-linecap":"round"});e.symbol&&(l=Z.symbol(e.symbol,e.symbolX-B/2,e.symbolY-B/2,B,B).attr(G(D,{"stroke-width":e.symbolStrokeWidth||1,zIndex:1})).add(k));k.add().align(G(e,{width:k.width,x:O.pick(e.x,I)}),!0,"spacingBox");I+=(k.width+e.buttonSpacing)*(e.align==="right"?-1:1);Y.exportSVGElements.push(k,l)}},destroyExport:function(D){var D=D.target,B,C;for(B=0;B<D.exportSVGElements.length;B++){C=D.exportSVGElements[B],C.onclick=C.ontouchstart=null,D.exportSVGElements[B]=C.destroy()}for(B=0;B<D.exportDivElements.length;B++){C=D.exportDivElements[B],P(C,"mouseleave"),D.exportDivElements[B]=C.onmouseout=C.onmouseover=C.ontouchstart=C.onclick=null,K(C)}}});S.menu=function(E,C,D,B){return["M",E,C+2.5,"L",E+D,C+2.5,"M",E,C+B/2+0.5,"L",E+D,C+B/2+0.5,"M",E,C+B-1.5,"L",E+D,C+B-1.5]};U.prototype.callbacks.push(function(E){var C,D=E.options.exporting,B=D.buttons;I=0;if(D.enabled!==!1){for(C in B){E.addButton(B[C])}H(E,"destroy",E.destroyExport)}})})(Highcharts);