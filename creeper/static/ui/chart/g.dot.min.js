/*
 * g.Raphael 0.5 - Charting library, based on RaphaÃ«l
 *
 * Copyright (c) 2009 Dmitry Baranovskiy (http://g.raphaeljs.com)
 * Licensed under the MIT (http://www.opensource.org/licenses/mit-license.php) license.
 */
(function(){var C=function(G,E,D,F){return"hsb("+[Math.min((1-G/E)*0.4,1),D||0.75,F||0.75]+")"};function B(M,f,h,H,J,G,F,Z,S){var U=this;function a(R){+R[0]&&(R[0]=U.axis(f+L,h+L,H-2*L,I,V,S.axisxstep||Math.floor((H-2*L)/20),2,S.axisxlabels||null,S.axisxtype||"t",null,M));+R[1]&&(R[1]=U.axis(f+H-L,h+J-L,J-2*L,K,e,S.axisystep||Math.floor((J-2*L)/20),3,S.axisylabels||null,S.axisytype||"t",null,M));+R[2]&&(R[2]=U.axis(f+L,h+J-L+u,H-2*L,I,V,S.axisxstep||Math.floor((H-2*L)/20),0,S.axisxlabels||null,S.axisxtype||"t",null,M));+R[3]&&(R[3]=U.axis(f+L-u,h+J-L,J-2*L,K,e,S.axisystep||Math.floor((J-2*L)/20),1,S.axisylabels||null,S.axisytype||"t",null,M))}S=S||{};var v=U.snapEnds(Math.min.apply(Math,G),Math.max.apply(Math,G),G.length-1),I=v.from,V=v.to,L=S.gutter||10,d=U.snapEnds(Math.min.apply(Math,F),Math.max.apply(Math,F),F.length-1),K=d.from,e=d.to,Q=Math.max(G.length,F.length,Z.length),E=M[S.symbol]||"circle",D=M.set(),j=M.set(),s=S.max||100,N=Math.max.apply(Math,Z),z=[],p=Math.sqrt(N/Math.PI)*2/s;for(var q=0;q<Q;q++){z[q]=Math.min(Math.sqrt(Z[q]/Math.PI)*2/p,s)}L=Math.max.apply(Math,z.concat(L));var W=M.set(),u=Math.max.apply(Math,z);if(S.axis){var o=(S.axis+"").split(/[,\s]+/);a.call(U,o);var w=[],t=[];for(var q=0,l=o.length;q<l;q++){var n=o[q].all?o[q].all.getBBox()[["height","width"][q%2]]:0;w[q]=n+L;t[q]=n}L=Math.max.apply(Math,w.concat(L));for(var q=0,l=o.length;q<l;q++){if(o[q].all){o[q].remove();o[q]=1}}a.call(U,o);for(var q=0,l=o.length;q<l;q++){if(o[q].all){W.push(o[q].all)}}D.axis=W}var c=(H-L*2)/((V-I)||1),T=(J-L*2)/((e-K)||1);for(var q=0,l=F.length;q<l;q++){var r=M.raphael.is(E,"array")?E[q]:E,O=f+L+(G[q]-I)*c,P=h+J-L-(F[q]-K)*T;r&&z[q]&&j.push(M[r](O,P,z[q]).attr({fill:S.heat?C(z[q],u):U.colors[0],"fill-opacity":S.opacity?z[q]/s:1,stroke:"none"}))}var m=M.set();for(var q=0,l=F.length;q<l;q++){var O=f+L+(G[q]-I)*c,P=h+J-L-(F[q]-K)*T;m.push(M.circle(O,P,u).attr(U.shim));S.href&&S.href[q]&&m[q].attr({href:S.href[q]});m[q].r=+z[q].toFixed(3);m[q].x=+O.toFixed(3);m[q].y=+P.toFixed(3);m[q].X=G[q];m[q].Y=F[q];m[q].value=Z[q]||0;m[q].dot=j[q]}D.covers=m;D.series=j;D.push(j,W,m);D.hover=function(R,X){m.mouseover(R).mouseout(X);return this};D.click=function(R){m.click(R);return this};D.each=function(X){if(!M.raphael.is(X,"function")){return this}for(var R=m.length;R--;){X.call(m[R])}return this};D.href=function(X){var Y;for(var R=m.length;R--;){Y=m[R];if(Y.X==X.x&&Y.Y==X.y&&Y.value==X.value){Y.attr({href:X.href})}}};return D}var A=function(){};A.prototype=Raphael.g;B.prototype=new A;Raphael.fn.dotchart=function(H,I,G,D,K,J,E,F){return new B(this,H,I,G,D,K,J,E,F)}})();