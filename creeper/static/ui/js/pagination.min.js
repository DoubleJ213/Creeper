(function(B){B.fn.extend({pagination:function(D){var E={first$:"li.j-first",prev$:"li.j-prev",next$:"li.j-next",last$:"li.j-last",nums$:"li.j-num>a",jumpto$:"li.jumpto",pageNumFrag:'<li class="#liClass#"><a href="javascript:;">#pageNum#</a></li>'};return this.each(function(){var Q=B(this);var J=new A(D);var N=J.getInterval();var H=J.getCurrentPage();var G=N.start;var I=N.end;if(I>=4&&H<4){G=N.start;if(I>=N.start+4){I=N.start+4}}if(H>=4&&H+1!=I){G=H-2;if(I>=H+2){I=H+2}else{G=I-4}}if(H>=4&&H+1==I){G=H-3;I=H+1}var L="";for(var P=G;P<I;P++){L+=E.pageNumFrag.replaceAll("#pageNum#",P).replaceAll("#liClass#",P==J.getCurrentPage()?"selected j-num":"j-num")}Q.html(DWZ.frag["pagination"].replaceAll("#pageNumFrag#",L).replaceAll("#currentPage#",J.getCurrentPage())).find("li").hoverClass();var K=Q.find(E.first$);var M=Q.find(E.prev$);var F=Q.find(E.next$);var O=Q.find(E.last$);if(J.hasPrev()){K.add(M).find(">span").hide();C(M,J.getCurrentPage()-1,J.targetType(),J.rel());C(K,1,J.targetType(),J.rel())}else{K.add(M).addClass("disabled").find(">a").hide()}if(J.hasNext()){F.add(O).find(">span").hide();C(F,J.getCurrentPage()+1,J.targetType(),J.rel());C(O,J.numPages(),J.targetType(),J.rel())}else{F.add(O).addClass("disabled").find(">a").hide()}Q.find(E.nums$).each(function(R){C(B(this),R+G,J.targetType(),J.rel())});Q.find(E.jumpto$).each(function(){var S=B(this);var T=S.find(":text");var R=S.find(":button");R.click(function(V){var U=T.val();if(U&&U.isPositiveInteger()){dwzPageBreak({targetType:J.targetType(),rel:J.rel(),data:{pageNum:U}})}});T.keyup(function(U){if(U.keyCode==DWZ.keyCode.ENTER){R.click()}})})});function C(H,F,G,I){H.bind("click",{pageNum:F},function(J){dwzPageBreak({targetType:G,rel:I,data:{pageNum:J.data.pageNum}});J.preventDefault()})}},orderBy:function(D){var C=B.extend({targetType:"navTab",rel:"",asc:"asc",desc:"desc"},D);return this.each(function(){var E=B(this).css({cursor:"pointer"}).click(function(){var G=E.attr("orderField");var F=E.hasClass(C.asc)?C.desc:C.asc;dwzPageBreak({targetType:C.targetType,rel:C.rel,data:{orderField:G,orderDirection:F}})})})},pagerForm:function(D){var C=B.extend({pagerForm$:"#pagerForm",parentBox:document},D);var E='<input type="hidden" name="#name#" value="#value#" />';return this.each(function(){var G=B(this),F=B(C.pagerForm$,C.parentBox);var H=F.attr("action").replaceAll("#rel#",G.attr("action"));F.attr("action",H);G.find(":input").each(function(){var I=B(this),K=I.attr("name");if(K&&(!I.is(":checkbox,:radio")||I.is(":checked"))){if(F.find(":input[name='"+K+"']").length==0){var J=E.replaceAll("#name#",K).replaceAll("#value#",I.val());F.append(J)}}})})}});var A=function(C){this.opts=B.extend({targetType:"navTab",rel:"",totalCount:0,numPerPage:10,pageNumShown:10,currentPage:1,callback:function(){return false}},C)};B.extend(A.prototype,{targetType:function(){return this.opts.targetType},rel:function(){return this.opts.rel},numPages:function(){return Math.ceil(this.opts.totalCount/this.opts.numPerPage)},getInterval:function(){var C=Math.ceil(this.opts.pageNumShown/2);var D=this.numPages();var E=D-this.opts.pageNumShown;var G=this.getCurrentPage()>C?Math.max(Math.min(this.getCurrentPage()-C,E),0):0;var F=this.getCurrentPage()>C?Math.min(this.getCurrentPage()+C,D):Math.min(this.opts.pageNumShown,D);return{start:G+1,end:F+1}},getCurrentPage:function(){var C=parseInt(this.opts.currentPage);if(isNaN(C)){return 1}return C},hasPrev:function(){return this.getCurrentPage()>1},hasNext:function(){return this.getCurrentPage()<this.numPages()}})})(jQuery);