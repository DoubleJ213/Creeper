jQuery.cookie=function(C,F,D){if(typeof F!="undefined"){D=D||{};if(F===null){F="";D.expires=-1}var B="";if(D.expires&&(typeof D.expires=="number"||D.expires.toUTCString)){var L;if(typeof D.expires=="number"){L=new Date();L.setTime(L.getTime()+(D.expires*24*60*60*1000))}else{L=D.expires}B="; expires="+L.toUTCString()}var I=D.path?"; path="+(D.path):"";var H=D.domain?"; domain="+(D.domain):"";var K=D.secure?"; secure":"";document.cookie=[C,"=",encodeURIComponent(F),B,I,H,K].join("")}else{var E=null;if(document.cookie&&document.cookie!=""){var A=document.cookie.split(";");for(var G=0;G<A.length;G++){var J=jQuery.trim(A[G]);if(J.substring(0,C.length+1)==(C+"=")){E=decodeURIComponent(J.substring(C.length+1));break}}}return E}};(function(H){var F="0.4.0",G="hasOwnProperty",K=/[\.\/]/,A="*",I=function(){},J=function(M,L){return M-L},D,E,B={n:{}},C=function(Y,W){var X=B,g=E,L=Array.prototype.slice.call(arguments,2),Z=C.listeners(Y),U=0,V=!1,R,T=[],N={},O=[],P=[];D=Y,E=0;for(var M=0,Q=Z.length;M<Q;M++){"zIndex" in Z[M]&&(T.push(Z[M].zIndex),Z[M].zIndex<0&&(N[Z[M].zIndex]=Z[M]))}T.sort(J);while(T[U]<0){R=N[T[U++]],O.push(R.apply(W,L));if(E){E=g;return O}}for(M=0;M<Q;M++){R=Z[M];if("zIndex" in R){if(R.zIndex==T[U]){O.push(R.apply(W,L));if(E){E=g;return O}do{U++,R=N[T[U]],R&&O.push(R.apply(W,L));if(E){E=g;return O}}while(R)}else{N[R.zIndex]=R}}else{O.push(R.apply(W,L));if(E){E=g;return O}}}E=g;return O.length?O:null};C.listeners=function(W){var U=W.split(K),V=B,X,Y,N,O,M,R,T,P,Q=[V],L=[];for(O=0,M=U.length;O<M;O++){P=[];for(R=0,T=Q.length;R<T;R++){V=Q[R].n,Y=[V[U[O]],V[A]],N=2;while(N--){X=Y[N],X&&(P.push(X),L=L.concat(X.f||[]))}}Q=P}return L},C.on=function(Q,O){var P=Q.split(K),N=B;for(var L=0,M=P.length;L<M;L++){N=N.n,!N[P[L]]&&(N[P[L]]={n:{}}),N=N[P[L]]}N.f=N.f||[];for(L=0,M=N.f.length;L<M;L++){if(N.f[L]==O){return I}}N.f.push(O);return function(R){+R==+R&&(O.zIndex=+R)}},C.stop=function(){E=1},C.nt=function(L){if(L){return(new RegExp("(?:\\.|\\/|^)"+L+"(?:\\.|\\/|$)")).test(D)}return D},C.unbind=function(V,U){var W=V.split(K),X,N,O,M,R,T,P,Q=[B];for(M=0,R=W.length;M<R;M++){for(T=0;T<Q.length;T+=O.length-2){O=[T,1],X=Q[T].n;if(W[M]!=A){X[W[M]]&&O.push(X[W[M]])}else{for(N in X){X[G](N)&&O.push(X[N])}}Q.splice.apply(Q,O)}}for(M=0,R=Q.length;M<R;M++){X=Q[M];while(X.n){if(U){if(X.f){for(T=0,P=X.f.length;T<P;T++){if(X.f[T]==U){X.f.splice(T,1);break}}!X.f.length&&delete X.f}for(N in X.n){if(X.n[G](N)&&X.n[N].f){var L=X.n[N].f;for(T=0,P=L.length;T<P;T++){if(L[T]==U){L.splice(T,1);break}}!L.length&&delete X.n[N].f}}}else{delete X.f;for(N in X.n){X.n[G](N)&&X.n[N].f&&delete X.n[N].f}}X=X.n}}},C.once=function(N,L){var M=function(){L.apply(this,arguments),C.unbind(N,M)};return C.on(N,M)},C.version=F,C.toString=function(){return"You are running Eve "+F},typeof module!="undefined"&&module.exports?module.exports=C:H.eve=C})(this),function(){function Aj(Cv,Cx,C,Cw,Cq,Cr){C=A4(C);var Co,Cp,Ct,Cu=[],Cs,Ci,Cj,Cm=Cv.ms,Cn={},Ck={},Cl={};if(Cw){for(Ch=0,Cf=AB.length;Ch<Cf;Ch++){var Cg=AB[Ch];if(Cg.el.id==Cx.id&&Cg.anim==Cv){Cg.percent!=C?(AB.splice(Ch,1),Ct=1):Cp=Cg,Cx.attr(Cg.totalOrigin);break}}}else{Cw=+Ck}for(var Ch=0,Cf=Cv.percents.length;Ch<Cf;Ch++){if(Cv.percents[Ch]==C||Cv.percents[Ch]>Cw*Cv.top){C=Cv.percents[Ch],Ci=Cv.percents[Ch-1]||0,Cm=Cm/Cv.top*(C-Ci),Cs=Cv.percents[Ch+1],Co=Cv.anim[C];break}Cw&&Cx.attr(Cv.anim[Cv.percents[Ch]])}if(!!Co){if(!Cp){for(var c in Co){if(Co[BP](c)){if(A8[BP](c)||Cx.paper.customAttributes[BP](c)){Cn[c]=Cx.attr(c),Cn[c]==null&&(Cn[c]=A7[c]),Ck[c]=Co[c];switch(A8[c]){case Bi:Cl[c]=(Ck[c]-Cn[c])/Cm;break;case"colour":Cn[c]=BN.getRGB(Cn[c]);var a=BN.getRGB(Ck[c]);Cl[c]={r:(a.r-Cn[c].r)/Cm,g:(a.g-Cn[c].g)/Cm,b:(a.b-Cn[c].b)/Cm};break;case"path":var r=B0(Cn[c],Ck[c]),s=r[1];Cn[c]=r[0],Cl[c]=[];for(Ch=0,Cf=Cn[c].length;Ch<Cf;Ch++){Cl[c][Ch]=[0];for(var g=1,n=Cn[c][Ch].length;g<n;g++){Cl[c][Ch][g]=(s[Ch][g]-Cn[c][Ch][g])/Cm}}break;case"transform":var V=Cx._,W=Ai(V[c],Ck[c]);if(W){Cn[c]=W.from,Ck[c]=W.to,Cl[c]=[],Cl[c].real=!0;for(Ch=0,Cf=Cn[c].length;Ch<Cf;Ch++){Cl[c][Ch]=[Cn[c][Ch][0]];for(g=1,n=Cn[c][Ch].length;g<n;g++){Cl[c][Ch][g]=(Ck[c][Ch][g]-Cn[c][Ch][g])/Cm}}}else{var T=Cx.matrix||new AC,U={_:{transform:V.transform},getBBox:function(){return Cx.getBBox(1)}};Cn[c]=[T.a,T.b,T.c,T.d,T.e,T.f],Ce(U,Ck[c]),Ck[c]=U._.transform,Cl[c]=[(U.matrix.a-T.a)/Cm,(U.matrix.b-T.b)/Cm,(U.matrix.c-T.c)/Cm,(U.matrix.d-T.d)/Cm,(U.matrix.e-T.e)/Cm,(U.matrix.e-T.f)/Cm]}break;case"csv":var Y=Bv(Co[c])[Bw](BM),Z=Bv(Cn[c])[Bw](BM);if(c=="clip-rect"){Cn[c]=Z,Cl[c]=[],Ch=Z.length;while(Ch--){Cl[c][Ch]=(Y[Ch]-Cn[c][Ch])/Cm}}Ck[c]=Y;break;default:Y=[][BH](Co[c]),Z=[][BH](Cn[c]),Cl[c]=[],Ch=Cx.paper.customAttributes[c].length;while(Ch--){Cl[c][Ch]=((Y[Ch]||0)-(Z[Ch]||0))/Cm}}}}}var X=Co.easing,Q=BN.easing_formulas[X];if(!Q){Q=Bv(X).match(Bd);if(Q&&Q.length==5){var N=Q;Q=function(A){return Bq(A,+N[1],+N[2],+N[3],+N[4],Cm)}}else{Q=Aq}}Cj=Co.start||Cv.start||+(new Date),Cg={anim:Cv,percent:C,timestamp:Cj,start:Cj+(Cv.del||0),status:0,initstatus:Cw||0,stop:!1,ms:Cm,easing:Q,from:Cn,diff:Cl,to:Ck,el:Cx,callback:Co.callback,prev:Ci,next:Cs,repeat:Cr||Cv.times,origin:Cx.attr(),totalOrigin:Cq},AB.push(Cg);if(Cw&&!Cp&&!Ct){Cg.stop=!0,Cg.start=new Date-Cm*Cw;if(AB.length==1){return B3()}}Ct&&(Cg.start=new Date-Cg.ms*Cw),AB.length==1&&AH(B3)}else{Cp.initstatus=Cw,Cp.start=new Date-Cp.ms*Cw}eve("anim.start."+Cx.id,Cx,Cv)}}function Ca(E,C){var D=[],A={};this.ms=C,this.times=1;if(E){for(var B in E){E[BP](B)&&(A[A4(B)]=E[B],D.push(A4(B)))}D.sort(Av)}this.anim=A,this.top=D[D.length-1],this.percents=D}function Bq(L,J,K,O,A,M){function G(V,T){var U,X,P,W,Q,R;for(P=V,R=0;R<8;R++){W=I(P)-V;if(Bp(W)<T){return P}Q=(3*E*P+2*D)*P+N;if(Bp(Q)<1e-06){break}P=P-W/Q}U=0,X=1,P=V;if(P<U){return U}if(P>X){return X}while(U<X){W=I(P);if(Bp(W-V)<T){return P}V>W?U=P:X=P,P=(X-U)/2+U}return P}function F(R,P){var Q=G(R,P);return((H*Q+C)*Q+B)*Q}function I(P){return((E*P+D)*P+N)*P}var N=3*J,D=3*(O-J)-N,E=1-N-D,B=3*K,C=3*(A-K)-B,H=1-B-C;return F(L,1/(200*M))}function B8(){return this.x+By+this.y+By+this.width+" × "+this.height}function Aw(){return this.x+By+this.y}function AC(E,C,D,A,B,F){E!=null?(this.a=+E,this.b=+C,this.c=+D,this.d=+A,this.e=+B,this.f=+F):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}function Bt(E){var C=[];for(var D=0,A=E.length;A-2>D;D+=2){var B=[{x:+E[D],y:+E[D+1]},{x:+E[D],y:+E[D+1]},{x:+E[D+2],y:+E[D+3]},{x:+E[D+4],y:+E[D+5]}];A-4==D?(B[0]={x:+E[D-2],y:+E[D-1]},B[3]=B[2]):D&&(B[0]={x:+E[D-2],y:+E[D-1]}),C.push(["C",(-B[0].x+6*B[1].x+B[2].x)/6,(-B[0].y+6*B[1].y+B[2].y)/6,(B[1].x+6*B[2].x-B[3].x)/6,(B[1].y+6*B[2].y-B[3].y)/6,B[2].x,B[2].y])}return C}function AL(){return this.hex}function B5(D,B,C){function A(){var G=Array.prototype.slice.call(arguments,0),H=G.join("␀"),E=A.cache=A.cache||{},F=A.count=A.count||[];if(E[BP](H)){AO(F,H);return C?C(E[H]):E[H]}F.length>=1000&&delete E[F.shift()],F.push(H),E[H]=D[BK](B,G);return C?C(E[H]):E[H]}return A}function AO(D,B){for(var C=0,A=D.length;C<A;C++){if(D[C]===B){return D.push(D.splice(C,1)[0])}}}function BN(C){if(BN.is(C,"function")){return BL?C():eve.on("DOMload",C)}if(BN.is(C,Bo)){return BN._engine.create[BK](BN,C.splice(0,3+BN.is(C[0],Bi))).add(C)}var A=Array.prototype.slice.call(arguments,0);if(BN.is(A[A.length-1],"function")){var B=A.pop();return BL?B.call(BN._engine.create[BK](BN,A)):eve.on("DOMload",function(){B.call(BN._engine.create[BK](BN,A))})}return BN._engine.create[BK](BN,arguments)}BN.version="2.0.1",BN.eve=eve;var BL,BM=/[, ]+/,BQ={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},BR=/\{(\d+)\}/g,BO="prototype",BP="hasOwnProperty",BF={doc:document,win:window},BG={was:Object.prototype[BP].call(BF.win,"Raphael"),is:BF.win.Raphael},BD=function(){this.ca=this.customAttributes={}},BE,BJ="appendChild",BK="apply",BH="concat",BI="createTouch" in BF.doc,Bx="",By=" ",Bv=String,Bw="split",BB="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[Bw](By),BC={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},Bz=Bv.prototype.toLowerCase,BA=Math,Br=BA.max,Bs=BA.min,Bp=BA.abs,Bk=BA.pow,Bh=BA.PI,Bi="number",Bn="string",Bo="array",Bl="toString",Bm="fill",Bb=Object.prototype.toString,Bc={},A9="push",Ba=BN._ISURL=/^url\(['"]?([^\)]+?)['"]?\)$/i,Bf=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,Bg={NaN:1,Infinity:1,"-Infinity":1},Bd=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,Be=BA.round,A3="setAttribute",A4=parseFloat,A1=parseInt,A2=Bv.prototype.toUpperCase,A7=BN._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0},A8=BN._availableAnimAttrs={blur:Bi,"clip-rect":"csv",cx:Bi,cy:Bi,fill:"colour","fill-opacity":Bi,"font-size":Bi,height:Bi,opacity:Bi,path:"path",r:Bi,rx:Bi,ry:Bi,stroke:"colour","stroke-opacity":Bi,"stroke-width":Bi,transform:"transform",width:Bi,x:Bi,y:Bi},A5=/\s*,\s*/,A6={hs:1,rg:1},AW=/,?([achlmqrstvxz]),?/gi,AX=/([achlmrqstvz])[\s,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?\s*,?\s*)+)/ig,AV=/([rstm])[\s,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?\s*,?\s*)+)/ig,Ad=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)\s*,?\s*/ig,AZ=BN._radial_gradient=/^r(?:\(([^,]+?)\s*,\s*([^\)]+?)\))?/,Cd={},Aa=function(B,A){return B.key-A.key},Av=function(B,A){return A4(B)-A4(A)},B7=function(){},Aq=function(A){return A},At=BN._rectPath=function(E,C,D,A,B){if(B){return[["M",E+B,C],["l",D-B*2,0],["a",B,B,0,0,1,B,B],["l",0,A-B*2],["a",B,B,0,0,1,-B,B],["l",B*2-D,0],["a",B,B,0,0,1,-B,-B],["l",0,B*2-A],["a",B,B,0,0,1,B,-B],["z"]]}return[["M",E,C],["l",D,0],["l",0,A],["l",-D,0],["z"]]},AP=function(D,B,C,A){A==null&&(A=C);return[["M",D,B],["m",0,-A],["a",C,A,0,1,1,0,2*A],["a",C,A,0,1,1,0,-2*A],["z"]]},Ak=BN._getPath={path:function(A){return A.attr("path")},circle:function(B){var A=B.attrs;return AP(A.cx,A.cy,A.r)},ellipse:function(B){var A=B.attrs;return AP(A.cx,A.cy,A.rx,A.ry)},rect:function(B){var A=B.attrs;return At(A.x,A.y,A.width,A.height,A.r)},image:function(B){var A=B.attrs;return At(A.x,A.y,A.width,A.height)},text:function(B){var A=B._getBBox();return At(A.x,A.y,A.width,A.height)}},AD=BN.mapPath=function(F,D){if(!D){return F}var E,I,A,G,H,B,C;F=B0(F);for(A=0,H=F.length;A<H;A++){C=F[A];for(G=1,B=C.length;G<B;G+=2){E=D.x(C[G],C[G+1]),I=D.y(C[G],C[G+1]),C[G]=E,C[G+1]=I}}return F};BN._g=BF,BN.type=BF.win.SVGAngle||BF.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML";if(BN.type=="VML"){var Bj=BF.doc.createElement("div"),B1;Bj.innerHTML='<v:shape adj="1"/>',B1=Bj.firstChild,B1.style.behavior="url(#default#VML)";if(!B1||typeof B1.adj!="object"){return BN.type=Bx}Bj=null}BN.svg=!(BN.vml=BN.type=="VML"),BN._Paper=BD,BN.fn=BE=BD.prototype=BN.prototype,BN._id=0,BN._oid=0,BN.is=function(B,A){A=Bz.call(A);if(A=="finite"){return !Bg[BP](+B)}if(A=="array"){return B instanceof Array}return A=="null"&&B===null||A==typeof B&&B!==null||A=="object"&&B===Object(B)||A=="array"&&Array.isArray&&Array.isArray(B)||Bb.call(B).slice(8,-1).toLowerCase()==A},BN.angle=function(D,E,H,A,F,G){if(F==null){var B=D-H,C=E-A;if(!B&&!C){return 0}return(180+BA.atan2(-C,-B)*180/Bh+360)%360}return BN.angle(D,E,F,G)-BN.angle(H,A,F,G)},BN.rad=function(A){return A%360*Bh/180},BN.deg=function(A){return A*180/Bh%360},BN.snapTo=function(C,D,A){A=BN.is(A,"finite")?A:10;if(BN.is(C,Bo)){var B=C.length;while(B--){if(Bp(C[B]-D)<=A){return C[B]}}}else{C=+C;var E=D%C;if(E<A){return D-E}if(E>C-A){return D-E+C}}return D};var AA=BN.createUUID=function(B,A){return function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(B,A).toUpperCase()}}(/[xy]/g,function(C){var A=BA.random()*16|0,B=C=="x"?A:A&3|8;return B.toString(16)});BN.setWindow=function(A){eve("setWindow",BN,BF.win,A),BF.win=A,BF.doc=BF.win.document,BN._engine.initWin&&BN._engine.initWin(BF.win)};var BS=function(E){if(BN.vml){var F=/^\s+|\s+$/g,B;try{var C=new ActiveXObject("htmlfile");C.write("<body>"),C.close(),B=C.body}catch(G){B=createPopup().document.body}var A=B.createTextRange();BS=B5(function(J){try{B.style.color=Bv(J).replace(F,Bx);var I=A.queryCommandValue("ForeColor");I=(I&255)<<16|I&65280|(I&16711680)>>>16;return"#"+("000000"+I.toString(16)).slice(-6)}catch(H){return"none"}})}else{var D=BF.doc.createElement("i");D.title="Raphaël Colour Picker",D.style.display="none",BF.doc.body.appendChild(D),BS=B5(function(H){D.style.color=H;return BF.doc.defaultView.getComputedStyle(D,Bx).getPropertyValue("color")})}return BS(E)},BX=function(){return"hsb("+[this.h,this.s,this.b]+")"},Af=function(){return"hsl("+[this.h,this.s,this.l]+")"},AY=function(){return this.hex},B9=function(C,D,A){D==null&&BN.is(C,"object")&&"r" in C&&"g" in C&&"b" in C&&(A=C.b,D=C.g,C=C.r);if(D==null&&BN.is(C,Bn)){var B=BN.getRGB(C);C=B.r,D=B.g,A=B.b}if(C>1||D>1||A>1){C/=255,D/=255,A/=255}return[C,D,A]},As=function(C,D,A,B){C*=255,D*=255,A*=255;var E={r:C,g:D,b:A,hex:BN.rgb(C,D,A),toString:AY};BN.is(B,"finite")&&(E.opacity=B);return E};BN.color=function(A){var B;BN.is(A,"object")&&"h" in A&&"s" in A&&"b" in A?(B=BN.hsb2rgb(A),A.r=B.r,A.g=B.g,A.b=B.b,A.hex=B.hex):BN.is(A,"object")&&"h" in A&&"s" in A&&"l" in A?(B=BN.hsl2rgb(A),A.r=B.r,A.g=B.g,A.b=B.b,A.hex=B.hex):(BN.is(A,"string")&&(A=BN.getRGB(A)),BN.is(A,"object")&&"r" in A&&"g" in A&&"b" in A?(B=BN.rgb2hsl(A),A.h=B.h,A.s=B.s,A.l=B.l,B=BN.rgb2hsb(A),A.v=B.b):(A={hex:"none"},A.r=A.g=A.b=A.h=A.s=A.v=A.l=-1)),A.toString=AY;return A},BN.hsb2rgb=function(F,D,E,I){this.is(F,"object")&&"h" in F&&"s" in F&&"b" in F&&(E=F.b,D=F.s,F=F.h,I=F.o),F*=360;var A,G,H,B,C;F=F%360/60,C=E*D,B=C*(1-Bp(F%2-1)),A=G=H=E-C,F=~~F,A+=[C,B,0,0,B,C][F],G+=[B,C,C,B,0,0][F],H+=[0,0,B,C,C,B][F];return As(A,G,H,I)},BN.hsl2rgb=function(F,D,E,I){this.is(F,"object")&&"h" in F&&"s" in F&&"l" in F&&(E=F.l,D=F.s,F=F.h);if(F>1||D>1||E>1){F/=360,D/=100,E/=100}F*=360;var A,G,H,B,C;F=F%360/60,C=2*D*(E<0.5?E:1-E),B=C*(1-Bp(F%2-1)),A=G=H=E-C/2,F=~~F,A+=[C,B,0,0,B,C][F],G+=[B,C,C,B,0,0][F],H+=[0,0,B,C,C,B][F];return As(A,G,H,I)},BN.rgb2hsb=function(F,D,E){E=B9(F,D,E),F=E[0],D=E[1],E=E[2];var B,C,G,A;G=Br(F,D,E),A=G-Bs(F,D,E),B=A==0?null:G==F?(D-E)/A:G==D?(E-F)/A+2:(F-D)/A+4,B=(B+360)%6*60/360,C=A==0?0:A/G;return{h:B,s:C,b:G,toString:BX}},BN.rgb2hsl=function(F,D,E){E=B9(F,D,E),F=E[0],D=E[1],E=E[2];var I,A,G,H,B,C;H=Br(F,D,E),B=Bs(F,D,E),C=H-B,I=C==0?null:H==F?(D-E)/C:H==D?(E-F)/C+2:(F-D)/C+4,I=(I+360)%6*60/360,G=(H+B)/2,A=C==0?0:G<0.5?C/(2*G):C/(2-2*G);return{h:I,s:A,l:G,toString:Af}},BN._path2string=function(){return this.join(",").replace(AW,"$1")};var AI=BN._preload=function(C,A){var B=BF.doc.createElement("img");B.style.cssText="position:absolute;left:-9999em;top:-9999em",B.onload=function(){A.call(this),this.onload=null,BF.doc.body.removeChild(this)},B.onerror=function(){BF.doc.body.removeChild(this)},BF.doc.body.appendChild(B),B.src=C};BN.getRGB=B5(function(F){if(!F||!!((F=Bv(F)).indexOf("-")+1)){return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:AL}}if(F=="none"){return{r:-1,g:-1,b:-1,hex:"none",toString:AL}}!A6[BP](F.toLowerCase().substring(0,2))&&F.charAt()!="#"&&(F=BS(F));var G,I,A,H,D,E,B,C=F.match(Bf);if(C){C[2]&&(H=A1(C[2].substring(5),16),A=A1(C[2].substring(3,5),16),I=A1(C[2].substring(1,3),16)),C[3]&&(H=A1((E=C[3].charAt(3))+E,16),A=A1((E=C[3].charAt(2))+E,16),I=A1((E=C[3].charAt(1))+E,16)),C[4]&&(B=C[4][Bw](A5),I=A4(B[0]),B[0].slice(-1)=="%"&&(I*=2.55),A=A4(B[1]),B[1].slice(-1)=="%"&&(A*=2.55),H=A4(B[2]),B[2].slice(-1)=="%"&&(H*=2.55),C[1].toLowerCase().slice(0,4)=="rgba"&&(D=A4(B[3])),B[3]&&B[3].slice(-1)=="%"&&(D/=100));if(C[5]){B=C[5][Bw](A5),I=A4(B[0]),B[0].slice(-1)=="%"&&(I*=2.55),A=A4(B[1]),B[1].slice(-1)=="%"&&(A*=2.55),H=A4(B[2]),B[2].slice(-1)=="%"&&(H*=2.55),(B[0].slice(-3)=="deg"||B[0].slice(-1)=="°")&&(I/=360),C[1].toLowerCase().slice(0,4)=="hsba"&&(D=A4(B[3])),B[3]&&B[3].slice(-1)=="%"&&(D/=100);return BN.hsb2rgb(I,A,H,D)}if(C[6]){B=C[6][Bw](A5),I=A4(B[0]),B[0].slice(-1)=="%"&&(I*=2.55),A=A4(B[1]),B[1].slice(-1)=="%"&&(A*=2.55),H=A4(B[2]),B[2].slice(-1)=="%"&&(H*=2.55),(B[0].slice(-3)=="deg"||B[0].slice(-1)=="°")&&(I/=360),C[1].toLowerCase().slice(0,4)=="hsla"&&(D=A4(B[3])),B[3]&&B[3].slice(-1)=="%"&&(D/=100);return BN.hsl2rgb(I,A,H,D)}C={r:I,g:A,b:H,toString:AL},C.hex="#"+(16777216|H|A<<8|I<<16).toString(16).slice(1),BN.is(D,"finite")&&(C.opacity=D);return C}return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:AL}},BN),BN.hsb=B5(function(B,C,A){return BN.hsb2rgb(B,C,A).hex}),BN.hsl=B5(function(B,C,A){return BN.hsl2rgb(B,C,A).hex}),BN.rgb=B5(function(C,A,B){return"#"+(16777216|B|A<<8|C<<16).toString(16).slice(1)}),BN.getColor=function(C){var A=this.getColor.start=this.getColor.start||{h:0,s:1,b:C||0.75},B=this.hsb2rgb(A.h,A.s,A.b);A.h+=0.075,A.h>1&&(A.h=0,A.s-=0.2,A.s<=0&&(this.getColor.start={h:0,s:1,b:A.b}));return B.hex},BN.getColor.reset=function(){delete this.start},BN.parsePathString=B5(function(B){if(!B){return null}var C={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},A=[];BN.is(B,Bo)&&BN.is(B[0],Bo)&&(A=Ar(B)),A.length||Bv(B).replace(AX,function(G,F,E){var H=[],D=F.toLowerCase();E.replace(Ad,function(J,I){I&&H.push(+I)}),D=="m"&&H.length>2&&(A.push([F][BH](H.splice(0,2))),D="l",F=F=="m"?"l":"L");if(D=="r"){A.push([F][BH](H))}else{while(H.length>=C[D]){A.push([F][BH](H.splice(0,C[D])));if(!C[D]){break}}}}),A.toString=BN._path2string;return A}),BN.parseTransformString=B5(function(B){if(!B){return null}var C={r:3,s:4,t:2,m:6},A=[];BN.is(B,Bo)&&BN.is(B[0],Bo)&&(A=Ar(B)),A.length||Bv(B).replace(AV,function(G,E,F){var D=[],H=Bz.call(E);F.replace(Ad,function(J,I){I&&D.push(+I)}),A.push([E][BH](D))}),A.toString=BN._path2string;return A}),BN.findDotsAtSegment=function(R,P,Q,V,W,T,U,J,K){var H=1-K,I=Bk(H,3),N=Bk(H,2),O=K*K,L=O*K,M=I*R+N*3*K*Q+H*3*K*K*W+L*U,C=I*P+N*3*K*V+H*3*K*K*T+L*J,D=R+2*K*(Q-R)+O*(W-2*Q+R),A=P+2*K*(V-P)+O*(T-2*V+P),B=Q+2*K*(W-Q)+O*(U-2*W+Q),F=V+2*K*(T-V)+O*(J-2*T+V),G=H*R+K*Q,E=H*P+K*V,Y=H*W+K*U,Z=H*T+K*J,X=90-BA.atan2(D-B,A-F)*180/Bh;(D>B||A<F)&&(X+=180);return{x:M,y:C,m:{x:D,y:A},n:{x:B,y:F},start:{x:G,y:E},end:{x:Y,y:Z},alpha:X}},BN._removedFactory=function(A){return function(){throw new Error("Raphaël: you are calling to method “"+A+"” of removed object")}};var Az=B5(function(H){if(!H){return{x:0,y:0,width:0,height:0}}H=B0(H);var F=0,G=0,K=[],A=[],I;for(var J=0,D=H.length;J<D;J++){I=H[J];if(I[0]=="M"){F=I[1],G=I[2],K.push(F),A.push(G)}else{var E=AK(F,G,I[1],I[2],I[3],I[4],I[5],I[6]);K=K[BH](E.min.x,E.max.x),A=A[BH](E.min.y,E.max.y),F=I[5],G=I[6]}}var B=Bs[BK](0,K),C=Bs[BK](0,A);return{x:B,y:C,width:Br[BK](0,K)-B,height:Br[BK](0,A)-C}},null,function(A){return{x:A.x,y:A.y,width:A.width,height:A.height}}),Ar=function(D){var E=[];if(!BN.is(D,Bo)||!BN.is(D&&D[0],Bo)){D=BN.parsePathString(D)}for(var B=0,C=D.length;B<C;B++){E[B]=[];for(var F=0,A=D[B].length;F<A;F++){E[B][F]=D[B][F]}}E.toString=BN._path2string;return E},BW=BN._pathToRelative=B5(function(L){if(!BN.is(L,Bo)||!BN.is(L&&L[0],Bo)){L=BN.parsePathString(L)}var M=[],P=0,A=0,N=0,O=0,F=0;L[0][0]=="M"&&(P=L[0][1],A=L[0][2],N=P,O=A,F++,M.push(["M",P,A]));for(var G=F,D=L.length;G<D;G++){var E=M[G]=[],J=L[G];if(J[0]!=Bz.call(J[0])){E[0]=Bz.call(J[0]);switch(E[0]){case"a":E[1]=J[1],E[2]=J[2],E[3]=J[3],E[4]=J[4],E[5]=J[5],E[6]=+(J[6]-P).toFixed(3),E[7]=+(J[7]-A).toFixed(3);break;case"v":E[1]=+(J[1]-A).toFixed(3);break;case"m":N=J[1],O=J[2];default:for(var K=1,H=J.length;K<H;K++){E[K]=+(J[K]-(K%2?P:A)).toFixed(3)}}}else{E=M[G]=[],J[0]=="m"&&(N=J[1]+P,O=J[2]+A);for(var I=0,B=J.length;I<B;I++){M[G][I]=J[I]}}var C=M[G].length;switch(M[G][0]){case"z":P=N,A=O;break;case"h":P+=+M[G][C-1];break;case"v":A+=+M[G][C-1];break;default:P+=+M[G][C-2],A+=+M[G][C-1]}}M.toString=BN._path2string;return M},0,Ar),Ap=BN._pathToAbsolute=B5(function(L){if(!BN.is(L,Bo)||!BN.is(L&&L[0],Bo)){L=BN.parsePathString(L)}if(!L||!L.length){return[["M",0,0]]}var M=[],P=0,A=0,N=0,O=0,G=0;L[0][0]=="M"&&(P=+L[0][1],A=+L[0][2],N=P,O=A,G++,M[0]=["M",P,A]);for(var H,E,F=G,J=L.length;F<J;F++){M.push(H=[]),E=L[F];if(E[0]!=A2.call(E[0])){H[0]=A2.call(E[0]);switch(H[0]){case"A":H[1]=E[1],H[2]=E[2],H[3]=E[3],H[4]=E[4],H[5]=E[5],H[6]=+(E[6]+P),H[7]=+(E[7]+A);break;case"V":H[1]=+E[1]+A;break;case"H":H[1]=+E[1]+P;break;case"R":var K=[P,A][BH](E.slice(1));for(var I=2,B=K.length;I<B;I++){K[I]=+K[I]+P,K[++I]=+K[I]+A}M.pop(),M=M[BH](Bt(K));break;case"M":N=+E[1]+P,O=+E[2]+A;default:for(I=1,B=E.length;I<B;I++){H[I]=+E[I]+(I%2?P:A)}}}else{if(E[0]=="R"){K=[P,A][BH](E.slice(1)),M.pop(),M=M[BH](Bt(K)),H=["R"][BH](E.slice(-2))}else{for(var C=0,D=E.length;C<D;C++){H[C]=E[C]}}}switch(H[0]){case"Z":P=N,A=O;break;case"H":P=H[1];break;case"V":A=H[1];break;case"M":N=H[H.length-2],O=H[H.length-1];default:P=H[H.length-2],A=H[H.length-1]}}M.toString=BN._path2string;return M},null,Ar),AS=function(D,B,C,A){return[D,B,C,A,C,A]},B4=function(E,C,D,H,A,F){var G=1/3,B=2/3;return[G*E+B*D,G*C+B*H,G*A+B*D,G*F+B*H,A,F]},Cc=function(CN,CL,CM,CQ,B,CO,CP,CG,CH,CE){var CF=Bh*120/180,CJ=Bh/180*(+B||0),CK=[],CI,Cz=B5(function(F,D,E){var A=F*BA.cos(E)-D*BA.sin(E),C=F*BA.sin(E)+D*BA.cos(E);return{x:A,y:C}});if(!CE){CI=Cz(CN,CL,-CJ),CN=CI.x,CL=CI.y,CI=Cz(CG,CH,-CJ),CG=CI.x,CH=CI.y;var CA=BA.cos(Bh/180*B),Cy=BA.sin(Bh/180*B),CC=(CN-CG)/2,CD=(CL-CH)/2,CB=CC*CC/(CM*CM)+CD*CD/(CQ*CQ);CB>1&&(CB=BA.sqrt(CB),CM=CB*CM,CQ=CB*CQ);var Cw=CM*CM,Cx=CQ*CQ,Cr=(CO==CP?-1:1)*BA.sqrt(Bp((Cw*Cx-Cw*CD*CD-Cx*CC*CC)/(Cw*CD*CD+Cx*CC*CC))),Cq=Cr*CM*CD/CQ+(CN+CG)/2,Cu=Cr*-CQ*CC/CM+(CL+CH)/2,Cv=BA.asin(((CL-Cu)/CQ).toFixed(9)),Cs=BA.asin(((CH-Cu)/CQ).toFixed(9));Cv=CN<Cq?Bh-Cv:Cv,Cs=CG<Cq?Bh-Cs:Cs,Cv<0&&(Cv=Bh*2+Cv),Cs<0&&(Cs=Bh*2+Cs),CP&&Cv>Cs&&(Cv=Cv-Bh*2),!CP&&Cs>Cv&&(Cs=Cs-Bh*2)}else{Cv=CE[0],Cs=CE[1],Cq=CE[2],Cu=CE[3]}var Ct=Cs-Cv;if(Bp(Ct)>CF){var Ck=Cs,Cl=CG,Ci=CH;Cs=Cv+CF*(CP&&Cs>Cv?1:-1),CG=Cq+CM*BA.cos(Cs),CH=Cu+CQ*BA.sin(Cs),CK=Cc(CG,CH,CM,CQ,B,0,CP,Cl,Ci,[Cs,Ck,Cq,Cu])}Ct=Cs-Cv;var Cj=BA.cos(Cv),Co=BA.sin(Cv),Cp=BA.cos(Cs),Cm=BA.sin(Cs),Cn=BA.tan(Ct/4),s=4/3*CM*Cn,w=4/3*CQ*Cn,Z=[CN,CL],n=[CN+s*Co,CL-w*Cj],Cg=[CG+s*Cm,CH-w*Cp],Ch=[CG,CH];n[0]=2*Z[0]-n[0],n[1]=2*Z[1]-n[1];if(CE){return[n,Cg,Ch][BH](CK)}CK=[n,Cg,Ch][BH](CK).join()[Bw](",");var z=[];for(var Cf=0,Y=CK.length;Cf<Y;Cf++){z[Cf]=Cf%2?Cz(CK[Cf-1],CK[Cf],CJ).y:Cz(CK[Cf],CK[Cf+1],CJ).x}return z},Cb=function(G,E,F,J,A,H,I,C,D){var B=1-D;return{x:Bk(B,3)*G+Bk(B,2)*3*D*F+B*3*D*D*A+Bk(D,3)*I,y:Bk(B,3)*E+Bk(B,2)*3*D*J+B*3*D*D*H+Bk(D,3)*C}},AK=B5(function(M,K,L,P,A,N,O,F){var G=A-2*L+M-(O-2*A+L),D=2*(L-M)-2*(A-L),E=M-L,J=(-D+BA.sqrt(D*D-4*G*E))/2/G,H=(-D-BA.sqrt(D*D-4*G*E))/2/G,I=[K,F],B=[M,O],C;Bp(J)>"1e12"&&(J=0.5),Bp(H)>"1e12"&&(H=0.5),J>0&&J<1&&(C=Cb(M,K,L,P,A,N,O,F,J),B.push(C.x),I.push(C.y)),H>0&&H<1&&(C=Cb(M,K,L,P,A,N,O,F,H),B.push(C.x),I.push(C.y)),G=N-2*P+K-(F-2*N+P),D=2*(P-K)-2*(N-P),E=K-P,J=(-D+BA.sqrt(D*D-4*G*E))/2/G,H=(-D-BA.sqrt(D*D-4*G*E))/2/G,Bp(J)>"1e12"&&(J=0.5),Bp(H)>"1e12"&&(H=0.5),J>0&&J<1&&(C=Cb(M,K,L,P,A,N,O,F,J),B.push(C.x),I.push(C.y)),H>0&&H<1&&(C=Cb(M,K,L,P,A,N,O,F,H),B.push(C.x),I.push(C.y));return{min:{x:Bs[BK](0,B),y:Bs[BK](0,I)},max:{x:Br[BK](0,B),y:Br[BK](0,I)}}}),B0=BN._path2curve=B5(function(L,J){var K=Ap(L),O=J&&Ap(J),A={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},M={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},N=function(T,Q){var R,P;if(!T){return["C",Q.x,Q.y,Q.x,Q.y,Q.x,Q.y]}!(T[0] in {T:1,Q:1})&&(Q.qx=Q.qy=null);switch(T[0]){case"M":Q.X=T[1],Q.Y=T[2];break;case"A":T=["C"][BH](Cc[BK](0,[Q.x,Q.y][BH](T.slice(1))));break;case"S":R=Q.x+(Q.x-(Q.bx||Q.x)),P=Q.y+(Q.y-(Q.by||Q.y)),T=["C",R,P][BH](T.slice(1));break;case"T":Q.qx=Q.x+(Q.x-(Q.qx||Q.x)),Q.qy=Q.y+(Q.y-(Q.qy||Q.y)),T=["C"][BH](B4(Q.x,Q.y,Q.qx,Q.qy,T[1],T[2]));break;case"Q":Q.qx=T[1],Q.qy=T[2],T=["C"][BH](B4(Q.x,Q.y,T[1],T[2],T[3],T[4]));break;case"L":T=["C"][BH](AS(Q.x,Q.y,T[1],T[2]));break;case"H":T=["C"][BH](AS(Q.x,Q.y,T[1],Q.y));break;case"V":T=["C"][BH](AS(Q.x,Q.y,Q.x,T[1]));break;case"Z":T=["C"][BH](AS(Q.x,Q.y,Q.X,Q.Y))}return T},F=function(R,Q){if(R[Q].length>7){R[Q].shift();var P=R[Q];while(P.length){R.splice(Q++,0,["C"][BH](P.splice(0,6)))}R.splice(Q,1),E=Br(K.length,O&&O.length||0)}},G=function(T,R,Q,U,P){T&&R&&T[P][0]=="M"&&R[P][0]!="M"&&(R.splice(P,0,["M",U.x,U.y]),Q.bx=0,Q.by=0,Q.x=T[P][1],Q.y=T[P][2],E=Br(K.length,O&&O.length||0))};for(var D=0,E=Br(K.length,O&&O.length||0);D<E;D++){K[D]=N(K[D],A),F(K,D),O&&(O[D]=N(O[D],M)),O&&F(O,D),G(K,O,A,M,D),G(O,K,M,A,D);var I=K[D],H=O&&O[D],B=I.length,C=O&&H.length;A.x=I[B-2],A.y=I[B-1],A.bx=A4(I[B-4])||A.x,A.by=A4(I[B-3])||A.y,M.bx=O&&(A4(H[C-4])||M.x),M.by=O&&(A4(H[C-3])||M.y),M.x=O&&H[C-2],M.y=O&&H[C-1]}return O?[K,O]:K},null,Ar),AT=BN._parseDots=B5(function(F){var G=[];for(var J=0,A=F.length;J<A;J++){var H={},I=F[J].match(/^([^:]*):?([\d\.]*)/);H.color=BN.getRGB(I[1]);if(H.color.error){return null}H.color=H.color.hex,I[2]&&(H.offset=I[2]+"%"),G.push(H)}for(J=1,A=G.length-1;J<A;J++){if(!G[J].offset){var D=A4(G[J-1].offset||0),E=0;for(var B=J+1;B<A;B++){if(G[B].offset){E=G[B].offset;break}}E||(E=100,B=A),E=A4(E);var C=(E-D)/(B-J+1);for(;J<B;J++){D+=C,G[J].offset=D+"%"}}}return G}),BU=BN._tear=function(B,A){B==A.top&&(A.top=B.prev),B==A.bottom&&(A.bottom=B.next),B.next&&(B.next.prev=B.prev),B.prev&&(B.prev.next=B.next)},BT=BN._tofront=function(B,A){A.top!==B&&(BU(B,A),B.next=null,B.prev=A.top,A.top.next=B,A.top=B)},Ab=BN._toback=function(B,A){A.bottom!==B&&(BU(B,A),B.next=A.bottom,B.prev=null,A.bottom.prev=B,A.bottom=B)},AU=BN._insertafter=function(C,A,B){BU(C,B),A==B.top&&(B.top=C),A.next&&(A.next.prev=C),C.next=A.next,C.prev=A,A.next=C},Ae=BN._insertbefore=function(C,A,B){BU(C,B),A==B.bottom&&(B.bottom=C),A.prev&&(A.prev.next=C),C.prev=A.prev,A.prev=C,C.next=A},Ce=BN._extractTransform=function(O,P){if(P==null){return O._.transform}P=Bv(P).replace(/\.{3}|\u2026/g,O._.transform||Bx);var T=BN.parseTransformString(P),U=0,Q=0,R=0,I=1,J=1,G=O._,H=new AC;G.transform=T||[];if(T){for(var M=0,N=T.length;M<N;M++){var K=T[M],L=K.length,B=Bv(K[0]).toLowerCase(),A=K[0]!=B,E=A?H.invert():0,F,C,D,V,W;B=="t"&&L==3?A?(F=E.x(0,0),C=E.y(0,0),D=E.x(K[1],K[2]),V=E.y(K[1],K[2]),H.translate(D-F,V-C)):H.translate(K[1],K[2]):B=="r"?L==2?(W=W||O.getBBox(1),H.rotate(K[1],W.x+W.width/2,W.y+W.height/2),U+=K[1]):L==4&&(A?(D=E.x(K[2],K[3]),V=E.y(K[2],K[3]),H.rotate(K[1],D,V)):H.rotate(K[1],K[2],K[3]),U+=K[1]):B=="s"?L==2||L==3?(W=W||O.getBBox(1),H.scale(K[1],K[L-1],W.x+W.width/2,W.y+W.height/2),I*=K[1],J*=K[L-1]):L==5&&(A?(D=E.x(K[3],K[4]),V=E.y(K[3],K[4]),H.scale(K[1],K[2],D,V)):H.scale(K[1],K[2],K[3],K[4]),I*=K[1],J*=K[2]):B=="m"&&L==7&&H.add(K[1],K[2],K[3],K[4],K[5],K[6]),G.dirtyT=1,O.matrix=H}}O.matrix=H,G.sx=I,G.sy=J,G.deg=U,G.dx=Q=H.e,G.dy=R=H.f,I==1&&J==1&&!U&&G.bbox?(G.bbox.x+=+Q,G.bbox.y+=+R):G.dirtyT=1},AN=function(B){var A=B[0];switch(A.toLowerCase()){case"t":return[A,0,0];case"m":return[A,1,0,0,1,0,0];case"r":return B.length==4?[A,0,B[2],B[3]]:[A,0];case"s":return B.length==5?[A,1,1,B[3],B[4]]:B.length==3?[A,1,1]:[A,1]}},Ai=BN._equaliseTransform=function(F,G){G=Bv(G).replace(/\.{3}|\u2026/g,F),F=BN.parseTransformString(F)||[],G=BN.parseTransformString(G)||[];var J=Br(F.length,G.length),A=[],H=[],I=0,D,E,B,C;for(;I<J;I++){B=F[I]||AN(G[I]),C=G[I]||AN(B);if(B[0]!=C[0]||B[0].toLowerCase()=="r"&&(B[2]!=C[2]||B[3]!=C[3])||B[0].toLowerCase()=="s"&&(B[3]!=C[3]||B[4]!=C[4])){return}A[I]=[],H[I]=[];for(D=0,E=Br(B.length,C.length);D<E;D++){D in B&&(A[I][D]=B[D]),D in C&&(H[I][D]=C[D])}}return{from:A,to:H}};BN._getContainer=function(C,D,A,B){var E;E=B==null&&!BN.is(C,"object")?BF.doc.getElementById(C):C;if(E!=null){if(E.tagName){return D==null?{container:E,width:E.style.pixelWidth||E.offsetWidth,height:E.style.pixelHeight||E.offsetHeight}:{container:E,width:D,height:A}}return{container:1,x:C,y:D,width:A,height:B}}},BN.pathToRelative=BW,BN._engine={},BN.path2curve=B0,BN.matrix=function(E,C,D,A,B,F){return new AC(E,C,D,A,B,F)},function(B){function A(E){var D=BA.sqrt(C(E));E[0]&&(E[0]/=D),E[1]&&(E[1]/=D)}function C(D){return D[0]*D[0]+D[1]*D[1]}B.add=function(M,K,L,P,D,N){var O=[[],[],[]],G=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],H=[[M,L,D],[K,P,N],[0,0,1]],E,F,I,J;M&&M instanceof AC&&(H=[[M.a,M.c,M.e],[M.b,M.d,M.f],[0,0,1]]);for(E=0;E<3;E++){for(F=0;F<3;F++){J=0;for(I=0;I<3;I++){J+=G[E][I]*H[I][F]}O[E][F]=J}}this.a=O[0][0],this.b=O[1][0],this.c=O[0][1],this.d=O[1][1],this.e=O[0][2],this.f=O[1][2]},B.invert=function(){var E=this,D=E.a*E.d-E.b*E.c;return new AC(E.d/D,-E.b/D,-E.c/D,E.a/D,(E.c*E.f-E.d*E.e)/D,(E.b*E.e-E.a*E.f)/D)},B.clone=function(){return new AC(this.a,this.b,this.c,this.d,this.e,this.f)},B.translate=function(E,D){this.add(1,0,0,1,E,D)},B.scale=function(G,E,F,D){E==null&&(E=G),(F||D)&&this.add(1,0,0,1,F,D),this.add(G,0,0,E,0,0),(F||D)&&this.add(1,0,0,1,-F,-D)},B.rotate=function(F,G,D){F=BN.rad(F),G=G||0,D=D||0;var E=+BA.cos(F).toFixed(9),H=+BA.sin(F).toFixed(9);this.add(E,H,-H,E,G,D),this.add(1,0,0,1,-G,-D)},B.x=function(E,D){return E*this.a+D*this.c+this.e},B.y=function(E,D){return E*this.b+D*this.d+this.f},B.get=function(D){return +this[Bv.fromCharCode(97+D)].toFixed(4)},B.toString=function(){return BN.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()},B.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"},B.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},B.split=function(){var F={};F.dx=this.e,F.dy=this.f;var E=[[this.a,this.c],[this.b,this.d]];F.scalex=BA.sqrt(C(E[0])),A(E[0]),F.shear=E[0][0]*E[1][0]+E[0][1]*E[1][1],E[1]=[E[1][0]-E[0][0]*F.shear,E[1][1]-E[0][1]*F.shear],F.scaley=BA.sqrt(C(E[1])),A(E[1]),F.shear/=F.scaley;var G=-E[0][1],D=E[1][1];D<0?(F.rotate=BN.deg(BA.acos(D)),G<0&&(F.rotate=360-F.rotate)):F.rotate=BN.deg(BA.asin(G)),F.isSimple=!+F.shear.toFixed(9)&&(F.scalex.toFixed(9)==F.scaley.toFixed(9)||!F.rotate),F.isSuperSimple=!+F.shear.toFixed(9)&&F.scalex.toFixed(9)==F.scaley.toFixed(9)&&!F.rotate,F.noRotation=!+F.shear.toFixed(9)&&!F.rotate;return F},B.toTransformString=function(E){var D=E||this[Bw]();if(D.isSimple){D.scalex=+D.scalex.toFixed(4),D.scaley=+D.scaley.toFixed(4),D.rotate=+D.rotate.toFixed(4);return(D.dx&&D.dy?"t"+[D.dx,D.dy]:Bx)+(D.scalex!=1||D.scaley!=1?"s"+[D.scalex,D.scaley,0,0]:Bx)+(D.rotate?"r"+[D.rotate,0,0]:Bx)}return"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}(AC.prototype);var AJ=navigator.userAgent.match(/Version\/(.*?)\s/)||navigator.userAgent.match(/Chrome\/(\d+)/);navigator.vendor=="Apple Computer, Inc."&&(AJ&&AJ[1]<4||navigator.platform.slice(0,2)=="iP")||navigator.vendor=="Google Inc."&&AJ&&AJ[1]<8?BE.safari=function(){var A=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});setTimeout(function(){A.remove()})}:BE.safari=B7;var AR=function(){this.returnValue=!1},Ay=function(){return this.originalEvent.preventDefault()},A0=function(){this.cancelBubble=!0},BV=function(){return this.originalEvent.stopPropagation()},BY=function(){if(BF.doc.addEventListener){return function(E,C,D,A){var B=BI&&BC[C]?BC[C]:C,F=function(G){var N=BF.doc.documentElement.scrollTop||BF.doc.body.scrollTop,J=BF.doc.documentElement.scrollLeft||BF.doc.body.scrollLeft,H=G.clientX+J,I=G.clientY+N;if(BI&&BC[BP](C)){for(var L=0,M=G.targetTouches&&G.targetTouches.length;L<M;L++){if(G.targetTouches[L].target==E){var K=G;G=G.targetTouches[L],G.originalEvent=K,G.preventDefault=Ay,G.stopPropagation=BV;break}}}return D.call(A,G,H,I)};E.addEventListener(B,F,!1);return function(){E.removeEventListener(B,F,!1);return !0}}}if(BF.doc.attachEvent){return function(E,C,D,A){var B=function(J){J=J||BF.win.event;var I=BF.doc.documentElement.scrollTop||BF.doc.body.scrollTop,H=BF.doc.documentElement.scrollLeft||BF.doc.body.scrollLeft,K=J.clientX+H,G=J.clientY+I;J.preventDefault=J.preventDefault||AR,J.stopPropagation=J.stopPropagation||A0;return D.call(A,J,K,G)};E.attachEvent("on"+C,B);var F=function(){E.detachEvent("on"+C,B);return !0};return F}}}(),Am=[],AF=function(K){var I=K.clientX,J=K.clientY,N=BF.doc.documentElement.scrollTop||BF.doc.body.scrollTop,A=BF.doc.documentElement.scrollLeft||BF.doc.body.scrollLeft,L,M=Am.length;while(M--){L=Am[M];if(BI){var E=K.touches.length,C;while(E--){C=K.touches[E];if(C.identifier==L.el._drag.id){I=C.clientX,J=C.clientY,(K.originalEvent?K.originalEvent:K).preventDefault();break}}}else{K.preventDefault()}var D=L.el.node,G,H=D.nextSibling,F=D.parentNode,B=D.style.display;BF.win.opera&&F.removeChild(D),D.style.display="none",G=L.el.paper.getElementByPoint(I,J),D.style.display=B,BF.win.opera&&(H?F.insertBefore(D,H):F.appendChild(D)),G&&eve("drag.over."+L.el.id,L.el,G),I+=A,J+=N,eve("drag.move."+L.el.id,L.move_scope||L.el,I-L.el._drag.x,J-L.el._drag.y,I,J,K)}},Ao=function(B){BN.unmousemove(AF).unmouseup(Ao);var C=Am.length,A;while(C--){A=Am[C],A.el._drag={},eve("drag.end."+A.el.id,A.end_scope||A.start_scope||A.move_scope||A.el,B)}Am=[]},B2=BN.el={};for(var AM=BB.length;AM--;){(function(A){BN[A]=B2[A]=function(C,B){BN.is(C,"function")&&(this.events=this.events||[],this.events.push({name:A,f:C,unbind:BY(this.shape||this.node||BF.doc,A,C,B||this)}));return this},BN["un"+A]=B2["un"+A]=function(D){var C=this.events,B=C.length;while(B--){if(C[B].name==A&&C[B].f==D){C[B].unbind(),C.splice(B,1),!C.length&&delete this.events;return this}}return this}})(BB[AM])}B2.data=function(C,D){var A=Cd[this.id]=Cd[this.id]||{};if(arguments.length==1){if(BN.is(C,"object")){for(var B in C){C[BP](B)&&this.data(B,C[B])}return this}eve("data.get."+this.id,this,A[C],C);return A[C]}A[C]=D,eve("data.set."+this.id,this,D,C);return this},B2.removeData=function(A){A==null?Cd[this.id]={}:Cd[this.id]&&delete Cd[this.id][A];return this},B2.hover=function(D,B,C,A){return this.mouseover(D,C).mouseout(B,A||C)},B2.unhover=function(B,A){return this.unmouseover(B).unmouseout(A)};var Ax=[];B2.drag=function(E,F,B,C,G,A){function D(H){(H.originalEvent||H).preventDefault();var I=BF.doc.documentElement.scrollTop||BF.doc.body.scrollTop,J=BF.doc.documentElement.scrollLeft||BF.doc.body.scrollLeft;this._drag.x=H.clientX+J,this._drag.y=H.clientY+I,this._drag.id=H.identifier,!Am.length&&BN.mousemove(AF).mouseup(Ao),Am.push({el:this,move_scope:C,start_scope:G,end_scope:A}),F&&eve.on("drag.start."+this.id,F),E&&eve.on("drag.move."+this.id,E),B&&eve.on("drag.end."+this.id,B),eve("drag.start."+this.id,G||C||this,H.clientX+J,H.clientY+I,H)}this._drag={},Ax.push({el:this,start:D}),this.mousedown(D);return this},B2.onDragOver=function(A){A?eve.on("drag.over."+this.id,A):eve.unbind("drag.over."+this.id)},B2.undrag=function(){var A=Ax.length;while(A--){Ax[A].el==this&&(this.unmousedown(Ax[A].start),Ax.splice(A,1),eve.unbind("drag.*."+this.id))}!Ax.length&&BN.unmousemove(AF).unmouseup(Ao)},BE.circle=function(C,D,A){var B=BN._engine.circle(this,C||0,D||0,A||0);this.__set__&&this.__set__.push(B);return B},BE.rect=function(D,E,B,C,F){var A=BN._engine.rect(this,D||0,E||0,B||0,C||0,F||0);this.__set__&&this.__set__.push(A);return A},BE.ellipse=function(C,D,A,B){var E=BN._engine.ellipse(this,C||0,D||0,A||0,B||0);this.__set__&&this.__set__.push(E);return E},BE.path=function(A){A&&!BN.is(A,Bn)&&!BN.is(A[0],Bo)&&(A+=Bx);var B=BN._engine.path(BN.format[BK](BN,arguments),this);this.__set__&&this.__set__.push(B);return B},BE.image=function(D,E,B,C,F){var A=BN._engine.image(this,D||"about:blank",E||0,B||0,C||0,F||0);this.__set__&&this.__set__.push(A);return A},BE.text=function(C,D,A){var B=BN._engine.text(this,C||0,D||0,Bv(A));this.__set__&&this.__set__.push(B);return B},BE.set=function(A){!BN.is(A,"array")&&(A=Array.prototype.splice.call(arguments,0,arguments.length));var B=new BZ(A);this.__set__&&this.__set__.push(B);return B},BE.setStart=function(A){this.__set__=A||this.set()},BE.setFinish=function(B){var A=this.__set__;delete this.__set__;return A},BE.setSize=function(A,B){return BN._engine.setSize.call(this,A,B)},BE.setViewBox=function(C,D,A,B,E){return BN._engine.setViewBox.call(this,C,D,A,B,E)},BE.top=BE.bottom=null,BE.raphael=BN;var Bu=function(F){var D=F.getBoundingClientRect(),E=F.ownerDocument,I=E.body,A=E.documentElement,G=A.clientTop||I.clientTop||0,H=A.clientLeft||I.clientLeft||0,C=D.top+(BF.win.pageYOffset||A.scrollTop||I.scrollTop)-G,B=D.left+(BF.win.pageXOffset||A.scrollLeft||I.scrollLeft)-H;return{y:C,x:B}};BE.getElementByPoint=function(E,C){var D=this,H=D.canvas,A=BF.doc.elementFromPoint(E,C);if(BF.win.opera&&A.tagName=="svg"){var F=Bu(H),G=H.createSVGRect();G.x=E-F.x,G.y=C-F.y,G.width=G.height=1;var B=H.getIntersectionList(G,null);B.length&&(A=B[B.length-1])}if(!A){return null}while(A.parentNode&&A!=H.parentNode&&!A.raphael){A=A.parentNode}A==D.canvas.parentNode&&(A=H),A=A&&A.raphael?D.getById(A.raphaelid):null;return A},BE.getById=function(B){var A=this.bottom;while(A){if(A.id==B){return A}A=A.next}return null},BE.forEach=function(C,A){var B=this.bottom;while(B){if(C.call(A,B)===!1){return this}B=B.next}return this},B2.getBBox=function(B){if(this.removed){return{}}var A=this._;if(B){if(A.dirty||!A.bboxwt){this.realPath=Ak[this.type](this),A.bboxwt=Az(this.realPath),A.bboxwt.toString=B8,A.dirty=0}return A.bboxwt}if(A.dirty||A.dirtyT||!A.bbox){if(A.dirty||!this.realPath){A.bboxwt=0,this.realPath=Ak[this.type](this)}A.bbox=Az(AD(this.realPath,this.matrix)),A.bbox.toString=B8,A.dirty=A.dirtyT=0}return A.bbox},B2.clone=function(){if(this.removed){return null}var A=this.paper[this.type]().attr(this.attr());this.__set__&&this.__set__.push(A);return A},B2.glow=function(F){if(this.type=="text"){return null}F=F||{};var D={width:(F.width||10)+(+this.attr("stroke-width")||1),fill:F.fill||!1,opacity:F.opacity||0.5,offsetx:F.offsetx||0,offsety:F.offsety||0,color:F.color||"#000"},E=D.width/2,B=this.paper,C=B.set(),G=this.realPath||Ak[this.type](this);G=this.matrix?AD(G,this.matrix):G;for(var A=1;A<E+1;A++){C.push(B.path(G).attr({stroke:D.color,fill:D.fill?D.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(D.width/E*A).toFixed(3),opacity:+(D.opacity/E).toFixed(3)}))}return C.insertBefore(this).translate(D.offsetx,D.offsety)};var Ac={},Au=function(L,M,P,Q,N,O,F,G,D){var E=0,J=100,K=[L,M,P,Q,N,O,F,G].join(),H=Ac[K],I,B;!H&&(Ac[K]=H={data:[]}),H.timer&&clearTimeout(H.timer),H.timer=setTimeout(function(){delete Ac[K]},2000);if(D!=null&&!H.precision){var C=Au(L,M,P,Q,N,O,F,G);H.precision=~~C*10,H.data=[]}J=H.precision||J;for(var A=0;A<J+1;A++){H.data[A*J]?B=H.data[A*J]:(B=BN.findDotsAtSegment(L,M,P,Q,N,O,F,G,A/J),H.data[A*J]=B),A&&(E+=Bk(Bk(I.x-B.x,2)+Bk(I.y-B.y,2),0.5));if(D!=null&&E>=D){return B}I=B}if(D==null){return E}},AQ=function(A,B){return function(O,C,M){O=B0(O);var N,G,H,E,F="",K={},L,I=0;for(var J=0,D=O.length;J<D;J++){H=O[J];if(H[0]=="M"){N=+H[1],G=+H[2]}else{E=Au(N,G,H[1],H[2],H[3],H[4],H[5],H[6]);if(I+E>C){if(B&&!K.start){L=Au(N,G,H[1],H[2],H[3],H[4],H[5],H[6],C-I),F+=["C"+L.start.x,L.start.y,L.m.x,L.m.y,L.x,L.y];if(M){return F}K.start=F,F=["M"+L.x,L.y+"C"+L.n.x,L.n.y,L.end.x,L.end.y,H[5],H[6]].join(),I+=E,N=+H[5],G=+H[6];continue}if(!A&&!B){L=Au(N,G,H[1],H[2],H[3],H[4],H[5],H[6],C-I);return{x:L.x,y:L.y,alpha:L.alpha}}}I+=E,N=+H[5],G=+H[6]}F+=H.shift()+H}K.end=F,L=A?I:B?K:BN.findDotsAtSegment(N,G,H[0],H[1],H[2],H[3],H[4],H[5],1),L.alpha&&(L={x:L.x,y:L.y,alpha:L.alpha});return L}},Al=AQ(1),AE=AQ(),An=AQ(0,1);BN.getTotalLength=Al,BN.getPointAtLength=AE,BN.getSubpath=function(D,B,C){if(this.getTotalLength(D)-C<1e-06){return An(D,B).end}var A=An(D,C,1);return B?An(A,B).end:A},B2.getTotalLength=function(){if(this.type=="path"){if(this.node.getTotalLength){return this.node.getTotalLength()}return Al(this.attrs.path)}},B2.getPointAtLength=function(A){if(this.type=="path"){return AE(this.attrs.path,A)}},B2.getSubpath=function(A,B){if(this.type=="path"){return BN.getSubpath(this.attrs.path,A,B)}};var AG=BN.easing_formulas={linear:function(A){return A},"<":function(A){return Bk(A,1.7)},">":function(A){return Bk(A,0.48)},"<>":function(E){var C=0.48-E/1.04,D=BA.sqrt(0.1734+C*C),H=D-C,A=Bk(Bp(H),1/3)*(H<0?-1:1),F=-D-C,G=Bk(Bp(F),1/3)*(F<0?-1:1),B=A+G+0.5;return(1-B)*3*B*B+B*B*B},backIn:function(B){var A=1.70158;return B*B*((A+1)*B-A)},backOut:function(B){B=B-1;var A=1.70158;return B*B*((A+1)*B+A)+1},elastic:function(A){if(A==!!A){return A}return Bk(2,-10*A)*BA.sin((A-0.075)*2*Bh/0.3)+1},bounce:function(D){var B=7.5625,C=2.75,A;D<1/C?A=B*D*D:D<2/C?(D-=1.5/C,A=B*D*D+0.75):D<2.5/C?(D-=2.25/C,A=B*D*D+0.9375):(D-=2.625/C,A=B*D*D+0.984375);return A}};AG.easeIn=AG["ease-in"]=AG["<"],AG.easeOut=AG["ease-out"]=AG[">"],AG.easeInOut=AG["ease-in-out"]=AG["<>"],AG["back-in"]=AG.backIn,AG["back-out"]=AG.backOut;var AB=[],AH=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(A){setTimeout(A,16)},B3=function(){var P=+(new Date),Q=0;for(;Q<AB.length;Q++){var T=AB[Q];if(T.el.removed||T.paused){continue}var U=P-T.start,R=T.ms,K=T.easing,L=T.from,I=T.diff,J=T.to,N=T.t,O=T.el,M={},D,B={},C;T.initstatus?(U=(T.initstatus*T.anim.top-T.prev)/(T.percent-T.prev)*R,T.status=T.initstatus,delete T.initstatus,T.stop&&AB.splice(Q--,1)):T.status=(T.prev+(T.percent-T.prev)*(U/R))/T.anim.top;if(U<0){continue}if(U<R){var G=K(U/R);for(var H in L){if(L[BP](H)){switch(A8[H]){case Bi:D=+L[H]+G*R*I[H];break;case"colour":D="rgb("+[Ag(Be(L[H].r+G*R*I[H].r)),Ag(Be(L[H].g+G*R*I[H].g)),Ag(Be(L[H].b+G*R*I[H].b))].join(",")+")";break;case"path":D=[];for(var E=0,F=L[H].length;E<F;E++){D[E]=[L[H][E][0]];for(var X=1,Y=L[H][E].length;X<Y;X++){D[E][X]=+L[H][E][X]+G*R*I[H][E][X]}D[E]=D[E].join(By)}D=D.join(By);break;case"transform":if(I[H].real){D=[];for(E=0,F=L[H].length;E<F;E++){D[E]=[L[H][E][0]];for(X=1,Y=L[H][E].length;X<Y;X++){D[E][X]=L[H][E][X]+G*R*I[H][E][X]}}}else{var W=function(A){return +L[H][A]+G*R*I[H][A]};D=[["m",W(0),W(1),W(2),W(3),W(4),W(5)]]}break;case"csv":if(H=="clip-rect"){D=[],E=4;while(E--){D[E]=+L[H][E]+G*R*I[H][E]}}break;default:var V=[][BH](L[H]);D=[],E=O.paper.customAttributes[H].length;while(E--){D[E]=+V[E]+G*R*I[H][E]}}M[H]=D}}O.attr(M),function(d,A,Z){setTimeout(function(){eve("anim.frame."+d,A,Z)})}(O.id,O,T.anim)}else{(function(Z,a,A){setTimeout(function(){eve("anim.frame."+a.id,a,A),eve("anim.finish."+a.id,a,A),BN.is(Z,"function")&&Z.call(a)})})(T.callback,O,T.anim),O.attr(J),AB.splice(Q--,1);if(T.repeat>1&&!T.next){for(C in J){J[BP](C)&&(B[C]=T.totalOrigin[C])}T.el.attr(B),Aj(T.anim,T.el,T.anim.percents[0],null,T.totalOrigin,T.repeat-1)}T.next&&!T.stop&&Aj(T.anim,T.el,T.next,null,T.totalOrigin,T.repeat)}}BN.svg&&O&&O.paper&&O.paper.safari(),AB.length&&AH(B3)},Ag=function(A){return A>255?255:A<0?0:A};B2.animateWith=function(D,E,H,A,F,G){var B=H?BN.animation(H,A,F,G):E,C=D.status(E);return this.animate(B).status(B,C*E.ms/B.ms)},B2.onAnimation=function(A){A?eve.on("anim.frame."+this.id,A):eve.unbind("anim.frame."+this.id);return this},Ca.prototype.delay=function(B){var A=new Ca(this.anim,this.ms);A.times=this.times,A.del=+B||0;return A},Ca.prototype.repeat=function(B){var A=new Ca(this.anim,this.ms);A.del=this.del,A.times=BA.floor(Br(B,0))||1;return A},BN.animation=function(E,F,B,C){if(E instanceof Ca){return E}if(BN.is(B,"function")||!B){C=C||B||null,B=null}E=Object(E),F=+F||0;var G={},A,D;for(D in E){E[BP](D)&&A4(D)!=D&&A4(D)+"%"!=D&&(A=!0,G[D]=E[D])}if(!A){return new Ca(E,F)}B&&(G.easing=B),C&&(G.callback=C);return new Ca({100:G},F)},B2.animate=function(D,E,B,C){var F=this;if(F.removed){C&&C.call(F);return F}var A=D instanceof Ca?D:BN.animation(D,E,B,C);Aj(A,F,A.percents[0],null,F.attr());return F},B2.setTime=function(B,A){B&&A!=null&&this.status(B,Bs(A,B.ms)/B.ms);return this},B2.status=function(E,C){var D=[],A=0,B,F;if(C!=null){Aj(E,this,-1,Bs(C,1));return this}B=AB.length;for(;A<B;A++){F=AB[A];if(F.el.id==this.id&&(!E||F.anim==E)){if(E){return F.status}D.push({anim:F.anim,status:F.status})}}if(E){return 0}return D},B2.pause=function(B){for(var A=0;A<AB.length;A++){AB[A].el.id==this.id&&(!B||AB[A].anim==B)&&eve("anim.pause."+this.id,this,AB[A].anim)!==!1&&(AB[A].paused=!0)}return this},B2.resume=function(C){for(var A=0;A<AB.length;A++){if(AB[A].el.id==this.id&&(!C||AB[A].anim==C)){var B=AB[A];eve("anim.resume."+this.id,this,B.anim)!==!1&&(delete B.paused,this.status(B.anim,B.status))}}return this},B2.stop=function(B){for(var A=0;A<AB.length;A++){AB[A].el.id==this.id&&(!B||AB[A].anim==B)&&eve("anim.stop."+this.id,this,AB[A].anim)!==!1&&AB.splice(A--,1)}return this},B2.toString=function(){return"Raphaël’s object"};var BZ=function(C){this.items=[],this.length=0,this.type="set";if(C){for(var A=0,B=C.length;A<B;A++){C[A]&&(C[A].constructor==B2.constructor||C[A].constructor==BZ)&&(this[this.items.length]=this.items[this.items.length]=C[A],this.length++)}}},B6=BZ.prototype;B6.push=function(){var D,B;for(var C=0,A=arguments.length;C<A;C++){D=arguments[C],D&&(D.constructor==B2.constructor||D.constructor==BZ)&&(B=this.items.length,this[B]=this.items[B]=D,this.length++)}return this},B6.pop=function(){this.length&&delete this[this.length--];return this.items.pop()},B6.forEach=function(D,B){for(var C=0,A=this.items.length;C<A;C++){if(D.call(B,this.items[C],C)===!1){return this}}return this};for(var Ah in B2){B2[BP](Ah)&&(B6[Ah]=function(A){return function(){var B=arguments;return this.forEach(function(C){C[A][BK](C,B)})}}(Ah))}B6.attr=function(D,E){if(D&&BN.is(D,Bo)&&BN.is(D[0],"object")){for(var B=0,C=D.length;B<C;B++){this.items[B].attr(D[B])}}else{for(var F=0,A=this.items.length;F<A;F++){this.items[F].attr(D,E)}}return this},B6.clear=function(){while(this.length){this.pop()}},B6.splice=function(E,C,D){E=E<0?Br(this.length+E,0):E,C=Br(0,Bs(this.length-E,C));var H=[],A=[],F=[],G;for(G=2;G<arguments.length;G++){F.push(arguments[G])}for(G=0;G<C;G++){A.push(this[E+G])}for(;G<this.length-E;G++){H.push(this[E+G])}var B=F.length;for(G=0;G<B+H.length;G++){this.items[E+G]=this[E+G]=G<B?F[G]:H[G-B]}G=this.items.length=this.length-=C-B;while(this[G]){delete this[G++]}return new BZ(A)},B6.exclude=function(C){for(var A=0,B=this.length;A<B;A++){if(this[A]==C){this.splice(A,1);return !0}}},B6.animate=function(F,G,J,A){(BN.is(J,"function")||!J)&&(A=J||null);var H=this.items.length,I=H,D,E=this,B;if(!H){return this}A&&(B=function(){!--H&&A.call(E)}),J=BN.is(J,Bn)?J:B;var C=BN.animation(F,G,J,B);D=this.items[--I].animate(C);while(I--){this.items[I]&&!this.items[I].removed&&this.items[I].animateWith(D,C)}return this},B6.insertAfter=function(B){var A=this.items.length;while(A--){this.items[A].insertAfter(B)}return this},B6.getBBox=function(){var E=[],C=[],D=[],A=[];for(var B=this.items.length;B--;){if(!this.items[B].removed){var F=this.items[B].getBBox();E.push(F.x),C.push(F.y),D.push(F.x+F.width),A.push(F.y+F.height)}}E=Bs[BK](0,E),C=Bs[BK](0,C);return{x:E,y:C,width:Br[BK](0,D)-E,height:Br[BK](0,A)-C}},B6.clone=function(C){C=new BZ;for(var A=0,B=this.items.length;A<B;A++){C.push(this.items[A].clone())}return C},B6.toString=function(){return"Raphaël‘s set"},BN.registerFont=function(F){if(!F.face){return F}this.fonts=this.fonts||{};var D={w:F.w,face:{},glyphs:{}},E=F.face["font-family"];for(var B in F.face){F.face[BP](B)&&(D.face[B]=F.face[B])}this.fonts[E]?this.fonts[E].push(D):this.fonts[E]=[D];if(!F.svg){D.face["units-per-em"]=A1(F.face["units-per-em"],10);for(var C in F.glyphs){if(F.glyphs[BP](C)){var G=F.glyphs[C];D.glyphs[C]={w:G.w,k:{},d:G.d&&"M"+G.d.replace(/[mlcxtrv]/g,function(H){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[H]||"M"})+"z"};if(G.k){for(var A in G.k){G[BP](A)&&(D.glyphs[C].k[A]=G.k[A])}}}}}return F},BE.getFont=function(G,H,J,A){A=A||"normal",J=J||"normal",H=+H||{normal:400,bold:700,lighter:300,bolder:800}[H]||400;if(!!BN.fonts){var I=BN.fonts[G];if(!I){var D=new RegExp("(^|\\s)"+G.replace(/[^\w\d\s+!~.:_-]/g,Bx)+"(\\s|$)","i");for(var E in BN.fonts){if(BN.fonts[BP](E)&&D.test(E)){I=BN.fonts[E];break}}}var B;if(I){for(var C=0,F=I.length;C<F;C++){B=I[C];if(B.face["font-weight"]==H&&(B.face["font-style"]==J||!B.face["font-style"])&&B.face["font-stretch"]==A){break}}}return B}},BE.print=function(N,Q,R,O,P,H,I){H=H||"middle",I=Br(Bs(I||0,1),-1);var F=this.set(),G=Bv(R)[Bw](Bx),L=0,M=Bx,J;BN.is(O,R)&&(O=this.getFont(O));if(O){J=(P||16)/O.face["units-per-em"];var K=O.face.bbox[Bw](BM),A=+K[0],D=+K[1]+(H=="baseline"?K[3]-K[1]+ +O.face.descent:(K[3]-K[1])/2);for(var E=0,B=G.length;E<B;E++){var C=E&&O.glyphs[G[E-1]]||{},T=O.glyphs[G[E]];L+=E?(C.w||O.w)+(C.k&&C.k[G[E]]||0)+O.w*I:0,T&&T.d&&F.push(this.path(T.d).attr({fill:"#000",stroke:"none",transform:[["t",L*J,0]]}))}F.transform(["...s",J,J,A,D,"t",(N-A)/J,(Q-D)/J])}return F},BE.add=function(C){if(BN.is(C,"array")){var D=this.set(),B=0,E=C.length,A;for(;B<E;B++){A=C[B]||{},BQ[BP](A.type)&&D.push(this[A.type]().attr(A))}}return D},BN.format=function(B,C){var A=BN.is(C,Bo)?[0][BH](C):arguments;B&&BN.is(B,Bn)&&A.length-1&&(B=B.replace(BR,function(E,D){return A[++D]==null?Bx:A[D]}));return B||Bx},BN.fullfill=function(){var C=/\{([^\}]+)\}/g,A=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,B=function(G,F,D){var E=D;F.replace(A,function(K,I,J,H,L){I=I||H,E&&(I in E&&(E=E[I]),typeof E=="function"&&L&&(E=E()))}),E=(E==null||E==D?G:E)+"";return E};return function(E,D){return String(E).replace(C,function(G,F){return B(G,F,D)})}}(),BN.ninja=function(){BG.was?BF.win.Raphael=BG.is:delete Raphael;return BN},BN.st=B6,function(C,D,A){function B(){/in/.test(C.readyState)?setTimeout(B,9):BN.eve("DOMload")}C.readyState==null&&C.addEventListener&&(C.addEventListener(D,A=function(){C.removeEventListener(D,A,!1),C.readyState="complete"},!1),C.readyState="loading"),B()}(document,"DOMContentLoaded"),BG.was?BF.win.Raphael=BN:Raphael=BN,eve.on("DOMload",function(){BL=!0})}(),window.Raphael.svg&&function(W){var U="hasOwnProperty",V=String,Z=parseFloat,Aa=parseInt,X=Math,Y=X.max,N=X.abs,O=X.pow,L=/[, ]+/,M=W.eve,R="",T=" ",P="http://www.w3.org/1999/xlink",Q={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},F={};W.toString=function(){return"Your browser supports SVG.\nYou are running Raphaël "+this.version};var G=function(A,B){if(B){typeof A=="string"&&(A=G(A));for(var C in B){B[U](C)&&(C.substring(0,6)=="xlink:"?A.setAttributeNS(P,C.substring(6),V(B[C])):A.setAttribute(C,V(B[C])))}}else{A=W._g.doc.createElementNS("http://www.w3.org/2000/svg",A),A.style&&(A.style.webkitTapHighlightColor="rgba(0,0,0,0)")}return A},D=function(Ah,A){var h="linear",i=Ah.id+A,z=0.5,l=0.5,q=Ah.node,C=Ah.paper,a=q.style,B=W._g.doc.getElementById(i);if(!B){A=V(A).replace(W._radial_gradient,function(o,m,n){h="radial";if(m&&n){z=Z(m),l=Z(n);var j=(l>0.5)*2-1;O(z-0.5,2)+O(l-0.5,2)>0.25&&(l=X.sqrt(0.25-O(z-0.5,2))*j+0.5)&&l!=0.5&&(l=l.toFixed(5)-1e-05*j)}return R}),A=A.split(/\s*\-\s*/);if(h=="linear"){var f=A.shift();f=-Z(f);if(isNaN(f)){return null}var g=[0,0,X.cos(W.rad(f)),X.sin(W.rad(f))],c=1/(Y(N(g[2]),N(g[3]))||1);g[2]*=c,g[3]*=c,g[2]<0&&(g[0]=-g[2],g[2]=0),g[3]<0&&(g[1]=-g[3],g[3]=0)}var d=W._parseDots(A);if(!d){return null}i=i.replace(/[\(\)\s,\xb0#]/g,"_"),Ah.gradient&&i!=Ah.gradient.id&&(C.defs.removeChild(Ah.gradient),delete Ah.gradient);if(!Ah.gradient){B=G(h+"Gradient",{id:i}),Ah.gradient=B,G(B,h=="radial"?{fx:z,fy:l}:{x1:g[0],y1:g[1],x2:g[2],y2:g[3],gradientTransform:Ah.matrix.invert()}),C.defs.appendChild(B);for(var Ai=0,Aj=d.length;Ai<Aj;Ai++){B.appendChild(G("stop",{offset:d[Ai].offset?d[Ai].offset:Ai?"100%":"0%","stop-color":d[Ai].color||"#fff"}))}}}G(q,{fill:"url(#"+i+")",opacity:1,"fill-opacity":1}),a.fill=R,a.opacity=1,a.fillOpacity=1;return 1},E=function(B){var A=B.getBBox(1);G(B.pattern,{patternTransform:B.matrix.invert()+" translate("+A.x+","+A.y+")"})},J=function(Ao,Ap,Am){if(Ao.type=="path"){var An=V(Ap).toLowerCase().split("-"),Ai=Ao.paper,Aj=Am?"end":"start",q=Ao.node,Ah=Ao.attrs,Al=Ah["stroke-width"],Ak=An.length,a="classic",b,o,p,c,m,Ax=3,Ay=3,Aw=5;while(Ak--){switch(An[Ak]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":a=An[Ak];break;case"wide":Ay=5;break;case"narrow":Ay=2;break;case"long":Ax=5;break;case"short":Ax=2}}a=="open"?(Ax+=2,Ay+=2,Aw+=2,p=1,c=Am?4:1,m={fill:"none",stroke:Ah.stroke}):(c=p=Ax/2,m={fill:Ah.stroke,stroke:"none"}),Ao._.arrows?Am?(Ao._.arrows.endPath&&F[Ao._.arrows.endPath]--,Ao._.arrows.endMarker&&F[Ao._.arrows.endMarker]--):(Ao._.arrows.startPath&&F[Ao._.arrows.startPath]--,Ao._.arrows.startMarker&&F[Ao._.arrows.startMarker]--):Ao._.arrows={};if(a!="none"){var As="raphael-marker-"+a,Aq="raphael-marker-"+Aj+a+Ax+Ay;W._g.doc.getElementById(As)?F[As]++:(Ai.defs.appendChild(G(G("path"),{"stroke-linecap":"round",d:Q[a],id:As})),F[As]=1);var Ar=W._g.doc.getElementById(Aq),Au;Ar?(F[Aq]++,Au=Ar.getElementsByTagName("use")[0]):(Ar=G(G("marker"),{id:Aq,markerHeight:Ay,markerWidth:Ax,orient:"auto",refX:c,refY:Ay/2}),Au=G(G("use"),{"xlink:href":"#"+As,transform:(Am?" rotate(180 "+Ax/2+" "+Ay/2+") ":T)+"scale("+Ax/Aw+","+Ay/Aw+")","stroke-width":1/((Ax/Aw+Ay/Aw)/2)}),Ar.appendChild(Au),Ai.defs.appendChild(Ar),F[Aq]=1),G(Au,m);var Av=p*(a!="diamond"&&a!="oval");Am?(b=Ao._.arrows.startdx*Al||0,o=W.getTotalLength(Ah.path)-Av*Al):(b=Av*Al,o=W.getTotalLength(Ah.path)-(Ao._.arrows.enddx*Al||0)),m={},m["marker-"+Aj]="url(#"+Aq+")";if(o||b){m.d=Raphael.getSubpath(Ah.path,b,o)}G(q,m),Ao._.arrows[Aj+"Path"]=As,Ao._.arrows[Aj+"Marker"]=Aq,Ao._.arrows[Aj+"dx"]=Av,Ao._.arrows[Aj+"Type"]=a,Ao._.arrows[Aj+"String"]=Ap}else{Am?(b=Ao._.arrows.startdx*Al||0,o=W.getTotalLength(Ah.path)-b):(b=0,o=W.getTotalLength(Ah.path)-(Ao._.arrows.enddx*Al||0)),Ao._.arrows[Aj+"Path"]&&G(q,{d:Raphael.getSubpath(Ah.path,b,o)}),delete Ao._.arrows[Aj+"Path"],delete Ao._.arrows[Aj+"Marker"],delete Ao._.arrows[Aj+"dx"],delete Ao._.arrows[Aj+"Type"],delete Ao._.arrows[Aj+"String"]}for(m in F){if(F[U](m)&&!F[m]){var At=W._g.doc.getElementById(m);At&&At.parentNode.removeChild(At)}}}},K={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},H=function(j,i,B){i=K[V(i).toLowerCase()];if(i){var C=j.attrs["stroke-width"]||"1",l={round:C,square:C,butt:0}[j.attrs["stroke-linecap"]||B["stroke-linecap"]]||0,A=[],c=i.length;while(c--){A[c]=i[c]*C+(c%2?1:-1)*l}G(j.node,{"stroke-dasharray":A.join(",")})}},I=function(n,l){var g=n.node,e=n.attrs,j=g.style.visibility;g.style.visibility="hidden";for(var h in l){if(l[U](h)){if(!W._availableAttrs[U](h)){continue}var a=l[h];e[h]=a;switch(h){case"blur":n.blur(a);break;case"href":case"title":case"target":var c=g.parentNode;if(c.tagName.toLowerCase()!="a"){var b=G("a");c.insertBefore(b,g),b.appendChild(g),c=b}h=="target"&&a=="blank"?c.setAttributeNS(P,"show","new"):c.setAttributeNS(P,h,a);break;case"cursor":g.style.cursor=a;break;case"transform":n.transform(a);break;case"arrow-start":J(n,a);break;case"arrow-end":J(n,a,1);break;case"clip-rect":var Al=V(a).split(L);if(Al.length==4){n.clip&&n.clip.parentNode.parentNode.removeChild(n.clip.parentNode);var Ak=G("clipPath"),y=G("rect");Ak.id=W.createUUID(),G(y,{x:Al[0],y:Al[1],width:Al[2],height:Al[3]}),Ak.appendChild(y),n.paper.defs.appendChild(Ak),G(g,{"clip-path":"url(#"+Ak.id+")"}),n.clip=y}if(!a){var t=g.getAttribute("clip-path");if(t){var v=W._g.doc.getElementById(t.replace(/(^url\(#|\)$)/g,R));v&&v.parentNode.removeChild(v),G(g,{"clip-path":R}),delete n.clip}}break;case"path":n.type=="path"&&(G(g,{d:a?e.path=W._pathToAbsolute(a):"M0,0"}),n._.dirty=1,n._.arrows&&("startString" in n._.arrows&&J(n,n._.arrows.startString),"endString" in n._.arrows&&J(n,n._.arrows.endString,1)));break;case"width":g.setAttribute(h,a),n._.dirty=1;if(e.fx){h="x",a=e.x}else{break}case"x":e.fx&&(a=-e.x-(e.width||0));case"rx":if(h=="rx"&&n.type=="rect"){break}case"cx":g.setAttribute(h,a),n.pattern&&E(n),n._.dirty=1;break;case"height":g.setAttribute(h,a),n._.dirty=1;if(e.fy){h="y",a=e.y}else{break}case"y":e.fy&&(a=-e.y-(e.height||0));case"ry":if(h=="ry"&&n.type=="rect"){break}case"cy":g.setAttribute(h,a),n.pattern&&E(n),n._.dirty=1;break;case"r":n.type=="rect"?G(g,{rx:a,ry:a}):g.setAttribute(h,a),n._.dirty=1;break;case"src":n.type=="image"&&g.setAttributeNS(P,"href",a);break;case"stroke-width":if(n._.sx!=1||n._.sy!=1){a/=Y(N(n._.sx),N(n._.sy))||1}n.paper._vbSize&&(a*=n.paper._vbSize),g.setAttribute(h,a),e["stroke-dasharray"]&&H(n,e["stroke-dasharray"],l),n._.arrows&&("startString" in n._.arrows&&J(n,n._.arrows.startString),"endString" in n._.arrows&&J(n,n._.arrows.endString,1));break;case"stroke-dasharray":H(n,a,l);break;case"fill":var Aj=V(a).match(W._ISURL);if(Aj){Ak=G("pattern");var Ah=G("image");Ak.id=W.createUUID(),G(Ak,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),G(Ah,{x:0,y:0,"xlink:href":Aj[1]}),Ak.appendChild(Ah),function(A){W._preload(Aj[1],function(){var C=this.offsetWidth,B=this.offsetHeight;G(A,{width:C,height:B}),G(Ah,{width:C,height:B}),n.paper.safari()})}(Ak),n.paper.defs.appendChild(Ak),g.style.fill="url(#"+Ak.id+")",G(g,{fill:"url(#"+Ak.id+")"}),n.pattern=Ak,n.pattern&&E(n);break}var Ai=W.getRGB(a);if(!Ai.error){delete l.gradient,delete e.gradient,!W.is(e.opacity,"undefined")&&W.is(l.opacity,"undefined")&&G(g,{opacity:e.opacity}),!W.is(e["fill-opacity"],"undefined")&&W.is(l["fill-opacity"],"undefined")&&G(g,{"fill-opacity":e["fill-opacity"]})}else{if((n.type=="circle"||n.type=="ellipse"||V(a).charAt()!="r")&&D(n,a)){if("opacity" in e||"fill-opacity" in e){var r=W._g.doc.getElementById(g.getAttribute("fill").replace(/^url\(#|\)$/g,R));if(r){var s=r.getElementsByTagName("stop");G(s[s.length-1],{"stop-opacity":("opacity" in e?e.opacity:1)*("fill-opacity" in e?e["fill-opacity"]:1)})}}e.gradient=a,e.fill="none";break}}Ai[U]("opacity")&&G(g,{"fill-opacity":Ai.opacity>1?Ai.opacity/100:Ai.opacity});case"stroke":Ai=W.getRGB(a),g.setAttribute(h,Ai.hex),h=="stroke"&&Ai[U]("opacity")&&G(g,{"stroke-opacity":Ai.opacity>1?Ai.opacity/100:Ai.opacity}),h=="stroke"&&n._.arrows&&("startString" in n._.arrows&&J(n,n._.arrows.startString),"endString" in n._.arrows&&J(n,n._.arrows.endString,1));break;case"gradient":(n.type=="circle"||n.type=="ellipse"||V(a).charAt()!="r")&&D(n,a);break;case"opacity":e.gradient&&!e[U]("stroke-opacity")&&G(g,{"stroke-opacity":a>1?a/100:a});case"fill-opacity":if(e.gradient){r=W._g.doc.getElementById(g.getAttribute("fill").replace(/^url\(#|\)$/g,R)),r&&(s=r.getElementsByTagName("stop"),G(s[s.length-1],{"stop-opacity":a}));break}default:h=="font-size"&&(a=Aa(a,10)+"px");var q=h.replace(/(\-.)/g,function(A){return A.substring(1).toUpperCase()});g.style[q]=a,n._.dirty=1,g.setAttribute(h,a)}}}Ag(n,l),g.style.visibility=j},Af=1.2,Ag=function(u,s){if(u.type=="text"&&!!(s[U]("text")||s[U]("font")||s[U]("font-size")||s[U]("x")||s[U]("y"))){var t=u.attrs,b=u.node,c=b.firstChild?Aa(W._g.doc.defaultView.getComputedStyle(b.firstChild,R).getPropertyValue("font-size"),10):10;if(s[U]("text")){t.text=s.text;while(b.firstChild){b.removeChild(b.firstChild)}var C=V(s.text).split("\n"),a=[],q;for(var e=0,l=C.length;e<l;e++){q=G("tspan"),e&&G(q,{dy:c*Af,x:t.x}),q.appendChild(W._g.doc.createTextNode(C[e])),b.appendChild(q),a[e]=q}}else{a=b.getElementsByTagName("tspan");for(e=0,l=a.length;e<l;e++){e?G(a[e],{dy:c*Af,x:t.x}):G(a[0],{dy:0})}}G(b,{x:t.x,y:t.y}),u._.dirty=1;var B=u._getBBox(),A=t.y-(B.y+B.height/2);A&&W.is(A,"finite")&&G(a[0],{dy:A})}},Ae=function(C,a){var A=0,B=0;this[0]=this.node=C,C.raphael=!0,this.id=W._oid++,C.raphaelid=this.id,this.matrix=W.matrix(),this.realPath=null,this.paper=a,this.attrs=this.attrs||{},this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1},!a.bottom&&(a.bottom=this),this.prev=a.top,a.top&&(a.top.next=this),a.top=this,this.next=null},Ad=W.el;Ae.prototype=Ad,Ad.constructor=Ae,W._engine.path=function(e,B){var C=G("path");B.canvas&&B.canvas.appendChild(C);var A=new Ae(C,B);A.type="path",I(A,{fill:"none",stroke:"#000",path:e});return A},Ad.rotate=function(C,B,A){if(this.removed){return this}C=V(C).split(L),C.length-1&&(B=Z(C[1]),A=Z(C[2])),C=Z(C[0]),A==null&&(B=A);if(B==null||A==null){var c=this.getBBox(1);B=c.x+c.width/2,A=c.y+c.height/2}this.transform(this._.transform.concat([["r",C,B,A]]));return this},Ad.scale=function(c,C,B,d){if(this.removed){return this}c=V(c).split(L),c.length-1&&(C=Z(c[1]),B=Z(c[2]),d=Z(c[3])),c=Z(c[0]),C==null&&(C=c),d==null&&(B=d);if(B==null||d==null){var A=this.getBBox(1)}B=B==null?A.x+A.width/2:B,d=d==null?A.y+A.height/2:d,this.transform(this._.transform.concat([["s",c,C,B,d]]));return this},Ad.translate=function(B,A){if(this.removed){return this}B=V(B).split(L),B.length-1&&(A=Z(B[1])),B=Z(B[0])||0,A=+A||0,this.transform(this._.transform.concat([["t",B,A]]));return this},Ad.transform=function(C){var A=this._;if(C==null){return A.transform}W._extractTransform(this,C),this.clip&&G(this.clip,{transform:this.matrix.invert()}),this.pattern&&E(this),this.node&&G(this.node,{transform:this.matrix});if(A.sx!=1||A.sy!=1){var B=this.attrs[U]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":B})}return this},Ad.hide=function(){!this.removed&&this.paper.safari(this.node.style.display="none");return this},Ad.show=function(){!this.removed&&this.paper.safari(this.node.style.display="");return this},Ad.remove=function(){if(!this.removed){var A=this.paper;A.__set__&&A.__set__.exclude(this),M.unbind("*.*."+this.id),this.gradient&&A.defs.removeChild(this.gradient),W._tear(this,A),this.node.parentNode.removeChild(this.node);for(var B in this){this[B]=typeof this[B]=="function"?W._removedFactory(B):null}this.removed=!0}},Ad._getBBox=function(){if(this.node.style.display=="none"){this.show();var C=!0}var A={};try{A=this.node.getBBox()}catch(B){}finally{A=A||{}}C&&this.hide();return A},Ad.attr=function(s,v){if(this.removed){return this}if(s==null){var A={};for(var t in this.attrs){this.attrs[U](t)&&(A[t]=this.attrs[t])}A.gradient&&A.fill=="none"&&(A.fill=A.gradient)&&delete A.gradient,A.transform=this._.transform;return A}if(v==null&&W.is(s,"string")){if(s=="fill"&&this.attrs.fill=="none"&&this.attrs.gradient){return this.attrs.gradient}if(s=="transform"){return this._.transform}var u=s.split(L),C={};for(var a=0,q=u.length;a<q;a++){s=u[a],s in this.attrs?C[s]=this.attrs[s]:W.is(this.paper.customAttributes[s],"function")?C[s]=this.paper.customAttributes[s].def:C[s]=W._availableAttrs[s]}return q-1?C:C[u[0]]}if(v==null&&W.is(s,"array")){C={};for(a=0,q=s.length;a<q;a++){C[s[a]]=this.attr(s[a])}return C}if(v!=null){var r={};r[s]=v}else{s!=null&&W.is(s,"object")&&(r=s)}for(var b in r){M("attr."+b+"."+this.id,this,r[b])}for(b in this.paper.customAttributes){if(this.paper.customAttributes[U](b)&&r[U](b)&&W.is(this.paper.customAttributes[b],"function")){var j=this.paper.customAttributes[b].apply(this,[].concat(r[b]));this.attrs[b]=r[b];for(var B in j){j[U](B)&&(r[B]=j[B])}}}I(this,r);return this},Ad.toFront=function(){if(this.removed){return this}this.node.parentNode.tagName.toLowerCase()=="a"?this.node.parentNode.parentNode.appendChild(this.node.parentNode):this.node.parentNode.appendChild(this.node);var A=this.paper;A.top!=this&&W._tofront(this,A);return this},Ad.toBack=function(){if(this.removed){return this}var A=this.node.parentNode;A.tagName.toLowerCase()=="a"?A.parentNode.insertBefore(this.node.parentNode,this.node.parentNode.parentNode.firstChild):A.firstChild!=this.node&&A.insertBefore(this.node,this.node.parentNode.firstChild),W._toback(this,this.paper);var B=this.paper;return this},Ad.insertAfter=function(A){if(this.removed){return this}var B=A.node||A[A.length-1].node;B.nextSibling?B.parentNode.insertBefore(this.node,B.nextSibling):B.parentNode.appendChild(this.node),W._insertafter(this,A,this.paper);return this},Ad.insertBefore=function(A){if(this.removed){return this}var B=A.node||A[0].node;B.parentNode.insertBefore(this.node,B),W._insertbefore(this,A,this.paper);return this},Ad.blur=function(C){var a=this;if(+C!==0){var A=G("filter"),B=G("feGaussianBlur");a.attrs.blur=C,A.id=W.createUUID(),G(B,{stdDeviation:+C||1.5}),A.appendChild(B),a.paper.defs.appendChild(A),a._blur=A,G(a.node,{filter:"url(#"+A.id+")"})}else{a._blur&&(a._blur.parentNode.removeChild(a._blur),delete a._blur,delete a.attrs.blur),a.node.removeAttribute("filter")}},W._engine.circle=function(h,C,g,A){var B=G("circle");h.canvas&&h.canvas.appendChild(B);var i=new Ae(B,h);i.attrs={cx:C,cy:g,r:A,fill:"none",stroke:"#000"},i.type="circle",G(B,i.attrs);return i},W._engine.rect=function(j,C,i,n,A,l){var m=G("rect");j.canvas&&j.canvas.appendChild(m);var B=new Ae(m,j);B.attrs={x:C,y:i,width:n,height:A,r:l||0,rx:l||0,ry:l||0,fill:"none",stroke:"#000"},B.type="rect",G(m,B.attrs);return B},W._engine.ellipse=function(j,h,i,B,C){var l=G("ellipse");j.canvas&&j.canvas.appendChild(l);var A=new Ae(l,j);A.attrs={cx:h,cy:i,rx:B,ry:C,fill:"none",stroke:"#000"},A.type="ellipse",G(l,A.attrs);return A},W._engine.image=function(j,C,i,n,A,l){var m=G("image");G(m,{x:i,y:n,width:A,height:l,preserveAspectRatio:"none"}),m.setAttributeNS(P,"href",C),j.canvas&&j.canvas.appendChild(m);var B=new Ae(m,j);B.attrs={x:i,y:n,width:A,height:l,src:C},B.type="image";return B},W._engine.text=function(a,h,B,C){var i=G("text");a.canvas&&a.canvas.appendChild(i);var A=new Ae(i,a);A.attrs={x:h,y:B,"text-anchor":"middle",text:C,font:W._availableAttrs.font,stroke:"none",fill:"#000"},A.type="text",I(A,A.attrs);return A},W._engine.setSize=function(B,A){this.width=B||this.width,this.height=A||this.height,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this._viewBox&&this.setViewBox.apply(this,this._viewBox);return this},W._engine.create=function(){var l=W._getContainer.apply(0,arguments),m=l&&l.container,p=l.x,A=l.y,n=l.width,o=l.height;if(!m){throw new Error("SVG container not found.")}var C=G("svg"),a="overflow:hidden;",B;p=p||0,A=A||0,n=n||512,o=o||342,G(C,{height:o,version:1.1,width:n,xmlns:"http://www.w3.org/2000/svg"}),m==1?(C.style.cssText=a+"position:absolute;left:"+p+"px;top:"+A+"px",W._g.doc.body.appendChild(C),B=1):(C.style.cssText=a+"position:relative",m.firstChild?m.insertBefore(C,m.firstChild):m.appendChild(C)),m=new W._Paper,m.width=n,m.height=o,m.canvas=C,m.clear(),m._left=m._top=0,B&&(m.renderfix=function(){}),m.renderfix();return m},W._engine.setViewBox=function(p,n,o,r,A){M("setViewBox",this,this._viewBox,[p,n,o,r,A]);var q=Y(o/this.width,r/this.height),C=this.top,g=A?"meet":"xMinYMin",B,m;p==null?(this._vbSize&&(q=1),delete this._vbSize,B="0 0 "+this.width+T+this.height):(this._vbSize=q,B=p+T+n+T+o+T+r),G(this.canvas,{viewBox:B,preserveAspectRatio:g});while(q&&C){m="stroke-width" in C.attrs?C.attrs["stroke-width"]:1,C.attr({"stroke-width":m}),C._.dirty=1,C._.dirtyT=1,C=C.prev}this._viewBox=[p,n,o,r,!!A];return this},W.prototype.renderfix=function(){var g=this.canvas,C=g.style,f=g.getScreenCTM()||g.createSVGMatrix(),A=-f.e%1,B=-f.f%1;if(A||B){A&&(this._left=(this._left+A)%1,C.left=this._left+"px"),B&&(this._top=(this._top+B)%1,C.top=this._top+"px")}},W.prototype.clear=function(){W.eve("clear",this);var A=this.canvas;while(A.firstChild){A.removeChild(A.firstChild)}this.bottom=this.top=null,(this.desc=G("desc")).appendChild(W._g.doc.createTextNode("Created with Raphaël "+W.version)),A.appendChild(this.desc),A.appendChild(this.defs=G("defs"))},W.prototype.remove=function(){M("remove",this),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var A in this){this[A]=typeof this[A]=="function"?W._removedFactory(A):null}};var Ab=W.st;for(var Ac in Ad){Ad[U](Ac)&&!Ab[U](Ac)&&(Ab[Ac]=function(A){return function(){var B=arguments;return this.forEach(function(C){C[A].apply(C,B)})}}(Ac))}}(window.Raphael),window.Raphael.vml&&function(An){var Al="hasOwnProperty",Am=String,Aq=parseFloat,I=Math,Ao=I.round,Ap=I.max,Af=I.min,Ag=I.abs,Ad="fill",Ae=/[, ]+/,Aj=An.eve,Ak=" progid:DXImageTransform.Microsoft",Ah=" ",Ai="",X={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},Y=/([clmz]),?([^clmz]*)/gi,V=/ progid:\S+Blur\([^\)]+\)/g,W=/-?[^,\s-]+/g,Ab="position:absolute;left:0;top:0;width:1px;height:1px",Ac=21600,Z={path:1,rect:1,image:1},Aa={circle:1,ellipse:1},T=function(a){var f=/[ahqstv]/ig,A=An._pathToAbsolute;Am(a).match(f)&&(A=An._path2curve),f=/[clmz]/g;if(A==An._pathToAbsolute&&!Am(a).match(f)){var c=Am(a).replace(Y,function(n,l,m){var i=[],j=l.toLowerCase()=="m",h=X[l];m.replace(W,function(b){j&&i.length==2&&(h+=i+X[l=="m"?"l":"L"],i=[]),i.push(Ao(b*Ac))});return h+i});return c}var E=A(a),F,C;c=[];for(var D=0,G=E.length;D<G;D++){F=E[D],C=E[D][0].toLowerCase(),C=="z"&&(C="x");for(var H=1,B=F.length;H<B;H++){C+=Ao(F[H]*Ac)+(H!=B-1?",":Ai)}c.push(C)}return c.join(Ah)},U=function(C,D,A){var B=An.matrix();B.rotate(-C,0.5,0.5);return{dx:B.x(D,A),dy:B.y(D,A)}},R=function(x,u,w,Ar,As,y){var z=x._,H=x.matrix,G=z.fillpos,j=x.node,n=j.style,i=1,C="",D,A=Ac/u,B=Ac/w;n.visibility="hidden";if(!!u&&!!w){j.coordsize=Ag(A)+Ah+Ag(B),n.rotation=y*(u*w<0?-1:1);if(y){var F=U(y,Ar,As);Ar=F.dx,As=F.dy}u<0&&(C+="x"),w<0&&(C+=" y")&&(i=-1),n.flip=C,j.coordorigin=Ar*-A+Ah+As*-B;if(G||z.fillsize){var E=j.getElementsByTagName(Ad);E=E&&E[0],j.removeChild(E),G&&(F=U(y,H.x(G[0],G[1]),H.y(G[0],G[1])),E.position=F.dx*i+Ah+F.dy*i),z.fillsize&&(E.size=z.fillsize[0]*Ag(u)+Ah+z.fillsize[1]*Ag(w)),j.appendChild(E)}n.visibility="visible"}};An.toString=function(){return"Your browser doesn’t support SVG. Falling down to VML.\nYou are running Raphaël "+this.version};var M=function(G,F,l){var A=Am(F).toLowerCase().split("-"),H=l?"end":"start",c=A.length,D="classic",E="medium",B="medium";while(c--){switch(A[c]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":D=A[c];break;case"wide":case"narrow":B=A[c];break;case"long":case"short":E=A[c]}}var C=G.node.getElementsByTagName("stroke")[0];C[H+"arrow"]=D,C[H+"arrowlength"]=E,C[H+"arrowwidth"]=B},K=function(A,AF){A.attrs=A.attrs||{};var AG=A.node,AH=A.attrs,AC=AG.style,AD,AA=Z[A.type]&&(AF.x!=AH.x||AF.y!=AH.y||AF.width!=AH.width||AF.height!=AH.height||AF.cx!=AH.cx||AF.cy!=AH.cy||AF.rx!=AH.rx||AF.ry!=AH.ry||AF.r!=AH.r),AB=Aa[A.type]&&(AH.cx!=AF.cx||AH.cy!=AF.cy||AH.r!=AF.r||AH.rx!=AF.rx||AH.ry!=AF.ry),AE=A;for(var Az in AF){AF[Al](Az)&&(AH[Az]=AF[Az])}AA&&(AH.path=An._getPath[A.type](A),A._.dirty=1),AF.href&&(AG.href=AF.href),AF.title&&(AG.title=AF.title),AF.target&&(AG.target=AF.target),AF.cursor&&(AC.cursor=AF.cursor),"blur" in AF&&A.blur(AF.blur);if(AF.path&&A.type=="path"||AA){AG.path=T(~Am(AH.path).toLowerCase().indexOf("r")?An._pathToAbsolute(AH.path):AH.path),A.type=="image"&&(A._.fillpos=[AH.x,AH.y],A._.fillsize=[AH.width,AH.height],R(A,1,1,0,0,0))}"transform" in AF&&A.transform(AF.transform);if(AB){var Av=+AH.cx,Ax=+AH.cy,Ay=+AH.rx||+AH.r||0,Aw=+AH.ry||+AH.r||0;AG.path=An.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",Ao((Av-Ay)*Ac),Ao((Ax-Aw)*Ac),Ao((Av+Ay)*Ac),Ao((Ax+Aw)*Ac),Ao(Av*Ac))}if("clip-rect" in AF){var x=Am(AF["clip-rect"]).split(Ae);if(x.length==4){x[2]=+x[2]+ +x[0],x[3]=+x[3]+ +x[1];var C=AG.clipRect||An._g.doc.createElement("div"),v=C.style;v.clip=An.format("rect({1}px {2}px {3}px {0}px)",x),AG.clipRect||(v.position="absolute",v.top=0,v.left=0,v.width=A.paper.width+"px",v.height=A.paper.height+"px",AG.parentNode.insertBefore(C,AG),C.appendChild(AG),AG.clipRect=C)}AF["clip-rect"]||AG.clipRect&&(AG.clipRect.style.clip="auto")}if(A.textpath){var w=A.textpath.style;AF.font&&(w.font=AF.font),AF["font-family"]&&(w.fontFamily='"'+AF["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,Ai)+'"'),AF["font-size"]&&(w.fontSize=AF["font-size"]),AF["font-weight"]&&(w.fontWeight=AF["font-weight"]),AF["font-style"]&&(w.fontStyle=AF["font-style"])}"arrow-start" in AF&&M(AE,AF["arrow-start"]),"arrow-end" in AF&&M(AE,AF["arrow-end"],1);if(AF.opacity!=null||AF["stroke-width"]!=null||AF.fill!=null||AF.src!=null||AF.stroke!=null||AF["stroke-width"]!=null||AF["stroke-opacity"]!=null||AF["fill-opacity"]!=null||AF["stroke-dasharray"]!=null||AF["stroke-miterlimit"]!=null||AF["stroke-linejoin"]!=null||AF["stroke-linecap"]!=null){var At=AG.getElementsByTagName(Ad),Au=!1;At=At&&At[0],!At&&(Au=At=N(Ad)),A.type=="image"&&AF.src&&(At.src=AF.src),AF.fill&&(At.on=!0);if(At.on==null||AF.fill=="none"||AF.fill===null){At.on=!1}if(At.on&&AF.fill){var Ar=Am(AF.fill).match(An._ISURL);if(Ar){At.parentNode==AG&&AG.removeChild(At),At.rotate=!0,At.src=Ar[1],At.type="tile";var As=A.getBBox(1);At.position=As.x+Ah+As.y,A._.fillpos=[As.x,As.y],An._preload(Ar[1],function(){A._.fillsize=[this.offsetWidth,this.offsetHeight]})}else{At.color=An.getRGB(AF.fill).hex,At.src=Ai,At.type="solid",An.getRGB(AF.fill).error&&(AE.type in {circle:1,ellipse:1}||Am(AF.fill).charAt()!="r")&&L(AE,AF.fill,At)&&(AH.fill="none",AH.gradient=AF.fill,At.rotate=!1)}}if("fill-opacity" in AF||"opacity" in AF){var g=((+AH["fill-opacity"]+1||2)-1)*((+AH.opacity+1||2)-1)*((+An.getRGB(AF.fill).o+1||2)-1);g=Af(Ap(g,0),1),At.opacity=g,At.src&&(At.color="none")}AG.appendChild(At);var h=AG.getElementsByTagName("stroke")&&AG.getElementsByTagName("stroke")[0],o=!1;!h&&(o=h=N("stroke"));if(AF.stroke&&AF.stroke!="none"||AF["stroke-width"]||AF["stroke-opacity"]!=null||AF["stroke-dasharray"]||AF["stroke-miterlimit"]||AF["stroke-linejoin"]||AF["stroke-linecap"]){h.on=!0}(AF.stroke=="none"||AF.stroke===null||h.on==null||AF.stroke==0||AF["stroke-width"]==0)&&(h.on=!1);var u=An.getRGB(AF.stroke);h.on&&AF.stroke&&(h.color=u.hex),g=((+AH["stroke-opacity"]+1||2)-1)*((+AH.opacity+1||2)-1)*((+u.o+1||2)-1);var j=(Aq(AF["stroke-width"])||1)*0.75;g=Af(Ap(g,0),1),AF["stroke-width"]==null&&(j=AH["stroke-width"]),AF["stroke-width"]&&(h.weight=j),j&&j<1&&(g*=j)&&(h.weight=1),h.opacity=g,AF["stroke-linejoin"]&&(h.joinstyle=AF["stroke-linejoin"]||"miter"),h.miterlimit=AF["stroke-miterlimit"]||8,AF["stroke-linecap"]&&(h.endcap=AF["stroke-linecap"]=="butt"?"flat":AF["stroke-linecap"]=="square"?"square":"round");if(AF["stroke-dasharray"]){var n={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};h.dashstyle=n[Al](AF["stroke-dasharray"])?n[AF["stroke-dasharray"]]:Ai}o&&AG.appendChild(h)}if(AE.type=="text"){AE.paper.canvas.style.display=Ai;var c=AE.paper.span,d=100,b=AH.font&&AH.font.match(/\d+(?:\.\d*)?(?=px)/);AC=c.style,AH.font&&(AC.font=AH.font),AH["font-family"]&&(AC.fontFamily=AH["font-family"]),AH["font-weight"]&&(AC.fontWeight=AH["font-weight"]),AH["font-style"]&&(AC.fontStyle=AH["font-style"]),b=Aq(AH["font-size"]||b&&b[0])||10,AC.fontSize=b*d+"px",AE.textpath.string&&(c.innerHTML=Am(AE.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));var z=c.getBoundingClientRect();AE.W=AH.w=(z.right-z.left)/d,AE.H=AH.h=(z.bottom-z.top)/d,AE.X=AH.x,AE.Y=AH.y+AE.H/2,("x" in AF||"y" in AF)&&(AE.path.v=An.format("m{0},{1}l{2},{1}",Ao(AH.x*Ac),Ao(AH.y*Ac),Ao(AH.x*Ac)+1));var f=["x","y","text","font","font-family","font-weight","font-style","font-size"];for(var F=0,a=f.length;F<a;F++){if(f[F] in AF){AE._.dirty=1;break}}switch(AH["text-anchor"]){case"start":AE.textpath.style["v-text-align"]="left",AE.bbx=AE.W/2;break;case"end":AE.textpath.style["v-text-align"]="right",AE.bbx=-AE.W/2;break;default:AE.textpath.style["v-text-align"]="center",AE.bbx=0}AE.textpath.style["v-text-kern"]=!0}},L=function(e,n,o){e.attrs=e.attrs||{};var H=e.attrs,a=Math.pow,F,G,c="linear",d=".5 .5";e.attrs.gradient=n,n=Am(n).replace(An._radial_gradient,function(h,f,g){c="radial",f&&g&&(f=Aq(f),g=Aq(g),a(f-0.5,2)+a(g-0.5,2)>0.25&&(g=I.sqrt(0.25-a(f-0.5,2))*((g>0.5)*2-1)+0.5),d=f+Ah+g);return Ai}),n=n.split(/\s*\-\s*/);if(c=="linear"){var C=n.shift();C=-Aq(C);if(isNaN(C)){return null}}var D=An._parseDots(n);if(!D){return null}e=e.shape||e.node;if(D.length){e.removeChild(o),o.on=!0,o.method="none",o.color=D[0].color,o.color2=D[D.length-1].color;var A=[];for(var B=0,E=D.length;B<E;B++){D[B].offset&&A.push(D[B].offset+Ah+D[B].color)}o.colors=A.length?A.join():"0% "+o.color,c=="radial"?(o.type="gradientTitle",o.focus="100%",o.focussize="0 0",o.focusposition=d,o.angle=0):(o.type="gradient",o.angle=(270-C)%360),e.appendChild(o)}return 1},P=function(A,B){this[0]=this.node=A,A.raphael=!0,this.id=An._oid++,A.raphaelid=this.id,this.X=0,this.Y=0,this.attrs={},this.paper=B,this.matrix=An.matrix(),this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1},!B.bottom&&(B.bottom=this),this.prev=B.top,B.top&&(B.top.next=this),B.top=this,this.next=null},Q=An.el;P.prototype=Q,Q.constructor=P,Q.transform=function(n){if(n==null){return this._.transform}var t=this.paper._viewBoxShift,A=t?"s"+[t.scale,t.scale]+"-1-1t"+[t.dx,t.dy]:Ai,o;t&&(o=n=Am(n).replace(/\.{3}|\u2026/g,this._.transform||Ai)),An._extractTransform(this,A+n);var s=this.matrix.clone(),G=this.skew,H=this.node,E,F=~Am(this.attrs.fill).indexOf("-"),a=!Am(this.attrs.fill).indexOf("url(");s.translate(-0.5,-0.5);if(a||F||this.type=="image"){G.matrix="1 0 0 1",G.offset="0 0",E=s.split();if(F&&E.noRotation||!E.isSimple){H.style.filter=s.toFilter();var c=this.getBBox(),B=this.getBBox(1),C=c.x-B.x,D=c.y-B.y;H.coordorigin=C*-Ac+Ah+D*-Ac,R(this,1,1,C,D,0)}else{H.style.filter=Ai,R(this,E.scalex,E.scaley,E.dx,E.dy,E.rotate)}}else{H.style.filter=Ai,G.matrix=Am(s),G.offset=s.offset()}o&&(this._.transform=o);return this},Q.rotate=function(C,B,A){if(this.removed){return this}if(C!=null){C=Am(C).split(Ae),C.length-1&&(B=Aq(C[1]),A=Aq(C[2])),C=Aq(C[0]),A==null&&(B=A);if(B==null||A==null){var D=this.getBBox(1);B=D.x+D.width/2,A=D.y+D.height/2}this._.dirtyT=1,this.transform(this._.transform.concat([["r",C,B,A]]));return this}},Q.translate=function(B,A){if(this.removed){return this}B=Am(B).split(Ae),B.length-1&&(A=Aq(B[1])),B=Aq(B[0])||0,A=+A||0,this._.bbox&&(this._.bbox.x+=B,this._.bbox.y+=A),this.transform(this._.transform.concat([["t",B,A]]));return this},Q.scale=function(D,C,B,E){if(this.removed){return this}D=Am(D).split(Ae),D.length-1&&(C=Aq(D[1]),B=Aq(D[2]),E=Aq(D[3]),isNaN(B)&&(B=null),isNaN(E)&&(E=null)),D=Aq(D[0]),C==null&&(C=D),E==null&&(B=E);if(B==null||E==null){var A=this.getBBox(1)}B=B==null?A.x+A.width/2:B,E=E==null?A.y+A.height/2:E,this.transform(this._.transform.concat([["s",D,C,B,E]])),this._.dirtyT=1;return this},Q.hide=function(){!this.removed&&(this.node.style.display="none");return this},Q.show=function(){!this.removed&&(this.node.style.display=Ai);return this},Q._getBBox=function(){if(this.removed){return{}}return{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}},Q.remove=function(){if(!this.removed){this.paper.__set__&&this.paper.__set__.exclude(this),An.eve.unbind("*.*."+this.id),An._tear(this,this.paper),this.node.parentNode.removeChild(this.node),this.shape&&this.shape.parentNode.removeChild(this.shape);for(var A in this){this[A]=typeof this[A]=="function"?An._removedFactory(A):null}this.removed=!0}},Q.attr=function(a,l){if(this.removed){return this}if(a==null){var A={};for(var b in this.attrs){this.attrs[Al](b)&&(A[b]=this.attrs[b])}A.gradient&&A.fill=="none"&&(A.fill=A.gradient)&&delete A.gradient,A.transform=this._.transform;return A}if(l==null&&An.is(a,"string")){if(a==Ad&&this.attrs.fill=="none"&&this.attrs.gradient){return this.attrs.gradient}var j=a.split(Ae),D={};for(var E=0,H=j.length;E<H;E++){a=j[E],a in this.attrs?D[a]=this.attrs[a]:An.is(this.paper.customAttributes[a],"function")?D[a]=this.paper.customAttributes[a].def:D[a]=An._availableAttrs[a]}return H-1?D:D[j[0]]}if(this.attrs&&l==null&&An.is(a,"array")){D={};for(E=0,H=a.length;E<H;E++){D[a[E]]=this.attr(a[E])}return D}var F;l!=null&&(F={},F[a]=l),l==null&&An.is(a,"object")&&(F=a);for(var G in F){Aj("attr."+G+"."+this.id,this,F[G])}if(F){for(G in this.paper.customAttributes){if(this.paper.customAttributes[Al](G)&&F[Al](G)&&An.is(this.paper.customAttributes[G],"function")){var B=this.paper.customAttributes[G].apply(this,[].concat(F[G]));this.attrs[G]=F[G];for(var C in B){B[Al](C)&&(F[C]=B[C])}}}F.text&&this.type=="text"&&(this.textpath.string=F.text),K(this,F)}return this},Q.toFront=function(){!this.removed&&this.node.parentNode.appendChild(this.node),this.paper&&this.paper.top!=this&&An._tofront(this,this.paper);return this},Q.toBack=function(){if(this.removed){return this}this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),An._toback(this,this.paper));return this},Q.insertAfter=function(A){if(this.removed){return this}A.constructor==An.st.constructor&&(A=A[A.length-1]),A.node.nextSibling?A.node.parentNode.insertBefore(this.node,A.node.nextSibling):A.node.parentNode.appendChild(this.node),An._insertafter(this,A,this.paper);return this},Q.insertBefore=function(A){if(this.removed){return this}A.constructor==An.st.constructor&&(A=A[0]),A.node.parentNode.insertBefore(this.node,A.node),An._insertbefore(this,A,this.paper);return this},Q.blur=function(B){var C=this.node.runtimeStyle,A=C.filter;A=A.replace(V,Ai),+B!==0?(this.attrs.blur=B,C.filter=A+Ah+Ak+".Blur(pixelradius="+(+B||1.5)+")",C.margin=An.format("-{0}px 0 0 -{0}px",Ao(+B||1.5))):(C.filter=A,C.margin=0,delete this.attrs.blur)},An._engine.path=function(E,C){var D=N("shape");D.style.cssText=Ab,D.coordsize=Ac+Ah+Ac,D.coordorigin=C.coordorigin;var A=new P(D,C),B={fill:"none",stroke:"#000"};E&&(B.path=E),A.type="path",A.path=[],A.Path=Ai,K(A,B),C.canvas.appendChild(D);var F=N("skew");F.on=!0,D.appendChild(F),A.skew=F,A.transform(Ai);return A},An._engine.rect=function(E,F,a,A,G,H){var C=An._rectPath(F,a,A,G,H),D=E.path(C),B=D.attrs;D.X=B.x=F,D.Y=B.y=a,D.W=B.width=A,D.H=B.height=G,B.r=H,B.path=C,D.type="rect";return D},An._engine.ellipse=function(F,D,E,B,C){var G=F.path(),A=G.attrs;G.X=D-B,G.Y=E-C,G.W=B*2,G.H=C*2,G.type="ellipse",K(G,{cx:D,cy:E,rx:B,ry:C});return G},An._engine.circle=function(E,C,D,A){var B=E.path(),F=B.attrs;B.X=C-A,B.Y=D-A,B.W=B.H=A*2,B.type="circle",K(B,{cx:C,cy:D,r:A});return B},An._engine.image=function(G,H,n,A,a,j){var C=An._rectPath(n,A,a,j),D=G.path(C).attr({stroke:"none"}),B=D.attrs,E=D.node,F=E.getElementsByTagName(Ad)[0];B.src=H,D.X=B.x=n,D.Y=B.y=A,D.W=B.width=a,D.H=B.height=j,B.path=C,D.type="image",F.parentNode==E&&E.removeChild(F),F.rotate=!0,F.src=H,F.type="tile",D._.fillpos=[n,A],D._.fillsize=[a,j],E.appendChild(F),R(D,1,1,0,0,0);return D},An._engine.text=function(H,c,A,a){var D=N("shape"),E=N("path"),B=N("textpath");c=c||0,A=A||0,a=a||"",E.v=An.format("m{0},{1}l{2},{1}",Ao(c*Ac),Ao(A*Ac),Ao(c*Ac)+1),E.textpathok=!0,B.string=Am(a),B.on=!0,D.style.cssText=Ab,D.coordsize=Ac+Ah+Ac,D.coordorigin="0 0";var C=new P(D,H),F={fill:"#000",stroke:"none",font:An._availableAttrs.font,text:a};C.shape=D,C.path=E,C.textpath=B,C.type="text",C.attrs.text=Am(a),C.attrs.x=c,C.attrs.y=A,C.attrs.w=1,C.attrs.h=1,K(C,F),D.appendChild(B),D.appendChild(E),H.canvas.appendChild(D);var G=N("skew");G.on=!0,D.appendChild(G),C.skew=G,C.transform(Ai);return C},An._engine.setSize=function(B,C){var A=this.canvas.style;this.width=B,this.height=C,B==+B&&(B+="px"),C==+C&&(C+="px"),A.width=B,A.height=C,A.clip="rect(0 "+B+" "+C+" 0)",this._viewBox&&An._engine.setViewBox.apply(this,this._viewBox);return this},An._engine.setViewBox=function(G,H,g,A,a){An.eve("setViewBox",this,this._viewBox,[G,H,g,A,a]);var D=this.width,E=this.height,B=1/Ap(g/D,A/E),C,F;a&&(C=E/A,F=D/g,g*C<D&&(G-=(D-g*C)/2/C),A*F<E&&(H-=(E-A*F)/2/F)),this._viewBox=[G,H,g,A,!!a],this._viewBoxShift={dx:-G,dy:-H,scale:B},this.forEach(function(b){b.transform("...")});return this};var N;An._engine.initWin=function(C){var A=C.document;A.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!A.namespaces.rvml&&A.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),N=function(D){return A.createElement("<rvml:"+D+' class="rvml">')}}catch(B){N=function(D){return A.createElement("<"+D+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}},An._engine.initWin(An._g.win),An._engine.create=function(){var F=An._getContainer.apply(0,arguments),G=F.container,l=F.height,A,H=F.width,a=F.x,D=F.y;if(!G){throw new Error("VML container not found.")}var E=new An._Paper,B=E.canvas=An._g.doc.createElement("div"),C=B.style;a=a||0,D=D||0,H=H||512,l=l||342,E.width=H,E.height=l,H==+H&&(H+="px"),l==+l&&(l+="px"),E.coordsize=Ac*1000+Ah+Ac*1000,E.coordorigin="0 0",E.span=An._g.doc.createElement("span"),E.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;",B.appendChild(E.span),C.cssText=An.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",H,l),G==1?(An._g.doc.body.appendChild(B),C.left=a+"px",C.top=D+"px",C.position="absolute"):G.firstChild?G.insertBefore(B,G.firstChild):G.appendChild(B),E.renderfix=function(){};return E},An.prototype.clear=function(){An.eve("clear",this),this.canvas.innerHTML=Ai,this.span=An._g.doc.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas.appendChild(this.span),this.bottom=this.top=null},An.prototype.remove=function(){An.eve("remove",this),this.canvas.parentNode.removeChild(this.canvas);for(var A in this){this[A]=typeof this[A]=="function"?An._removedFactory(A):null}return !0};var O=An.st;for(var J in Q){Q[Al](J)&&!O[Al](J)&&(O[J]=function(A){return function(){var B=arguments;return this.forEach(function(C){C[A].apply(C,B)})}}(J))}}(window.Raphael);(function(A){A.widget("wijmo.wijpager",{options:{firstPageClass:"ui-icon-seek-first",firstPageText:"First",lastPageClass:"ui-icon-seek-end",lastPageText:"Last",mode:"numeric",nextPageClass:"ui-icon-seek-next",nextPageText:"Next",pageButtonCount:10,previousPageClass:"ui-icon-seek-prev",previousPageText:"Previous",pageCount:1,pageIndex:0,pageIndexChanging:null,pageIndexChanged:null},_create:function(){this.element.addClass("ui-widget wijmo-wijpager ui-helper-clearfix");this.options.disabled&&this.disable();this._refresh()},_init:function(){},destroy:function(){this.element.removeClass("ui-widget wijmo-wijpager ui-helper-clearfix");this.$ul.remove();A.Widget.prototype.destroy.apply(this,arguments)},_setOption:function(){A.Widget.prototype._setOption.apply(this,arguments);this._refresh()},_refresh:function(){this._validate();this.$ul&&this.$ul.remove();this.element.append(this.$ul=A('<ul class="ui-list ui-corner-all ui-widget-content ui-helper-clearfix" role="tablist"></ul>'));switch((this.options.mode||"").toLowerCase()){case"nextprevious":this._createNextPrev(false);break;case"nextpreviousfirstlast":this._createNextPrev(true);break;case"numeric":this._createNumeric(false);break;case"numericfirstlast":this._createNumeric(true)}},_validate:function(){var B=this.options;if(isNaN(B.pageCount)||B.pageCount<1){B.pageCount=1}if(isNaN(B.pageIndex)||B.pageIndex<0){B.pageIndex=0}else{if(B.pageIndex>=B.pageCount){B.pageIndex=B.pageCount-1}}if(isNaN(B.pageButtonCount)||B.pageButtonCount<1){B.pageButtonCount=1}},_createNextPrev:function(B){var C=this.options;B&&C.pageIndex&&this.$ul.append(this._createPagerItem(false,C.firstPageText,1,C.firstPageClass));C.pageIndex&&this.$ul.append(this._createPagerItem(false,C.previousPageText,C.pageIndex,C.previousPageClass));C.pageIndex+1<C.pageCount&&this.$ul.append(this._createPagerItem(false,C.nextPageText,C.pageIndex+2,C.nextPageClass));B&&C.pageIndex+1<C.pageCount&&this.$ul.append(this._createPagerItem(false,C.lastPageText,C.pageCount,C.lastPageClass))},_createNumeric:function(C){var F=this.options,G=F.pageIndex+1,E=1,D=Math.min(F.pageCount,F.pageButtonCount),B;if(G>D){E=Math.floor(F.pageIndex/F.pageButtonCount)*F.pageButtonCount+1;D=E+F.pageButtonCount-1;D=Math.min(D,F.pageCount);if(D-E+1<F.pageButtonCount){E=Math.max(1,D-F.pageButtonCount+1)}}if(E!==1){C&&this.$ul.append(this._createPagerItem(false,F.firstPageText,1,F.firstPageClass));this.$ul.append(this._createPagerItem(false,"...",E-1,""))}for(B=E;B<=D;B++){this.$ul.append(this._createPagerItem(B===G,B.toString(),B,""))}if(F.pageCount>D){this.$ul.append(this._createPagerItem(false,"...",D+1,""));C&&this.$ul.append(this._createPagerItem(false,F.lastPageText,F.pageCount,F.lastPageClass))}},_createPagerItem:function(G,C,B,D){var E,F=A("<li />").addClass("ui-page ui-corner-all").attr({role:"tab","aria-label":C,title:C});if(G){F.addClass("ui-state-active").attr("aria-selected","true")}else{F.addClass("ui-state-default").hover(function(){A(this).removeClass("ui-state-default").addClass("ui-state-hover")},function(){A(this).removeClass("ui-state-hover").addClass("ui-state-default")}).bind("click."+this.widgetName,{newPageIndex:B-1},A.proxy(this._onClick,this))}if(G){E=A("<span />")}else{E=D?A("<span />").addClass("ui-icon "+D):A("<a/>").attr("href","#")}E.text(C);F.append(E);return F},_onClick:function(B){if(this.options.disabled){return false}var C={newPageIndex:B.data.newPageIndex,handled:false};if(this._trigger("pageIndexChanging",null,C)!==false){if(this.options.pageIndex!==C.newPageIndex){this.options.pageIndex=C.newPageIndex;!C.handled&&this._refresh();this._trigger("pageIndexChanged",null,{newPageIndex:C.newPageIndex})}}return false}})})(jQuery);(function(A){A.fn.extend({wijtextselection:function(){var J,B,L=this[0],M=this.val();if(arguments.length===0){var I,F,K,E;if(A.browser.msie){var D=document.selection;if(L.tagName.toLowerCase()!="textarea"){I=D.createRange().duplicate();I.moveEnd("character",M.length);K=I.text==""?M.length:M.lastIndexOf(I.text);I=D.createRange().duplicate();I.moveStart("character",-M.length);E=I.text.length}else{I=D.createRange();F=I.duplicate();F.moveToElementText(L);F.setEndPoint("EndToEnd",I);K=F.text.length-I.text.length,E=K+I.text.length}}else{K=L.selectionStart;E=L.selectionEnd}var H=M.substring(K,E);return{start:K,end:E,text:H,replace:function(N){return M.substring(0,K)+N+M.substring(E,M.length)}}}else{if(arguments.length===1){if(typeof arguments[0]==="object"&&typeof arguments[0].start==="number"&&typeof arguments[0].end==="number"){J=arguments[0].start;B=arguments[0].end}else{if(typeof arguments[0]==="string"){if((J=M.indexOf(arguments[0]))>-1){B=J+arguments[0].length}}else{if(Object.prototype.toString.call(arguments[0])==="[object RegExp]"){var G=arguments[0].exec(M);if(G!=null){J=G.index;B=J+G[0].length}}}}}else{if(arguments.length===2){if(typeof arguments[0]==="number"&&typeof arguments[1]==="number"){J=arguments[0];B=arguments[1]}}}}if(typeof J==="undefined"){J=0;B=M.length}if(A.browser.msie){var C=L.createTextRange();C.collapse(true);C.moveStart("character",J);C.moveEnd("character",B-J);C.select()}else{L.selectionStart=J;L.selectionEnd=B}}})})(jQuery);(function(D){var C,B,A;C=function(E){var F=this;F.data={};F.reader=null;F.proxy=null;F.items=[];F.loading=null;F.loaded=null;F._constructor(E)};window.wijdatasource=C;D.extend(C.prototype,{_constructor:function(E){D.extend(this,E)},load:function(H,F){var G=this,E=G.proxy;D.isFunction(G.loading)&&G.loading(G,H);if(E){E.request(G,G.loaded,H)}else{(G.items.length===0||F)&&this.read();D.isFunction(G.loaded)&&G.loaded(G,H)}},read:function(){var F=this,E=F.data;if(E&&F.reader){F.reader.read(F)}else{F.items=F.data}}});B=function(E){if(D.isArray(E)){this.fields=E}};window.wijarrayreader=B;D.extend(B.prototype,{read:function(E){if(D.isArray(E.data)){E.items=this._map(E.data)}else{E.items=[]}},_map:function(E){var G=this,F=[];if(G.fields===undefined||G.fields.length===0){D.extend(true,F,E);return F}else{D.each(E,function(J,H){var I={};D.each(G.fields,function(K,L){if(D.isFunction(L.mapping)){I[L.name]=L.mapping(H);return true}var N=L.mapping!==undefined?L.mapping:L.name,M=H[N];if(M===undefined){if(L.defaultValue!==undefined){M=L.defaultValue}else{M=H}}I[L.name]=M});F.push(I)})}return F}});A=function(E){this.options=E};window.wijhttpproxy=A;D.extend(A.prototype,{request:function(F,G,J){var E=this,H=D.extend({},this.options),I=H.success;H.success=function(K){D.isFunction(I)&&I(K);E._complete(K,F,G,H,J)};D.ajax(H)},_complete:function(F,G,H,E,I){G.data=E.key!==undefined?F[E.key]:F;G.read();D.isFunction(H)&&H(G,I)}})})(jQuery);(function(F){var H="wijmo-wijcombobox-input",E="ui-state-hover",I="ui-state-active",D="ui-state-focus",G="ui-corner-left",A="ui-corner-right",B="<div class='wijmo-wijcombobox-trigger ui-state-default ui-corner-right'><span class='ui-icon ui-icon-triangle-1-s'></span></div>",C="<label class='wijmo-wijcombobox-label ui-widget-content'></label>";F.widget("wijmo.wijcombobox",{options:{data:null,labelText:null,minLength:4,delay:300,showingAnimation:null,hidingAnimation:null,showTrigger:true,triggerPosition:"right",dropdownHeight:300,dropdownWidth:"auto",selectOnItemFocus:false,autoFilter:true,autoComplete:true,highlightMatching:true,dropDownListPosition:{},columns:[],selectionMode:"single",multipleSelectionSeparator:",",forceSelectionText:false,select:null,isEditable:true,selectedIndex:-1,selectedValue:null,open:null,close:null,selectElementWidthFix:6,search:null,changed:null,listOptions:null},_create:function(){var J=this;J.selectedItem=null;J.selectedItems=[];J._createDOMElements();J._bindInputEvents();J._initDropDownList();J.repaint();J._checkSelectIndex()},_checkSelectIndex:function(){var L=this,J,K=L.options;K.selectedIndex===-1&&K.selectedValue&&F.each(K.data,function(M){if(K.data[M].value===K.selectedValue){L.options.selectedIndex=M;return false}});J=K.selectedIndex;!L._usingRemoteData()&&(J>=0||F.isArray(J))&&L.search(null,"checkindex")},repaint:function(){var J=this;if(J.element.is(":visible")||J._comboDiv||J._select!==undefined&&J._input.is(":visible")){J._showTrigger();J.options.disabled&&J.disable();return true}return false},_bindInputEvents:function(){var M=this,L,N,J,K;L=M._input;N=M.options;L.bind("keydown.wijcombobox",function(P){if(N.disabled===true){return}J=P.keyCode;K=F.ui.keyCode;switch(J){case K.UP:M._move("previous",P);P.preventDefault();break;case K.DOWN:M._move("next",P);P.preventDefault();break;case K.ENTER:if(M.menu.active){P.preventDefault();M.menu.select(P)}break;case K.TAB:L.trigger("wijcomboblur");if(!M.menu.active||N.selectionMode==="multiple"&&K.TAB===J){return}M.menu.select(P);var O=L.val().length;M._selectText(O,O,L);break;case K.ESCAPE:M.close(P);break;case K.LEFT:case K.RIGHT:case K.SHIFT:case K.CONTROL:case K.HOME:case K.END:case K.DELETE:case K.PAGE_UP:case K.PAGE_DOWN:break;case 18:L.trigger("wijcomboblur");break;default:window.clearTimeout(M.searching);if(N.isEditable===false){if(M._cacheKey===undefined){M._cacheKey=""}M._cacheKey+=String.fromCharCode(J)}M.searching=window.setTimeout(function(){var Q;if(N.isEditable===false){Q=M._cacheKey;M._cacheKey=undefined}else{Q=L.val()}M.search(Q,P)},N.delay)}}).bind("wijcomboblur.wijcombobox",function(O){window.clearTimeout(M.searching);M._addInputFocus(false,D);M.closing=window.setTimeout(function(){M.close(O,true)},150)}).bind("focus.wijcombobox",function(){M._addInputFocus(true,D)}).bind("blur.wijcombobox",function(){!M.menu.element.is(":visible")&&L.trigger("wijcomboblur");M._change()})},_addInputFocus:function(O,K){var M=this,J,L,N;J=M._input.parent();L=O?"addClass":"removeClass";N=M._triggerArrow;J[L](K);N!==undefined&&N[L](K)},_renderColumnsHeader:function(K){var J=F("<ul class='wijmo-wijcombobox-rowheader'></ul>");F.each(this.options.columns,function(M,N){var L=F("<li class='wijmo-wijcombobox-cell ui-widget-header'></li>");L.html(N.name);N.width!==undefined&&L.width(N.width);L.appendTo(J)});K.append(J)},_hasSameValueText:function(K,J){return K.label===J.label&&K.value===J.value},_initDropDownList:function(){var M=this,J,K,N,O,L;J=M.element[0].ownerDocument;if(!M._comboDiv){K=F("<div class='wijmo-wijcombobox-list'></div>")}else{K=M._oriList}N=M.options;if(N.columns.length>0){K.addClass("wijmo-wijcombobox-multicolumn");O=F("<div class='wijmo-wijsuperpanel-header ui-state-default'></div>");M._renderColumnsHeader(O);K.append(O)}L={keepHightlightOnMouseLeave:true,selectionMode:N.selectionMode,addHoverItemClass:N.columns.length===0,focus:function(Q,P){var R=P;N.selectOnItemFocus&&M.menu.select(null,{notCloseAfterSelected:true});if(N.columns.length>0){R.element.prev().addClass("wijmo-wijcombobox-active-prev");R.element.find(".wijmo-wijcombobox-row>.wijmo-wijcombobox-cell").addClass("ui-state-hover")}},selected:function(Q,W){window.clearTimeout(M.closing);var V=N.selectionMode,T,R,P,U;T=W.item;if(M._trigger("select",Q,T)){if(V==="single"){if(!M._usingRemoteData()){R=F.inArray(T,M.items);if(R===undefined){R=W.selectedIndex}if(R!==N.selectedIndex){M._input.val(T.label);U=M.selectedItem;if(U!==null){U.selected=false}M.selectedItem=T;P=N.selectedIndex;N.selectedIndex=R;if(M._select!==undefined){M._select[0].selectedIndex=N.selectedIndex;M._select.trigger("change")}M._trigger("changed",null,{oldItem:U,selectedItem:M.selectedItem,newIndex:N.selectedIndex,oldIndex:P})}}else{if(M.selectedItem===null||!M._hasSameValueText(T,M.selectedItem)){M._input.val(T.label);M.selectedItem=T;M._trigger("changed",null,{selectedItem:T})}}}else{if(!M._usingRemoteData()){M.selectedItems=W.selectedItems;M._selectedItemsToInputVal(M.selectedItems);M._trigger("changed",null,{selectedItem:T,selectedItems:M.selectedItems})}}}if((W.data===undefined||!W.data.notCloseAfterSelected)&&V==="single"){M.close(Q);M._input.focus()}},blur:function(P,Q){var R=Q.element;if(N.columns.length>0){R.find(".wijmo-wijcombobox-row>.wijmo-wijcombobox-cell").removeClass("ui-state-hover");R.prev().removeClass("wijmo-wijcombobox-active-prev")}},itemRendering:function(P,T){var Q=T,R;R="";if(Q.isSeparator){R+=" wijmo-wijcombobox-separator"}if(Q.selected){R+=" wijmo-wijcombobox-selecteditem"}R.length>0&&Q.element.addClass(R);if(M._keypress&&N.isEditable&&N.columns.length===0&&N.highlightMatching&&F.trim(M._input.val()).length>0&&Q.label){Q.text=Q.label.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+M._escapeRegex(M._input.val())+")(?![^<>]*>)(?![^&;]+;)","gi"),"<span class='ui-priority-primary'>$1</span>")}else{Q.text=undefined}},itemRendered:function(U,Q){var R=Q,T,P;if(R.cells===undefined){return}T=R.element;T.empty();P=F("<ul class='wijmo-wijcombobox-row'></ul>");F.each(R.cells,function(V,X){var W=F("<li class='wijmo-wijcombobox-cell ui-state-default'></li>");W.append(X);W.attr("title",X);P.append(W)});T.append(P)},superPanelOptions:{resized:function(){var P=M.menu,Q=P.element;N.dropdownWidth=Q.outerWidth();N.dropdownHeight=Q.outerHeight();M._positionList();M.menu.refreshSuperPanel()}}};L=F.extend(true,L,N.listOptions);M.menu=K.appendTo("body",J).wijlist(L).zIndex(M._input.zIndex()+1).css({top:0,left:0}).hide().data("wijlist");M._menuUL=M.menu.ul},_getSelectedItemsText:function(K){var L="",M,J;M=this;J=M.options.multipleSelectionSeparator;M.selectedItems=K;F.each(K,function(N,O){L+=O.label+J});if(L.length>0){L=L.substr(0,L.lastIndexOf(J))}return L},_selectedItemsToInputVal:function(J){var K=this;K._input.val(K._getSelectedItemsText(J))},_createDOMElements:function(){var M=this,L,K,N,J;J=F("<div class='wijmo-wijcombobox-wrapper ui-state-default ui-corner-all'></div>");K=M.element;if(K.is("select")){L=F("<div role='combobox' class='wijmo-wijcombobox ui-widget ui-helper-clearfix'></div>");L.append(J);M._comboElement=L;M._select=K;K.addClass("ui-widget");N=M._input=F("<input role='textbox' aria-autocomplete='list' aria-haspopup='true' />").insertAfter(K);M.options.data=M._convertSelectOptions()}else{if(K.is("div")&&F(K.children()[0]).is("input[type='text']")&&F(K.children()[1]).is("div")){M._comboElement=M._comboDiv=L=K;M._oriList=F(K.children()[1]);N=M._input=F(K.children()[0]);J.prependTo(L).append(N);K.addClass("wijmo-wijcombobox ui-widget ui-helper-clearfix");K.attr("role","combobox")}else{L=F("<div role='combobox' class='wijmo-wijcombobox ui-widget ui-helper-clearfix'></div>");L.append(J);M._comboElement=L;N=M._input=K}}if(!M._comboDiv){L.insertBefore(N);N.width(N.width());L.children(".wijmo-wijcombobox-wrapper").append(N)}N.attr({autocomplete:"off",role:"textbox","aria-wijcombobox":"list","aria-haspopup":"true"}).addClass(H);M._oldWidth=K.css("width");M.options.isEditable===false&&N.attr("readonly","readonly");L.bind("mouseenter",function(){M._addInputFocus(true,E)}).bind("mouseleave",function(){M._addInputFocus(false,E)})},_convertSelectOptions:function(){var J=[],K,L;K=this;L=K._select.get(0).options;F.each(L,function(M,N){J.push({label:N.text,value:N.value})});K.options.selectedIndex=K._select[0].selectedIndex;return J},getComboElement:function(){return this._comboElement},_showTrigger:function(){var W=this,T,O,M,L,J,N=0,V,P,R,U,K,Q;T=W.options;O=W._input;M=O.parent();L=W._comboElement;V=W._triggerArrow;P=W._label;if(W._select!==undefined){if(!F.browser.msie){N=W._select.width()}else{J=W._select.clone();W._select.after(J);N=J.width();J.remove()}O.width(N+(T.data.length>20?T.selectElementWidthFix:0));W._select.hide()}O.css("margin-left","");O.css("margin-right","");L.width(M[0].offsetWidth);if(T.labelText!==null){P=W._label=F(C);M.append(P.html(T.labelText))}else{if(P!==undefined){P.remove();W._label=undefined}}if(T.showTrigger){O.removeClass("ui-corner-all");if(V===undefined){V=W._triggerArrow=F(B);L.append(V);V.bind("mouseover.triggerevent",W,function(X){if(T.disabled===true){return}var Y=F(X.currentTarget);Y.addClass(E)}).bind("mousedown.triggerevent",W,function(Y){if(T.disabled===true){return}var X=F(Y.currentTarget);X.addClass(I)}).bind("mouseup.triggerevent",W,function(Y){var X=F(Y.currentTarget);X.removeClass(I)}).bind("click.triggerevent",W,function(){if(T.disabled===true){return}W._triggerClick()})}if(T.triggerPosition==="right"){V.css({left:"",right:"0px"});V.removeClass(G);V.addClass(A)}else{V.css({right:"",left:"0px"});V.removeClass(A);V.addClass(G)}V.setOutHeight(L.innerHeight());R=V.find("span");R.css("margin-left",(V.innerWidth()-R[0].offsetWidth)/2);R.css("margin-top",(V.innerHeight()-R[0].offsetHeight)/2)}else{if(V!==undefined){V.unbind(".triggerevent");V.remove();W._triggerArrow=undefined}O.removeClass("ui-corner-left");O.removeClass("ui-corner-right");O.addClass("ui-corner-all")}U=K=Q=0;if(P!==undefined){K+=P[0].offsetWidth}if(V!==undefined){Q=V[0].offsetWidth}U=K+Q;O.setOutWidth(M.innerWidth()-U);U=U===0?"":U;if(T.triggerPosition==="right"){O.css("margin-left","");O.css("margin-right",U);if(P!==undefined){P.css("left","");P.css("right",Q)}}else{O.css("margin-right","");O.css("margin-left",U);if(P!==undefined){P.css("right","");P.css("left",Q)}}},_triggerClick:function(K){var L=this,J="";window.clearTimeout(L.closing);if(L.menu.element.is(":visible")){L.close()}else{if(L._usingRemoteData()){J=L._input.val()}L.search(J,K)}},destroy:function(){var J=this,K=J.element;J.options.isEditable===false&&K.removeAttr("readonly");if(J._select!==undefined){J._select.removeClass("ui-widget");J._select.show();J._input.remove()}else{if(J._comboDiv){J._comboDiv.removeClass("wijmo-wijcombobox ui-widget ui-helper-clearfix");J._comboDiv.removeAttr("role");J._input.insertBefore(J._comboDiv);J._comboDiv.children(".wijmo-wijcombobox-wrapper").remove()}else{K.css("width",J._oldWidth);K.removeClass(H);K.removeAttr("autocomplete").removeAttr("role").removeAttr("aria-wijcombobox").removeAttr("aria-haspopup");K.insertBefore(J._comboElement);K.css("padding","")}}J._comboElement.remove();J.menu.destroy();J.menu.element.remove();F.Widget.prototype.destroy.call(J)},_setOption:function(O,K){var M=this,J,L,N;J=M._comboElement;L=M.element;F.Widget.prototype._setOption.apply(M,arguments);if(O==="disabled"){if(K){J.addClass("wijmo-wijcombobox-disabled ui-state-disabled");L.attr("disabled","disabled");M._comboDiv&&M._input.addClass("wijmo-wijcombobox-disabled ui-state-disabled").attr("disabled","disabled");M.close()}else{J.removeClass("wijmo-wijcombobox-disabled ui-state-disabled");L.removeAttr("disabled");M._comboDiv&&M._input.removeClass("wijmo-wijcombobox-disabled ui-state-disabled").removeAttr("disabled")}}else{if(O==="isEditable"){if(K){L.attr("readonly","readonly")}else{L.removeAttr("readonly")}}else{if(O==="data"){M.selectedItem=null;M.options.selectedIndex=-1;M._input.val("")}else{if(O==="selectedIndex"){if(K>-1){if(M.selectedItem!==null){M.selectedItem.selected=false}N=M.items;if(!N){N=M.options.data}if(N&&N[K]!==null){M.selectedItem=N[K];M.selectedItem.selected=true;M._input.val(M.selectedItem.label)}}}else{if(O==="selectedValue"){if(K){if(M.selectedItem!==null){M.selectedItem.selected=false}N=M.items;if(!N){N=M.options.data}F.each(N,function(P){if(N[P].value===K){M.selectedItem=N[P];M.selectedItem.selected=true;M._input.val(M.selectedItem.label);return false}})}}}}}}},search:function(J,K){var M=this,O,N,L;O=M.options;N=O.data;window.clearTimeout(M.closing);L={value:J,e:K,self:M};if(N!==null||M._comboDiv){if(K!=="checkindex"){if(M._trigger("search",K,{datasrc:N,term:L})===false){return}}if(F.isArray(N)||M._comboDiv){M._hideShowArrow(false);M._onListLoaded(N,L)}else{if(M._usingRemoteData()&&K!==undefined&&J.length<O.minLength){return}M._hideShowArrow(false);N.loaded=M._onListLoaded;N.load(L)}}},_usingRemoteData:function(){var J=this.options.data,K=false;if(!F.isArray(J)&&J!==null&&J.proxy!==null){K=true}return K},_hideShowArrow:function(J){var L=this,K,M;K=L.element;M=L._triggerArrow;M!==undefined&&M[J?"show":"hide"]();K[J?"removeClass":"addClass"]("wijmo-wijcombobox-loading")},_onListLoaded:function(Q,M){var O=M.self,L,N,K,R,P,J;L=O._input;N=O.options;K=M.value;if(Q===null){R=null}else{R=F.isArray(Q)?Q:Q.items}O.items=R;if(M.e==="checkindex"){P=N.selectedIndex;if(N.selectionMode==="multiple"&&F.isArray(P)){F.each(P,function(T,U){var V=R[U];V.selected=true;O.selectedItems.push(V)});O._selectedItemsToInputVal(O.selectedItems)}else{R[P].selected=true;O.selectedItem=R[P];L.val(O.selectedItem.label)}O._hideShowArrow(true);return}if(!O._usingRemoteData()&&R){O._filter(R,K);J=F.grep(R,function(T){return !N.autoFilter||T.match})}else{O._topHit=null;J=R}if(J&&J.length>0||O._comboDiv){O._openlist(J,M);O._trigger("open");O._addInputFocus(true,D)}else{O.close(null,true)}O._hideShowArrow(true)},close:function(J,L){var M=this,K,N,O;K=M.menu;M._dropDownHeight=K.element.outerHeight();M._dropDownWidth=K.element.outerWidth();window.clearTimeout(M.closing);if(K.element.is(":visible")&&!K.element.is(":animated")&&!K.element.parent().is(":animated")){M._trigger("close",J);K.deactivate();N=M.options.hidingAnimation;if(N&&(N.effect==="size"||N.animated==="size")){N.options=F.extend({to:{width:0,height:0}},N.options)}O=K.element.attr("style");if(L!==true&&N){K.element.hide(N.effect||N.animated,N.options,N.speed||N.duration,function(){K.element.removeAttr("style").attr("style",O).hide();N.callback&&N.callback.apply(this,arguments)})}else{K.element.hide()}M._addInputFocus(false,D);F(document).unbind("click",M.closeOnClick)}},_change:function(){var O=this,L,P,K,M,J,N;L=O.options;P=L.forceSelectionText;K=L.selectionMode;M=O._input;J=M.val();N=O.selectedItem;if(P){if(K==="single"){if(N!==null){N.label!==J&&M.val(N.label)}else{M.val("")}}}K==="multiple"&&O._selectedItemsToInputVal(O.selectedItems)},_openlist:function(R,K){var V=K.self,X=K.e,P,O,W,a,Q,J=2,N=0,Y,M,L,Z,T,U;P=V._keypress=!!X;a=V.options;W=V.menu.element;W.zIndex(V.element.zIndex()+100);if(V._comboDiv){V.menu.setTemplateItems(R)}else{V.menu.setItems(R)}V.menu.renderList();V.menu.element.show();if(a.dropdownWidth==="auto"){O=V._comboElement.outerWidth()}else{O=a.dropdownWidth}Q=W.css("padding");W.css("padding","0px");W.setOutWidth(O);W.css("padding",Q);Y=a.dropdownHeight;if(V._select!==undefined){Y=20*V._menuUL.children(".wijmo-wijlist-item:first").outerHeight()}if(W.children(".wijmo-wijsuperpanel-header")){N=W.children(".wijmo-wijsuperpanel-header").outerHeight()}L=Math.min(V._menuUL.outerHeight()+J+N,Y);W.setOutHeight(L);V.menu.refreshSuperPanel();V._positionList();!P&&V.selectedItem!==undefined&&V.menu.activate(null,V.selectedItem,true);if(P&&X.keyCode!==F.ui.keyCode.BACKSPACE){if(a.isEditable){V._runAutoComplete()}else{V.menu.activate(null,V._topHit,true)}}else{Z=V.options.showingAnimation;if(a.showingAnimation!==null&&!(X!==undefined&&X.keyCode===F.ui.keyCode.BACKSPACE)){V.menu.element.hide();U={from:{width:0,height:0},to:{width:V._dropDownWidth||W.outerWidth(),height:V._dropDownHeight||W.outerHeight()}};if(Z&&(Z.effect==="size"||Z.animated==="size")){Z.options=F.extend(U,Z.options)}T=W.attr("style");W.show(Z.effect||Z.animated,Z.options,Z.speed||Z.duration,function(){W.removeAttr("style").attr("style",T).show();Z.callback&&Z.callback.apply(this,arguments);F.browser.msie&&W.css("filter","")})}}if(!V.hasOwnProperty("closeOnClick")){M=V.closeOnClick;V.closeOnClick=function(b){return M(b)}}F(document).bind("click",V,V.closeOnClick)},closeOnClick:function(L){var K=L.data,J=L.target;if(!F.contains(K._comboElement[0],J)&&!F.contains(K.menu.element[0],J)){K.close();F(".wijmo-wijcombobox-wrapper",K._comboElement[0]).removeClass("ui-state-hover").removeClass("ui-state-focus");F(".wijmo-wijcombobox-trigger",K._comboElement[0]).removeClass("ui-state-hover").removeClass("ui-state-focus")}},_positionList:function(){var L=this,J,K;J=L.options.dropDownListPosition;K={my:"left top",at:"left bottom",of:L._comboElement,collision:"none"};K=F.extend(K,J);L.menu.element.position(K)},_runAutoComplete:function(){var O=this,N,M,L,K,P,J;N=O._input;M=O._topHit;if(!O.options.autoComplete||M===null){return}O.menu.activate(null,M,true);L=N.val();K=M.label;N.val(K);P=L.length;J=K.length;O._selectText(P,J,N)},_selectText:function(J,K,M){var O=M.val(),N=M.get(0),L;if(O.length>0){if(N.setSelectionRange!==undefined){N.setSelectionRange(J,K)}else{if(N.createTextRange!==undefined){L=N.createTextRange();L.moveStart("character",J);L.moveEnd("character",K-O.length);L.select()}}}},_move:function(K,J){if(!this.menu.element.is(":visible")){this.search("",J);return}if(this.menu.first()&&/^previous/.test(K)||this.menu.last()&&/^next/.test(K)){return}this.menu[K](J)},_escapeRegex:function(J){return J===undefined?J:J.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1")},_filter:function(M,N){var J=this._escapeRegex(N),K,L=null;if(!M){return null}K=new RegExp(J,"i");F.each(M,function(Q,P){if(J===undefined||J.length===0){P.match=true;return}var O=K.exec(P.label);if(O===null){P.match=false}else{if(L===null&&O.index===0){L=P}P.match=O.index>=0}});this._topHit=L;return M}})})(jQuery);(function(A){window.wijinputcore={options:{culture:"",invalidClass:"ui-state-error",nullText:"",showNullText:false,hideEnter:false,disableUserInput:false,buttonAlign:"right",showTrigger:false,showSpinner:false,comboItems:undefined,comboWidth:undefined,comboHeight:undefined,initializing:null,initialized:null,triggerMouseDown:null,triggerMouseUp:null,textChanged:null,invalidInput:null},_create:function(){if(this.element[0].tagName.toLowerCase()!=="input"){throw"Target element is not a INPUT"}this.element.data("widgetName",this.widgetName);A.effects.save(this.element,["width","height"]);var B=this.element.width();this.element.wrap("<div class='wijmo-wijinput ui-widget ui-helper-clearfix ui-state-default ui-corner-all'><span class='wijmo-wijinput-wrapper'></span></div>");this.element.addClass("wijmo-wijinput-input ui-corner-all").attr({role:"textbox","aria-multiline":false});this.wrapper=this.element.parent();this.outerDiv=this.wrapper.parent();this.outerDiv.width(B);if(this.options.showTrigger){this.triggerBtn=A("<div class='wijmo-wijinput-trigger ui-state-default'><span class='ui-icon ui-icon-triangle-1-s'></span></div>").addClass(this.options.buttonAlign==="left"?"ui-corner-left":"ui-corner-right").attr("role","button").appendTo(this.outerDiv);this.element.attr({role:"combobox","aria-expanded":false})}if(this.options.showSpinner){this.spinner=A("<div class='wijmo-wijinput-spinner wijmo-wijinput-button'></div>");this.spinUp=A("<div class='ui-state-default wijmo-wijinput-spinup'><span class='ui-icon ui-icon-triangle-1-n'></span></div>").attr("role","button");this.spinDown=A("<div class='ui-state-default wijmo-wijinput-spindown'><span class='ui-icon ui-icon-triangle-1-s'></span></div>").attr("role","button");if(!this.options.showTrigger){this.spinUp.addClass(this.options.buttonAlign==="left"?"ui-corner-tl":"ui-corner-tr");this.spinDown.addClass(this.options.buttonAlign==="left"?"ui-corner-bl":"ui-corner-br")}this.spinner.append(this.spinUp).append(this.spinDown).appendTo(this.outerDiv);this.element.attr("role","spinner")}if(this.options.showTrigger&&this.options.showSpinner){this.outerDiv.addClass(this.options.buttonAlign==="left"?"ui-input-spinner-trigger-left":"ui-input-spinner-trigger-right")}else{this.options.showTrigger&&this.outerDiv.addClass(this.options.buttonAlign==="left"?"ui-input-trigger-left":"ui-input-trigger-right");this.options.showSpinner&&this.outerDiv.addClass(this.options.buttonAlign==="left"?"ui-input-spinner-left":"ui-input-spinner-right")}this.element.setOutWidth(this.outerDiv.width());this._initialize()},_createTextProvider:function(){return undefined},_beginUpdate:function(){},_endUpdate:function(){},_onTriggerClicked:function(){},_initialize:function(){this.element.data("initializing",true);this._trigger("initializing");this.element.data("preText",this.element.val());this.element.data("elementValue",this.element.val());this.element.data("errorstate",false);this.element.data("breakSpinner",true);this.element.data("prevCursorPos",-1);this.element.data("simulating",false);this._createTextProvider();this._beginUpdate();var E=function(G){return(!G.which?G.button:G.which)===1},B=this.options,D=this;this.triggerBtn&&!B.disabled&&this.triggerBtn.bind({mouseover:function(){D._addState("hover",A(this))},mouseout:function(){D._removeState("hover",A(this))},mousedown:function(G){if(!E(G)){return}D._addState("active",A(this));D._trigger("triggerMouseDown")},mouseup:function(G){if(!E(G)){return}D._stopEvent(G);D._stopSpin();D._removeState("active",A(this));D._trigger("triggerMouseUp");D._onTriggerClicked();D._trySetFocus()}});var C=function(G){if(!E(G)){return}D._trySetFocus();D.element.data("breakSpinner",false);D._addState("active",A(this));D._doSpin(A(G.currentTarget).hasClass("wijmo-wijinput-spinup"),true)},F=function(G){if(!E(G)){return}D._stopSpin();D._removeState("active",A(this))};this.spinUp&&!B.disabled&&this.spinUp.bind({mouseover:function(){D._addState("hover",A(this))},mouseout:function(){D._removeState("hover",A(this))},mousedown:C,mouseup:F});this.spinDown&&!B.disabled&&this.spinDown.bind({mouseover:function(){D._addState("hover",A(this))},mouseout:function(){D._removeState("hover",A(this))},mousedown:C,mouseup:F});this.element.bind({"focus.wijinput":A.proxy(this._onFocus,this),"blur.wijinput":A.proxy(this._onBlur,this),"mouseup.wijinput":A.proxy(this._onMouseUp,this),"keypress.wijinput":A.proxy(this._onKeyPress,this),"keydown.wijinput":A.proxy(this._onKeyDown,this),"keyup.wijinput":A.proxy(this._onKeyUp,this),"change.wijinput":A.proxy(this._onChange,this),"paste.wijinput":A.proxy(this._onPaste,this),"drop.wijinput":A.proxy(this._onDrop,this)});this.element.bind("propertychange.wijinput input.wijinput",A.proxy(this._onInput,this));this.element.data("initializing",false);this._resetData();this._endUpdate();this._updateText();this.options.disabled&&this.disable();this._trigger("initialized")},_init:function(){},_setOption:function(C,B){A.Widget.prototype._setOption.apply(this,arguments);switch(C){case"buttonAlign":case"showTrigger":case"showSpinner":this._destroy();this._create();break;case"showNullText":this._updateText();break;case"disabled":this.element.attr("disabled",B);this.element[B?"addClass":"removeClass"](this.namespace+"-state-disabled");this.triggerBtn!==undefined&&this.triggerBtn[B?"addClass":"removeClass"](this.namespace+"-state-disabled");this.spinup!==undefined&&this.spinup[B?"addClass":"removeClass"](this.namespace+"-state-disabled");this.spindown!==undefined&&this.spindown[B?"addClass":"removeClass"](this.namespace+"-state-disabled")}},destroy:function(){A.Widget.prototype.destroy.apply(this,arguments);this._destroy()},_destroy:function(){this.wrapper=undefined;this.outerDiv=undefined;this.element.unbind(".wijinput");this.element.removeData("errorstate").removeData("breakSpinner").removeData("prevCursorPos").removeData("simulating").removeData("isPassword").removeClass("wijmo-wijinput-input").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow").removeAttr("aria-expanded");this.element.parent().replaceWith(this.element);this.element.parent().replaceWith(this.element);A.effects.restore(this.element,["width","height"])},widget:function(){return this.outerDiv},_getCulture:function(B){return Globalize.findClosestCulture(B||this.options.culture)},_addState:function(B,C){C.is(":not(.ui-state-disabled)")&&C.addClass("ui-state-"+B)},_removeState:function(C,B){B.removeClass("ui-state-"+C)},_isInitialized:function(){return !this.element.data("initializing")},_setData:function(B){this.setText(B)},_resetData:function(){},_validateData:function(){},getText:function(){return !this._isInitialized()?this.element.val():this._textProvider.toString(true,false,false)},setText:function(B){if(!this._isInitialized()){this.element.val(B)}else{this._textProvider.set(B);this._updateText()}},getPostValue:function(){return !this._isInitialized()?this.element.val():this._textProvider.toString(true,false,true)},selectText:function(C,B){if(this.element.is(":disabled")){return}this.element.wijtextselection(C,B)},focus:function(){if(this.element.is(":disabled")){return}this.element.get(0).focus()},isFocused:function(){return this.outerDiv.hasClass("ui-state-focus")},_raiseTextChanged:function(){var B=this.element.val();if(this.element.data("preText")!==B){this._trigger("textChanged",null,{text:B});this.element.data("preText",B)}},_raiseDataChanged:function(){},_allowEdit:function(){return !(this.element.attr("readOnly")&&this.element.is(":disabled"))},_updateText:function(C){if(!this._isInitialized()){return}C=!!C;var B=this.element.wijtextselection();this.element.val(this._textProvider.toString());this.options.text=this._textProvider.toString(true,false,false);if(this.element.is(":disabled")){return}C&&this.selectText(B.start,B.end);this.element.data("prevCursorPos",B.start);this._raiseTextChanged();this._raiseDataChanged()},_trySetFocus:function(){if(!this.isFocused()){try{!this.options.disableUserInput&&this.element.focus()}catch(B){}}},_deleteSelText:function(B){if(!this._allowEdit()){return}var D=this.element.wijtextselection();B=!!B;if(B){if(D.end===D.start){if(D.end>=1){D.end=D.end-1;D.start=D.start-1}else{return}}else{D.end=D.end-1}}else{D.end=D.end-1}if(D.end<D.start){D.end=D.start}var C=new wijInputResult;this._textProvider.removeAt(D.start,D.end,C);this._updateText();this.selectText(C.testPosition,C.testPosition)},_fireIvalidInputEvent:function(C){if(this._trigger("invalidInput",null,{widget:this,"char":C})===true){return}if(!this.element.data("errorstate")){var B=this.options.invalidClass||"ui-state-error";this.element.data("errorstate",true);var D=this;window.setTimeout(function(){D.outerDiv.removeClass(B);D.element.data("errorstate",false)},100);this.outerDiv.addClass(B)}},_onInput:function(){if(!this._isSimulating()||!this.element.data("ime")){return}this._simulate()},_keyDownPreview:function(){return false},_beforeSimulate:function(B){if(!this.element.data("lastSelection")){this.element.data("lastSelection",this.element.wijtextselection());this.element.data("lastValue",this.element.val())}this.element.data("ime",B);this.element.data("simulating",true)},_isSimulating:function(){return this.element.data("simulating")},_simulate:function(B){var F=this,D=null;if(typeof B==="string"){D=B}else{var G=this.element.wijtextselection(),E=this.element.data("lastSelection").start,C=G.end;if(C>=E){D=this.element.val().substring(E,C)}}D&&window.setTimeout(function(){if(!F.element.data("lastValue")){return}F.element.val(F.element.data("lastValue"));var I=F.element.data("lastSelection");F.element.wijtextselection(I);F.element.data("batchKeyPress",true);F.element.data("simulating",false);var J=jQuery.Event("keypress");J.ctrlKey=J.altKey=false;for(var H=0;H<D.length;H++){J.which=J.charCode=J.keyCode=D.charCodeAt(H);F._onKeyPress(J)}F.element.data("batchKeyPress",false);F._endSimulate()},1)},_endSimulate:function(){this.element.removeData("ime");this.element.removeData("lastSelection");this.element.removeData("lastValue")},_onKeyDown:function(B){this.element.data("prevCursorPos",-1);if(!this._isInitialized()){return}var C=this._getKeyCode(B);if(C===229){this._beforeSimulate(true);return}this._endSimulate();if(this.options.disableUserInput){this._stopEvent(B);return}if(this._keyDownPreview(B)){this._stopEvent(B);return}switch(C){case A.ui.keyCode.UP:this._doSpin(true,false);this._stopEvent(B);return;case A.ui.keyCode.DOWN:this._doSpin(false,false);this._stopEvent(B);return}if(B.ctrlKey){switch(C){case A.ui.keyCode.INSERT:case 67:return}}if(B.ctrlKey||B.altKey){return}switch(C){case 112:case 113:case 114:case 115:case 116:case 117:case A.ui.keyCode.TAB:case A.ui.keyCode.CAPSLOCK:case A.ui.keyCode.END:case A.ui.keyCode.HOME:case A.ui.keyCode.CTRL:case A.ui.keyCode.SHIFT:return;case A.ui.keyCode.BACKSPACE:this._deleteSelText(true);this._stopEvent(B);return;case A.ui.keyCode.DELETE:this._deleteSelText(false);this._stopEvent(B);return;case A.ui.keyCode.ENTER:if(!this.options.hideEnter){return}break;case A.ui.keyCode.ESCAPE:this._stopEvent(B);window.setTimeout(A.proxy(this._resetData,this),1);return;case A.ui.keyCode.PAGE_UP:case A.ui.keyCode.PAGE_DOWN:case A.ui.keyCode.ALT:this._stopEvent(B);return}},_onKeyUp:function(B){if(this._isSimulating()){return}var C=this._getKeyCode(B);if(!this._isInitialized()){return}if(C===A.ui.keyCode.ENTER){return}if(C===A.ui.keyCode.ESCAPE){return}if(this.options.disableUserInput){this._raiseTextChanged();this._raiseDataChanged();return}this._stopEvent(B)},_getKeyCode:function(C){var B=window.navigator.userAgent;return(B.indexOf("iPod")!==-1||B.indexOf("iPhone")!==-1)&&C.which===127?8:C.keyCode||C.which},_keyPressPreview:function(){return false},_onKeyPress:function(E){if(this._isSimulating()){return}this.element.data("prevCursorPos",-1);if(this.options.disableUserInput){return}if(!this._allowEdit()){return}if(E.ctrlKey&&E.keyCode==119){this._onPaste(E);return}if(E.which===0){return}var C=E.keyCode||E.which;if(C===A.ui.keyCode.BACKSPACE){this._stopEvent(E);return}if(E.ctrlKey||E.altKey){if(C!==A.ui.keyCode.SPACE){return}}if(C===A.ui.keyCode.ENTER&&!this.options.hideEnter){return true}if(this._keyPressPreview(E)){return}var F=this.element.wijtextselection(),G=String.fromCharCode(C);F.start<F.end&&this._textProvider.removeAt(F.start,F.end-1,new wijInputResult);var D=new wijInputResult,B=this._textProvider.insertAt(G,F.start,D);if(B){this._updateText();this.selectText(D.testPosition+1,D.testPosition+1)}else{this._fireIvalidInputEvent(G)}!this.element.data("batchKeyPress")&&this._stopEvent(E)},_isNullText:function(){return this.options.showNullText&&this.element.val()===this.options.nullText},_doFocus:function(){var D=this.element.wijtextselection(),C=D.start;this._updateText();var B=this.element.val();if(B.length===C){C=0}!A.browser.safari&&this.selectText(C,C)},_afterFocused:function(){this._isNullText()&&this._doFocus()},_onFocus:function(){if(this.options.disableUserInput){return}this._addState("focus",this.outerDiv);if(!this.element.data("breakSpinner")){return}if(!this._isInitialized()){return}if(!this._allowEdit()){return}!this.element.data("focusNotCalledFirstTime")&&this.element.data("focusNotCalledFirstTime",+new Date);this._afterFocused()},_onBlur:function(){if(this.options.disableUserInput){return}if(this._isComboListVisible()){return}var C=this.isFocused();this._removeState("focus",this.outerDiv);if(!this.element.data("breakSpinner")){this.element.get(0).focus();var D=this.element.data("prevCursorPos");D!==undefined&&D!==-1&&this.selectText(D,D);return}if(!this._isInitialized()){return}if(!C){return}this.element.data("value",this.element.val());var B=this;window.setTimeout(function(){B._onChange();B._updateText();B._validateData()},100)},_onMouseUp:function(){if(!this._isInitialized()){return}if(this.element.is(":disabled")){return}var B=this.element.wijtextselection();this.element.data("prevCursorPos",B.start)},_onChange:function(){if(!this.element){return}var C=this.element.val(),B=this.getText();B!==C&&this.setText(C)},_onPaste:function(){this._beforeSimulate();var B=this;window.setTimeout(function(){B._simulate()},1)},_onDrop:function(C){this._beforeSimulate();if(C.originalEvent&&C.originalEvent.dataTransfer){var B=C.originalEvent.dataTransfer.getData("Text");B&&this._simulate(B)}},_stopEvent:function(B){B.stopPropagation();B.preventDefault()},_calcSpinInterval:function(){this._repeatingCount++;return this._repeatingCount>10?50:this._repeatingCount>4?100:this._repeatingCount>2?200:400},_doSpin:function(){},_stopSpin:function(){this.element.data("breakSpinner",true);this._repeatingCount=0},_hasComboItems:function(){return !!this.options.comboItems&&this.options.comboItems.length},_isComboListVisible:function(){return !this._comboDiv?false:this._comboDiv.wijpopup("isVisible")},_popupComboList:function(){if(!this._hasComboItems()){return}if(!this._allowEdit()){return}if(this._isComboListVisible()){this._comboDiv.wijpopup("hide");return}var B=this;if(this._comboDiv===undefined){this._comboDiv=A("<div></div>").appendTo(document.body).width(this.element.width()).height(this.options.comboHeight||180).css("position","absolute");var C=this._normalize(this.options.comboItems);this._comboDiv.wijlist({autoSize:true,maxItemsCount:5,selected:function(D,E){B._setData(E.item.value);B._comboDiv.wijpopup("hide");B._trySetFocus()}});this._comboDiv.wijlist("setItems",C);this._comboDiv.wijlist("renderList");this._comboDiv.wijlist("refreshSuperPanel")}this._comboDiv.wijpopup({autoHide:true});this.outerDiv.attr("aria-expanded",true);this._comboDiv.wijpopup("show",{of:this.outerDiv,offset:"0 4",hidden:function(){B.outerDiv.attr("aria-expanded",false)}})},_normalize:function(B){return B.length&&B[0].label&&B[0].value?B:A.map(B,function(C){return typeof C==="string"?{label:C,value:C}:A.extend({label:C.label||C.value,value:C.value||C.label},C)})}};window.wijInputResult=function(){this.alphanumericCharacterExpected=-2;this.asciiCharacterExpected=-1;this.digitExpected=-3;this.invalidInput=-51;this.letterExpected=-4;this.nonEditPosition=-54;this.positionOutOfRange=-55;this.promptCharNotAllowed=-52;this.signedDigitExpected=-5;this.unavailableEditPosition=-53;this.testPosition=-1};window.wijInputResult.prototype={characterEscaped:1,noEffect:2,sideEffect:3,success:4,unknown:0,hint:0,clone:function(){var B=new wijInputResult;B.hint=this.hint;B.testPosition=this.testPosition;return B}}})(jQuery);(function(R){var Z={useDefault:-2,asIs:-1,zero:0,one:1,two:2,three:3,four:4,five:5,six:6,seven:7,eight:8};R.widget("wijmo.wijinputdate",R.extend(true,{},wijinputcore,{options:{date:null,minDate:null,maxDate:null,dateFormat:"d",startYear:1950,smartInputMode:true,activeField:0,keyDelay:800,autoNextField:true,calendar:"default",popupPosition:{offset:"0 4"},dateChanged:null},_createTextProvider:function(){this._textProvider=new Aa(this,this.options.dateFormat)},_strToDate:function(A){A=A.replace(/-/g,"/");var e;try{e=new Date(A);if(isNaN(e)){e=new Date}}catch(d){e=new Date}return e},_beginUpdate:function(){var e=this.options,A,d;if(e.minDate){if(typeof e.minDate==="string"){e.minDate=this._strToDate(e.minDate)}}if(e.maxDate){if(typeof e.maxDate==="string"){e.maxDate=this._strToDate(e.maxDate)}}if(!e.date){d=new Date;if(!this.element.data("elementValue")){this.element.data("nullDate",true)}else{A=this.element.data("elementValue")}}else{if(typeof e.date==="string"){A=e.date}else{d=e.date}}if(A){d=this._strToDate(A)}this._safeSetDate(d);this.element.data({defaultDate:new Date(e.date.getTime()),preDate:new Date(e.date.getTime())});this._resetTimeStamp();e.showTrigger&&!this._hasComboItems()&&this._initCalendar();this.element.addClass("wijmo-wijinput-date").attr({"aria-valuemin":new Date(1900,1,1),"aria-valuemax":new Date(2099,1,1),"aria-valuenow":e.date})},_endUpdate:function(){var A=this;this.element.click(function(){A.highLightCursor()});this.element.mousewheel(function(d,a){A._doSpin(a>0,false)})},_onTriggerClicked:function(){if(this._hasComboItems()){this._popupComboList()}else{this._popupOrHideCalendar()}},_isValidDate:function(e,d){var A=this.options;if(e===undefined){return false}if(isNaN(e)){return false}if(e.getFullYear()<1||e.getFullYear()>9999){return false}if(d){if(A.minDate){if(e<A.minDate){return false}}if(A.maxDate){if(e>A.maxDate){return false}}}return true},_safeSetDate:function(g,f){var e=this.options,A=g;if(e.minDate){if(g<e.minDate){if(f){return false}g=new Date(Math.max(e.minDate,g))}}if(e.maxDate){if(g>e.maxDate){if(f){return false}g=new Date(Math.min(e.maxDate,g))}}if(isNaN(g)){g=A}e.date=g;return true},_setOption:function(A,b){R.Widget.prototype._setOption.apply(this,arguments);wijinputcore._setOption.apply(this,arguments);switch(A){case"date":if(!b){b=new Date;!this.isFocused()&&this.element.data("nullDate",true)}else{if(typeof b==="string"){b=b.replace(/-/g,"/")}b=new Date(b);if(isNaN(b)){b=new Date}}this._safeSetDate(b);this._updateText();this.highLightField();break;case"dateFormat":case"culture":this._textProvider._setFormat(this.options.dateFormat);this._updateText();break;case"activeField":b=Math.min(b,this._textProvider.getFieldCount()-1);b=Math.max(b,0);this.options.activeField=b;this.highLightField();this._resetTimeStamp()}},_setData:function(A){this.option("date",A)},_resetData:function(){var A=this.options,c=this.element.data("defaultDate");if(c===undefined||c===null){c=this.element.data("elementValue");if(c!==undefined&&c!==null&&c!==""){this.element.val(c);this._onChange()}else{this._setData(new Date)}}else{this._setData(c)}},_resetTimeStamp:function(){this.element.data("cursorPos",0);this.element.data("timeStamp",new Date("1900/1/1"))},getPostValue:function(){if(!this._isInitialized()){return this.element.val()}if(this.options.showNullText&&this.isDateNull()){return""}var A=this._textProvider.toString();return A===this.options.nullText?"":A},highLightField:function(c){if(c===undefined){c=this.options.activeField}if(this.isFocused()){var A=this._textProvider.getFieldRange(c);A&&this.element.wijtextselection(A)}},highLightCursor:function(c){if(this._isNullText()){return}if(c===undefined){c=Math.max(0,this.element.wijtextselection().start)}var A=this._textProvider.getCursorField(c);if(A<0){return}this._setOption("activeField",A)},toNextField:function(){this._setOption("activeField",this.options.activeField+1)},toPrevField:function(){this._setOption("activeField",this.options.activeField-1)},toFirstField:function(){this._setOption("activeField",0)},toLastField:function(){this._setOption("activeField",this._textProvider.getFieldCount())},clearField:function(g){if(g===undefined){g=this.options.activeField}var e=this._textProvider.getFieldRange(g);if(e){var A=new wijInputResult;this._textProvider.removeAt(e.start,e.end,A);this._updateText();var f=this;window.setTimeout(function(){f.highLightField()},1)}},_doSpin:function(A,b){A=!!A;b=!!b;if(!this._allowEdit()){return}if(b&&this.element.data("breakSpinner")){return}if(this._textProvider[A?"incEnumPart":"decEnumPart"]()){this._updateText();this.highLightField()}b&&!this.element.data("breakSpinner")&&window.setTimeout(R.proxy(function(){this._doSpin(A,true)},this),this._calcSpinInterval())},_afterFocused:function(){if(this._isNullText()){this._doFocus();this.element.data("nullDate",false)}var c=this,A=function(){c.highLightCursor();c._resetTimeStamp()};window.setTimeout(A,10)},_keyDownPreview:function(e){var A=e.keyCode||e.which;switch(A){case R.ui.keyCode.LEFT:this.toPrevField();return true;break;case R.ui.keyCode.RIGHT:this.toNextField();return true;break;case R.ui.keyCode.TAB:case R.ui.keyCode.SPACE:case 188:case 190:case 110:case 191:if(e.shiftKey){if(this.options.activeField>0){this.toPrevField();return true}}else{if(this.options.activeField<this._textProvider.getFieldCount()-1){this.toNextField();return true}}break;case R.ui.keyCode.HOME:if(e.ctrlKey){this._setOption("date",new Date)}else{this.toFirstField()}return true;break;case R.ui.keyCode.END:if(e.ctrlKey){this._setOption("date",new Date("1970/1/1"))}else{this.toLastField()}return true;break;case R.ui.keyCode.DELETE:if(this._allowEdit()){var b=this.element.wijtextselection();if(b.end-b.start===this.element.val().length){this._setOption("date",new Date("1970/1/1"))}else{this.clearField()}return true}}return false},_autoMoveToNextField:function(c,A){if(!this.options.autoNextField){return}this._textProvider.needToMove(this.options.activeField,c,A)&&this.toNextField()},_keyPressPreview:function(r){var t=this._textProvider.getFieldRange(this.options.activeField);if(t){var u=r.keyCode||r.which;if(u===R.ui.keyCode.TAB){return true}if(u===R.ui.keyCode.SPACE){this._stopEvent(r);return true}var A=String.fromCharCode(u),o=this._textProvider.isFieldSep(A,this.options.activeField);if(o){this.toNextField();this._stopEvent(r);return true}var q=this.element.data("cursorPos"),n=new Date,b=this.element.data("timeStamp");this.element.data("timeStamp",n);var s=n.getTime()-b.getTime()>this.options.keyDelay;if(s){q=0}var m=t.start+q;this.element.data("cursorPos",++q);var p=this._textProvider.addToField(A,this.options.activeField,m,!s);if(p){this._updateText();this._autoMoveToNextField(q,A);this.highLightField()}else{this._fireIvalidInputEvent()}this._stopEvent(r);return true}return false},_raiseDataChanged:function(){var c=this.options.date,A=this.element.data("preDate");this.element.data("preDate",new Date(c.getTime()));if(!A&&c||A&&!c||A&&c&&A.getTime()!==c.getTime()){this._syncCalendar();this.element.attr("aria-valuenow",c);this._trigger("dateChanged",null,{date:c})}},isDateNull:function(){return this.element.data("nullDate")},_isMinDate:function(A){return A.getFullYear()===1&&A.getMonth()===0&&A.getDate()===1},_initCalendar:function(){var e=this.options.calendar;if(e===undefined||e===null){return}if(typeof e==="boolean"||e==="default"){e=R("<div/>");e.appendTo(document.body)}var b=R(e);if(b.length!=1){return}this.element.data("calendar",b);b.wijcalendar({popupMode:true});this._syncCalendar();var A=this;b.bind("wijcalendarselecteddateschanged",function(){var c=R(this).wijcalendar("getSelectedDate");R(this).wijcalendar("close");!!c&&A.option("date",c);A._trySetFocus()})},_syncCalendar:function(){var e=this.element.data("calendar");if(!e){return}var A=this.options,d=A.date;if(this._isMinDate(d)){d=new Date}e.wijcalendar("option","displayDate",d);A.minDate&&e.wijcalendar("option","minDate",A.minDate);A.maxDate&&e.wijcalendar("option","maxDate",A.maxDate);e.wijcalendar("unSelectAll");e.wijcalendar("selectDate",d);e.wijcalendar("refresh")},_popupOrHideCalendar:function(){if(!this._allowEdit()){return}var A=this.element.data("calendar");if(!A){return}if(A.wijcalendar("isPopupShowing")){A.wijcalendar("hide");return}this._syncCalendar();A.wijcalendar("popup",R.extend({},this.options.popupPosition,{of:this.outerDiv}))}}));var Aa=function(A,c){this.inputWidget=A;this.descriptors=new Array(0);this.desPostions=new Array(0);this.fields=new Array(0);this._setFormat(c)};Aa.prototype={descriptors:undefined,desPostions:undefined,maskPartsCount:0,pattern:"M/d/yyyy",initialize:function(){},getFieldCount:function(){return this.fields.length},getFieldRange:function(A){var c=this.fields[A];return{start:c.startIndex,end:c.startIndex+c.getText().length}},getCursorField:function(e){e=Math.min(e,this.desPostions.length-1);e=Math.max(e,0);var b=this.desPostions[e].desc;if(b.type===-1){var A=R.inArray(b,this.descriptors);if(A>0&&this.descriptors[A-1].type!=-1){b=this.descriptors[A-1]}else{return -1}}return R.inArray(b,this.fields)},needToMove:function(h,A,f){if(!this.inputWidget._isValidDate(this.inputWidget.options.date,true)){return false}var g=this.fields[h];if(A===g.maxLen){return true}var i=f*1;if(isNaN(i)){return false}switch(g.type){case 20:case 25:case 45:case 46:return i>1;break;case 47:case 48:return i>2;break;case 30:case 31:return i>3;break;case 50:case 51:case 60:case 61:return i>6}return false},_getCulture:function(){return this.inputWidget._getCulture()},_isDigitString:function(h){h=R.trim(h);if(h.length===0){return true}var g=h.charAt(0);if(g==="+"||g==="-"){h=h.substr(1);h=R.trim(h)}if(h.length===0){return true}try{var A=parseFloat(h),b=A.toString();return b===h}catch(i){return false}},_setFormat:function(A){this.descriptors=[];var m="",b="",i=false,j=false;this.pattern=this._parseFormatToPattern(A);for(var n=0;n<this.pattern.length;n++){var l=this.pattern.charAt(n);if(j){this.descriptors.push(this.createDescriptor(-1,l));m="";j=false;continue}if(l==="\\"){j=true;if(m.length>0){!this.handlePattern(m)&&this.descriptors.push(this.createDescriptor(-1,b));m=""}continue}if(l==="'"){if(i){i=false;m=""}else{i=true;if(m.length>0){!this.handlePattern(m)&&this.descriptors.push(this.createDescriptor(-1,b));m=""}}continue}if(i){this.descriptors.push(this.createDescriptor(-1,l));m="";continue}if(!n){b=l}if(b!==l&&m.length>0){!this.handlePattern(m)&&this.descriptors.push(this.createDescriptor(-1,b));m=""}m+=l;b=l}if(m.length>0){!this.handlePattern(m)&&this.descriptors.push(this.createDescriptor(-1,b))}this.fields=R.grep(this.descriptors,function(c){return c.type!==-1})},_parseFormatToPattern:function(d){var e=this.inputWidget._getCulture().calendars.standard,A=e.patterns.d;if(d.length<=1){switch(d){case"":case"d":A=e.patterns.d;break;case"D":A=e.patterns.D;break;case"f":A=e.patterns.D+" "+e.patterns.t;break;case"F":A=e.patterns.D+" "+e.patterns.T;break;case"g":A=e.patterns.d+" "+e.patterns.t;break;case"G":A=e.patterns.d+" "+e.patterns.T;break;case"m":A=e.patterns.M;break;case"M":A=e.patterns.M;break;case"s":A=e.patterns.S;break;case"t":A=e.patterns.t;break;case"T":A=e.patterns.T;break;case"u":A=e.patterns.S;break;case"U":A=e.patterns.D+" "+e.patterns.T;break;case"y":A=e.patterns.Y;break;case"Y":A=e.patterns.Y}}else{A=d}return A},getDate:function(){return !!this.inputWidget?new Date(this.inputWidget.options.date.getTime()):undefined},setDate:function(A){this.inputWidget&&this.inputWidget._setData(A)},_internalSetDate:function(g){if(this.inputWidget){var h=this,j=this.inputWidget.options,i=this.inputWidget.element,l=!!i.data("typing");if(l){j.date=g;var A=function(){var b=new Date,a=i.data("timeStamp");if(b.getTime()-a.getTime()>j.keyDelay){h.inputWidget._safeSetDate(j.date);h.inputWidget._updateText();h.inputWidget.highLightField()}else{window.setTimeout(A,j.keyDelay)}};window.setTimeout(A,j.keyDelay)}else{this.inputWidget._safeSetDate(g)}}},daysInMonth:function(e,d){e=e-1;var A=new Date(d,++e,1,-1).getDate();return A},setYear:function(q,t,n){try{if(t&&t.isfullreset){t.offset=1;q="1970"}if(typeof q==="string"){if(!this._isDigitString(q)){return false}}q=q*1;var s=this.inputWidget.options,A=1,r=9999;if(n){if(s.minDate){A=Math.max(A,s.minDate.getFullYear())}if(s.maxDate){r=Math.min(r,s.maxDate.getFullYear())}}if(t&&t.isreset){q=A}if(q<A){q=A}if(q>r){q=r}var p=this.getDate(),o=new Date(p.getTime());o.setFullYear(q);if(this._isValidDate(o)){var m=this.daysInMonth(this.getMonth(),this.getYear());if(m===p.getDate()){o=new Date(p.getTime());o.setDate(1);o.setFullYear(q);m=this.daysInMonth(o.getMonth()+1,o.getFullYear());o.setDate(m);if(this._isValidDate(o)){this._internalSetDate(o);return true}else{return false}}p.setFullYear(q);this._internalSetDate(p);return true}else{if(t&&t.isreset){p.setFullYear(1);this._internalSetDate(p);return true}return false}}catch(l){return false}},getYear:function(){try{var c=this.getDate().getFullYear();c=""+c+"";while(c.length<4){c="0"+c}return""+c+""}catch(A){alert("getYear() failed")}return""},setMonth:function(j,i,l){try{if(l&&l.isfullreset){j="1"}j=j*1;var n=this.getDate();if(typeof i!=="undefined"&&!i){if(j>12||j<1){if(l&&l.isreset){j=1}else{return false}}}var h=this.daysInMonth(this.getMonth(),this.getYear()),m;if(h===this.getDate().getDate()){m=new Date(n.getTime());m.setDate(1);m.setMonth(j-1);h=this.daysInMonth(m.getMonth()+1,m.getFullYear());m.setDate(h);if(this._isValidDate(m)){this._internalSetDate(m);return true}else{return false}}else{m=new Date(n.getTime());m.setMonth(j-1);if(this._isValidDate(m)){this._internalSetDate(m);return true}else{return false}}}catch(A){return false}},getMonth:function(){return this.getDate().getMonth()+1},setDayOfMonth:function(j,l,m){try{if(m&&m.isfullreset){return this.setDayOfMonth(1,l)}var i=this.getDate();j=j*1;if(typeof l!=="undefined"&&!l){var n=this.daysInMonth(this.getMonth(),this.getYear());if(j>n||j<1){return m&&m.isreset?this.setDayOfMonth(1,l,m):false}}var h=new Date(i.getTime());h.setDate(j);if(this._isValidDate(h)){this._internalSetDate(h);return true}else{return false}}catch(A){return false}},getDayOfMonth:function(){return this.getDate().getDate()},setHours:function(g,f){try{g=g*1;if(typeof f!=="undefined"&&!f){if(g>24){return false}}var e=new Date(this.getDate().getTime());e.setHours(g);if(this._isValidDate(e)){this._internalSetDate(e);return true}else{return false}}catch(A){return false}},getHours:function(){return this.getDate().getHours()},setMinutes:function(g,f){try{g=g*1;if(typeof f!=="undefined"&&!f){if(g>60){return false}}var e=new Date(this.getDate().getTime());e.setMinutes(g);if(this._isValidDate(e)){this._internalSetDate(e);return true}else{return false}}catch(A){return false}},getMinutes:function(){return this.getDate().getMinutes()},setSeconds:function(g,f){try{g=g*1;if(typeof f!=="undefined"&&!f){if(g>60){return false}}var e=new Date(this.getDate().getTime());e.setSeconds(g);if(this._isValidDate(e)){this._internalSetDate(e);return true}else{return false}}catch(A){return false}},getSeconds:function(){return this.getDate().getSeconds()},setDayOfWeek:function(e){try{e=e*1;var A=e-this.getDayOfWeek()*1;return this.setDayOfMonth(this.getDayOfMonth()*1+A*1,true)}catch(d){return false}},getDayOfWeek:function(){return this.getDate().getDay()+1},handlePattern:function(d){var e=new RegExp("y{3,4}"),A=e.test(d);if(A){this.descriptors.push(this.createDescriptor(10));return true}e=new RegExp("y{2,2}");A=e.test(d);if(A){this.descriptors.push(this.createDescriptor(2));return true}e=new RegExp("y{1,1}");A=e.test(d);if(A){this.descriptors.push(this.createDescriptor(1));return true}e=new RegExp("d{4,4}");A=e.test(d);if(A){this.descriptors.push(this.createDescriptor(101));return true}e=new RegExp("d{3,3}");A=e.test(d);if(A){this.descriptors.push(this.createDescriptor(100));return true}e=new RegExp("d{2,2}");A=e.test(d);if(A){this.descriptors.push(this.createDescriptor(30));return true}e=new RegExp("d{1,1}");A=e.test(d);if(A){this.descriptors.push(this.createDescriptor(31));return true}e=new RegExp("M{4,4}");A=e.test(d);if(A){this.descriptors.push(this.createDescriptor(27));return true}e=new RegExp("M{3,3}");A=e.test(d);if(A){this.descriptors.push(this.createDescriptor(26));return true}e=new RegExp("M{2,2}");A=e.test(d);if(A){this.descriptors.push(this.createDescriptor(20));return true}e=new RegExp("M{1,1}");A=e.test(d);if(A){this.descriptors.push(this.createDescriptor(25));return true}e=new RegExp("h{2,2}");A=e.test(d);if(A){this.descriptors.push(this.createDescriptor(46));return true}e=new RegExp("h{1,1}");A=e.test(d);if(A){this.descriptors.push(this.createDescriptor(45));return true}e=new RegExp("H{2,2}");A=e.test(d);if(A){this.descriptors.push(this.createDescriptor(48));return true}e=new RegExp("H{1,1}");A=e.test(d);if(A){this.descriptors.push(this.createDescriptor(47));return true}e=new RegExp("m{2,2}");A=e.test(d);if(A){this.descriptors.push(this.createDescriptor(50));return true}e=new RegExp("m{1,1}");A=e.test(d);if(A){this.descriptors.push(this.createDescriptor(51));return true}e=new RegExp("s{2,2}");A=e.test(d);if(A){this.descriptors.push(this.createDescriptor(60));return true}e=new RegExp("s{1,1}");A=e.test(d);if(A){this.descriptors.push(this.createDescriptor(61));return true}e=new RegExp("t{2,2}");A=e.test(d);if(A){this.descriptors.push(this.createDescriptor(251));return true}e=new RegExp("t{1,1}");A=e.test(d);if(A){this.descriptors.push(this.createDescriptor(250));return true}return false},createDescriptor:function(A,e){var f=null,d=this.maskPartsCount++;switch(A){case -1:f=new Ac(this,d);f.liternal=e;break;case 20:f=new M(this,d);break;case 25:f=new J(this,d);break;case 26:f=new K(this,d);break;case 27:f=new P(this,d);break;case 30:f=new Q(this,d);break;case 31:f=new N(this,d);break;case 100:f=new X(this,d);break;case 101:f=new Y(this,d);break;case 10:f=new L(this,d);break;case 1:f=new G(this,d);break;case 2:f=new Ab(this,d);break;case 45:f=new O(this,d);break;case 46:f=new D(this,d);break;case 47:f=new E(this,d);break;case 48:f=new B(this,d);break;case 250:f=new V(this,d);break;case 251:f=new W(this,d);break;case 50:f=new C(this,d);break;case 51:f=new H(this,d);break;case 60:f=new I(this,d);break;case 61:f=new F(this,d)}return f},toString:function(){if(this.inputWidget.options.showNullText&&!this.inputWidget.isFocused()&&this.inputWidget.isDateNull()){return this.inputWidget.options.nullText}var g="",l=0;this.desPostions=new Array(0);for(var h=0;h<this.descriptors.length;h++){this.descriptors[h].startIndex=g.length;var i=""||this.descriptors[h].getText();g+=i;for(var A=0;A<i.length;A++){var j={};j.desc=this.descriptors[h];j.pos=A;j.text=i;j.length=i.length;this.desPostions.push(j);l++;if(this.desPostions.length!==l){throw"Fatal Error !!!!!!!!!!!!!!!"}}}return g},"set":function(c){if(this.pattern==="dddd"||this.pattern==="ddd"){return false}if(typeof c=="object"){this._internalSetDate(new Date(c));return true}var A=this.getDateFromFormat(c,this.pattern);if(!A){A=this._parseDate(c,this.pattern)}if(!!A){this._internalSetDate(new Date(A));return true}return false},haveEnumParts:function(){return false},removeLiterals:function(A){A=""+A+"";A=A.replace(new RegExp("\\s","g"),"");A=A.replace(new RegExp("[+]","g"),"");A=A.replace(new RegExp("[.]","g"),"");A=A.replace(new RegExp("[:]","g"),"");A=A.replace(new RegExp("[-]","g"),"");A=A.replace(new RegExp("[()=]","g"),"");return A},getFirstDelimiterPos:function(h,A){var i=0,j=0;while(i<A.length&&j<h.length){var g=A.charAt(i),l=h.charAt(j);if(g===l){j++}else{return j-1}i++}return h.length-1},findAlikeArrayItemIndex:function(A,l){for(var i=-1,g=99999,j=0;j<A.length;j++){var h=A[j].toLowerCase().indexOf(l.toLowerCase());if(h!==-1&&h<g){g=h;i=j}}return i},_isValidDate:function(A){return this.inputWidget._isValidDate(A)},isFieldSep:function(A,f){var g=f++;if(g<this.descriptors.length){var e=this.descriptors[g];return e.type!=-1?false:A===e.text}return false},getPositionType:function(A){var c=this.desPostions[A];return c.desc.type},addToField:function(m,l,n,A){var j=this.fields[l];if(j.type==10){return this.insertAt(m,n)}var i=A?j.getText()+m:m,p={val:m,pos:0,offset:0,isreset:false};this.inputWidget.element.data("typing",true);var o=j.setText(i,m.length===1?false:true,p);this.inputWidget.element.data("typing",false);return o},insertAt:function(Am,Ag,Al){if(!Al){Al=new wijInputResult}Al.testPosition=-1;var An;if(Am.length===1){An=this.desPostions[Ag];if(An&&An.desc.type===-1){if(An.text===Am){Al.testPosition=Ag;Al.hint=Al.characterEscaped;return true}}}var x=Am,Aq=Ag;Am=this.removeLiterals(Am);var Ao=Am,Ak=false,w=false;if(Aq>0&&Ao.length===1){Aq--;Ag=Aq;An=this.desPostions[Aq];Ak=true;if(An&&(An.desc.type===-1||An.desc.getText().length!==1)){Ag++;Aq++;Ak=false}}var Ad=false,Ar,Ap;while(Ao.length>0&&Aq<this.desPostions.length){An=this.desPostions[Aq];if(An.desc.type===-1){Aq=Aq+An.length;continue}if(An.desc.needAdjustInsertPos()){Ar=Ao.substr(0,An.length-An.pos);Ar=An.text.slice(0,An.pos)+Ar+An.text.slice(An.pos+Ar.length,An.length);if(Ak){Ar=An.text+Ar}if(w){Ar=Ar+An.text}var Ai=An.desc.getText().length,Ae="";try{if(Am.length===1){if(!An.pos){Ae=Am}else{if(An.pos>0){Ae=Ar.substring(0,An.pos+1)}}}}catch(y){}if(Ai===1&&Ar.length>1&&Am.length===1){if(An.desc.type===31||An.desc.type===25){this._disableSmartInputMode=true}}Ap={val:Am,pos:An.pos,offset:0,isreset:false};Ad=An.desc.setText(Ar,Am.length===1?false:true,Ap);this._disableSmartInputMode=false;if(!Ad&&typeof Ae!=="undefined"&&Ae.length>0&&(An.desc.type===26||An.desc.type===27||An.desc.type===100||An.desc.type===101||An.desc.type===250||An.desc.type===251)){Ad=An.desc.setText(Ae,Am.length===1?false:true,Ap)}if(Ad){Al.hint=Al.success;Al.testPosition=Aq+Ap.offset;if(Am.length===1){var Aj=An.desc.getText().length,Ah=An.pos;if(An.pos>Aj-1){Ah=Aj}var v=Aj-Ai;if(v>0&&An.pos===Ai-1){Ah=Aj-1}var z=this.toString();Al.testPosition=An.desc.startIndex+Ah+Ap.offset}Ao=Ao.slice(An.length-An.pos,Ao.length)}else{Al.hint=Al.invalidInput;if(Al.testPosition!==-1){Al.testPosition=Ag}if(An.desc.type!==-1&&Am.length===1){return false}}Aq=Aq+An.length}else{var Af=this.getFirstDelimiterPos(Ao,x);if(Af<0){Af=0}Ar=Ao.substring(0,Af+1);Ap={val:Am,pos:An.pos,offset:0,isreset:false};Ad=An.desc.setText(Ar,Am.length===1?false:true,Ap);if(Ad){Al.hint=Al.success;Al.testPosition=Aq+Ap.offset;Ao=Ao.slice(Af+1,Ao.length)}else{Al.hint=Al.invalidInput;if(Al.testPosition!==-1){Al.testPosition=Ag}}if(Af<0){Af=0}var A=Af+1;Aq=Aq+A}}return Ad},removeAt:function(m,A,n){try{var o=this.desPostions[m];if(o.desc.needAdjustInsertPos()){var r="0",q=m;o.text=o.desc.getText();r=o.text.slice(0,o.pos)+r+o.text.slice(o.pos+r.length,o.length);var p={val:r,pos:o.pos,offset:0,isreset:true,isfullreset:false};if(A-m+1>=o.length){p.isfullreset=true;m=m+o.length;q=m}var j=o.desc.setText(r,false,p);if(j){n.hint=n.success;n.testPosition=q}else{n.hint=n.invalidInput;if(n.testPosition===-1){n.testPosition=m}}}m<A&&this.removeAt(m+1,A,n);return true}catch(l){return false}},incEnumPart:function(){var A=this.fields[this.inputWidget.options.activeField];A&&A.inc();return true},decEnumPart:function(){var A=this.fields[this.inputWidget.options.activeField];A&&A.dec();return true},setValue:function(A){this.setDate(new Date(A instanceof Date?A.getTime():A));return true},getValue:function(){return this.getDate()},_disableSmartInputMode:false,_isSmartInputMode:function(){return this._disableSmartInputMode?false:this.inputWidget?this.inputWidget.options.smartInputMode:true},_getInt:function(A,h,b,l){for(var i=l;i>=b;i--){var j=A.substring(h,h+i);if(j.length<b){return null}if(R.wij.charValidator.isDigit(j)){return j}}return null},getDateFromFormat:function(Ax,Aq){var Am=this._getCulture().calendars.standard,Ag=R.merge(R.merge([],Am.months.names),Am.months.namesAbbr),Ah=R.merge(R.merge([],Am.days.names),Am.days.namesShort);Ax=Ax+"";Aq=Aq+"";var As=0,Ap=0,Az="",At="",Af=0,b=0,An,AB=new Date,Av=AB.getFullYear(),Au=AB.getMonth()+1,Ak=1,Aw=0,Ar=0,Ao=0,Al="",Aj=false,Ae=false;while(Ap<Aq.length){Az=Aq.charAt(Ap);At="";while(Aq.charAt(Ap)===Az&&Ap<Aq.length){At+=Aq.charAt(Ap++);if(Ae){break}}if(Ae){As+=At.length;Ae=false}else{if(At==="\\"){Ae=true}else{if(At==="'"){Aj=!Aj}else{if(Aj){As+=At.length}else{if(At==="yyyy"||At==="yy"||At==="y"){if(At==="yyyy"){Af=4;b=4}if(At==="yy"){Af=2;b=2}if(At==="y"){Af=2;b=4}Av=this._getInt(Ax,As,Af,b);if(!Av){return 0}As+=Av.length;if(Av.length===2){if(Av>70){Av=1900+ +Av}else{Av=2000+ +Av}}}else{if(At==="MMMM"||At==="MMM"||At==="NNN"){Au=0;for(An=0;An<Ag.length;An++){var Ad=Ag[An];if(Ax.substring(As,As+Ad.length).toLowerCase()===Ad.toLowerCase()){if(At==="MMM"||At==="MMMM"||At==="NNN"&&An>11){Au=An+1;if(Au>12){Au=Au-12}As+=Ad.length;break}}}if(Au<1||Au>12){return 0}}else{if(At==="dddd"||At==="ddd"||At==="EE"||At==="E"){for(An=0;An<Ah.length;An++){var Ai=Ah[An];if(Ax.substring(As,As+Ai.length).toLowerCase()===Ai.toLowerCase()){As+=Ai.length;break}}}else{if(At==="MM"||At==="M"){Au=this._getInt(Ax,As,At.length,2);if(!Au||Au<1||Au>12){return 0}As+=Au.length}else{if(At==="dd"||At==="d"){Ak=this._getInt(Ax,As,At.length,2);if(!Ak||Ak<1||Ak>31){return 0}As+=Ak.length}else{if(At==="hh"||At==="h"){Aw=this._getInt(Ax,As,At.length,2);if(!Aw||Aw<1||Aw>12){return 0}As+=Aw.length}else{if(At==="HH"||At==="H"){Aw=this._getInt(Ax,As,At.length,2);if(!Aw||Aw<0||Aw>23){return 0}As+=Aw.length}else{if(At==="KK"||At==="K"){Aw=this._getInt(Ax,As,At.length,2);if(!Aw||Aw<0||Aw>11){return 0}As+=Aw.length}else{if(At==="kk"||At==="k"){Aw=this._getInt(Ax,As,At.length,2);if(!Aw||Aw<1||Aw>24){return 0}As+=Aw.length;Aw=Aw-1}else{if(At==="mm"||At==="m"){Ar=this._getInt(Ax,As,At.length,2);if(!Ar||Ar<0||Ar>59){return 0}As+=Ar.length}else{if(At==="ss"||At==="s"){Ao=this._getInt(Ax,As,At.length,2);if(!Ao||Ao<0||Ao>59){return 0}As+=Ao.length}else{if(At==="tt"||At==="t"||At==="a"){if(Ax.substring(As,As+2).toLowerCase()==="am"){Al="AM";As+=2}else{if(Ax.substring(As,As+2).toLowerCase()==="pm"){Al="PM";As+=2}else{if(Ax.substring(As,As+1).toLowerCase()==="a"){Al="AM";As+=1}else{if(Ax.substring(As,As+1).toLowerCase()==="p"){Al="PM";As+=1}else{if(Ax.substring(As,As+Am.AM[0].length).toLowerCase()===Am.AM[0].toLowerCase()){Al="AM";As+=Am.AM[0].length}else{if(Ax.substring(As,As+Am.PM[0].length).toLowerCase()===Am.PM[0].toLowerCase()){Al="PM";As+=Am.AM[0].length}else{if(Ax.substring(As,As+1).toLowerCase()===" "){As+=1}}}}}}}}else{var Ay=Ax.substring(As,As+At.length);if(Ay!==At){return 0}else{As+=At.length}}}}}}}}}}}}}}}}}}if(As!==Ax.length){return 0}if(Au===2){if(!Av%4&&Av%100||!Av%400){if(Ak>29){return 0}}else{if(Ak>28){return 0}}}if(Au===4||Au===6||Au===9||Au===11){if(Ak>30){return 0}}if(Aw<12&&Al==="PM"){Aw=+Aw+12}else{if(Aw>11&&Al==="AM"){Aw=Aw-12}}var AA=new Date(Av,Au-1,Ak,Aw,Ar,Ao);AA.setFullYear(Av);return AA.getTime()},_parseDate:function(i,m){if(m){if(m.indexOf("MMM")===-1&&m.indexOf("MMMM")===-1){m=m.replace("MM","M")}m=m.replace("dd","d");m=m.replace("tt","a")}var A=false;window.generalFormats=[!m?"y/M/d":m,"y-M-d","MMM d, y","MMM d,y","y-MMM-d","d-MMM-y","MMM d"];window.monthFirst=["M/d/y","M-d-y","M.d.y","MMM-d","M/d","M-d"];window.dateFirst=["d/M/y","d-M-y","d.M.y","d-MMM","d/M","d-M"];for(var n=["generalFormats",A?"dateFirst":"monthFirst",A?"monthFirst":"dateFirst"],j,l=0;l<n.length;l++){for(var o=window[n[l]],p=0;p<o.length;p++){j=this.getDateFromFormat(i,o[p]);if(j){return j}}}return 0},paddingZero:function(d,A){var e=""+d+"";while(e.length<A){e="0"+e}return e},_formatDate:function(i,f,h){if(!i.valueOf()){return"&nbsp;"}var g=this,A=f.replace(new RegExp("yyyy|MMMM|MMM|MM|M|mm|m|dddd|ddd|dd|d|hh|h|HH|H|ss|s|tt|t|a/p","gi"),function(b){var a;switch(b){case"yyyy":return i.getFullYear();case"MMMM":return h.dateTimeFormat.monthNames[i.getMonth()];case"MMM":return h.dateTimeFormat.abbreviatedMonthNames[i.getMonth()];case"MM":return g.paddingZero(i.getMonth()+1,2);case"M":return g.paddingZero(i.getMonth()+1,1);case"mm":return g.paddingZero(i.getMinutes(),2);case"m":return g.paddingZero(i.getMinutes(),1);case"dddd":return h.dateTimeFormat.dayNames[i.getDay()];case"ddd":return h.dateTimeFormat.abbreviatedDayNames[i.getDay()];case"dd":return g.paddingZero(i.getDate(),2);case"d":return g.paddingZero(i.getDate(),1);case"hh":a=i.getHours()%12;return g.paddingZero(a?a:12,2);case"h":a=i.getHours()%12;return g.paddingZero(a?a:12,1);case"HH":return g.paddingZero(i.getHours(),2);case"H":return g.paddingZero(i.getHours(),1);case"ss":return g.paddingZero(i.getSeconds(),2);case"s":return g.paddingZero(i.getSeconds(),1);case"tt":return i.getHours()<12?cf.AM[0]:cf.PM[0];case"t":return i.getHours()<12?cf.AM[0].length>0?cf.AM[0].charAt(0):"":cf.PM[0].length>0?cf.PM[0].charAt(0):"";case"a/p":return i.getHours()<12?"a":"p"}return"N"});return A}};var U=function(A,f,g,e){this._txtProvider=A;this.id=f;this.type=g;this.startIndex=0;this.maxLen=e||2};U.prototype={_txtProvider:null,id:0,type:0,name:null,startIndex:0,maxLen:2,getText:function(){return null},setText:function(){return false},inc:function(){},dec:function(){},needAdjustInsertPos:function(){return true},reachMaxLen:function(){var A=this.getText();do{if(A.charAt(0)==="0"){A=A.slice(1)}else{break}}while(A.length>0);return A.length>=this.maxLen}};var T=function(d,A){for(var e in A.prototype){if(!d.prototype[e]){d.prototype[e]=A.prototype[e]}}},Ac=function(a,A){T(Ac,U);U.apply(this,[a,A,-1,100])};Ac.prototype={liternal:"",getText:function(){return this.liternal}};var M=function(a,A){T(M,U);U.apply(this,[a,A,20]);this.name="Two-digit month"};M.prototype={getText:function(){var A=""+this._txtProvider.getMonth()+"";return A.length===1?"0"+A:A},setText:function(d,e,A){return this._txtProvider.setMonth(d,e,A)},inc:function(){this._txtProvider.setMonth(this._txtProvider.getMonth()*1+1,true)},dec:function(){this._txtProvider.setMonth(this._txtProvider.getMonth()*1-1,true)}};var J=function(a,A){T(J,U);U.apply(this,[a,A,25]);this.name="month"};J.prototype={getText:function(){return""+this._txtProvider.getMonth()+""},setText:function(d,e,A){return this._txtProvider.setMonth(d,e,A)},inc:function(){this._txtProvider.setMonth(this._txtProvider.getMonth()*1+1,true)},dec:function(){this._txtProvider.setMonth(this._txtProvider.getMonth()*1-1,true)}};var K=function(a,A){T(K,U);U.apply(this,[a,A,26,100]);this.name="AbbreviatedMonthNames"};K.prototype={getText:function(){var A=this._txtProvider.getMonth(),c=this._txtProvider._getCulture();return c.calendars.standard.months.namesAbbr[A-1]},setText:function(A,e,f){var g=-1;g=this._txtProvider.findAlikeArrayItemIndex(cf.months.namesAbbr,A);return g===-1?false:this._txtProvider.setMonth(g+1,e,f)},inc:function(){this._txtProvider.setMonth(this._txtProvider.getMonth()*1+1,true)},dec:function(){this._txtProvider.setMonth(this._txtProvider.getMonth()*1-1,true)}};var P=function(a,A){T(P,U);U.apply(this,[a,A,27,100]);this.name="MonthNames"};P.prototype={getText:function(){var A=this._txtProvider.getMonth(),c=this._txtProvider._getCulture();return c.calendars.standard.months.names[A-1]},setText:function(f,h,g){var i=-1;if(g&&g.isfullreset){i=1}else{var A=this._txtProvider._getCulture();i=this._txtProvider.findAlikeArrayItemIndex(A.calendars.standard.months.names,f);if(i===-1){return false}}return this._txtProvider.setMonth(i+1,h,g)},inc:function(){this._txtProvider.setMonth(this._txtProvider.getMonth()*1+1,true)},dec:function(){this._txtProvider.setMonth(this._txtProvider.getMonth()*1-1,true)}};var Q=function(a,A){T(Q,U);U.apply(this,[a,A,30]);this.name="Two-digit day of month"};Q.prototype={getText:function(){var A=this._txtProvider.getDayOfMonth();if(A<10){A="0"+A}return""+A+""},setText:function(d,e,A){return this._txtProvider.setDayOfMonth(d,e,A)},inc:function(){this._txtProvider.setDayOfMonth(this._txtProvider.getDayOfMonth()*1+1,true)},dec:function(){this._txtProvider.setDayOfMonth(this._txtProvider.getDayOfMonth()*1-1,true)}};var N=function(a,A){T(N,U);U.apply(this,[a,A,31]);this.name="Day of month"};N.prototype={getText:function(){var A=this._txtProvider.getDayOfMonth();return""+A+""},setText:function(d,e,A){return this._txtProvider.setDayOfMonth(d,e,A)},inc:function(){this._txtProvider.setDayOfMonth(this._txtProvider.getDayOfMonth()*1+1,true)},dec:function(){this._txtProvider.setDayOfMonth(this._txtProvider.getDayOfMonth()*1-1,true)}};var X=function(a,A){T(X,U);U.apply(this,[a,A,100,100]);this.name="AbbreviatedDayNames"};X.prototype={getText:function(){var A=this._txtProvider.getDayOfWeek(),c=this._txtProvider._getCulture();return c.calendars.standard.days.namesShort[A-1]},setText:function(d){var e=-1,A=this._txtProvider._getCulture();e=this._txtProvider.findAlikeArrayItemIndex(A.calendars.standard.days.namesShort,d);return e===-1?false:this._txtProvider.setDayOfWeek(e+1)},inc:function(){this._txtProvider.setDayOfMonth(this._txtProvider.getDayOfMonth()*1+1,true)},dec:function(){this._txtProvider.setDayOfMonth(this._txtProvider.getDayOfMonth()*1-1,true)},needAdjustInsertPos:function(){return false}};var Y=function(a,A){T(Y,U);U.apply(this,[a,A,101,100]);this.name="DayNames"};Y.prototype={getText:function(){var A=this._txtProvider.getDayOfWeek(),c=this._txtProvider._getCulture();return c.calendars.standard.days.names[A-1]},setText:function(d){var e=-1,A=this._txtProvider._getCulture();e=this._txtProvider.findAlikeArrayItemIndex(A.calendars.standard.days.names,d);return e===-1?false:this._txtProvider.setDayOfWeek(e+1)},inc:function(){this._txtProvider.setDayOfMonth(this._txtProvider.getDayOfMonth()*1+1,true)},dec:function(){this._txtProvider.setDayOfMonth(this._txtProvider.getDayOfMonth()*1-1,true)},needAdjustInsertPos:function(){return false}};var L=function(a,A){T(L,U);U.apply(this,[a,A,10,4]);this.name="Four-digit year"};L.prototype={getText:function(){return this._txtProvider.getYear()},setText:function(n,l,r){if(this._txtProvider._isSmartInputMode()&&r){var p=2000;if(this._txtProvider.inputWidget.options.startYear){p=this._txtProvider.inputWidget.options.startYear}var A=p+100-1;p=this._txtProvider.paddingZero(p,4);A=this._txtProvider.paddingZero(A,4);if(r.pos===0||r.pos===1){var m=new Date,q=this._txtProvider.paddingZero(this._txtProvider.getYear(),4);if(q.charAt(0)==="0"&&q.charAt(1)==="0"&&r.pos<=1){var s=r.val*1,u="00";if(s>=5){u=p.slice(0,2)}else{u=A.slice(0,2)}var t=r.val+q.slice(3,4),o=u+t;r.offset=2-r.pos;this._txtProvider.setYear(o,r);return true}}}return this._txtProvider.setYear(n,r)},inc:function(){this._txtProvider.setYear(this._txtProvider.getYear()*1+1,null,true)},dec:function(){this._txtProvider.setYear(this._txtProvider.getYear()*1-1,null,true)}};var G=function(a,A){T(G,U);U.apply(this,[a,A,1]);this.name="One-digit year"};G.prototype={getText:function(){var A=this._txtProvider.getYear();A=""+A+"";if(A.length===4){A=A.charAt(2)+A.charAt(3)}if(A.charAt(0)==="0"){A=A.charAt(1)}return A},setText:function(o,l,n){o=o+"";while(o.length<2){o="0"+o}var m=this._txtProvider.getYear();m=""+m+"";if(o==="00"){var q=this._txtProvider.getMonth(),r=this._txtProvider.getDayOfMonth(),p=this._txtProvider.getHours(),A=this._txtProvider.getMinutes(),j=this._txtProvider.getSeconds();if(q===1&&r===1&&!p&&!A&&!j){m="0001";o="01"}}if(m.length>=2){m=m.charAt(0)+m.charAt(1)+o.charAt(0)+o.charAt(1)}return this._txtProvider.setYear(m,n)},inc:function(){this._txtProvider.setYear(this._txtProvider.getYear()*1+1,null,true)},dec:function(){this._txtProvider.setYear(this._txtProvider.getYear()*1-1,null,true)}};var Ab=function(a,A){T(Ab,U);U.apply(this,[a,A,2]);this.name="Two-digit year"};Ab.prototype={getText:function(){var A=this._txtProvider.getYear();A=""+A+"";if(A.length===4){A=A.charAt(2)+A.charAt(3)}return A},setText:function(q,l,p){q=q+"";while(q.length<2){q="0"+q}var o=this._txtProvider.getYear();o=""+o+"";if(q==="00"){var m=this._txtProvider.getMonth(),A=this._txtProvider.getDayOfMonth(),s=this._txtProvider.getHours(),r=this._txtProvider.getMinutes(),n=this._txtProvider.getSeconds();if(m===1&&A===1&&!s&&!r&&!n){o="0001";q="01"}}if(o.length>=2){o=o.charAt(0)+o.charAt(1)+q.charAt(0)+q.charAt(1)}var t=this._txtProvider.setYear(o,p);return t},inc:function(){this._txtProvider.setYear(this._txtProvider.getYear()*1+1,null,true)},dec:function(){this._txtProvider.setYear(this._txtProvider.getYear()*1-1,null,true)}};var O=function(a,A){T(O,U);U.apply(this,[a,A,45]);this.name="h"};O.prototype={getText:function(){var A=this._txtProvider.getHours();if(A>12){A=A-12}return""+A+""},setText:function(e,A){var d=this._txtProvider.getHours();if(d>12){e=e*1+12}return this._txtProvider.setHours(e,A)},inc:function(){this._txtProvider.setHours(this._txtProvider.getHours()*1+1,true)},dec:function(){this._txtProvider.setHours(this._txtProvider.getHours()*1-1,true)}};var D=function(a,A){T(D,U);U.apply(this,[a,A,46]);this.name="hh"};D.prototype={getText:function(){var A=this._txtProvider.getHours();if(A>12){A=A-12}if(A<10){A="0"+A}return""+A+""},setText:function(e,A){var d=this._txtProvider.getHours();if(d>12){e=e*1+12}return this._txtProvider.setHours(e,A)},inc:function(){this._txtProvider.setHours(this._txtProvider.getHours()*1+1,true)},dec:function(){this._txtProvider.setHours(this._txtProvider.getHours()*1-1,true)}};var E=function(a,A){T(E,U);U.apply(this,[a,A,47]);this.name="H"};E.prototype={getText:function(){var A=this._txtProvider.getHours();return""+A+""},setText:function(A,c){return this._txtProvider.setHours(A,c)},inc:function(){this._txtProvider.setHours(this._txtProvider.getHours()*1+1,true)},dec:function(){this._txtProvider.setHours(this._txtProvider.getHours()*1-1,true)}};var B=function(a,A){T(B,U);U.apply(this,[a,A,48]);this.name="HH"};B.prototype={getText:function(){var A=this._txtProvider.getHours();if(A<10){A="0"+A}return""+A+""},setText:function(A,c){return this._txtProvider.setHours(A,c)},inc:function(){this._txtProvider.setHours(this._txtProvider.getHours()*1+1,true)},dec:function(){this._txtProvider.setHours(this._txtProvider.getHours()*1-1,true)}};var V=function(a,A){T(V,U);U.apply(this,[a,A,250]);this.name="t"};V.prototype={getText:function(){var d=this._txtProvider.getHours(),e="",A=this._txtProvider._getCulture();if(d<12){e=A.calendars.standard.AM[0]}else{e=A.calendars.standard.PM[0]}if(e.length<=0){e=" "}return e.charAt(0)},setText:function(c){if(c.toLowerCase().indexOf("a")>=0){var A=this._txtProvider.getHours()*1%12;this._txtProvider.setHours(A,true)}else{if(c.toLowerCase().indexOf("p")>=0){var A=this._txtProvider.getHours()*1%12+12;this._txtProvider.setHours(A,true)}}},inc:function(){var A=(this._txtProvider.getHours()*1+12)%24;this._txtProvider.setHours(A,true)},dec:function(){var A=(this._txtProvider.getHours()*1+12)%24;this._txtProvider.setHours(A,true)}};var W=function(a,A){T(W,U);U.apply(this,[a,A,251]);this.name="tt"};W.prototype={getText:function(){var d=this._txtProvider.getHours(),e="",A=this._txtProvider._getCulture();if(d<12){e=A.calendars.standard.AM[0]}else{e=A.calendars.standard.PM[0]}if(e.length<=0){e=" "}return e},setText:function(c){if(c.toLowerCase().indexOf("a")>=0){var A=this._txtProvider.getHours()*1%12;this._txtProvider.setHours(A,true)}else{if(c.toLowerCase().indexOf("p")>=0){var A=this._txtProvider.getHours()*1%12+12;this._txtProvider.setHours(A,true)}}return true},inc:function(){var A=(this._txtProvider.getHours()*1+12)%24;this._txtProvider.setHours(A,true)},dec:function(){var A=(this._txtProvider.getHours()*1+12)%24;this._txtProvider.setHours(A,true)}};var C=function(a,A){T(C,U);U.apply(this,[a,A,50]);this.name="mm"};C.prototype={getText:function(){var A=this._txtProvider.getMinutes();if(A<10){A="0"+A}return""+A+""},setText:function(A,d,e){if(e&&e.isfullreset){A="0"}return this._txtProvider.setMinutes(A,d)},inc:function(){this._txtProvider.setMinutes(this._txtProvider.getMinutes()*1+1,true)},dec:function(){this._txtProvider.setMinutes(this._txtProvider.getMinutes()*1-1,true)}};var H=function(a,A){T(H,U);U.apply(this,[a,A,51]);this.name="m"};H.prototype={getText:function(){var A=this._txtProvider.getMinutes();return""+A+""},setText:function(A,d,e){if(e&&e.isfullreset){A="0"}return this._txtProvider.setMinutes(A,d)},inc:function(){this._txtProvider.setMinutes(this._txtProvider.getMinutes()*1+12,true)},dec:function(){this._txtProvider.setMinutes(this._txtProvider.getMinutes()*1-12,true)}};var I=function(a,A){T(I,U);U.apply(this,[a,A,60]);this.name="ss"};I.prototype={getText:function(){var A=this._txtProvider.getSeconds();if(A<10){A="0"+A}return""+A+""},setText:function(A,d,e){if(e&&e.isfullreset){A="0"}return this._txtProvider.setSeconds(A,d)},inc:function(){this._txtProvider.setSeconds(this._txtProvider.getSeconds()*1+12,true)},dec:function(){this._txtProvider.setSeconds(this._txtProvider.getSeconds()*1-12,true)}};var F=function(a,A){T(F,U);U.apply(this,[a,A,61]);this.name="s"};F.prototype={getText:function(){var A=this._txtProvider.getSeconds();return""+A+""},setText:function(A,d,e){if(e&&e.isfullreset){A="0"}return this._txtProvider.setSeconds(A,d)},inc:function(){this._txtProvider.setSeconds(this._txtProvider.getSeconds()*1+12,true)},dec:function(){this._txtProvider.setSeconds(this._txtProvider.getSeconds()*1-12,true)}}})(jQuery);(function(B){var D={editOptional:1,editRequired:2,separator:4,literal:8};B.widget("wijmo.wijinputmask",B.extend(true,{},wijinputcore,{options:{text:null,mask:"",promptChar:"_",hidePromptOnLeave:false,resetOnPrompt:true,allowPromptAsInput:false,passwordChar:"",resetOnSpace:true,skipLiterals:true},_createTextProvider:function(){this._textProvider=new C(this,this.options.mask,false)},_beginUpdate:function(){this.element.addClass("wijmo-wijinput-mask");this.element.data("isPassword",this.options.passwordChar.length>0&&this.element.attr("type")!=="password");this.element.data("defaultText",this.options.text)},_onTriggerClicked:function(){this._popupComboList()},_setOption:function(E,G){B.Widget.prototype._setOption.apply(this,arguments);wijinputcore._setOption.apply(this,arguments);switch(E){case"text":this.setText(G);break;case"mask":case"culture":if(typeof G==="undefined"||G.length<=0){return}var F=this.getText();this._textProvider.mask=G;this._textProvider.initialMask=G;this._textProvider.initialize();this._textProvider.set(F);this._updateText();break;case"promptChar":if(!!this._textProvider){this._textProvider.updatePromptChar();this._updateText()}break;case"hidePromptOnLeave":case"resetOnPrompt":this._updateText();break;case"passwordChar":this.element.data("isPassword",(G+"").length>0);this._updateText()}},_resetData:function(){var E=this.options,F=this.element.data("defaultText");if(F===undefined||F===null){F=this.element.data("elementValue")}if(F===undefined||F===null){F=""}this.setText(F)},_isPassword:function(){return !!this.element.data("isPassword")},_getTextWithPrompts:function(){return !this._isInitialized()?this.element.val():this._textProvider.toString(true,true,false)},_getTextWithLiterals:function(){return !this._isInitialized()?this.element.val():this._textProvider.toString(true,false,true)},_getTextWithPromptAndLiterals:function(){return !this._isInitialized()?this.element.val():this._textProvider.toString(true,true,true)},_onChange:function(){if(!this.element){return}var E=this.element.val(),F=this.getText();if(F!==E){F=this._getTextWithPrompts();if(F!==E){F=this._getTextWithPromptAndLiterals();F!==E&&this.setText(E)}}},_afterFocused:function(){(this._isNullText()||!!this.options.hidePromptOnLeave)&&this._doFocus()}}));var C=function(F,E,G){this.inputWidget=F;this.mask=E;this.asciiOnly=G;this.descriptors=[];this.noMask=false;this.initialize()};C.prototype={inputWidget:undefined,noMask:false,mask:"",testString:"",assignedCharCount:0,requiredCharCount:0,asciiOnly:false,initialize:function(){this.noMask=!this.mask||this.mask.length<=0;if(this.noMask){return}this.testString="";this.assignedCharCount=0;this.requiredCharCount=0;this.descriptors=new Array(0);for(var I="none",G=false,J=0,O=D.literal,E="",H=this.inputWidget._getCulture(),F=0;F<this.mask.length;F++){var N=false,Q=this.mask.charAt(F);if(G){G=false;N=true}if(!N){var P=Q;if(P<="C"){switch(P){case"#":case"9":case"?":case"C":Q=this.getPromtChar();O=D.editOptional;N=true;break;case"$":E=H.numberFormat.currency.symbol;O=D.separator;N=true;break;case"%":case"-":case";":case"=":case"@":case"B":O=D.literal;N=true;break;case"&":case"0":case"A":Q=this.getPromtChar();O=D.editRequired;N=true;break;case",":E=H.numberFormat[","];O=D.separator;N=true;break;case".":E=H.numberFormat["."];O=D.separator;N=true;break;case"/":E=H.calendars.standard["/"];O=D.separator;N=true;break;case":":E=H.calendars.standard[":"];O=D.separator;N=true;break;case"<":I="lower";continue;case">":I="upper";continue}if(!N){O=D.literal;N=true}}if(!N){if(P<="\\"){switch(P){case"L":Q=this.getPromtChar();O=D.editRequired;N=true;break;case"\\":G=true;O=D.literal;continue}if(!N){O=D.literal;N=true}}if(!N){if(P==="a"){Q=this.getPromtChar();O=D.editOptional;N=true}if(!N){if(P!=="|"){O=D.literal;N=true}if(!N){I="none";continue}}}}}if(N){var L=new A(F,O);if(this.isEditDesc(L)){L.caseConversion=I}if(O!==D.separator){E=Q}for(var M=0;M<E.length;M++){var K=E.charAt(M);this.testString=this.testString+K;this.descriptors[this.descriptors.length]=L;J++}}}this.testString.Capacity=this.testString.length},getAllowPromptAsInput:function(){return !!this.inputWidget?this.inputWidget.options.allowPromptAsInput:false},getPasswordChar:function(){return !!this.inputWidget?this.inputWidget.options.passwordChar:"*"},isPassword:function(){return !!this.inputWidget?this.inputWidget._isPassword():false},getResetOnPrompt:function(){return !!this.inputWidget?this.inputWidget.options.resetOnPrompt:true},getResetOnSpace:function(){return !!this.inputWidget?this.inputWidget.options.resetOnSpace:true},getSkipLiterals:function(){return !!this.inputWidget?this.inputWidget.options.skipLiterals:true},getHidePromptOnLeave:function(){return !!this.inputWidget?this.inputWidget.options.hidePromptOnLeave:false},_trueOR:function(F,E){return(F>>>1|E>>>1)*2+(F&1|E&1)},setValue:function(){return false},getValue:function(){return null},getPromtChar:function(){return !!this.inputWidget?this.inputWidget.options.promptChar:"_"},updatePromptChar:function(){if(this.noMask){return}for(var F=0;F<this.descriptors.length;F++){var E=this.descriptors[F];if(E.charType===D.editOptional||E.charType===D.editRequired){if(!E.isAssigned){this.testString=B.wij.charValidator.setChar(this.testString,this.getPromtChar(),F)}}}},resetChar:function(F){var E=this.descriptors[F];if(this.isEditPos(F)&&E.isAssigned){E.isAssigned=false;this.testString=B.wij.charValidator.setChar(this.testString,this.getPromtChar(),F);this.assignedCharCount--;if(E.charType===D.editRequired){this.requiredCharCount--}}},getAdjustedPos:function(E){if(this.noMask){if(E>=this.testString.length){E=this.testString.length-1}}else{if(E>=this.descriptors.length){E=E-1}}return Math.max(0,E)},incEnumPart:function(){return !this.noMask},decEnumPart:function(){return !this.noMask},findNonEditPositionInRange:function(G,E,F){return this.findPositionInRange(G,E,F,this._trueOR(D.literal,D.separator))},findPositionInRange:function(I,G,F,J){I=Math.max(0,I);G=Math.min(G,this.testString.length-1);if(I<=G){while(I<=G){var H=F?I++:G--,E=this.descriptors[H];if((E.charType&4294967295&J&4294967295)===E.charType){return H}}}return -1},findAssignedEditPositionInRange:function(G,E,F){return this.assignedCharCount===0?-1:this.findEditPositionInRange(G,E,F,D.editRequired)},findEditPositionInRange:function(I,F,G,E){do{var H=this.findPositionInRange(I,F,G,this._trueOR(D.editRequired,D.editOptional));if(H===-1){break}var J=this.descriptors[H];switch(E){case D.editOptional:if(!J.isAssigned){return H}break;case D.editRequired:if(J.isAssigned){return H}break;default:return H}if(G){I++}else{F--}}while(I<=F);return -1},findAssignedEditPositionFrom:function(E,G){if(!this.assignedCharCount){return -1}var H,F;if(G){H=E;F=this.testString.length-1}else{H=0;F=E}return this.findAssignedEditPositionInRange(H,F,G)},findEditPositionFrom:function(E,G){var H,F;if(G){H=E;F=this.testString.length-1}else{H=0;F=E}return this.findEditPositionInRange(H,F,G,0)},setChar:function(G,F,E){F=F<0?0:F;if(!E){E=this.descriptors[F]}if(this.testEscapeChar(G,F,E)){this.resetChar(F)}else{if(B.wij.charValidator.isLetter(G)){if(B.wij.charValidator.isUpper(G)){if(E.caseConversion==="lower"){G=G.toLowerCase()}}else{if(E.caseConversion==="upper"){G=G.toUpperCase()}}}this.testString=B.wij.charValidator.setChar(this.testString,G,F);if(!E.isAssigned){E.isAssigned=true;this.assignedCharCount++;if(E.charType===D.editRequired){this.requiredCharCount++}}}},internalInsertAt:function(H,E,M,F){if(H.length===0){M.testPosition=E;M.hint=M.noEffect;return true}if(!this._testString(H,E,M)){return false}var K=this.findEditPositionFrom(E,true),O=this.findAssignedEditPositionInRange(K,M.testPosition,true)!==-1,G=this.findAssignedEditPositionFrom(this.testString.length-1,false);if(O&&M.testPosition===this.testString.length-1){M.hint=M.unavailableEditPosition;M.testPosition=this.testString.length;return false}var L=this.findEditPositionFrom(M.testPosition+1,true);if(O){var P=new wijInputResult;P.hint=P.unknown;var N=true;while(N){N=false;if(L===-1){M.hint=M.unavailableEditPosition;M.testPosition=this.testString.length;return false}var J=this.descriptors[K];if(J.isAssigned&&!this.testChar(this.testString.charAt(K),L,P)){M.hint=P.hint;M.testPosition=L;return false}if(K!==G){K=this.findEditPositionFrom(K+1,true);L=this.findEditPositionFrom(L+1,true);N=true;continue}}if(P.hint>M.hint){M.hint=P.hint}}if(!F){if(O){while(K>=E){var I=this.descriptors[K];if(I.isAssigned){this.setChar(this.testString.charAt(K),L)}else{this.resetChar(L)}L=this.findEditPositionFrom(L-1,false);K=this.findEditPositionFrom(K-1,false)}}this.setString(H,E)}return true},insertAt:function(F,G,E){if(E===undefined){E=new wijInputResult}if(F===undefined){throw"InsertAt: input"}if(this.noMask){this.testString=this.testString.substring(0,G)+F+this.testString.substring(G,this.testString.length);E.testPosition=G+F.length-1;return true}if(G>=0&&G<this.testString.length){return this.internalInsertAt(F,G,E,false)}E.testPosition=G;E.hint=E.positionOutOfRange;return false},clear:function(F){if(this.noMask){this.testString="";F.hint=F.success;return}if(!this.assignedCharCount){F.hint=F.noEffect}else{F.hint=F.success;for(var E=0;E<this.testString.length;E++){this.resetChar(E)}}},isLiteral:function(E){return !E?false:E.charType!==D.literal?E.charType===D.separator:true},testEscapeChar:function(E,G,F){G=G<0?0:G;if(!F){F=this.descriptors[G]}return this.isLiteral(F)?this.getSkipLiterals()?E===this.testString.charAt(G):false:(!this.getResetOnPrompt()||E!==this.getPromtChar())&&(!this.getResetOnSpace()||E!==" ")?false:true},testChar:function(G,F,H){if(!B.wij.charValidator.isPrintableChar(G)){H.hint=H.invalidInput;return false}var E=this.descriptors[F];if(!E){return false}if(this.isLiteral(E)){if(this.getSkipLiterals()&&G===this.testString.charAt(F)){H.hint=H.characterEscaped;return true}H.hint=H.nonEditPosition;return false}if(G===this.getPromtChar()){if(this.getResetOnPrompt()){if(this.isEditDesc(E)&&E.isAssigned){H.hint=H.sideEffect}else{H.hint=H.characterEscaped}return true}if(!this.getAllowPromptAsInput()){H.hint=H.promptCharNotAllowed;return false}}if(G===" "&&this.getResetOnSpace()){if(this.isEditDesc(E)&&E.isAssigned){H.hint=H.sideEffect}else{H.hint=H.characterEscaped}return true}switch(this.mask.charAt(E.maskPosition)){case"L":if(!B.wij.charValidator.isLetter(G)){H.hint=H.letterExpected;return false}if(!B.wij.charValidator.isAsciiLetter(G)&&this.asciiOnly){H.hint=H.asciiCharacterExpected;return false}break;case"a":if(!B.wij.charValidator.isAlphanumeric(G)&&G!==" "){H.hint=H.alphanumericCharacterExpected;return false}if(!B.wij.charValidator.isAciiAlphanumeric(G)&&this.asciiOnly){H.hint=H.asciiCharacterExpected;return false}break;case"?":if(!B.wij.charValidator.isLetter(G)&&G!==" "){H.hint=H.letterExpected;return false}if(B.wij.charValidator.isAsciiLetter(G)||!this.asciiOnly){break}H.hint=H.asciiCharacterExpected;return false;case"A":if(!B.wij.charValidator.isAlphanumeric(G)){H.hint=H.alphanumericCharacterExpected;return false}if(B.wij.charValidator.isAciiAlphanumeric(G)||!this.asciiOnly){break}H.hint=H.asciiCharacterExpected;return false;case"C":if(!B.wij.charValidator.isAscii(G)&&this.asciiOnly&&G!==" "){H.hint=H.asciiCharacterExpected;return false}break;case"9":if(!B.wij.charValidator.isDigit(G)&&G!==" "){H.hint=H.digitExpected;return false}break;case"#":if(!B.wij.charValidator.isDigit(G)&&G!=="-"&&G!=="+"&&G!==" "){H.hint=H.digitExpected;return false}break;case"&":if(!B.wij.charValidator.isAscii(G)&&this.asciiOnly){H.hint=H.asciiCharacterExpected;return false}break;case"0":if(!B.wij.charValidator.isDigit(G)){H.hint=H.digitExpected;return false}}if(G===this.testString.charAt(F)&&E.isAssigned){H.hint=H.noEffect}else{H.hint=H.success}return true},_testString:function(H,J,I){I.hint=I.unknown;I.testPosition=J;if(H.length){var G=new wijInputResult;G.testPosition=I.testPosition;G.hint=I.hint;for(var E=0;E<H.length;E++){var F=H.charAt(E);if(I.testPosition>this.testString.length){I.hint=I.unavailableEditPosition;return false}if(!this.testEscapeChar(F,I.testPosition)){I.testPosition=this.findEditPositionFrom(I.testPosition,true);if(I.testPosition===-1){I.testPosition=this.testString.length;I.hint=I.unavailableEditPosition;return false}}if(!this.testChar(F,I.testPosition,G)){I.hint=G.hint;return false}if(G.hint>I.hint){I.hint=G.hint}I.testPosition+=1;if(I.testPosition==this.testString.length){break}}I.testPosition-=1}return true},"set":function(E,G){if(G===undefined){G=new wijInputResult}if(E===undefined){throw"SetFromPos: input parameter is null or undefined."}G.hint=G.unknown;G.testPosition=0;if(!E.length){this.clear(G);return true}if(this.noMask){this.testString=E;return true}if(!this.testSetString(E,G.testPosition,G)){return false}var F=this.findAssignedEditPositionFrom(G.testPosition+1,true);F!==-1&&this.resetString(F,this.testString.length-1);return true},resetString:function(F,E){if(this.noMask){this.testString="";return}F=this.findAssignedEditPositionFrom(F,true);if(F!==-1){E=this.findAssignedEditPositionFrom(E,false);while(F<=E){F=this.findAssignedEditPositionFrom(F,true);this.resetChar(F);F++}}},setString:function(G,H){for(var F=0;F<G.length;F++){var E=G.charAt(F);if(!this.testEscapeChar(E,H)){H=this.findEditPositionFrom(H,true)}if(H<0||H>=this.testString.length){return}this.setChar(E,H);H++}},testSetString:function(G,E,F){if(G.length>this.testString.length){G=G.substring(0,this.testString.length)}if(this._testString(G,E,F)){this.setString(G,E);return true}return false},toString:function(E,P,O,N,Q){E=E===undefined?!this.isPassword():E;P=P===undefined?this.getHidePromptOnLeave()?this.inputWidget.isFocused():true:P;O=O===undefined?true:O;if(this.noMask){if(!E){for(var L="",K=0;K<this.testString.length;K++){L+=this.getPasswordChar()}return L}return this.testString}N=N===undefined?0:N;Q=Q===undefined?this.testString.length:Q;if(Q<=0){return""}if(N<0){N=0}if(N>=this.testString.length){return""}var F=this.testString.length-N;if(Q>F){Q=F}if((!this.isPassword()||E)&&P&&O){return this.testString.substring(N,Q-N)}for(var M="",J=N+Q-1,I=N;I<=J;I++){var H=this.testString.charAt(I),G=this.descriptors[I];switch(G.charType){case D.editOptional:case D.editRequired:if(!G.isAssigned){break}if(!this.isPassword()||E){M=M+H;continue}M=M+this.getPasswordChar();continue;case D.editRequired|D.editOptional:M=M+H;continue;case D.separator:case D.literal:if(!O){continue}M=M+H;continue;default:M=M+H;continue}if(P){M=M+H;continue}M=M+" ";continue}return M},isEditDesc:function(E){return this.noMask?true:E.charType!==D.editRequired?E.charType===D.editOptional:true},isEditPos:function(F){if(this.noMask){return true}if(F<0||F>=this.testString.length){return false}var E=this.descriptors[F];return this.isEditDesc(E)},internalRemoveAt:function(U,V,O,N){if(this.noMask){try{this.testString=this.testString.substring(0,U)+this.testString.substring(V+1,this.testString.length);O.testPosition=U}catch(F){}return true}var H=new wijInputResult,G,J,R=this.findAssignedEditPositionFrom(this.testString.length-1,false),P=this.findEditPositionInRange(U,V,true,0);O.hint=O.noEffect;if(P===-1||P>R){O.testPosition=U;return true}O.testPosition=U;var K=V<R;if(this.findAssignedEditPositionInRange(U,V,true)!==-1){O.hint=O.success}if(K){var Q=this.findEditPositionFrom(V+1,true),L=Q;U=P;var I=true;while(I){I=false;G=this.testString.charAt(Q);var E=this.descriptors[Q];if((G!==this.getPromtChar()||E.isAssigned)&&!this.testChar(G,P,H)){O.hint=H.hint;O.testPosition=P;return false}if(Q!==R){Q=this.findEditPositionFrom(Q+1,true);P=this.findEditPositionFrom(P+1,true);I=true;continue}}if(O.sideEffect>O.hint){O.hint=O.sideEffect}if(N){return true}Q=L;P=U;var T=true;while(T){T=false;J=this.testString.charAt(Q);var M=this.descriptors[Q];if(J===this.getPromtChar()&&!M.isAssigned){this.resetChar(P)}else{this.setChar(J,P);this.resetChar(Q)}if(Q!==R){Q=this.findEditPositionFrom(Q+1,true);P=this.findEditPositionFrom(P+1,true);T=true;continue}}U=P+1}U<=V&&this.resetString(U,V);return true},removeAt:function(F,E,G){if(typeof E==="undefined"){E=F}if(!G){G=new wijInputResult}if(E>=this.testString.length){G.testPosition=E;G.hint=G.positionOutOfRange;return false}if(F>=0&&F<=E){return this.internalRemoveAt(F,E,G,false)}G.testPosition=F;G.hint=G.positionOutOfRange;return false}};var A=function(E,F){this.caseConversion="none";this.maskPosition=E;this.charType=F};A.prototype={isAssigned:false,maskPosition:0}})(jQuery);(function(C){C.widget("wijmo.wijinputnumber",C.extend(true,{},wijinputcore,{options:{type:"numeric",value:null,minValue:-1000000000,maxValue:1000000000,showGroup:false,decimalPlaces:2,increment:1,valueChanged:null,valueBoundsExceeded:null},_createTextProvider:function(){this._textProvider=new B(this,this.options.type)},_beginUpdate:function(){var D=this.options;this.element.addClass("wijmo-wijinput-numeric");this.element.data({defaultValue:D.value,preValue:D.value}).attr({"aria-valuemin":D.minValue,"aria-valuemax":D.maxValue,"aria-valuenow":D.value||0})},_onTriggerClicked:function(){this._popupComboList()},_setOption:function(E,D){C.Widget.prototype._setOption.apply(this,arguments);wijinputcore._setOption.apply(this,arguments);switch(E){case"minValue":this.element.attr("aria-valuemin",D);this._updateText();break;case"maxValue":this.element.attr("aria-valuemax",D);this._updateText();break;case"value":this.setValue(D);this._updateText();break;case"showGroup":case"decimalPlaces":case"culture":this._textProvider.updateStringFormat();this._updateText()}},_setData:function(D){this.setValue(D)},_resetData:function(){var D=this.element.data("defaultValue");if(D===undefined||D===null){D=this.element.data("elementValue");if(D===undefined||D===null&&D===""){D=0}}this.setValue(D)},_validateData:function(){this._textProvider.checkAndRepairBounds(true,false)&&this._updateText()},_raiseDataChanged:function(){var E=this.options.value,D=this.element.data("preValue");this.element.data("preValue",E);if(D!==E){this.element.attr("aria-valuenow",E);this._trigger("valueChanged",null,{value:E})}},getValue:function(){var D=this._textProvider.getValue();if(D===undefined||D===null){D=this.getText()}return D},setValue:function(H,F){try{F=!!F;if(typeof H==="boolean"){H=H?"1":"0"}else{if(typeof H==="string"){H=this._textProvider.tryParseValue(H)}}if(this._textProvider.setValue(H)){this._updateText()}else{if(F){var G="";G=this.getText();this.setText(H);H=H.trim();var D=this.getText().trim();D!==H&&this.setText(G)}else{this.setText(H)}}return true}catch(E){return false}},isValueNull:function(){try{return this._textProvider.isValueNull()}catch(D){return true}},getPostValue:function(){if(!this._isInitialized()){return this.element.val()}if(this.options.showNullText&&this.isValueNull()){return"0"}var D=this.options.value?this.options.value:0;if(this.options.type==="percent"){D=(D/100).toFixed(10)}return D.toString()},_updateText:function(){if(!this._isInitialized()){return}this.options.value=this._textProvider.getValue();wijinputcore._updateText.apply(this,arguments);!this._textProvider.checkAndRepairBounds(false,false)&&this._trigger("valueBoundsExceeded")},_doSpin:function(E,G){E=!!E;G=!!G;if(!this._allowEdit()){return}if(G&&this.element.data("breakSpinner")){return}var D=this.element.wijtextselection(),F=new wijInputResult;if(this.element.data("focusNotCalledFirstTime")!==-9&&+new Date-this.element.data("focusNotCalledFirstTime")<600){this.element.data("focusNotCalledFirstTime",-9);this.element.data("prevCursorPos",0)}if(this.element.data("prevCursorPos")===-1){this.element.data("prevCursorPos",D.start)}else{D.start=this.element.data("prevCursorPos")}F.testPosition=D.start;this._textProvider[E?"incEnumPart":"decEnumPart"](D.start,F,this.options.increment);this._updateText();this.element.data("prevCursorPos",F.testPosition);this.selectText(F.testPosition,F.testPosition);G&&!this.element.data("breakSpinner")&&window.setTimeout(C.proxy(function(){this._doSpin(E,true)},this),this._calcSpinInterval())}}));var B=function(E,D){this.inputWidget=E;this._type=D;this._stringFormat=new A(this._type,this.inputWidget.options.decimalPlaces,this.inputWidget.options.showGroup,this._getCulture());this._stringFormat._setValueFromJSFloat(this.getValue())};B.prototype={_type:"numeric",_stringFormat:null,_getCulture:function(){return this.inputWidget._getCulture()},getDecimalSeparator:function(){return this._getCulture().numberFormat["."]},tryParseValue:function(D){return this._stringFormat.tryParseValue(D)},toString:function(){return this.inputWidget.options.showNullText&&!this.inputWidget.isFocused()&&this.isValueNull()?this.inputWidget.options.nullText:this._stringFormat.getFormattedValue()},isValueNull:function(){var E=this.inputWidget.options,D=Math.max(0,E.minValue);return null===E.value||undefined===E.value||D===E.value},"set":function(E,D){this.clear();this.insertAt(E,0,D);return true},clear:function(){this._stringFormat.clear()},checkAndRepairBounds:function(H,G){var F=true;if(typeof H==="undefined"){H=false}var D=this.inputWidget.options.minValue,E=this.inputWidget.options.maxValue;if(typeof G!=="undefined"&&G){return this._stringFormat.checkMinValue(D,false,true)}if(!this._stringFormat.checkMinValue(D,H,false)){F=false}if(!this._stringFormat.checkMaxValue(E,H)){F=false}this.inputWidget.options.decimalPlaces>=0&&this._stringFormat.checkDigitsLimits(this.inputWidget.options.decimalPlaces);return F},countSubstring:function(F,E){var D=0,G=F.indexOf(E);while(G!==-1){D++;G=F.indexOf(E,G+1)}return D},getAdjustedPositionFromLeft:function(F){for(var E=this._stringFormat._currentText,G=0;G<E.length;G++){var D=E.charAt(G);if(!C.wij.charValidator.isDigit(D)&&D!==","&&D!=="."||D==="0"){if(this._stringFormat.isZero()){if(F<G){F++}}else{if(F<=G){F++}}}else{break}}return F},getDecimalSeparatorPos:function(){var D=this._stringFormat._currentText;return D.indexOf(this.getDecimalSeparator())},insertAt:function(L,P,M){var G=this._getCulture().numberFormat;if(L===G["."]){L=G["."]}if(!M){M=new wijInputResult}if(L.length===1){if(L==="+"){this._stringFormat.setPositiveSign();this.checkAndRepairBounds(true,false);return true}if(L==="-"||L===")"||L==="("){this._stringFormat.invertSign();this.checkAndRepairBounds(true,false);M.testPosition=P;if(this._stringFormat.isNegative()){M.testPosition=P}else{M.testPosition=P-2}return true}if(!C.wij.charValidator.isDigit(L)){if(L==="."){var E=this.getDecimalSeparatorPos();if(E>=0){M.testPosition=E;return true}}if(L!==","&&L!=="."&&L!==")"&&L!=="+"&&L!=="-"&&L!=="("&&L!==this.getDecimalSeparator()){if(this._type==="percent"&&L===G.percent.symbol){M.testPosition=P;return true}else{if(this._type==="currency"&&L===G.currency.symbol){M.testPosition=P;return true}else{return false}}}}}P=this.getAdjustedPositionFromLeft(P);var O=P,D=this._stringFormat._currentText;if(O>D.length){O=D.length-1}if(L.length===1){if(D.charAt(O)===L){M.testPosition=O;return true}}var N=D.substring(0,O),H=D.substring(O,D.length);if(this._stringFormat.isZero()){H=H.replace(new RegExp("[0]"),"")}M.testPosition=N.length+L.length-1;this._stringFormat.deFormatValue(N+L+H);this.checkAndRepairBounds(true,false);try{if(L.length===1){if(this.inputWidget.options.showGroup){var J=this._stringFormat._currentText.substring(0,N.length);if(this.countSubstring(J,this._stringFormat._groupSeparator)!==this.countSubstring(N,this._stringFormat._groupSeparator)){M.testPosition=M.testPosition+1}}else{var F=N.charAt(N.length-1),K=this._stringFormat._currentText.charAt(M.testPosition-1);if(K!==F){M.testPosition=M.testPosition-1}}}}catch(I){}return true},removeAt:function(G,D,I){var J=this._getCulture().numberFormat;if(!I){I=new wijInputResult}I.testPosition=G;try{var H=this._stringFormat._currentText;if(G===D&&H.substring(G,D+1)===this.getDecimalSeparator()){return false}var L=H.slice(0,G)+H.slice(D+1);if(L===""){L="0"}this._stringFormat.deFormatValue(L);if(G===D&&this.inputWidget.options.showGroup){try{var K=this._stringFormat._currentText.substring(0,G);if(this.countSubstring(K,this._stringFormat._groupSeparator)!==this.countSubstring(L,this._stringFormat._groupSeparator)){I.testPosition=I.testPosition-1;if(H.indexOf(J.currency.symbol)===I.testPosition||H.indexOf(J.percent.symbol)===I.testPosition){I.testPosition=I.testPosition+1}}}catch(E){}}this.checkAndRepairBounds(true,false);return true}catch(F){}this.checkAndRepairBounds(true,false);return true},incEnumPart:function(E,F,D){if(!F){F=new wijInputResult}this._stringFormat.increment(D);return this.checkAndRepairBounds(true,false)},decEnumPart:function(E,F,D){if(!F){F=new wijInputResult}this._stringFormat.decrement(D);return this.checkAndRepairBounds(true,false)},getValue:function(){return this._stringFormat.getJSFloatValue()},setValue:function(E){try{this._stringFormat._setValueFromJSFloat(E);this.checkAndRepairBounds(true,false);return true}catch(D){return false}},updateStringFormat:function(){var D="0";if(typeof this._stringFormat!=="undefined"){D=this._stringFormat._currentValueInString}this._stringFormat=new A(this._type,this.inputWidget.options.decimalPlaces,this.inputWidget.options.showGroup,this._getCulture());this._stringFormat._currentValueInString=D}};var A=function(D,G,F,E){this.type=D;this.digitsPlaces=G;this.showGroup=F;this.culture=E};A.prototype={_currentValueInString:"0",_currentText:"0",_groupSeparator:" ",type:"numeric",digitsPlaces:0,showGroup:false,culture:null,isNegtive:function(D){return D.indexOf("-")!==-1||D.indexOf("(")!==-1},stripValue:function(I){var G=this.culture.numberFormat,K=this.isNegtive(I);I=I.replace("(","");I=I.replace(")","");I=I.replace("-","");I=I.replace(G.percent.symbol,"");I=I.replace(G.currency.symbol,"");var L=G[","],D=G["."];switch(this.type){case"percent":L=G.percent[","];D=G.percent["."];break;case"currency":L=G.currency[","];D=G.currency["."]}this._groupSeparator=L;var H=new RegExp("["+L+"]","g");I=I.replace(H,"");H=new RegExp("["+D+"]","g");I=I.replace(H,".");H=new RegExp("[ ]","g");I=I.replace(H,"");try{var E=new RegExp("([\\d\\.])+"),J=E.exec(I);if(J){I=J[0]}if(K){I="-"+I}return I}catch(F){}return null},tryParseValue:function(E){E=this.stripValue(E);if(E===null){return 0}try{E=parseFloat(E);if(isNaN(E)){E=0}}catch(D){E=0}return E},deFormatValue:function(D){D=this.stripValue(D);if(D===null){return}this._currentValueInString=D;this._currentText=this.formatValue(D)},formatValue:function(I){var J=this.culture.numberFormat;I=""+I+"";var E=this.digitsPlaces,L=" ",D=".",K=2,G=this.isNegtive(I),M=new Array(3);M.push(3);var F="n";switch(this.type){case"numeric":F=G?J.pattern[0]:"n";L=J[","];D=J["."];K=J.decimals;M=J.groupSizes;break;case"percent":F=J.percent.pattern[G?0:1];L=J.percent[","];D=J.percent["."];K=J.percent.decimals;M=J.percent.groupSizes;break;case"currency":F=J.currency.pattern[G?0:1];L=J.currency[","];D=J.currency["."];K=J.currency.decimals;M=J.currency.groupSizes}if(E!==-2){K=E}if(!this.showGroup){M=[0]}I=I.replace(new RegExp("^[0]+"),"");var H=this.formatDigit(I,L,D,K,M);H=H.replace(new RegExp("^[0]+"),"");if(H.indexOf(D)===0){H="0"+H}if(H===""){H="0"}this._currentValueInString=I;this._currentText=this.applyFormatPattern(F,H,J.percent.symbol,J.currency.symbol);return this._currentText},getFormattedValue:function(){return this.formatValue(this._currentValueInString)},getJSFloatValue:function(){try{return this._currentValueInString===""?0:parseFloat(this._currentValueInString)}catch(D){return Number.NaN}},clear:function(){this._currentValueInString="0";this._currentText="0"},_setValueFromJSFloat:function(E){try{this._currentValueInString=""+E+"";this.formatValue(E);return true}catch(D){return false}},isZero:function(E){try{if(E===undefined){E=this._currentValueInString}var G=E.replace("-","");G=G.replace("(","");G=G.replace(")","");if(!G.length){G="0"}var F=parseFloat(G);if(!isNaN(F)&&!F){return true}}catch(D){}return false},setPositiveSign:function(){this._currentValueInString=this._currentValueInString.replace("-","");this._currentValueInString=this._currentValueInString.replace("(","");this._currentValueInString=this._currentValueInString.replace(")","")},isNegative:function(){return this._currentValueInString.indexOf("-")!==-1||this._currentValueInString.indexOf("(")!==-1},invertSign:function(){var D=this.isNegative();if(D){this.setPositiveSign()}else{this._currentValueInString=!this._currentValueInString.length?"0":"-"+this._currentValueInString}if(this.isZero()){this._currentValueInString=D?"0":"-0"}this.formatValue(this._currentValueInString)},increment:function(D){if(D===undefined){D=1}try{var F=this._currentValueInString.split(".");this._currentValueInString=F[0]*1+D+""+(F.length>1?"."+F[1]:"")}catch(E){}},decrement:function(D){if(D===undefined){D=1}try{var F=this._currentValueInString.split(".");this._currentValueInString=F[0]*1-D+""+(F.length>1?"."+F[1]:"")}catch(E){}},checkDigitsLimits:function(J){try{var I=this._currentValueInString.split(".");if(!I.length||I.length===1&&I[0]===""){return}var E="";if(I.length>1){E=I[1]}for(var G="",H=0;H<J;H++){var F="0";if(E.length>H){F=E.charAt(H)}G=G+F}if(G.length>0){this._currentValueInString=I[0]+"."+G}else{this._currentValueInString=I[0]}}catch(D){}},checkMinValue:function(L,G,F){if(typeof F==="undefined"){F=false}var M=true;try{var J=this._currentValueInString.split("."),H=parseFloat(J[0]===""||J[0]==="-"?"0":J[0]),I=0;if(J.length>1&&parseFloat(J[1])>0){I=parseFloat("1."+J[1])}if(H<0||J[0]==="-"){I=I*-1}L=""+L+"";J=L.split(".");var D=parseFloat(J[0]),K=0;if(J.length>1&&parseFloat(J[1])>0){K=parseFloat("1."+J[1])}if(H>D){return true}if(H<D||F&&H===D&&I<=K){M=false}else{if(H===D&&H<0&&I>K){M=false}else{if(H===D&&H>=0&&I<K){M=false}}}if(!M&&G){this._currentValueInString=""+L+""}}catch(E){}return M},checkMaxValue:function(J,E){var H=true;try{var I=this._currentValueInString.split("."),G=parseFloat(I[0]===""||I[0]==="-"?"0":I[0]),L=0;if(I.length>1&&parseFloat(I[1])>0){L=parseFloat("1."+I[1])}if(G<0||I[0]==="-"){L=L*-1}J=""+J+"";I=J.split(".");var D=parseFloat(I[0]),K=0;if(I.length>1&&parseFloat(I[1])>0){K=parseFloat("1."+I[1])}if(G<D){return true}if(G>D){H=false}if(G===D&&G>=0&&L>K){H=false}if(G===D&&G<0&&L<K){H=false}if(!H&&E){this._currentValueInString=""+J+""}}catch(F){}return H},applyFormatPattern:function(I,E,D,G){var H=I,F=new RegExp("[n]","g");H=H.replace(F,E);F=new RegExp("[%]","g");H=H.replace(F,D);F=new RegExp("[$]","g");H=H.replace(F,G);return H},formatDigit:function(I,F,N,E,H){var L=""+I+"";L=L.replace("-","");L=L.replace("(","");L=L.replace(")","");var K=L.indexOf(N);if(K===-1){K=L.indexOf(".")}if(K===-1){K=L.indexOf(",")}if(K===-1){K=L.length}for(var J="",M=0,G=0,D,O=L.length-1;O>=0;O--){D=L.charAt(O);if(O<K){J=D+J;G++;if(G===H[M]*1&&H[M]*1&&O){J=F+J;G=0;if(H.length-1>M){M++}}}}if(E>0){J=J+N;for(O=0;O<E;O++){D="0";if(O+K+1<L.length){D=L.charAt(O+K+1)}J=J+D}}if(E===-1){if(K<L.length-1){J=J+N;J=J+L.substr(K+1)}}return J}}})(jQuery);(function(A){A.widget("wijmo.wijgrid",{options:{allowColSizing:false,allowColMoving:false,allowKeyboardNavigation:false,allowPaging:false,allowSorting:false,allowEditing:false,alwaysParseData:true,columnsAutogenerationMode:"merge",cellStyleFormatter:undefined,columns:[],culture:"",customFilterOperators:[],data:null,ensureColumnsPxWidth:false,filterOperatorsSortMode:"alphabeticalCustomFirst",groupAreaCaption:"Drag a column here to group by that column.",groupIndent:10,highlightCurrentCell:false,nullString:undefined,pageIndex:0,pageSize:10,pagerSettings:{mode:"numeric",pageButtonCount:10,position:"bottom"},readAttributesFromData:false,rowStyleFormatter:undefined,scrollMode:"none",selectionMode:"singleRow",showFilter:false,showFooter:false,showGroupArea:false,showRowHeader:false,staticColumnIndex:-1,staticRowIndex:-1,afterCellEdit:null,afterCellUpdate:null,beforeCellEdit:null,beforeCellUpdate:null,columnDragging:null,columnDragged:null,columnDropping:null,columnDropped:null,columnGrouping:null,columnGrouped:null,columnResizing:null,columnResized:null,columnUngrouping:null,columnUngrouped:null,currentCellChanging:null,currentCellChanged:null,filterOperatorsListShowing:null,filtering:null,filtered:null,groupAggregate:null,groupText:null,invalidCellValue:null,pageIndexChanging:null,pageIndexChanged:null,selectionChanged:null,sorting:null,sorted:null,ajaxError:null,dataLoading:null,dataLoaded:null,loading:null,loaded:null,rendering:null,rendered:null},_data$prefix:"wijgrid",_customSortOrder:1000,_reverseKey:false,_pageSizeKey:10,_ajaxError:function(B,D,C){this._trigger("ajaxError",null,{XMLHttpRequest:B,textStatus:D,errorThrown:C});this.outerDiv.removeClass("wijmo-wijgrid-loading")},_dataLoading:function(){this._trigger("dataLoading");this.outerDiv.addClass("wijmo-wijgrid-loading")},_dataLoaded:function(B){this._trigger("dataLoaded");this.outerDiv.removeClass("wijmo-wijgrid-loading");this.doRefresh(B);this._trigger("loaded")},ensureControl:function(C,B){this._trigger("loading");if(!A.isPlainObject(B)){B={data:null,afterRefresh:null,beforeRefresh:null}}if(this._initialized){this._ownerise(false);this._widgetsToOptions()}else{this._prepareColumnOptions(false)}this._ownerise(true);if(C===true){this._dataStore.load(B)}else{this.doRefresh(B);this._trigger("loaded")}},doRefresh:function(M){if(!this._initialized){try{this._prepareColumnOptions(true)}catch(G){throw G}finally{this._ownerise(true);this._initialized=true}}else{M&&A.isFunction(M.beforeRefresh)&&M.beforeRefresh.apply(this)}this._rebuildLeaves();var L=this._dataStore.getDataSlice(),I=L.data,D,K,E,N,J,B,C,F,H;A.each(this._field("leaves"),function(){this._totalsValue=L.totals?L.totals[this.dataKey]:undefined});this._setPageCount(L);D=this._field("leaves");this.dataTable=[];if(E=I.length){for(K=0;K<E;K++){N=I[K];J=[];for(B=0,C=D.length;B<C;B++){F=D[B];if(A.wijmo.wijgrid.validDataKey(F.dataKey)){J.push({value:N.values[F.dataKey],__attr:N.attributes?N.attributes.cellsAttributes[F.dataKey]:{},__style:{}});J.originalRowIndex=N.originalRowIndex}}J.rowType=A.wijmo.wijgrid.rowType.data;if(K%2!==0){J.rowType|=A.wijmo.wijgrid.rowType.dataAlt}J.__style={};J.__attr=N.attributes?N.attributes.rowAttributes:{};this.dataTable.push(J)}}else{if(L.emptyData&&(E=L.emptyData.length)){for(K=0;K<E;K++){N=L.emptyData[K];J=[];H=this._field("visibleLeaves").length;for(B=0,C=N.length;B<C;B++){J.push({html:N[B],__attr:{colSpan:H>0&&K===E-1?H-K:1},__style:{}})}J.rowType=A.wijmo.wijgrid.rowType.emptyDataRow;J.__style={};J.__attr={};this.dataTable.push(J)}}}this._trigger("rendering");this._refresh();this._trigger("rendered");M&&A.isFunction(M.afterRefresh)&&M.afterRefresh.apply(this)},getFilterOperatorsByDataType:function(B){var C=this.filterOperatorsCache.getByDataType(B||"string");this.filterOperatorsCache.sort(C,this.options.filterOperatorsSortMode);return C},setSize:function(B,H){var F=this._view(),G={type:"",hScrollValue:null,vScrollValue:null},D=this.outerDiv,C=this._field("frozener"),E=this._field("visibleLeaves");if(F&&F.getScrollValue){G=F.getScrollValue()}if(B!==null){this._autoWidth=false;D.width(B)}if(H!==null){this._autoHeight=false;D.height(H)}A.each(E,function(K){var J=F.getHeaderCell(K),I=F.getJoinedCols(K);A(J).css("width","");A.each(I,function(M,L){A(L).css("width","")})});this._updateSplits(G);C&&C.refresh()},_prepareColumnOptions:function(B){A.wijmo.wijgrid.traverse(this.options.columns,function(H){H.isBand=A.isArray(H.columns)||H.clientType==="c1band"});(new A.wijmo.wijgrid.bandProcessor)._getVisibleHeight(this.options.columns,true);var G=[],F,D=this._originalHeaderRowData(),C=this._originalFooterRowData(),E=(this.options.columnsAutogenerationMode||"").toLowerCase();if(B){F=this._dataStore.dataMode()===A.wijmo.wijgrid.dataMode.dom;E!=="none"&&new A.wijmo.wijgrid.columnsGenerator(this).generate(E,this._dataStore,this.options.columns)}A.wijmo.wijgrid.setTraverseIndex(this.options.columns);A.wijmo.wijgrid.traverse(this.options.columns,function(H){H.isBand=A.isArray(H.columns)||H.clientType==="c1band";A.wijmo.wijgrid.shallowMerge(H,A.wijmo.c1basefield.prototype.options);if(!H.isBand){A.wijmo.wijgrid.shallowMerge(H,A.wijmo.c1field.prototype.options);if(!H.clientType){H.clientType="c1field"}}else{H.clientType="c1band"}H.isLeaf&&!H.isBand&&G.push(H)});this._field("leaves",G);B&&A.each(G,function(H,J){var I=typeof J.dataKey==="number"?J.dataKey:H;if(E==="merge"||J.dynamic===true){if(J.headerText===undefined){if(F&&D&&I<D.length){J.headerText=A.trim(D[I])}else{if(A.wijmo.wijgrid.validDataKey(J.dataKey)){J.headerText=""+J.dataKey}}}}if(F&&C&&I<C.length){J._footerTextDOM=A.trim(C[I])}})},_rebuildLeaves:function(){var C=[],B=[],D;if(this.options.showRowHeader){D=A.wijmo.wijgrid.createDynamicField({clientType:"c1basefield",dataIndex:-1,travIdx:-1,parentVis:true,allowMoving:false,allowSizing:false,allowSort:false,isRowHeader:true});D.owner=this;C.push(D)}A.each(this.options.columns,function(E,F){C.push(F)});this._field("spanTable",(new A.wijmo.wijgrid.bandProcessor).generateSpanTable(C,B));this._field("leaves",B);this._onLeavesCreated()},_onLeavesCreated:function(){var B=this._field("leaves"),E=0,D=0,C=this;this._field("visibleLeaves",A.grep(B,function(F,G){F.leavesIdx=G;if(A.wijmo.wijgrid.validDataKey(F.dataKey)){F.dataIndex=E++}else{F.dataIndex=-1}if(!F.isBand){C._ensureDataParser(F);if(A.isFunction(F.dataParser)){F.dataParser=new F.dataParser}}if(F.parentVis){F.visLeavesIdx=D++;return true}return false}))},_create:function(){if(!this.element.is("table")){throw"invalid markup"}this.destroyed=false;var B=this.element[0].style.height,C=this.element[0].style.width;this._dataStore=new A.wijmo.wijgrid.dataStore(this);this._originalHtml=this.element.html();this.element.addClass("wijmo-wijgrid-root");this.element.wrap('<div class="ui-widget wijmo-wijgrid ui-widget-content ui-corner-all"></div>');this.outerDiv=this.element.parent();B&&this.outerDiv.css("height",this.element[0].style.height);if(B!==""&&B!=="auto"){this._autoHeight=false}else{this._autoHeight=true}C&&this.outerDiv.css("width",this.element[0].style.width);if(C!==""&&C!=="auto"){this._autoWidth=false}else{this._autoWidth=true}this.element.css({height:"",width:""});this.filterOperatorsCache=new A.wijmo.wijgrid.filterOperatorsCache;this._registerFilterOperator(A.wijmo.wijgrid.embeddedFilters);this.options.disabled&&this.disable();this.cellFormatter=new A.wijmo.wijgrid.cellFormatterHelper;this.rowStyleFormatter=new A.wijmo.wijgrid.rowStyleFormatterHelper(this);this.cellStyleFormatter=new A.wijmo.wijgrid.cellStyleFormatterHelper(this)},_init:function(){this.$superPanelHeader=null;this.$topPagerDiv=null;this.$bottomPagerDiv=null;this.$groupArea=null;this.filterOperatorsCache.removeCustom();A.each(this.options.customFilterOperators,function(B,C){if(C){C.custom=true}});this._registerFilterOperator(this.options.customFilterOperators);this._field("closestCulture",Globalize.findClosestCulture(this.options.culture)||Globalize.findClosestCulture("default"));if(!this.options.data){!this._field("thead")&&this._field("thead",A.wijmo.wijgrid.readTableSection(this.element,1));!this._field("tfoot")&&this._field("tfoot",A.wijmo.wijgrid.readTableSection(this.element,3))}this._initialized=this._initialized||false;this.ensureControl(true)},_setOption:function(F,E){var B=this["_preset_"+F],D=this.options[F],G,C;if(B!==undefined){E=B.apply(this,[E,D])}G=E!==D;A.Widget.prototype._setOption.apply(this,[F,E]);if(G){C=this["_postset_"+F];C!==undefined&&C.apply(this,[E,D])}},destroy:function(){var B,C=this;try{this._view().dispose();this._detachEvents(true);(B=this._field("resizer"))&&B.dispose();(B=this._field("frozener"))&&B.dispose();A.wijmo.wijgrid.iterateChildrenWidgets(this.outerDiv,function(D,E){E!==C&&E.destroy()});(B=this._field("selectionui"))&&B.dispose();(B=this._field("dragndrop"))&&B.dispose();A.wijmo.wijgrid.remove$dataByPrefix(this.element,this._data$prefix);this.element.removeClass("wijmo-wijgrid-root");this.element.html(this._originalHtml);this.element.insertBefore(this.outerDiv);this.outerDiv.remove();A.Widget.prototype.destroy.apply(this,arguments)}finally{this.destroyed=true}},columns:function(){return this._field("columns")||[]},currentCell:function(D,B){var C;if(arguments.length===0){C=this._field("currentCell");!C&&this._field("currentCell",C=A.wijmo.wijgrid.cellInfo.prototype.outsideValue);return C}else{C=arguments.length===1?D._clone():new A.wijmo.wijgrid.cellInfo(D,B);if(!C.isEqual(A.wijmo.wijgrid.cellInfo.prototype.outsideValue)){if(!C._isValid()){throw"invalid arguments"}C._clip(this._getDataCellsRange());if(C.rowIndex()>=0&&!(this.dataTable[C.rowIndex()].rowType&A.wijmo.wijgrid.rowType.data)){return}}C._setGridView(this);this._changeCurrentCell(C);return this._field("currentCell")}},data:function(){return this._dataStore.dataSource().items},selection:function(){var B=this._field("selection");!B&&this._field("selection",B=new A.wijmo.wijgrid.selection(this));return B},beginEdit:function(){return this._beginEditInternal(null)},endEdit:function(){return this._endEditInternal(null)},pageCount:function(){return this.options.allowPaging?this._field("pageCount")||1:1},_dragndrop:function(){var B=this._field("dragndrop");!B&&this._field("dragndrop",B=new A.wijmo.wijgrid.dragAndDropHelper(this));return B},_headerRows:function(){var B=this._field("headerRowsAccessor"),C;if(!B){C=this.options.showFilter?1:0;this._field("headerRowsAccessor",B=new A.wijmo.wijgrid.rowAccessor(this._view(),1,0,C))}return B},_filterRow:function(){if(this.options.showFilter){var B=new A.wijmo.wijgrid.rowAccessor(this._view(),1,0,0);return B.item(B.length()-1)}return null},_localizeFilterOperators:function(B){var C=this;A.each(B,function(D,F){if(F.name){var E=C.filterOperatorsCache.getByName(F.name);if(E){E.displayName=F.displayName}}})},_rows:function(){var B=this._field("rowsAccessor");!B&&this._field("rowsAccessor",B=new A.wijmo.wijgrid.rowAccessor(this._view(),2,0,0));return B},_selectionui:function(){var B=this._field("selectionui");!B&&this._field("selectionui",B=new A.wijmo.wijgrid.selectionui(this));return B},_setPageCount:function(B){this._field("pageCount",Math.ceil(B.totalRows/this.options.pageSize)||1)},_registerFilterOperator:function(C){var B=this,D=C&&(A.isArray(C)||A.isPlainObject(C)&&!C.operator)?C:arguments;A.each(D,function(E,F){B.filterOperatorsCache.add(F)})},_postset_allowColMoving:function(C){var B=this;A.each(this.columns(),function(D,E){if(C){B._dragndrop().attach(E)}else{B._dragndrop().detach(E)}});A.each(this._field("groupedWidgets"),function(D,E){if(C){B._dragndrop().attach(E)}else{B._dragndrop().detach(E)}})},_postset_allowSorting:function(){this.ensureControl(false)},_postset_columns:function(){throw"read-only"},_postset_allowPaging:function(){this.ensureControl(true)},_postset_culture:function(){throw"read-only"},_postset_customFilterOperators:function(B){this.filterOperatorsCache.removeCustom();A.each(this.options.customFilterOperators,function(C,D){D.custom=true});this._registerFilterOperator(B)},_postset_data:function(){throw"read-only"},_postset_disabled:function(B){var C=this;A.wijmo.wijgrid.iterateChildrenWidgets(this.outerDiv,function(D,E){E!==C&&E.option("disabled",B)})},_postset_groupIndent:function(){this.ensureControl(false)},_postset_groupAreaCaption:function(B){var C=this._field("groupedColumns");this.$groupArea&&(!C||!C.length)&&this.$groupArea.html(B||"&nbsp;")},_postset_highlightCurrentCell:function(B){var C=this.currentCell();C&&C._isValid()&&this._highlightCellPosition(C,B)},_preset_pageIndex:function(D,C){if(isNaN(D)){throw"out of range"}var B=this.pageCount();if(D>B-1){D=B-1}if(D<0){D=0}if(this.options.allowPaging&&D!==C){if(!this._onPageIndexChanging({newPageIndex:D})){D=C}}return D},_postset_pageIndex:function(){this.options.allowPaging&&this.ensureControl(true,{afterRefresh:function(){this._onPageIndexChanged()}})},_preset_pageSize:function(B){if(isNaN(B)){throw"out of range"}if(B<=0){B=1}return B},_postset_pageSize:function(){this.options.pageIndex=0;this.options.allowPaging&&this.ensureControl(true)},_postset_pagerSettings:function(){this.ensureControl(false)},_postset_scrollMode:function(B,C){if(B==="none"||C==="none"){this.ensureControl(false)}else{this._view().refreshPanel()}},_postset_selectionMode:function(B){var D=this.selection(),C=this.currentCell();D.beginUpdate();D.clear();C&&C._isValid()&&D._selectRange(new A.wijmo.wijgrid.cellInfoRange(C,C),false,false,0,null);D.endUpdate();this._view().toggleDOMSelection(B==="none")},_postset_showFilter:function(){this.ensureControl(false)},_postset_showGroupArea:function(){this.ensureControl(false)},_postset_showRowHeader:function(){this.ensureControl(false)},_postset_staticRowIndex:function(){this.options.scrollMode!=="none"&&this.ensureControl(false)},_postset_staticColumnIndex:function(){this.options.scrollMode!=="none"&&this.ensureControl(false)},_columnWidgetsFactory:function(C,D){var E,B=D.clientType;if(!B&&D.isBand){B="c1band"}D=A.extend({owner:this},D,{disabled:this.options.disabled});switch(B){case"c1basefield":E=C.c1basefield(D);break;case"c1band":E=C.c1band(D);break;default:E=C.c1field(D)}return E},_field:function(C,B){return A.wijmo.wijgrid.dataPrefix(this.element[0],this._data$prefix,C,B)},_removeField:function(B){var C=this._data$prefix+B;this.element.removeData(C)},_changeRenderState:function(E,D,F){var B=A.wijmo.wijgrid.dataPrefix,C=B(E,this._data$prefix,"renderState");if(F){D=C|D;B(E,this._data$prefix,"renderState",D)}else{D=C&~D;B(E,this._data$prefix,"renderState",D)}return D},_prepareFilterRequest:function(B){var C=this._field("leaves"),D;if(!C){return[]}D=A.map(C,A.proxy(function(F){if(!F.isBand&&A.wijmo.wijgrid.validDataKey(F.dataKey)&&F.filterOperator){var H=A.extend(true,{},{foo:F.filterValue}).foo,E=A.extend(true,{},{foo:F.filterOperator}).foo,G=A.wijmo.wijgrid.filterHelper.verify(E,H,F.dataType,this.filterOperatorsCache);if(G){return B?[{column:F,filterOperator:G.filterOperator,filterValue:G.filterValue}]:[{dataKey:F.dataKey,filterOperator:G.filterOperator,filterValue:G.filterValue}]}}return null},this));return D},_preparePageRequest:function(){return this.options.allowPaging?{pageIndex:this.options.pageIndex,pageSize:this.options.pageSize}:null},_prepareSortRequest:function(){var C=this._field("leaves"),B;if(!C||!this.options.allowSorting){return[]}B=A.map(C,function(D){var E=null;if(!D.isBand&&D.allowSort&&A.wijmo.wijgrid.validDataKey(D.dataKey)){if(D.groupInfo&&D.groupInfo.position!=="none"&&D.sortDirection==="none"){D.sortDirection="ascending"}E=D.sortDirection==="ascending"||D.sortDirection==="descending"?[{dataKey:D.dataKey,sortDirection:D.sortDirection,sortOrder:D.sortOrder||0}]:null}return E});B.sort(function(E,D){return E.sortOrder-D.sortOrder});A.each(B,function(D,E){delete E.sortOrder});return B},_prepareTotalsRequest:function(B){var C=this._field("leaves"),D;if(!C||!this.options.showFooter){return[]}D=A.map(C,function(E){return !E.isBand&&A.wijmo.wijgrid.validDataKey(E.dataKey)&&E.aggregate&&E.aggregate!=="none"?B?[{column:E,aggregate:E.aggregate}]:[{dataKey:E.dataKey,aggregate:E.aggregate}]:null});return D},_widgetsToOptions:function(){var B=A.wijmo.wijgrid.flatten(this.options.columns);A.each(this.columns(),function(D,E){delete E.options.columns;var C=B[E.options.travIdx];A.extend(true,C,E.options);C.filterValue=E.options.filterValue;C.filterOperator=E.options.filterOperator})},_recreateColumnWidgets:function(){A.each(this.columns(),function(K,L){L.destroy()});var D=[],H=this._headerRows(),F,J,E,G,I,C,B;if(H&&H.length()){F=[];A.wijmo.wijgrid.traverse(this.options.columns,function(K){K.parentVis&&F.push(K)});for(J=0,E=F.length;J<E;J++){G=F[J];I=H.item(G.thY);C=(new A.wijmo.wijgrid.rowAccessor).getCell(I,G.thX);B=this._columnWidgetsFactory(A(C),G);D.push(B.data(B.data(A.wijmo.c1basefield.prototype._data$prefix+"widgetName")))}}this._field("columns",D)},_ownerise:function(B){if(B){var C=this;A.wijmo.wijgrid.traverse(this.options.columns,function(D){D.owner=C;var G,F,E;if(G=D.groupInfo){G.owner=D;if(G.expandInfo){for(F=0,E=G.expandInfo.length;F<E;F++){G.expandInfo[F].owner=G}}}})}else{A.wijmo.wijgrid.traverse(this.options.columns,function(F){delete F.owner;var G,E,D;if(G=F.groupInfo){delete G.owner;if(G.expandInfo){for(E=0,D=G.expandInfo.length;E<D;E++){delete G.expandInfo[E].owner}}}})}},_updateSplits:function(B){this._view().updateSplits!==null&&this._view().updateSplits(B)},_refresh:function(){var E=this._view(),F,D,C,B={type:"",hScrollValue:null,vScrollValue:null},G=[];if(E&&E.getScrollValue){B=E.getScrollValue()}this._detachEvents(false);this.element.detach();this.element.empty();this.outerDiv.empty();this.outerDiv.append(this.element);if(this._field("selectionui")){this._field("selectionui").dispose();this._field("selectionui",null)}this._field("headerRowsAccessor")&&this._field("headerRowsAccessor",null);this._field("rowsAccessor")&&this._field("rowsAccessor",null);this._field("resizer")&&this._field("resizer").dispose();this._field("frozener")&&this._field("frozener").dispose();(new A.wijmo.wijgrid.grouper).group(this,this.dataTable,this._field("leaves"));(new A.wijmo.wijgrid.merger).merge(this.dataTable,this._field("visibleLeaves"));if(this.options.scrollMode!=="none"){this._field("view",E=new A.wijmo.wijgrid.fixedView(this))}else{this._field("view",E=new A.wijmo.wijgrid.flatView(this))}this._render();this._ownerise(false);this._recreateColumnWidgets();this._ownerise(true);if(this.options.allowPaging){this.$topPagerDiv&&this.$topPagerDiv.wijpager(this._pagerSettings2PagerWidgetSettings()).css("zIndex",5);this.$bottomPagerDiv&&this.$bottomPagerDiv.wijpager(this._pagerSettings2PagerWidgetSettings()).css("zIndex",5)}this._attachEvents();E.focusableElement().attr("tabIndex",0);if(this.currentCell()._isValid()&&this.currentCell(this.currentCell())){this.currentCell()._isEdit(false)}else{this.currentCell(this._getFirstDataRowCell(0))}this._field("selection",null);F=this.currentCell();if(F._isValid()){this.selection()._startNewTransaction(F);this.selection()._selectRange(new A.wijmo.wijgrid.cellInfoRange(F,F),false,false,0,null)}this._selectionui();D=new A.wijmo.wijgrid.resizer(this);A.each(this.columns(),function(I,H){var J=H.options;J.visible&&J.parentVis&&J.isLeaf&&D.addElement(H)});this._field("resizer",D);this._updateSplits(B);if(this.options.scrollMode!=="none"){C=new A.wijmo.wijgrid.frozener(this);C.addVElement(this._getStaticIndex(false));C.addHElement(this._getStaticIndex(true));C.attachDivEvent();this._field("frozener",C)}A.each(this.columns(),function(I,J){if(!J.options.isBand&&J.options.showFilter===true){var H=J._getFilterEditorWidth();H!==undefined&&G.push({widget:J,width:H})}});A.each(G,function(H,I){I.widget._setFilterEditorWidth(I.width)})},_render:function(){var B=this._view(),C=this.options,D;B.render();D=this.outerDiv;if(C.scrollMode!=="none"){D=this.outerDiv.find("div.wijmo-wijgrid-scroller:first")}this.$superPanelHeader=null;if(this.$topPagerDiv){this.$topPagerDiv.data("wijpager")&&this.$topPagerDiv.wijpager("destroy");this.$topPagerDiv.remove()}this.$topPagerDiv=null;if(C.allowPaging&&(C.pagerSettings.position==="top"||C.pagerSettings.position==="topAndBottom")){if(!this.$topPagerDiv){D.prepend(this.$superPanelHeader=A('<div class="wijmo-wijsuperpanel-header"></div>'));this.$superPanelHeader.prepend(this.$topPagerDiv=A('<div class="wijmo-wijgrid-header ui-widget-header ui-corner-top"></div>'))}}if(C.showGroupArea){this._processGroupArea(D)}else{this.$groupArea=null}if(this.$bottomPagerDiv){this.$bottomPagerDiv.data("wijpager")&&this.$bottomPagerDiv.wijpager("destroy");this.$bottomPagerDiv.remove()}this.$bottomPagerDiv=null;if(C.allowPaging&&(C.pagerSettings.position==="bottom"||C.pagerSettings.position==="topAndBottom")){!this.$bottomPagerDiv&&D.append(this.$bottomPagerDiv=A('<div class="wijmo-wijgrid-footer wijmo-wijsuperpanel-footer ui-state-default ui-corner-bottom"></div>'))}},_processGroupArea:function(C){var D=this,B=this._field("groupedColumns"),E=[];this.$groupArea=A('<div class="ui-widget-content ui-helper-clearfix"></div>');if(B.length>0){A.each(B,function(H,F){var G=A('<a href="#"></a>').appendTo(D.$groupArea);G.c1groupedfield(A.extend({owner:D},{allowMoving:F.allowMoving,allowSort:F.allowSort,dataIndex:F.dataIndex,headerText:F.headerText,isBand:F.isBand,isLeaf:F.isLeaf,linearIdx:F.linearIdx,parentIdx:F.parentIdx,sortDirection:F.sortDirection,travIdx:F.travIdx,groupedIndex:F.groupedIndex},{disabled:D.options.disabled}));E.push(G.data("c1groupedfield"))})}else{this.$groupArea.addClass("wijmo-wijgrid-group-area").html(this.options.groupAreaCaption||"&nbsp;")}this._field("groupedWidgets",E);!this.$superPanelHeader&&C.prepend(this.$superPanelHeader=A('<div class="wijmo-wijsuperpanel-header"></div>'));this.$superPanelHeader.prepend(this.$groupArea);this._dragndrop().attachGroupArea(this.$groupArea)},_attachEvents:function(){var B=this._view(),C=B.focusableElement();C.bind("keydown."+this.widgetName,A.proxy(this._onKeyDown,this));C.bind("keypress."+this.widgetName,A.proxy(this._onKeyPress,this));A.each(B.subTables(),A.proxy(function(D,F){var E=F.element();if(E){E.tHead&&A(E.tHead).bind("click."+this.widgetName,A.proxy(this._onClick,this));E.tBodies.length&&A(E.tBodies[0]).bind("click."+this.widgetName,A.proxy(this._onClick,this)).bind("dblclick."+this.widgetName,A.proxy(this._onDblClick,this)).bind("mousemove."+this.widgetName,A.proxy(this._onMouseMove,this)).bind("mouseout."+this.widgetName,A.proxy(this._onMouseOut,this))}},this));A.each(B.getJoinedTables(true,0),A.proxy(function(D,E){if(E&&typeof E!=="number"){var F=E.element();A(F).find("> tbody").find("> tr.wijmo-wijgrid-groupheaderrow > td .wijmo-wijgrid-grouptogglebtn").bind("click."+this.widgetName,A.proxy(this._onGroupBtnClick,this))}},this))},_detachEvents:function(C){var D=this._view(),E=this,B;if(D){B=D.focusableElement();B.unbind("keydown."+this.widgetName);B.unbind("keypress."+this.widgetName);A.each(D.subTables(),function(){var F=this.element();if(F){F.tHead&&A(F.tHead).unbind("."+E.widgetName);F.tBodies.length&&A(F.tBodies[0]).unbind("."+E.widgetName)}});C&&A.each(D.getJoinedTables(true,0),function(F,G){G&&typeof G!=="number"&&A(G.element()).find("> tbody").find("> tr.wijmo-wijgrid-groupheaderrow > td .wijmo-wijgrid-grouptogglebtn").unbind("."+E.widgetName)})}},_handleSort:function(F,G){var B=this.options.columns,D=F.travIdx,C,E;if(F&&this.options.allowSorting){C=F.sortDirection==="none"?"ascending":F.sortDirection==="ascending"?"descending":"ascending";E={column:F,sortDirection:C};if(this._onColumnSorting(E)){E.column.sortDirection=E.sortDirection;if(G){E.column.sortOrder=this._customSortOrder++}else{this._customSortOrder=1000;A.each(this.columns(),function(H,I){I.options.sortOrder=0;if(I.options.travIdx!==D&&!(I.options.groupInfo&&I.options.groupInfo.position!=="none")){I.options.sortDirection="none"}});A.wijmo.wijgrid.traverse(B,function(H){H.sortOrder=0;if(H.travIdx!==D&&!(H.groupInfo&&H.groupInfo.position!=="none")){H.sortDirection="none"}})}this.ensureControl(true,{afterRefresh:function(){this._onColumnSorted({column:E.column})}})}}},_pagerSettings2PagerWidgetSettings:function(){return A.extend({},this.options.pagerSettings,{disabled:this.options.disabled,pageCount:this.pageCount(),pageIndex:this.options.pageIndex,pageIndexChanging:A.proxy(this._onPagerWidgetPageIndexChanging,this),pageIndexChanged:A.proxy(this._onPagerWidgetPageIndexChanged,this)})},_handleDragnDrop:function(E,C,J,B,H){var G=A.wijmo.wijgrid.getColumnByTravIdx(this.options.columns,E),F=A.wijmo.wijgrid.getColumnByTravIdx(this.options.columns,C),I=B?"groupArea":"columns",D=H?"groupArea":"columns";if(H){this._onColumnGrouping({drag:G.found,drop:F?F.found:null,dragSource:I,dropSource:D,at:J})&&this.ensureControl(true,{beforeRefresh:function(){if(!F){G.found.groupedIndex=0}else{switch(J){case"left":G.found.groupedIndex=F.found.groupedIndex-0.5;break;case"right":G.found.groupedIndex=F.found.groupedIndex+0.5}}!B&&A.extend(true,G.found,{groupInfo:{position:"header"}})},afterRefresh:function(){this._onColumnGrouped({drag:G.found,drop:F?F.found:null,dragSource:I,dropSource:D,at:J})}})}else{this._onColumnDropping({drag:G.found,drop:F.found,at:J})&&this.ensureControl(false,{beforeRefresh:function(){G.at.splice(G.found.linearIdx,1);switch(J){case"left":if(G.at===F.at&&G.found.linearIdx<F.found.linearIdx){F.at.splice(F.found.linearIdx-1,0,G.found)}else{F.at.splice(F.found.linearIdx,0,G.found)}break;case"right":if(G.at===F.at&&G.found.linearIdx<F.found.linearIdx){F.at.splice(F.found.linearIdx,0,G.found)}else{F.at.splice(F.found.linearIdx+1,0,G.found)}break;case"center":F.found.columns.push(G.found)}A.wijmo.wijgrid.setTraverseIndex(this.options.columns)},afterRefresh:function(){this._onColumnDropped({drag:G.found,drop:F.found,at:J})}})}},_handleFilter:function(G,H,B){var F=this.filterOperatorsCache.getByName(H),E,D;if(F){if(F.arity>1){E=this._parse(G.options,B);D=E!==null&&(G.options.dataType==="string"||!isNaN(E))}else{D=true}if(D){var C={column:G.options,operator:F.name,value:E};if(this._onColumnFiltering(C)){G.options.filterValue=C.value;G.options.filterOperator=C.operator;this.options.pageIndex=0;this.ensureControl(true,{afterRefresh:function(){this._onColumnFiltered({column:G.options})}})}}}},_handleUngroup:function(C){var B=A.wijmo.wijgrid.getColumnByTravIdx(this.options.columns,C);if(B&&B.found){B=B.found;this._onColumnUngrouping({column:B})&&this.ensureControl(false,{beforeRefresh:function(){delete B.groupedIndex;A.extend(true,B,{groupInfo:{position:"none"}})},afterRefresh:function(){this._onColumnUngrouped({column:B})}})}},_onColumnDropping:function(B){return this._trigger("columnDropping",null,B)},_onColumnDropped:function(B){this._trigger("columnDropped",null,B)},_onColumnGrouping:function(B){return this._trigger("columnGrouping",null,B)},_onColumnGrouped:function(B){this._trigger("columnGrouped",null,B)},_onColumnUngrouping:function(B){return this._trigger("columnUngrouping",null,B)},_onColumnUngrouped:function(B){this._trigger("columnUngrouped",null,B)},_onColumnFiltering:function(B){return this._trigger("filtering",null,B)},_onColumnFiltered:function(B){this._trigger("filtered",null,B)},_onColumnSorting:function(B){return this._trigger("sorting",null,B)},_onColumnSorted:function(B){this._trigger("sorted",null,B)},_onCurrentCellChanged:function(){var B=this.options;if(B.allowKeyboardNavigation){var C=this._field("currentCell");B.scrollMode!=="none"&&C&&!C.isEqual(C.outsideValue)&&this._view().scrollTo(C)}this._trigger("currentCellChanged")},_onPageIndexChanging:function(B){return this._trigger("pageIndexChanging",null,B)},_onPageIndexChanged:function(){this._trigger("pageIndexChanged")},_onPagerWidgetPageIndexChanging:function(B,C){C.handled=true},_onPagerWidgetPageIndexChanged:function(B,C){this._setOption("pageIndex",C.newPageIndex)},_onClick:function(J){if(!this._canInteract()||!J.target){return}var C=this._view(),E=this._getParentSubTable(J.target,["td","th"],C.subTables()),D,I,F,H=0,B,G;if(E){D=E[0];I=A(D).closest("tr");if(!(I.is(".wijmo-wijgrid-datarow")||I.is(".wijmo-wijgrid-headerrow"))){return}if(!I.length){return}F=C.getAbsoluteCellInfo(D)._absToData(this._getDataToAbsOffset());if(F.cellIndex()<0||F.rowIndex()<0){if(F.rowIndex()>=0){F=new A.wijmo.wijgrid.cellInfo(0,F.rowIndex());H=2}else{F=this._getFirstDataRowCell(F.cellIndex());H=1}}this._changeCurrentCell(F);B=this.currentCell();G=this.selection();(!J.shiftKey||!G._multipleRangesAllowed()&&this.options.selectionMode.toLowerCase()!=="singlerange")&&G._startNewTransaction(B);G.beginUpdate();if(J.shiftKey&&J.ctrlKey){G._clearRange(new A.wijmo.wijgrid.cellInfoRange(B,B),H)}else{G._selectRange(new A.wijmo.wijgrid.cellInfoRange(G._anchorCell(),B),J.ctrlKey,J.shiftKey,H,null)}G.endUpdate()}},_onDblClick:function(B){this._beginEditInternal(B)},_onGroupBtnClick:function(D){var B=A(D.target).closest("tr"),G=new A.wijmo.wijgrid.groupHelper,F=G.getGroupInfo(B[0]),C,E;if(F){C=G.getColumnByGroupLevel(this._field("leaves"),F.level);if(C){E=C.groupInfo.expandInfo[F.index];if(E.isExpanded){E.collapse(D.shiftKey)}else{E.expand(D.shiftKey)}this._view().ensureHeight()}}},_onKeyDown:function(F){if(!this._canInteract){return true}var D=F.target.tagName.toLowerCase(),B=false,H,C,E,G;if((D==="input"||D==="option"||D==="select"||D==="textarea")&&A(F.target).closest("tr.wijmo-wijgrid-datarow").length===0){return true}if(this.options.allowEditing){if((F.which===A.ui.keyCode.ESCAPE||F.which===113)&&this.currentCell()._isValid()&&this.currentCell()._isEdit()){this._endEditInternal(F);return false}else{if(F.which===113){this._beginEditInternal(F);return false}}}if(!this.options.allowKeyboardNavigation){return true}switch(F.which){case A.ui.keyCode.LEFT:case A.ui.keyCode.RIGHT:case A.ui.keyCode.DOWN:case A.ui.keyCode.UP:case A.ui.keyCode.PAGE_DOWN:case A.ui.keyCode.PAGE_UP:case A.ui.keyCode.HOME:case A.ui.keyCode.END:case A.ui.keyCode.TAB:H=this._getNextCurrencyPos(this._getDataCellsRange(),this.currentCell(),F.keyCode,F.shiftKey);B=this._canMoveToAnotherCell(F.target,F.which)}if(B){this._changeCurrentCell(new A.wijmo.wijgrid.cellInfo(H.cellIndex,H.rowIndex));E=this.currentCell();C=this._getDOMDataCell(E);G=this.selection();(!F.shiftKey||!G._multipleRangesAllowed()&&this.options.selectionMode.toLowerCase()!=="singlerange")&&G._startNewTransaction(E);G.beginUpdate();G._selectRange(new A.wijmo.wijgrid.cellInfoRange(G._anchorCell(),E),false,F.shiftKey,0,null);G.endUpdate();return false}return true},_onKeyPress:function(F){if(this._canInteract()&&this.options.allowEditing){var B=F.which,G=this.currentCell(),E,C,D;if(B&&G._isValid()&&!G._isEdit()){E=F.target.tagName.toLowerCase();if(E!=="input"&&E!=="option"&&E!=="select"&&E!=="textarea"){C=A(F.target).closest(".wijmo-wijgrid-table");if(C.length){D=A.map(this._view().subTables(),function(H){return H.element()});if(A.inArray(C[0],D)>=0){if(A.wij.charValidator.isPrintableChar(String.fromCharCode(B))){this._beginEditInternal(F);return false}}}}}}},_onMouseMove:function(D){if(!this._canInteract()){return}var F=this._view(),E=this._getParentSubTable(D.target,["td","th"],F.subTables()),J,B,I,G,K,H,C=A.wijmo.wijgrid.renderState;if(E){J=E[0];B=A(J).closest("tr");if(!B.length||B.is(".wijmo-wijgrid-foorow")||!(B.is(".wijmo-wijgrid-datarow")||B.is(".wijmo-wijgrid-headerrow"))){return}I=F.getAbsoluteCellInfo(J)._absToData(this._getDataToAbsOffset());G=this._field("hoveredRow");if(G!==undefined&&I.rowIndex()!==G){K=this._rows().item(G);if(K){H=this._createRowInfo(K);H.state=this._changeRenderState(H.$rows,C.hovered,false);this.rowStyleFormatter.format(H)}}G=I.rowIndex();this._field("hoveredRow",G);if(G>=0){K=this._rows().item(G);if(K){H=this._createRowInfo(K);H.state=this._changeRenderState(H.$rows,C.hovered,true);this.rowStyleFormatter.format(H)}}}},_onMouseOut:function(C){if(A(C.relatedTarget).closest(".wijmo-wijgrid-data").length===0){var B=this._field("hoveredRow"),E,D;if(B>=0){E=this._rows().item(B);if(E){D=this._createRowInfo(E);D.state=this._changeRenderState(D.$rows,A.wijmo.wijgrid.renderState.hovered,false);this.rowStyleFormatter.format(D)}}}},_fieldResized:function(B,C,D){if(C<0){C=0}if(D<=0){D=1}if(this._trigger("columnResizing",null,{column:B.options,oldWidth:C,newWidth:D})!==false){B.option("width",D);this._trigger("columnResized",null,{column:B.options})}},_changeCurrentCell:function(D){var F=this.currentCell(),E=this._getDataCellsRange(),G,C,B=this.options.highlightCurrentCell;if(E._isValid()&&E._containsCellInfo(D)||D.isEqual(D.outsideValue)){if(F.cellIndex()!==D.cellIndex()||F.rowIndex()!==D.rowIndex()){G={cellIndex:D.cellIndex(),rowIndex:D.rowIndex(),oldCellIndex:F.cellIndex(),oldRowIndex:F.rowIndex()};if(this._trigger("currentCellChanging",null,G)){C=false;if(!this.options.allowEditing||!F._isEdit()||(C=this._endEditInternal(null))){B&&E._containsCellInfo(F)&&this._highlightCellPosition(F,false);F=D._clone();F._setGridView(this);B&&this._highlightCellPosition(F,true);this._field("currentCell",F);this._onCurrentCellChanged()}}}else{B&&this._highlightCellPosition(F,true)}}},_highlightCellPosition:function(K,F){if(K&&K._isValid()){var C=K._clone()._dataToAbs(this._getDataToAbsOffset()),I=C.cellIndex(),D=C.rowIndex(),E=A.wijmo.wijgrid.renderState,J=this._view(),G,H,B;G=J.getHeaderCell(I);if(G){H=this._createRowInfo(this._headerRows().item(K.column().thY));G=A(G);B=this._changeRenderState(G,E.current,F);this.cellStyleFormatter.format(G,I,K.column(),H,B)}G=J.getJoinedRows(D,0);if(G){H=this._createRowInfo(G);H.state=this._changeRenderState(H.$rows,E.current,F);this.rowStyleFormatter.format(H)}G=J.getCell(I,D);if(G){G=A(G);B=this._changeRenderState(G,E.current,F);this.cellStyleFormatter.format(G,I,K.column(),H,B)}}},_beginEditInternal:function(B){if(this._canInteract()&&this.options.allowEditing){var D=this.currentCell().column(),C;if(D&&!D.readOnly){C=(new A.wijmo.wijgrid.cellEditorHelper).currentCellEditStart(this,B);C;return C}}return false},_endEditInternal:function(C){if(this._canInteract()&&this.options.allowEditing){var B=(new A.wijmo.wijgrid.cellEditorHelper).currentCellEditEnd(this,C);B&&this._view().ensureHeight(this.currentCell().rowIndex());return B}return false},_createRow:function(B){return B.insertRow(-1)},_createCell:function(C){var B=A.wijmo.wijgrid.rowType;switch(C){case B.header:return'<th><div class="wijmo-wijgrid-innercell"></div></th>';case B.filter:return"<td />";default:return'<td><div class="wijmo-wijgrid-innercell"></div></td>'}},_cellCreated:function(F,C,H,D,G,B,E){A.wijmo.wijgrid.dataPrefix(F,this._data$prefix,"renderState",G);this.cellStyleFormatter.format(F,C,H,D,G,B,E);this._changeRenderState(F,A.wijmo.wijgrid.renderState.rendering,false)},_rowCreated:function(C,B,D){A.wijmo.wijgrid.dataPrefix(true,C.$rows,this._data$prefix,{dataTableRowIndex:C._dataTableRowIndex,dataRowIndex:C.dataRowIndex,rowType:C.type,dataItemIndex:C.dataItemIndex,virtualDataItemIndex:C.virtualDataItemIndex,renderState:C.state});this.rowStyleFormatter.format(C,B,D);this._changeRenderState(C.$rows,A.wijmo.wijgrid.renderState.rendering,false)},_createRowInfo:function(C,F,E,M,L,K,B){var H=this.dataTable,G=null,I=C[1]?A(C):A(C[0]),D,J=A.wijmo.wijgrid.dataPrefix;if(isNaN(F)){F=J(I,this._data$prefix,"rowType")}if(isNaN(E)){E=J(I,this._data$prefix,"renderState")}if(isNaN(M)){M=J(I,this._data$prefix,"dataTableRowIndex")}if(isNaN(L)){L=J(I,this._data$prefix,"dataRowIndex")}if(isNaN(K)){K=J(I,this._data$prefix,"dataItemIndex")}if(isNaN(B)){B=J(I,this._data$prefix,"virtualDataItemIndex")}if(M>=0){D=H[M].originalRowIndex;if(D>=0){G=this.data()[D]}}return{$rows:I,state:E,type:F,data:G,dataRowIndex:L,dataItemIndex:K,virtualDataItemIndex:B,_dataTableRowIndex:M}},_ensureDataParser:function(B){switch(B.dataType){case undefined:case"string":if(!B.dataParser){B.dataParser=A.wijmo.wijgrid.embeddedParsers.stringParser}break;case"boolean":if(!B.dataParser){B.dataParser=A.wijmo.wijgrid.embeddedParsers.boolParser}break;case"number":if(!B.dataParser){B.dataParser=A.wijmo.wijgrid.embeddedParsers.numberParser}break;case"currency":if(!B.dataParser){B.dataParser=A.wijmo.wijgrid.embeddedParsers.currencyParser}break;case"datetime":if(!B.dataParser){B.dataParser=A.wijmo.wijgrid.embeddedParsers.dateTimeParser}break;default:throw A.wijmo.wijgrid.stringFormat('Unsupported dataType value: "{0}"',B.dataType)}},_parseDOM:function(C,B){return C.dataParser.parseDOM(B,this._field("closestCulture"),C.dataFormatString,this.options.nullString,true)},_parse:function(B,C){var D=B.dataParser.parse(C,this._field("closestCulture"),B.dataFormatString,this.options.nullString,true);switch(B.dataType){case"datetime":if(D!==null&&!(D instanceof Date)){throw"invalid value."}break;case"number":case"currency":if(D!==null&&(typeof D!=="number"||isNaN(D))){throw"invalid value."}break;case"boolean":if(D!==null&&(typeof D!=="boolean"||isNaN(D))){throw"invalid value."}}return D},_toStr:function(C,B){return C.dataParser.toStr(B,this._field("closestCulture"),C.dataFormatString,this.options.nullString,true)},_funcOptions:function(){return["cellStyleFormatter","rowStyleFormatter","afterCellEdit","afterCellUpdate","beforeCellEdit","beforeCellUpdate","columnDragging","columnDragged","columnDropping","columnDropped","columnResizing","columnResized","columnGrouping","columnGrouped","columnUngrouping","columnUngrouped","currentCellChanging","currentCellChanged","filtering","filtered","filterOperatorsListShowing","groupAggregate","groupText","invalidCellValue","pageIndexChanging","pageIndexChanged","selectionChanged","sorting","sorted","ajaxError","dataLoading","dataLoaded","loading","loaded","rendering","rendered"]},_canInteract:function(){return !this.options.disabled},_canMoveToAnotherCell:function(C,G){var B=C.tagName.toLowerCase(),H,D,F,E;switch(B){case"input":if(A(C).hasClass("wijgridinput")){if(C.type==="text"){H=C.value.length;D=new A.wijmo.wijgrid.domSelection(C).getSelection();F=A.ui.keyCode;E=G===F.UP||G===F.DOWN||G===F.PAGE_DOWN||G===F.PAGE_UP||D.length===0&&(D.start===0&&(G===F.LEFT||G===F.HOME)||D.end>=H&&(G===F.RIGHT||G===F.END));return E}return true}return false;case"textarea":case"select":return false}return true},_getDataToAbsOffset:function(){var C=0,D=0,B=this._headerRows();if(this.options.showRowHeader){C++}if(B){D+=B.length()}if(this._filterRow()){D++}return{x:C,y:D}},_getDataCellsRange:function(){var B=0,C=0,D=this._field("visibleLeaves").length-1,E=this.dataTable.length-1;if(this.options.showRowHeader){D--}if(D<0||E<0){B=C=D=E=-1}return new A.wijmo.wijgrid.cellInfoRange(new A.wijmo.wijgrid.cellInfo(B,C),new A.wijmo.wijgrid.cellInfo(D,E))},_getDOMDataCell:function(B){if(B){B=B._clone()._dataToAbs(this._getDataToAbsOffset());if(B._isValid()){return this._view().getCell(B.cellIndex(),B.rowIndex())}}return null},_getFirstDataRowCell:function(B){for(var E,C=A.wijmo.wijgrid.rowType,D=0;E=this.dataTable[D];D++){if(E.rowType&C.data){return new A.wijmo.wijgrid.cellInfo(B,D)}}return A.wijmo.wijgrid.cellInfo.prototype.outsideValue},_getNextCurrencyPos:function(F,H,B,D){var C=H.cellIndex(),G=H.rowIndex(),E;switch(B){case A.ui.keyCode.PAGE_UP:if(this._reverseKey&&G===F.topLeft().rowIndex()){G=F.bottomRight().rowIndex()}else{G-=this._pageSizeKey;if(G<(E=F.topLeft().rowIndex())){G=E}}break;case A.ui.keyCode.PAGE_DOWN:if(this._reverseKey&&G===F.bottomRight().rowIndex()){G=F.TopLeft().RowIndex()}else{G+=this._pageSizeKey;if(G>(E=F.bottomRight().rowIndex())){G=E}}break;case A.ui.keyCode.END:C=this._reverseKey&&C===F.bottomRight().cellIndex()?F.topLeft().cellIndex():F.bottomRight().cellIndex();break;case A.ui.keyCode.HOME:C=this._reverseKey&&C===F.topLeft().cellIndex()?F.bottomRight().cellIndex():F.topLeft().cellIndex();break;case A.ui.keyCode.LEFT:if(C>F.topLeft().cellIndex()){C--}else{if(this._reverseKey){C=F.bottomRight().cellIndex()}}break;case A.ui.keyCode.UP:if(G>F.topLeft().rowIndex()){G--}else{if(this._reverseKey){G=F.bottomRight().rowIndex()}}break;case A.ui.keyCode.RIGHT:if(C<F.bottomRight().cellIndex()){C++}else{if(this._reverseKey){C=F.topLeft().cellIndex()}}break;case A.ui.keyCode.ENTER:case A.ui.keyCode.DOWN:if(G<F.bottomRight().rowIndex()){G++}else{if(this._reverseKey){G=F.topLeft().rowIndex()}}break;case A.ui.keyCode.TAB:if(0){if(D){C--;if(C<F.topLeft().cellIndex()){C=F.bottomRight().cellIndex();G--;if(G<F.topLeft().rowIndex()){G=F.bottomRight().rowIndex()}}}else{C++;if(C>F.bottomRight().cellIndex()){C=F.topLeft().cellIndex();G++;if(G>F.bottomRight().rowIndex()){G=F.topLeft().rowIndex()}}}}}return{cellIndex:C,rowIndex:G}},_getParentSubTable:function(F,B,C){for(var H=A.map(C,function(I){return I.element()}),G=null,E=null,D;F!==null&&G===null;F=F.parentNode){D=F.tagName?F.tagName.toLowerCase():undefined;if(A.inArray(D,B)>=0){E=F}else{if(A.inArray(F,H)>=0){G=F}}}return E&&G?[E,G]:null},_getStaticIndex:function(F){var C=false,B=this.options,D,E;A.each(this._field("leaves"),function(G,H){if(H.rowMerge!=="none"||H.groupInfo&&H.groupInfo.position!=="none"){C=true;return false}});if(C){return -1}if(F){D=B.staticRowIndex;E=this.dataTable.length-1}else{D=B.staticColumnIndex;E=this._field("visibleLeaves").length-(B.showRowHeader?1:0)-1}if(D<-1){D=-1}else{if(D>E){D=E}}return D},_getRealStaticColumnIndex:function(G){var B,D,E=0,C=this._getStaticIndex(false),F;if(this.options.showRowHeader===true){E++}if(G){return E}F=C+E;if(C>=0){B=this._field("visibleLeaves");D=B.length;for(;F<D;F++){if(B[F].parentIdx===-1){break}}if(F>=D){F=D-1}}return F},_getRealStaticRowIndex:function(B){var C=this._field("spanTable").length;if(this.options.showFilter){C++}return B?C:this._getStaticIndex(true)+C},_view:function(){return this._field("view")},_originalFooterRowData:function(){var B=this._field("tfoot");return B&&B.length?B[0]:null},_originalHeaderRowData:function(){var B=this._field("thead");return B&&B.length?B[0]:null}})})(jQuery);(function(A){A.widget("wijmo.c1basefield",{_data$prefix:"c1basefield",options:{allowMoving:true,allowSizing:true,dataKey:undefined,cellFormatter:undefined,ensurePxWidth:undefined,footerText:undefined,headerText:undefined,visible:true,width:undefined},_create:function(){var B=this.options.owner;this.element.addClass("ui-widget wijmo-c1basefield ui-state-default");this._field("owner",B);delete this.options.owner;this._field("widgetName",this.widgetName);this.options.disabled&&this.disable();B.options.allowColMoving&&B._dragndrop().attach(this)},_init:function(){this.element.wrapInner("<div class='wijmo-wijgrid-innercell'></div>");this._refreshHeaderCell()},destroy:function(){var B=this._owner();B&&B._dragndrop().detach(this);A.wijmo.wijgrid.remove$dataByPrefix(this.element,this._data$prefix);this.element.removeClass("ui-widget wijmo-c1basefield ui-state-default").html(this.element.find(".wijmo-wijgrid-headertext").contents())},_field:function(C,B){return A.wijmo.wijgrid.dataPrefix(this.element[0],this._data$prefix,C,B)},_removeField:function(B){var C=this._data$prefix+B;this.element.removeData(C)},_setOption:function(G,F,H){var B=this["_preset_"+G],D=this.options[G],E,C;if(B!==undefined){F=B.apply(this,[F,D,H])}E=F!==D;A.Widget.prototype._setOption.apply(this,[G,F]);if(E){C=this["_postset_"+G];C!==undefined&&C.apply(this,[F,D,H])}},_postset_allowMoving:function(B,C,D){this._invokeGroupedColumn("allowMoving",B,D)},_preset_clientType:function(){throw"read-only"},_postset_headerText:function(B,C,D){this._refreshHeaderCell();this._invokeGroupedColumn("headerText",B,D)},_postset_visible:function(){this._owner().ensureControl(false)},_postset_width:function(C){var E=this._owner()._view(),D=this.options.visLeavesIdx,B=A(E.getHeaderCell(D)).outerWidth();E.ensureWidth(D,C,B)},_invokeGroupedColumn:function(B,D,E){if(!E&&this.options.groupedIndex!==undefined){var C=this._owner()._field("groupedWidgets")[this.options.groupedIndex];C._setOption(B,D,true)}},_owner:function(){return this._field("owner")},_canSize:function(){return this.options.allowSizing&&this._owner().options.allowColSizing},_canDrag:function(){return this.options.allowMoving===true},_canDropTo:function(B){return A.wijmo.wijgrid.isChildOf(this._owner().options.columns,B,this)?false:true},_refreshHeaderCell:function(){var B=this.element.children(".wijmo-wijgrid-innercell").empty().html(this.options.headerText||"").wrapInner('<span class="wijmo-wijgrid-headertext" />')}})})(jQuery);(function(A){A.widget("wijmo.c1field",A.wijmo.c1basefield,{options:{aggregate:"none",allowSort:true,dataType:"string",dataParser:undefined,dataFormatString:undefined,filterOperator:"nofilter",filterValue:undefined,groupInfo:{expandInfo:[],groupSingleRow:true,collapsedImageClass:"ui-icon-triangle-1-e",expandedImageClass:"ui-icon-triangle-1-se",position:"none",outlineMode:"startExpanded",headerText:undefined,footerText:undefined},readOnly:false,rowMerge:"none",showFilter:true,sortDirection:"none",valueRequired:false},_create:function(){A.wijmo.c1basefield.prototype._create.apply(this,arguments);this.element.addClass("ui-widget wijmo-c1field")},destroy:function(){this.element.find("*").unbind("."+this.widgetName);if(this.$filterEditor){this.$filterEditor.closest("td").find("*").unbind("."+this.widgetName);switch(this._getInputEditorType(this.options)){case"date":this.$filterEditor.wijinputdate("destroy");break;case"mask":this.$filterEditor.wijinputmask("destroy");break;case"numberCurrency":case"numberNumber":case"numberPercent":this.$filterEditor.wijinputnumber("destroy")}this.$filterEditor=null}this.element.removeClass("ui-widget wijmo-c1field").find(".wijmo-wijgrid-headertext > span.ui-icon").remove();this._removeDropDownFilterList();A.wijmo.c1basefield.prototype.destroy.apply(this,arguments)},_init:function(){A.wijmo.c1basefield.prototype._init.apply(this,arguments);this.$filterEditor=null;var B=this._owner();this.filterRow=B._filterRow();B.options.showFilter&&this.options.showFilter&&this.options.dataIndex>=0&&this._prepareFilterCell()},_postset_aggregate:function(){this._owner().ensureControl(false)},_postset_allowSort:function(B,C,D){this._refreshHeaderCell();this._invokeGroupedColumn("allowSort",B,D)},_postset_dataType:function(){throw"read-only"},_postset_dataParser:function(){this._owner().ensureControl(false)},_postset_dataFormatString:function(){this._owner().ensureControl(false)},_postset_filterOperator:function(){this._owner().ensureControl(true)},_postset_filterValue:function(){this._owner().ensureControl(true)},_postset_groupInfo:function(){this._owner().ensureControl(true)},_postset_rowMerge:function(){this._owner().ensureControl(false)},_postset_showFilter:function(){this._owner().ensureControl(false)},_postset_sortDirection:function(){this.options.sortOrder=0;this._owner().ensureControl(true)},_postset_width:function(){this._setFilterEditorWidth(1);A.wijmo.c1basefield.prototype._postset_width.apply(this,arguments);this._setFilterEditorWidth(this._getFilterEditorWidth())},_canDropTo:function(B){return A.wijmo.c1basefield.prototype._canDropTo.apply(this,arguments)?this.options.groupedIndex!==undefined&&B instanceof A.wijmo.c1groupedfield?false:true:false},_canSort:function(){var B=this._owner();return B&&B.options.allowSorting&&this.options.allowSort&&this.options.dataIndex>=0},_refreshHeaderCell:function(){if(this._canSort()){var B,C=this.element.children(".wijmo-wijgrid-innercell").empty().html(this.options.headerText||"").wrapInner('<a class="wijmo-wijgrid-headertext" href="#" role="button" />');B=C.children("a").bind("click."+this.widgetName,this,this._onHrefClick);switch(this.options.sortDirection){case"ascending":B.append(A('<span class="ui-icon ui-icon-triangle-1-n">ascending</span>'));break;case"descending":B.append(A('<span class="ui-icon ui-icon-triangle-1-s">descending</span>'))}}else{A.wijmo.c1basefield.prototype._refreshHeaderCell.apply(this,arguments)}},_prepareFilterCell:function(){var G=this.options.visLeavesIdx,D=null,C=null,E,F,B;if(G>=0){D=this._owner();if(this.filterRow){C=A((new A.wijmo.wijgrid.rowAccessor).getCell(this.filterRow,G))}else{throw"exception"}this.$filterEditor=C.find("input");C.bind(A.support.selectstart?"selectstart":"mousedown",function(H){H.stopPropagation()});E=D._parse(this.options,A.wijmo.wijgrid.filterHelper.getSingleValue(this.options.filterValue));if(E===null){switch(this.options.dataType){case"boolean":E=false;break;case"number":case"currency":case"datetime":E=0;break;default:E=""}}F={culture:D.options.culture,disabled:D.options.disabled,decimalPlaces:function(H){var I=/^(n|p|c){1}(\d*)$/.exec(H);if(I){if(I[2]){return parseInt(I[2],10)}}return 2}(this.options.dataFormatString)};switch(B=this._getInputEditorType(this.options)){case"date":this.$filterEditor.wijinputdate(A.extend(F,{date:E}));break;case"mask":this.$filterEditor.wijinputmask({text:E});break;case"numberCurrency":this.$filterEditor.wijinputnumber(A.extend(F,{type:"currency",value:E}));break;case"numberNumber":this.$filterEditor.wijinputnumber(A.extend(F,{value:E}));break;case"numberPercent":this.$filterEditor.wijinputnumber(A.extend(F,{type:"percent",value:E*100}));break;default:throw A.wijmo.wijgrid.stringFormat('Unsupported editor type: "{0}"',B)}C.find(".wijmo-wijgrid-filter-trigger").attr({role:"button","aria-haspopup":"true"}).bind("mouseenter."+this.widgetName,function(){A(this).addClass("ui-state-hover")}).bind("mouseleave."+this.widgetName,function(){A(this).removeClass("ui-state-hover ui-state-active")}).bind("mouseup."+this.widgetName,this,function(){A(this).removeClass("ui-state-active")}).bind("mousedown."+this.widgetName,{column:this},this._onFilterBtnClick).bind("click."+this.widgetName,function(H){H.preventDefault()})}},_onFilterBtnClick:function(H){var I=H.data.column,C=8,J,D,L,M,K,F,B,E,G;if(I.options.disabled){return false}if(I.$dropDownFilterList){I._removeDropDownFilterList();return false}J=I._owner();D=A.wijmo.wijgrid.filterHelper.getSingleOperatorName(I.options.filterOperator).toLowerCase();L=J.filterOperatorsCache.getByDataType(I.options.dataType);J.filterOperatorsCache.sort(L,J.options.filterOperatorsSortMode);M=A.extend(true,{},{operators:L,column:I.options});J._trigger("filterOperatorsListShowing",null,M);K=[];if(M.operators){for(F in M.operators){if(M.operators.hasOwnProperty(F)){B=M.operators[F];K.push({label:B.displayName||B.name,value:B.name,selected:B.name.toLowerCase()===D})}}}I.$dropDownFilterList=A('<div class="wijmo-wijgrid-filterlist"></div').appendTo(document.body).wijlist({autoSize:true,maxItemsCount:C,selected:function(Q,O){var P,N;switch(N=I._getInputEditorType(I.options)){case"date":P=I.$filterEditor.wijinputdate("option","date");break;case"mask":P=I.$filterEditor.wijinputmask("option","text");break;case"numberCurrency":case"numberNumber":case"numberPercent":P=I.$filterEditor.wijinputnumber("option","value");if(N==="numberPercent"){P/=100}}I._removeDropDownFilterList();J._handleFilter(I,O.item.value,P)}});I.$dropDownFilterList.wijlist("setItems",K).wijlist("renderList");E=I.$dropDownFilterList.width()|150;I.$dropDownFilterList.width(K.length>C?E+20:E).wijlist("refreshSuperPanel").position({of:A(this),my:"left top",at:"left bottom"});I.$dropDownFilterList.$button=A(this);G=I.$dropDownFilterList.eventGuid=+new Date;A(document).bind("mousedown."+I.widgetName+"."+G,{column:I},I._onDocMouseDown)},_onDocMouseDown:function(E){var D=A(E.target),C=D.parents(".wijmo-wijgrid-filterlist:first"),B=D.is(".wijmo-wijgrid-filter-trigger")?D:D.parents(".wijmo-wijgrid-filter-trigger:first");!(B.length&&B[0]===E.data.column.$dropDownFilterList.$button[0]||C.length&&C[0]===E.data.column.$dropDownFilterList[0])&&E.data.column._removeDropDownFilterList()},_onHrefClick:function(B){if(B.data.options.disabled){return false}B.data.options.allowSort&&B.data._owner()._handleSort(B.data.options,B.ctrlKey);return false},_removeDropDownFilterList:function(){if(this.$dropDownFilterList){var B=this.$dropDownFilterList.eventGuid;this.$dropDownFilterList.remove();this.$dropDownFilterList=null;A(document).unbind("mousedown."+this.widgetName+"."+B,this._onDocMouseDown)}},_getFilterEditorWidth:function(){if(this.$filterEditor){var B=this.$filterEditor.closest(".wijmo-wijgrid-filter"),C=B.width()-B.find(".wijmo-wijgrid-filter-trigger").width();if(!C||C<0){C=0}return C}return undefined},_setFilterEditorWidth:function(B){if(this.$filterEditor){B-=this.$filterEditor.leftBorderWidth()+this.$filterEditor.rightBorderWidth();if(B<0){B=0}switch(this._getInputEditorType(this.options)){case"date":this.$filterEditor.wijinputdate("widget").width(B);break;case"mask":this.$filterEditor.wijinputmask("widget").width(B);break;case"numberCurrency":case"numberNumber":case"numberPercent":this.$filterEditor.wijinputnumber("widget").width(B)}this.$filterEditor.setOutWidth(B)}},_getInputEditorType:function(B){switch(B.dataType){case"number":return B.dataFormatString&&B.dataFormatString.indexOf("p")===0?"numberPercent":"numberNumber";case"currency":return"numberCurrency";case"datetime":return"date";default:return"mask"}}})})(jQuery);(function(A){A.widget("wijmo.c1groupedfield",{_data$prefix:"c1groupedfield",options:{allowMoving:true,allowSort:true,headerText:undefined,sortDirection:"none"},_create:function(){var B=this.options.owner;this.element.addClass("wijmo-wijgrid-group-button ui-state-default ui-corner-all");this._field("owner",B);delete this.options.owner;this.options.disabled&&this.disable();B.options.allowColMoving&&B._dragndrop().attach(this)},_init:function(){this._refreshHeaderCell()},destroy:function(){this.element.find("*").unbind("."+this.widgetName);var B=this._owner();B&&B._dragndrop().detach(this);A.wijmo.wijgrid.remove$dataByPrefix(this.element,this._data$prefix)},_field:function(C,B){return A.wijmo.wijgrid.dataPrefix(this.element[0],this._data$prefix,C,B)},_removeField:function(B){var C=this._data$prefix+B;this.element.removeData(C)},_setOption:function(G,F,H){var B=this["_preset_"+G],D=this.options[G],E,C;if(B!==undefined){F=B.apply(this,[F,D,H])}E=F!==D;A.Widget.prototype._setOption.apply(this,[G,F]);if(E){C=this["_postset_"+G];C!==undefined&&C.apply(this,[F,D,H])}},_postset_headerText:function(){this._refreshHeaderCell()},_postset_allowSort:function(){this._refreshHeaderCell()},_owner:function(){return this._field("owner")},_canSize:function(){return this.options.allowSizing&&this._owner().options.allowColSizing},_canDrag:function(){return this.options.allowMoving===true},_canDropTo:function(B){return !(B instanceof A.wijmo.c1groupedfield)?false:A.wijmo.wijgrid.isChildOf(this._owner().options.columns,B,this)?false:true},_canSort:function(){var B=this._owner();return B&&B.options.allowSorting&&this.options.allowSort&&this.options.dataIndex>=0},_refreshHeaderCell:function(){var B=A('<span class="wijmo-wijgrid-group-button-close ui-state-default ui-corner-all"><span class="ui-icon ui-icon-close"></span></span>').bind("click."+this.widgetName,this,this._onCloseClick);this.element.html(this.options.headerText||"").prepend(B).bind("click."+this.widgetName,this,this._onHrefClick);if(this._canSort()){switch(this.options.sortDirection){case"ascending":this.element.append(A('<span class="wijmo-wijgrid-group-button-sort ui-icon ui-icon-triangle-1-n"></span>'));break;case"descending":this.element.append(A('<span class="wijmo-wijgrid-group-button-sort ui-icon ui-icon-triangle-1-s"></span>'))}}},_onCloseClick:function(B){B.data._owner()._handleUngroup(B.data.options.travIdx);return false},_onHrefClick:function(C){var B=C.data._owner(),E=C.data.options,D;if(!E.disabled&&E.allowSort){D=A.wijmo.wijgrid.search(B.columns(),function(F){return F.options.travIdx===E.travIdx});D=!D.found?A.wijmo.wijgrid.getColumnByTravIdx(B.options.columns,E.travIdx).found:D.found.options;D&&B._handleSort(D,C.ctrlKey)}return false}})})(jQuery);(function(A){A.widget("wijmo.c1band",A.wijmo.c1basefield,{options:{columns:[]},_create:function(){A.wijmo.c1basefield.prototype._create.apply(this,arguments);this.element.addClass("ui-widget wijmo-c1band")},_canDropTo:function(B){return A.wijmo.c1basefield.prototype._canDropTo.apply(this,arguments)?B instanceof A.wijmo.c1groupedfield:false}})})(jQuery);(function(A){A.extend(A.wijmo.wijgrid,{bandProcessor:function(){var G,B,F,D,E,H,C;this.generateSpanTable=function(K,J){G=B=H=E=0;F=[];D=[];C=[];var I=this._generateSpanTable(K,J,true);return I};this._generateSpanTable=function(I,J,L){var K,M;G=this._getVisibleHeight(I,L);J=J||[];A.wijmo.wijgrid.traverse(I,function(N){N.isLeaf&&J.push(N);D.push(N)});B=J.length;for(K=0;K<G;K++){F[K]=[];for(M=0;M<B;M++){F[K][M]={column:null,colSpan:0,rowSpan:0}}}this._setTableValues(I,0,0);return F};this._getVisibleHeight=function(M,I){var J,K,L,O,N=0;if(A.isArray(M)){for(J=0,K=M.length;J<K;J++){O=this._getVisibleHeight(M[J],I);N=Math.max(N,O)}}else{L=M.visible===undefined?true:M.visible;M.parentVis=L&&I;if(M.isBand){for(J=0,K=M.columns.length;J<K;J++){O=this._getVisibleHeight(M.columns[J],M.parentVis);N=Math.max(N,O)}if(!M.parentVis){return N}M.isLeaf=N===0;N++}else{M.isLeaf=true;if(M.parentVis){N=1}}}return N};this._getVisibleParent=function(I){while(I){I=D[I.parentIdx];if(I&&(I.parentVis||I.parentVis===undefined)){return I}}return null};this._setTableValues=function(Q,K,M){var L,O,P,I,N,J;if(A.isArray(Q)){for(L=0,O=Q.length;L<O;L++){this._setTableValues(Q[L],K,M)}}else{if(Q.travIdx===undefined){throw"undefined travIdx"}P=M+E;if(Q.parentVis){I=P+H;F[K][I].column=Q;C[Q.travIdx]=I}if(Q.isBand){for(L=0,O=Q.columns.length;L<O;L++){this._setTableValues(Q.columns[L],K+1,M)}}if(Q.parentVis){if(E-P===0){F[K][C[Q.travIdx]].rowSpan=G-K;E++}else{F[K][C[Q.travIdx]].colSpan=E-P}}else{if(!Q.isBand&&G>0){J=this._getVisibleParent(Q);N=J?J.isLeaf:false;if(N){H++}if(K>=G){K=G-1}I=M+E+H;F[K][I].column=Q;if(!N){J&&C[J.travIdx]===I&&this._shiftTableElements(I,K);H++}}}}};this._shiftTableElements=function(J,I){for(var K=0;K<I;K++){F[K][J+1]=F[K][J];F[K][J]={column:null,colSpan:0,rowSpan:0};if(F[K][J+1].column){C[F[K][J+1].column.travIdx]++}}}},getAllLeaves:function(B){var C=[];this._getAllLeaves(B,C);return C},_getAllLeaves:function(B,C){var E,G,F,D;if(B){for(E=0,G=B.length;E<G;E++){F=B[E];if(F.options){F=F.options}D=F.columns;if(D&&D.length){this._getAllLeaves(D,C)}else{C.push(F)}}}},getColumnByTravIdx:function(D,B){var E,G,F,C=null;if(D&&B>=0){for(E=0,G=D.length;E<G&&!C;E++){F=D[E];if(F.options){F=F.options}if(F.travIdx===B){return{found:F,at:D}}if(F.columns){C=this.getColumnByTravIdx(F.columns,B)}}}return C},isChildOf:function(B,E,C){if(E.options){E=E.options}if(C.options){C=C.options}if(C.isBand&&E.parentIdx>=0){if(E.parentIdx===C.travIdx){return true}if(E.parentIdx>C.travIdx){for(var D=this.flatten(B);;){E=D[E.parentIdx];if(E.travIdx===C.travIdx){return true}if(E.parentIdx===-1){break}}}}return false},getLeaves:function(B){var C=[];this._getLeaves(B,C);return C},_getLeaves:function(E,B){var D,C,F;if(E){for(D=0,C=E.length;D<C;D++){F=E[D];F.isLeaf&&B.push(F);F.columns&&this._getLeaves(F.columns,B)}}},setTraverseIndex:function(B){return this._setTraverseIndex(B,0,-1)},_setTraverseIndex:function(B,D,G){var E,C,F;if(B){for(E=0,C=B.length;E<C;E++){F=B[E];if(F.options){F=F.options}F.linearIdx=E;F.travIdx=D++;F.parentIdx=G;if(F.columns){D=this._setTraverseIndex(F.columns,D,D-1)}}}return D},flatten:function(B){var C=[];this.traverse(B,function(D){C.push(D)});return C},traverse:function(C,B){var E,F,D;if(C&&A.isFunction(B)){for(E=0,F=C.length;E<F;E++){D=C[E];if(D.options){D=D.options}B(D);D.columns&&this.traverse(D.columns,B)}}},getAriaHeaders:function(D,B){var F,E,G,C,H=[];for(F=0,E=D.length;F<E;F++){G=D[F];C="";do{C+=escape(G.headerText)+" "}while(G=B[G.parentIdx]);H[F]=A.trim(C)}return H}})})(jQuery);(function(A){A.extend(A.wijmo.wijgrid,{getTableSection:function(C,B){if(C&&!C.nodeType){C=C[0]}if(C){switch(B){case 1:return C.tHead;case 2:if(C.tBodies){return C.tBodies[0]||null}break;case 3:return C.tFoot;default:return C}}return null},getTableSectionLength:function(C,B){if(C&&!C.nodeType){C=C[0]}return C&&(B=this.getTableSection(C,B))?B.rows.length:0},getTableSectionRow:function(D,B,C){if(D&&!D.nodeType){D=D[0]}return D&&(B=this.getTableSection(D,B))?B.rows[C]||null:null},readTableSection:function(I,J,E){var B,D,H,F,K,L,C=[],G=function(M){M=M.toLowerCase();return M==="rowspan"||M==="colspan"};if(I&&!I.nodeType){I=I[0]}if(I&&(J=this.getTableSection(I,J))){for(B=0,D=J.rows.length;B<D;B++){K=J.rows[B];L=[];if(E){L.rowAttributes=null;L.cellsAttributes=[]}for(H=0,F=K.cells.length;H<F;H++){L[H]=K.cells[H].innerHTML;if(E){L.cellsAttributes[H]=A.wijmo.wijgrid.getAttributes(K.cells[H],G)}}C[B]=L}}return C}})})(jQuery);(function(a){a.extend(a.wijmo.wijgrid,{dataMode:{dom:1,statical:2,remoteStatical:4,dynamical:8},dataStore:function(c){var b=null,n=this,g=false,e=null,d=null,h,m=false,l=false;this.dataMode=function(){return f()};this.dataSource=function(){return b};this.getFieldNames=function(){if(!g){throw"data is not loaded yet"}var e=[],d,c;if(b.items&&b.items.length){c=b.items[0]}else{if(f()===a.wijmo.wijgrid.dataMode.dom&&b.header&&b.header.length){c=b.header[0]}}if(c){for(d in c){c.hasOwnProperty(d)&&e.push(!isNaN(d)?parseInt(d,10):d)}}return e};this.getDataSlice=function(){if(!g){throw"data is not loaded yet"}if(!m){m=true;r(e)}if(!l){l=true;if(f()!==a.wijmo.wijgrid.dataMode.dynamical){h=s(e,b.emptyData)}else{h={data:e,totalRows:b.data.totalRows,totals:b.data.totals||{},emptyData:b.emptyData}}}return h};this.load=function(e){if(!b){b=a.proxy(p,this)(c)}if(f()===a.wijmo.wijgrid.dataMode.dynamical){e.data=q();if(b.proxy){b.proxy.options.data=a.extend(b.proxy.options.data,e.data)}d=null;b.load(e,true)}else{if(!g){d=null;b.load(e)}else{i(b,e);j(b,e)}}};this.isLoaded=function(){return g};this.updateValue=function(a,c,b){if(!g){throw"data is not loaded yet"}this.dataSource().items[a][c]=b};function p(e){var b=null,c=e.options.data,d;if(c===null){b=new wijdatasource({data:e.element,reader:new k(new o),loading:a.proxy(i,this),loaded:a.proxy(j,this)})}else{if(a.isArray(c)){b=new wijdatasource({data:c,reader:new k(new wijarrayreader),loading:a.proxy(i,this),loaded:a.proxy(j,this)})}else{b=new wijdatasource(c);b.reader=new k(c.reader);b.loading=a.proxy(function(d,b){a.isFunction(c.loading)&&c.loading(d,b);a.proxy(i,this)(d,b)},this);b.loaded=a.proxy(function(d,b){a.isFunction(c.loaded)&&c.loaded(d,b);a.proxy(j,this)(d,b)},this);if(b.proxy&&b.proxy.options){d=b.proxy.options.error;b.proxy.options.error=function(){t.apply(this,arguments);a.isFunction(d)&&d.apply(this,arguments)}}}}return b}function i(d,b){if(n.dataMode()===a.wijmo.wijgrid.dataMode.dynamical||c.options.alwaysParseData){m=false}l=false;h=null;e=null;c._dataLoading(b)}function j(l,o){g=true;var h,m,b,i,j,k,p=f(),n=!d&&c.options.readAttributesFromData;if(!d){d=[]}e=[];for(h=0,m=l.items.length;h<m;h++){b=l.items[h];if(n){if(p===a.wijmo.wijgrid.dataMode.dom){d.push({rowAttributes:b.rowAttributes,cellsAttributes:b.cellsAttributes});delete b.rowAttributes;delete b.cellsAttributes}else{k={};for(i in b){if(b.hasOwnProperty(i)&&a.isArray(j=b[i])){k[i]=j[1];b[i]=j[0]}}d.push({rowAttributes:{},cellsAttributes:k})}}e.push({values:b,originalRowIndex:h,attributes:d[h]})}c._dataLoaded(o)}function t(){c._ajaxError.apply(c,arguments)}function f(){return !b.data||b.data.jquery?a.wijmo.wijgrid.dataMode.dom:b.dynamic===true?a.wijmo.wijgrid.dataMode.dynamical:a.wijmo.wijgrid.dataMode.statical}function r(d){if(d&&d.length){var g=[],j,f,k,h,e,i,b;a.wijmo.wijgrid.traverse(c.options.columns,function(b){a.wijmo.wijgrid.validDataKey(b.dataKey)&&g.push(b)});j=Math.min(g.length,n.getFieldNames().length);for(f=0,k=d.length;f<k;f++){h=d[f];for(e=0;e<j;e++){i=null;b=g[e];if(b&&b.dataParser){i=c._parse(b,h.values[b.dataKey]);h.values[b.dataKey]=i}}}}}function s(b,h){if(b&&b.length){var d=c._prepareFilterRequest(true),f=c._preparePageRequest(true),g=c._prepareSortRequest(true),e=c._prepareTotalsRequest(true),i=(new a.wijmo.wijgrid.dataHelper).getDataSlice(c,b,d,f,g,e);return i}return{data:[],totalRows:0,totals:{},emptyData:h}}function q(){return{filtering:c._prepareFilterRequest(false),paging:c._preparePageRequest(false),sorting:c._prepareSortRequest(false),totals:c._prepareTotalsRequest(false)}}function k(b){this.read=function(c){c.items=null;b&&a.isFunction(b.read)&&b.read(c);if(!a.isArray(c.items)){c.items=[];if(a.isArray(c.data)){c.items=c.data}else{if(c.data&&a.isArray(c.data.rows)){c.items=c.data.rows}}}if(f()===a.wijmo.wijgrid.dataMode.dynamical){if(!c.data||isNaN(c.data.totalRows)){throw"totalRows value is missing"}}if(!c.items||!a.isArray(c.items)){c.items=[]}}}function o(){this.read=function(b){b.items=[];if(b&&b.data&&b.data.length){if(a.wijmo.wijgrid.getTableSectionLength(b.data,2)===1&&a(a.wijmo.wijgrid.getTableSectionRow(b.data,2,0)).hasClass("wijmo-wijgrid-emptydatarow")){b.emptyData=a.wijmo.wijgrid.readTableSection(b.data,2)}else{b.items=a.wijmo.wijgrid.readTableSection(b.data,2,c.options.readAttributesFromData)}b.header=a.wijmo.wijgrid.readTableSection(b.data,1);b.data=null}else{throw"invalid data source"}}}},dataHelper:function(){this.getDataSlice=function(k,e,n,g,p,o){e=b(e,n,k);a.proxy(c,this)(e,p);var q=e.length,f,m,i,h,j,r,l={};l=d(e,o,k);if(g){f=Math.min(e.length-1,g.pageIndex*g.pageSize);if(f<0){f=0}m=Math.min(e.length,f+g.pageSize);i=[];for(h=f,r=0,j=0;h<m;h++,j++){i[j]=e[h]}e=i}return{data:e,totalRows:q,totals:l}};function d(i,f){var b,c,e,j,g,d=[],h={};for(b=0,c=f.length;b<c;b++){d.push(new a.wijmo.wijgrid.tally)}for(b=0,c=i.length;b<c;b++){g=i[b].values;for(e=0,j=d.length;e<j;e++){d[e].add(g[f[e].column.dataKey])}}for(b=0,c=d.length;b<c;b++){h[f[b].column.dataKey]=d[b].getValueString(f[b].column)}return h}function b(e,c,l){if(!e||!e.length||!c||!c.length){return e}a.each(c,function(c,b){if(!a.isArray(b.filterOperator)){b.filterOperator=[b.filterOperator]}if(!a.isArray(b.filterValue)){b.filterValue=[b.filterValue]}a.each(b.filterOperator,function(c,a){if(typeof a==="string"){b.filterOperator[c]=a={name:a,condition:"or"}}b.filterOperator[c].name=l.filterOperatorsCache.getByName(a.name)});a.each(b.filterValue,function(d,c){if(!a.isArray(c)){b.filterValue[d]=l._parse(b.column,c)}else{a.each(c,function(d,a){c[d]=l._parse(b.column,a)})}})});var h,i,b,o,m,j,p=[],n,g,q=c.length,d,f,k;for(h=0,o=e.length;h<o;h++){m=e[h];n=true;for(i=0;i<q;i++){d=c[i];j=m.values[d.column.dataKey];g=false;for(b=0;b<d.filterOperator.length;b++){f=d.filterOperator[b];k=d.filterValue[b];if(b>0&&f.condition==="and"){g&=f.name.operator(j,k)}else{g|=f.name.operator(j,k)}}n&=g}n&&p.push(m)}return p}function c(i,e){if(e.length){var b=[],d,h,c,a,f,g;b.push("var context = this;");b.push("this.sort = function(a, b)\n{\n");for(d=0,h=e.length;d<h;d++){c="arg"+d;a=e[d];f=typeof a.dataKey==="string"?'"'+a.dataKey+'"':a.dataKey;if(a.sortDirection==="ascending"||a.sortDirection==="descending"){if(a.sortDirection==="ascending"){b.push("var ",c," = context._sortAsc","(a.values[",f,"], b.values[",f,"]);\n")}else{b.push("var ",c," = context._sortDesc","(a.values[",f,"], b.values[",f,"]);\n")}}else{b.push("var ",c," = context._sortDigitAsc","(a.originalRowIndex, b.originalRowIndex);\n")}b.push("if (",c," === 0)\n");b.push("{\n")}g=e.length-1;if(g>=0){c="arg"+g;a=e[g];f=typeof a.dataKey==="string"?'"'+a.dataKey+'"':a.dataKey;if(a.sortDirection==="ascending"||a.sortDirection==="descending"){if(a.sortDirection==="ascending"){b.push("var ",c," = context._sortDigitAsc","(a.originalRowIndex, b.originalRowIndex);\n")}else{b.push("var ",c," = context._sortDigitDesc","(a.originalRowIndex, b.originalRowIndex);\n")}}}for(d=e.length-1;d>=0;d--){b.push("}\n");c="arg"+d;b.push("return ",c,";\n")}b.push("}");eval(b.join(""));i.sort(this.sort)}}this._sortAsc=function(a,b){if(a instanceof Date){a=a.getTime()}if(b instanceof Date){b=b.getTime()}return a===b?0:a===null?-1:b===null?1:a<b?-1:1};this._sortDesc=function(a,b){if(a instanceof Date){a=a.getTime()}if(b instanceof Date){b=b.getTime()}return a===b?0:a===null?1:b===null?-1:a<b?1:-1};this._sortDigitAsc=function(a,b){return a-b};this._sortDigitDesc=function(a,b){return b-a}}})})(jQuery);(function(A){A.extend(A.wijmo.wijgrid,{groupRange:function(C,B,D,H){this.value=-1;switch(arguments.length){case 4:this.isExpanded=C;this.cr=B;this.sum=D;this.position=H;break;case 1:this.isExpanded=C;this.cr=new A.wijmo.wijgrid.cellRange(-1,-1);this.sum=-1;this.position="none";break;default:this.isExpanded=false;this.cr=new A.wijmo.wijgrid.cellRange(-1,-1);this.sum=-1;this.position="none"}this.isSubRange=function(I){return this.cr.r1>=I.cr.r1&&this.cr.r2<=I.cr.r2};this.toString=function(){return this.cr.r1+"-"+this.cr.r2};this._getHeaderImageClass=function(J){var I=this.owner;return I?J?I.expandedImageClass||A.wijmo.c1field.prototype.options.groupInfo.expandedImageClass:I.collapsedImageClass||A.wijmo.c1field.prototype.options.groupInfo.collapsedImageClass:null};this.collapse=function(){var L,I,N,M,J,K;if((L=this.owner)&&(I=L.owner)&&(N=I.owner)){M=new A.wijmo.wijgrid.groupHelper;J=N._field("leaves");if(M.isParentExpanded(J,this.cr,L.level)){if(L.position!=="footer"&&L.outlineMode!=="none"){K=M.getGroupedColumnsCount(J);E(M,N._rows(),J,this,K)}}}};this.expand=function(J){var K,I,O,N,L,M;if((K=this.owner)&&(I=K.owner)&&(O=I.owner)){N=new A.wijmo.wijgrid.groupHelper;L=O._field("leaves");if(N.isParentExpanded(L,this.cr,K.level)){M=N.getGroupedColumnsCount(L);G(N,O._rows(),L,this,M,J,true)}}};function E(Q,I,O,W,P){var J=W.owner,M=W.cr.r1,N=W.cr.r2,T,R,K,L,U,V;switch(J.position){case"header":case"headerAndFooter":T=I.item(W.cr.r1);if(T){if(T[0]){T[0]["aria-expanded"]="false"}if(T[1]){T[1]["aria-expanded"]="false"}}M++}for(R=M;R<=N;R++){T=I.item(R);if(T){if(T[0]){T[0].style.display="none";T[0]["aria-hidden"]="true"}if(T[1]){T[1].style.display="none";T[1]["aria-hidden"]="true"}}}W.isExpanded=false;F(I,W);for(R=J.level+1;R<=P;R++){L=Q.getChildGroupRanges(O,W.cr,R-1);for(V=0,K=L.length;V<K;V++){U=L[V];U.isExpanded=false;switch(U.owner.position){case"header":case"headerAndFooter":T=I.item(U.cr.r1);if(T){if(T[0]){T[0]["aria-expanded"]="false"}if(T[1]){T[1]["aria-expanded"]="false"}}}F(I,U)}}}function G(R,I,J,W,Q,X,P){var K=W.owner,N=W.cr.r1,T=W.cr.r2,V,Y,U,M,O,L;switch(K.position){case"header":V=I.item(N);if(V){if(V[0]){V[0].style.display="";V[0]["aria-hidden"]="false";if(P||X){V[0]["aria-expanded"]="true"}}if(V[1]){V[1].style.display="";V[1]["aria-hidden"]="false";if(P||X){V[1]["aria-expanded"]="true"}}}N++;break;case"footer":V=I.item(T);if(V){if(V[0]){V[0].style.display="";V[0]["aria-hidden"]="false"}if(V[1]){V[1].style.display="";V[1]["aria-hidden"]="false"}}T--;break;case"headerAndFooter":V=I.item(N);if(V){if(V[0]){V[0].style.display="";V[0]["aria-hidden"]="false";if(P||X){V[0]["aria-expanded"]="true"}}if(V[1]){V[1].style.display="";V[1]["aria-hidden"]="false";if(P||X){V[1]["aria-expanded"]="true"}}}if(P){V=I.item(T);if(V){if(V[0]){V[0].style.display="";V[0]["aria-hidden"]="false"}if(V[1]){V[1].style.display="";V[1]["aria-hidden"]="false"}}}N++;T--}if(P){W.isExpanded=true;F(I,W)}else{return}if(W.owner.level===Q){for(Y=N;Y<=T;Y++){V=I.item(Y);if(V){if(V[0]){V[0].style.display="";V[0]["aria-hidden"]="false"}if(V[1]){V[1].style.display="";V[1]["aria-hidden"]="false"}}}}else{M=R.getChildGroupRanges(J,W.cr,W.owner.level);if(X){for(Y=0,U=M.length;Y<U;Y++){O=M[Y];G(R,I,J,O,Q,X,true)}}else{for(Y=0,U=M.length;Y<U;Y++){O=M[Y];L=O.owner.position==="footer"||O.owner.outlineMode==="none"?true:false;G(R,I,J,O,Q,false,L)}}}}function F(J,K){if(K.owner.position!=="footer"){var L=null,I=J.item(K.cr.r1);if(I){if(I[0]){L=A(I[0]).find("div.wijmo-wijgrid-grouptogglebtn:first-child")}}if(L&&L.length){L.toggleClass(K._getHeaderImageClass(!K.isExpanded),false);L.toggleClass(K._getHeaderImageClass(K.isExpanded),true)}}}},grouper:function(){this.group=function(F,D,B){this._grid=F;this._data=D;this._leaves=B;this._groupRowIdx=0;this._groupHelper=new A.wijmo.wijgrid.groupHelper;var E=1,H,I,G,K=[],J=false,C=0;for(H=0,I=B.length;H<I;H++){G=B[H];if(G.groupInfo){delete G.groupInfo.level;delete G.groupInfo.expandInfo}if(G.groupInfo&&G.groupInfo.position&&G.groupInfo.position!=="none"&&G.dataIndex>=0){if(G.groupedIndex===undefined){J=true}}else{if(G.groupedIndex!==undefined){delete G.groupedIndex}}}if(J){for(H=0,I=B.length;H<I;H++){G=B[H];if(G.groupInfo&&G.groupInfo.position&&G.groupInfo.position!=="none"&&G.dataIndex>=0){G.groupedIndex=C++;K.push(G)}}}else{K=A.map(B,function(L){return L.groupedIndex!==undefined?L:null});K.sort(function(M,L){return M.groupedIndex-L.groupedIndex});A.each(K,function(M,L){L.groupedIndex=M})}F._field("groupedColumns",K);for(H=0,I=K.length;H<I;H++){G=K[H];this._groupRowIdx=0;if(G.groupInfo&&G.groupInfo.position&&G.groupInfo.position!=="none"&&G.dataIndex>=0){G.groupInfo.level=E;G.groupInfo.expandInfo=[];this._processRowGroup(G,E++)}}delete this._grid;delete this._data;delete this._leaves};this._processRowGroup=function(C,J){for(var I,F,H,G,M,E,B,L,K,D=0;D<this._data.length;D++){if(!(this._data[D].rowType&A.wijmo.wijgrid.rowType.data)){continue}I=this._getGroupCellRange(D,C,J);F=true;H=C.groupInfo.outlineMode==="startCollapsed";if(H||this._groupHelper.isParentCollapsed(this._leaves,I,J)){if(C.groupInfo.groupSingleRow===false&&I.r1===I.r2){continue}F=false}if(J&&this._grid.options.groupIndent){for(G=I.r1;G<=I.r2;G++){this._addIndent(this._data[G][0],J)}}switch(C.groupInfo.position){case"header":M=this._addGroupRange(C.groupInfo,I,F);this._updateByGroupRange(M,J);E=this._groupHelper.isParentCollapsed(this._leaves,M.cr,J);B=this._buildGroupRow(M,I,true,E);for(K=I.r1;K<=I.r2;K++){this._data[K].__attr["aria-level"]=J+1;if(!F){this._data[K].__style.display="none";this._data[K].__attr["aria-hidden"]=true}}this._data.splice(I.r1,0,B);B.__attr["arial-level"]=J;B.__attr["aria-expanded"]=F;if(E){B.__style.display="none";B.__attr["aria-hidden"]=true}D=I.r2+1;break;case"footer":M=this._addGroupRange(C.groupInfo,I,true);this._updateByGroupRange(M,J);L=this._buildGroupRow(M,I,false,false);L.__attr["aria-level"]=J;this._data.splice(I.r2+1,0,L);D=I.r2+1;E=this._groupHelper.isParentCollapsed(this._leaves,M.cr,J);if(E){L.__style.display="none";L.__attr["aria-hidden"]=true}break;case"headerAndFooter":M=this._addGroupRange(C.groupInfo,I,F);this._updateByGroupRange(M,J);E=this._groupHelper.isParentCollapsed(this._leaves,M.cr,J);B=this._buildGroupRow(M,I,true,E);L=this._buildGroupRow(M,I,false,false);for(K=I.r1;K<=I.r2;K++){this._data[K].__attr["aria-level"]=J+1;if(!F){this._data[K].__style.display="none";this._data[K].__attr["aria-hidden"]=true}}this._data.splice(I.r2+1,0,L);L.__attr["aria-level"]=J;if(E||!F){L.__style.display="none";L.__attr["aria-hidden"]=true}this._data.splice(I.r1,0,B);B.__attr["aria-level"]=J;B.__attr["aria-expanded"]=F;if(E){B.__style.display="none";B.__attr["aria-hidden"]=true}D=I.r2+2;break;default:throw A.wijmo.wijgrid.stringFormat('Unknown Position value: "{0}"',C.groupInfo.position)}this._groupRowIdx++}};this._buildGroupRow=function(I,K,O){var R=I.owner,N=R.owner,B=N.owner,G=[],E="",F="",Q,P,M,C,D,H,J,L;G.__style={};G.__attr={};G.__attr.id=(O?"GH":"GF")+this._groupRowIdx+"-"+R.level;G.rowType=O?A.wijmo.wijgrid.rowType.groupHeader:A.wijmo.wijgrid.rowType.groupFooter;if(N.dataIndex>=0&&(Q=this._data[K.r1][N.dataIndex].value)!==null){E=B._toStr(N,Q)}this._grid.options.showRowHeader&&G.push({html:"&nbsp;"});P={html:"",__attr:{},__style:{}};if(O&&R.outlineMode!=="none"){if(I.isExpanded){P.html='<div class="ui-icon '+I._getHeaderImageClass(true)+' wijmo-wijgrid-grouptogglebtn">&nbsp;</div>'}else{P.html='<div class="ui-icon '+I._getHeaderImageClass(false)+' wijmo-wijgrid-grouptogglebtn">&nbsp;</div>'}}G.push(P);if(N.aggregate&&N.aggregate!=="none"){F=this._getAggregate(K,N,N,O,E)}M=O?R.headerText:R.footerText;if(M==="custom"){C={data:this._data,column:N,groupByColumn:R.owner,groupText:E,text:"",groupingStart:K.r1,groupingEnd:K.r2,isGroupHeader:O,aggregate:F};if(this._grid._trigger("groupText",null,C)){M=C.text}}else{if(M===undefined||M===null){if(O){M="{1}: {0}"}if(F||F===0){M=M?M+" {2}":"{2}"}}M=A.wijmo.wijgrid.stringFormat(M,E,N&&N.headerText?N.headerText:"",F.toString())}if(!M){M="&nbsp;"}P.html+="<span>"+M+"</span>";this._addIndent(P,R.level-1);D=1;H=this._grid.options.showRowHeader?1:0;J=true;for(;H<this._leaves.length;H++){Q=this._leaves[H];if(Q.parentVis){if(J){J=false;continue}if(Q.dynamic!==true&&Q.aggregate&&Q.aggregate!=="none"){break}D++}}for(;H<this._leaves.length;H++){Q=this._leaves[H];if(Q.parentVis){L=this._getAggregate(K,Q,R.owner,O,E);if(!L&&L!==0){L="&nbsp;"}G.push({html:L.toString(),__attr:{groupInfo:{leafIndex:Q.leavesIdx,purpose:A.wijmo.wijgrid.groupRowCellPurpose.aggregateCell}}})}}P.__attr.colSpan=D;P.__attr.groupInfo={leafIndex:N.leavesIdx,purpose:A.wijmo.wijgrid.groupRowCellPurpose.groupCell};return G};this._getAggregate=function(J,F,D,E,C){var G="",I,H,B;if(!F.aggregate||F.aggregate==="none"){return G}if(F.aggregate==="custom"){I={data:this._data,column:F,groupByColumn:D,groupText:C,text:"",groupingStart:J.r1,groupingEnd:J.r2,isGroupHeader:E};if(this._grid._trigger("groupAggregate",null,I)){G=I.text}}else{H=new A.wijmo.wijgrid.tally;for(B=J.r1;B<=J.r2;B++){H.add(this._data[B][F.dataIndex].value)}G=H.getValueString(F)}return G};this._getGroupCellRange=function(F,I,C){var D=I.leavesIdx,E=new A.wijmo.wijgrid.cellRange(F,D),B=this._groupHelper.getParentGroupRange(this._leaves,E,C),H,G;if(this._data[F].rowType&A.wijmo.wijgrid.rowType.data){H=this._data[F][I.dataIndex].value;for(E.r2=F,G=this._data.length-1;E.r2<G;E.r2++){if(!(this._data[E.r2+1].rowType&A.wijmo.wijgrid.rowType.data)||B&&E.r2+1>B.r2){break}if(this._data[E.r2+1][I.dataIndex].value!==H){break}}}return E};this._addGroupRange=function(F,G,E){var J=null,H=this._groupHelper.getChildGroupIndex(G,F.expandInfo),D,I,C,B;if(H>=0&&H<F.expandInfo.length){J=F.expandInfo[H]}else{D=new A.wijmo.wijgrid.cellRange(G.r1,G.r1,G.r2,G.r2);I=F.position==="footer"?true:E&&F.outlineMode!=="startCollapsed";J=new A.wijmo.wijgrid.groupRange(I,D,-1,F.position);J.owner=F;F.expandInfo.push(J)}if(J){C=G.r1;B=G.r2;if(F.position==="headerAndFooter"){B+=2}if(F.position!=="headerAndFooter"){B++}J.cr.r2=B}return J};this._updateByGroupRange=function(F,D){var J,C,E,I,B,G,H;for(J=0,C=this._leaves.length;J<C;J++){E=this._leaves[J].groupInfo;if(E&&E.level<D){I=E.expandInfo?E.expandInfo.length:0;for(B=0;B<I;B++){G=E.expandInfo[B];H=F.position==="headerAndFooter"?2:1;if(G.cr.r1>=F.cr.r1&&!(G.cr.r1===F.cr.r1&&G.position==="footer")){G.cr.r1+=H}if(G.cr.r2>=F.cr.r1){G.cr.r2+=H}}}}};this._addIndent=function(C,B){var D;if(B>0&&(D=this._grid.options.groupIndent)){C.__style.paddingLeft=D*B+"px"}}}})})(jQuery);(function(A){A.extend(A.wijmo.wijgrid,{groupHelper:function(){this.getGroupInfo=function(B){if(B){if(!A.wijmo.wijgrid._getGroupInfoRegExp){A.wijmo.wijgrid._getGroupInfoRegExp=new RegExp(".*G([HF]){1}(\\d+)-(\\d+)$")}var D=A.wijmo.wijgrid._getGroupInfoRegExp.exec(B.id),F,C,E;if(D){F=parseInt(D[3],10);C=parseInt(D[2],10);E=D[1]==="H";return{level:F,index:C,isHeader:E,toString:function(){return(this.isHeader?"GH":"GF")+this.index+"-"+this.level}}}}return null};this.getColumnByGroupLevel=function(E,C){var D,B,F;for(D=0,B=E.length;D<B;D++){F=E[D];if(F.groupInfo&&F.groupInfo.level===C){return F}}return null};this.getGroupedColumnsCount=function(E){var B=0,D,C,F;for(D=0,C=E.length;D<C;D++){F=E[D].groupInfo;if(F&&(F.position==="header"||F.position==="headerAndFooter"||F.position==="footer")){B++}}return B};this.getChildGroupIndex=function(G,C){var D=0,E=C.length-1,F,B;while(D<=E){F=(E-D>>1)+D;B=C[F].cr.r1-G.r1;if(B===0){return F}if(B<0){D=F+1}else{E=F-1}}return D};this.getParentGroupIndex=function(C,B){var D=this.getChildGroupIndex(C,B);if(D>0){D--}return D<B.length?D:-1};this.getChildGroupRanges=function(E,I,C){var J=[],H,G,F,D,B,K=this.getColumnByGroupLevel(E,C+1);if(K){H=K.groupInfo.expandInfo;B=this.getChildGroupIndex(I,H);for(F=B,D=H.length;F<D;F++){G=H[F];if(G.cr.r2<=I.r2){J.push(G)}else{break}}}return J};this.getParentGroupRange=function(C,G,D){var E,F,B;if(D===undefined){D=65535}if(D-2>=0){for(E=C.length-1;E>=0;E--){F=C[E].groupInfo;if(!F||!F.expandInfo||F.level<0||F.level!==D-1){continue}B=this.getParentGroupIndex(G,F.expandInfo);if(B>=0){return F.expandInfo[B]}}}return null};this.isParentCollapsed=function(C,E,B){var D,F;if(B===1){return false}for(D=B;D>1;D--){F=this.getParentGroupRange(C,E,D);if(F&&!F.isExpanded){return true}E=F.cr}return false};this.isParentExpanded=function(C,E,B){var D,F;if(B===1){return true}for(D=B;D>1;D--){F=this.getParentGroupRange(C,E,D);if(F&&F.isExpanded){return true}E=F.cr}return false}}})})(jQuery);(function(A){A.extend(A.wijmo.wijgrid,{cellRange:function(C,E,B,D){switch(arguments.length){case 2:this.r1=this.r2=C;this.c1=this.c2=E;break;case 4:this.r1=C;this.r2=B;this.c1=E;this.c2=D;break;default:this.r1=0;this.r2=0;this.c1=0;this.c2=0}this.isSingleCell=function(){return this.r1===this.r2&&this.c1===this.c2}},merger:function(){this.merge=function(C,E){this.leaves=E;this.data=C;var D,B,F;for(D=0,B=E.length;D<B;D++){F=E[D];F.dataIndex>=0&&!F.isBand&&(F.rowMerge==="free"||F.rowMerge==="restricted")&&this.mergeColumn(F)}delete this.data;delete this.leaves};this.mergeColumn=function(H){var D=H.dataIndex,G,B,F,E,C;for(G=0,B=this.data.length;G<B;G++){if(!(this.data[G].rowType&A.wijmo.wijgrid.rowType.data)){continue}F=this.getCellRange(G,H);if(F.r1!==F.r2){E=F.r2-F.r1+1;this.data[F.r1][D].__attr.rowSpan=E;for(C=F.r1+1;C<=F.r2;C++){this.data[C][D].visible=false}}G=F.r2}};this.getCellRange=function(H,E){var K=E.dataIndex,G=new A.wijmo.wijgrid.cellRange(H,K),D=this.data[H][K].value,C=this.data.length,B,J,I,F;for(G.r2=H;G.r2<C-1;G.r2++){B=this.data[G.r2+1];if(!(B.rowType&A.wijmo.wijgrid.rowType.data)||B[K].value!==D){break}}J=E.leavesIdx;if(J>0&&E.rowMerge==="restricted"){I=this.leaves[J-1];if(I.dataIndex>=0){F=this.getCellRange(H,I);G.r1=Math.max(G.r1,F.r1);G.r2=Math.min(G.r2,F.r2)}}return G}}})})(jQuery);(function(A){A.extend(A.wijmo.wijgrid,{rowType:{header:1,data:2,dataAlt:4,filter:8,groupHeader:16,groupFooter:32,footer:64,emptyDataRow:128},renderState:{none:0,rendering:1,current:2,hovered:4,selected:8},groupRowCellPurpose:{groupCell:0,aggregateCell:1},stringFormat:function(B){var D,C;if(!B){return""}for(D=1,C=arguments.length;D<C;D++){B=B.replace(new RegExp("\\{"+(D-1)+"\\}","gm"),arguments[D])}return B},validDataKey:function(B){return B&&!(B<0)||B===0},iterateChildrenWidgets:function(B,C){if(B&&C){if(B.nodeType){B=A(B)}B.find(".ui-widget").each(function(E,D){A.each(A(D).data(),function(F,G){G.widgetName&&C(E,G)})})}},remove$dataByPrefix:function(D,B){var C=[];A.each(D.data(),function(E){E.indexOf(B)===0&&C.push(E)});A.each(C,function(E,F){D.removeData(F)})},domSelection:function(B){this.getSelection=function(){var E=0,D=0,C;if(B.selectionStart!==undefined){E=B.selectionStart;D=B.selectionEnd}else{if(document.selection){C=document.selection.createRange().duplicate();D=C.text.length;E=Math.abs(C.moveStart("character",-B.value.length));D+=E}}return{start:E,end:D,length:D-E}};this.setSelection=function(C){if(B.selectionStart!==undefined){B.setSelectionRange(C.start,C.end)}else{var D=B.createTextRange();D.collapse(true);D.moveStart("character",C.start);D.moveEnd("character",C.end);D.select()}};this.toggleSelection=function(C){if(C){A(B).enableSelection().css({MozUserSelect:"",WebkitUserSelect:""})}else{A(B).disableSelection().css({MozUserSelect:"-moz-none",WebkitUserSelect:"none"})}}},createDynamicField:function(B){return A.extend(true,{},A.wijmo.c1basefield.prototype.options,A.wijmo.c1field.prototype.options,{dynamic:true,isLeaf:true,isBand:false,parentIdx:-1},B)},bounds:function(B,C){if(B){var E=B.nodeType?A(B):B,D=E.offset();if(D){return C?{top:D.top,left:D.left,width:E[0].clientWidth||0,height:E[0].clientHeight||0}:{top:D.top,left:D.left,width:E.outerWidth(),height:E.outerHeight()}}}return null},_getDOMText:function(F,E,D){if(D===undefined){D=0}if(F&&(!E||E&&D<3)){if(F.nodeType===3){return F.nodeValue}else{if(F.nodeType===1){switch(F.type){case"button":case"text":case"textarea":case"select-one":return F.value;case"checkbox":return F.checked.toString()}for(var C="",B=0;F.childNodes[B];B++){C+=this._getDOMText(F.childNodes[B],E,D+1)}return C}}}return""},ensureTBody:function(B){return B?B.tBodies&&B.tBodies.length>0?B.tBodies[0]:B.appendChild(document.createElement("tbody")):null},rowTypeFromCss:function(B){var C=/wijmo-wijgrid-(\S+)row/.exec(B.attr("class"));if(C){switch(C[1]){case"header":return A.wijmo.wijgrid.rowType.header;case"filter":return A.wijmo.wijgrid.rowType.filter;case"data":return B.hasClass("wijmo-wijgrid-alternatingrow")?A.wijmo.wijgrid.rowType.data|A.wijmo.wijgrid.rowType.dataAlt:A.wijmo.wijgrid.rowType.data;case"alternating":return A.wijmo.wijgrid.rowType.data|A.wijmo.wijgrid.rowType.dataAlt;case"groupheader":return A.wijmo.wijgrid.rowType.groupHeader;case"groupheader":return A.wijmo.wijgrid.rowType.groupFooter}}},dataPrefix:function(){var I=arguments.length,E,J,G,D=typeof arguments[0]==="boolean",H=D?arguments[1]:arguments[0],C=H.nodeType===undefined,F,K,B;if(I===3){G=arguments[1]+arguments[2];return C?A.data(H[0],G):A.data(H,G)}else{if(D){J=arguments[3];for(E in J){B=J[E];if(J.hasOwnProperty(E)){G=arguments[2]+E;if(C){for(K=0,I=H.length;K<I;K++){F=A.data(H[K],G,B)}}else{A.data(H,G,B)}}}}else{G=arguments[1]+arguments[2];B=arguments[3];if(C){for(K=0,I=H.length;K<I;K++){F=A.data(H[K],G,B)}return F}else{return A.data(H,G,B)}}}},shallowMerge:function(B,E){if(E&&B){var F,C,D;for(F in E){if(E.hasOwnProperty(F)){C=E[F];D=typeof C;if((D==="string"||D==="boolean"||D==="number")&&B[F]===undefined){B[F]=C}}}}},isCustomObject:function(B){return B&&typeof B==="object"&&!(B instanceof Date)},search:function(E,B){var D,C,F=A.isFunction(B);for(D in E){if(E.hasOwnProperty(D)){C=F?B(E[D]):E[D]===B;if(C===true){return{at:D,found:E[D]}}}}return{at:null,found:null}},getAttributes:function(E,B){if(E){var I,C,H=0,G={},F,D;for(I=0,C=E.attributes.length;I<C;I++){D=E.attributes[I].name;if(D&&(!B||!B(D))){F=E.getAttribute(D);if(D==="style"){F=typeof F==="object"?F.cssText:F}if(!F&&D==="class"){F=E.getAttribute("className")}if(F&&typeof F!=="function"){G[D]=F;H++}}}if(H){return G}}return null}})})(jQuery);(function(A){A.extend(A.wijmo.wijgrid,{embeddedParsers:{stringParser:{parseDOM:function(F,B,C,E,D){return this.parse(A.wijmo.wijgrid._getDOMText(F,true),B,C,E,D)},parse:function(F,B,C,E,D){switch(F){case null:return null;case E:if(D){return null}case undefined:case"&nbsp":return"";default:return""+F}},toStr:function(F,B,C,E,D){return F===null&&D?E:""+F}},numberParser:{parseDOM:function(F,B,C,E,D){return this.parse(A.wijmo.wijgrid._getDOMText(F,true),B,C,E,D)},parse:function(F,B,G,E,D){var C=typeof F;return C==="number"?isNaN(F)?NaN:F:!F&&F!==0||F==="&nbsp;"||F===E&&D?null:Globalize.parseFloat(F,10,B.name)},toStr:function(D,C,F,B,E){return D===null&&E?B:Globalize.format(D,F?F:"n",C.name)}},currencyParser:{parseDOM:function(F,B,C,E,D){return this.parse(A.wijmo.wijgrid._getDOMText(F,true),B,C,E,D)},parse:function(F,D,G,C,B){var E=typeof F;if(E==="number"){return isNaN(F)?NaN:F}if(!F&&F!==0||F==="&nbsp;"||F===C&&B){return null}if(E==="string"){F=F.replace(D.numberFormat.currency.symbol,"")}return Globalize.parseFloat(F,10,D.name)},toStr:function(D,C,F,B,E){return D===null&&E?B:Globalize.format(D,F?F:"c",C.name)}},dateTimeParser:{parseDOM:function(F,B,C,E,D){return this.parse(A.wijmo.wijgrid._getDOMText(F,true),B,C,E,D)},parse:function(F,C,G,B,E){var D;if(F instanceof Date){return F}if(!F||F==="&nbsp;"||F===B&&E){return null}D=/^\/Date\((\d+)\)\/$/.exec(F);return D?new Date(parseInt(D[1],10)):Globalize.parseDate(F,G,C.name)},toStr:function(D,C,F,B,E){return D===null&&E?B:Globalize.format(D,F?F:"d",C.name)}},boolParser:{parseDOM:function(F,B,C,E,D){return this.parse(A.wijmo.wijgrid._getDOMText(F,true),B,C,E,D)},parse:function(E,G,B,D,C){var F=typeof E;if(F==="boolean"){return E}if(F==="string"){E=A.trim(E)}if(!E||E==="&nbsp;"||E===D&&C){return null}switch(E.toLowerCase()){case"true":return true;case"false":return false}return NaN},toStr:function(F,B,C,E,D){return F===null&&D?E:F?"true":"false"}}}})})(jQuery);(function(A){A.extend(A.wijmo.wijgrid,{filterOperatorsCache:function(){var D={};this.add=function(G){if(G&&G.name&&G.operator){var F=G.name.toLowerCase();if(!D[F]){D[F]=G}}};this.clear=function(){D.length=0};this.getByName=function(F){return D[F.toLowerCase()]};this.getByDataType=function(I){var G=[],F,H;for(F in D){if(D.hasOwnProperty(F)){H=D[F];A.inArray(I,H.applicableTo)>=0&&G.push(H)}}return G};this.removeCustom=function(){var F;for(F in D){if(D[F].custom){delete D[F]}}};this.sort=function(G,F){switch(F.toLowerCase()){case"alphabetical":G.sort(C);break;case"alphabeticalcustomfirst":G.sort(B);break;case"alphabeticalembeddedFirst":G.sort(E)}return G};function C(H,F){var I=H.name.toLowerCase(),G=F.name.toLowerCase();if(I!==G){if(I==="nofilter"){return -1}if(G==="nofilter"){return 1}}return I===G?0:I<G?-1:1}function E(H,F){var I=H.name.toLowerCase(),G=F.name.toLowerCase();if(I!==G){if(I==="nofilter"){return -1}if(G==="nofilter"){return 1}}if(H.custom!==F.custom){if(H.custom){return 1}if(F.custom){return -1}}return I===G?0:I<G?-1:1}function B(H,F){var I=H.name.toLowerCase(),G=F.name.toLowerCase();if(I!==G){if(I==="nofilter"){return -1}if(G==="nofilter"){return 1}}if(H.custom!==F.custom){if(H.custom){return -1}if(F.custom){return 1}}return I===G?0:I<G?-1:1}}});A.wijmo.wijgrid.embeddedFiltersImpl={_anyCmp:function(G,C,B){var D,E,F,H=false;if(!A.isArray(C)){C=[C]}if(!(E=C.length)){return false}if(G instanceof Date){G=G.getTime()}if(typeof G==="string"){G=G.toLowerCase()}for(D=0;D<E&&!H;D++){F=C[D];if(F instanceof Date){F=F.getTime()}if(typeof F==="string"){F=F.toLowerCase()}H=B(G,F)}return H}};A.wijmo.wijgrid.embeddedFilters={nofilter:{name:"NoFilter",arity:1,applicableTo:["string","number","datetime","currency","boolean"],operator:function(){return true}},contains:{name:"Contains",arity:2,applicableTo:["string"],operator:function(C,B){return A.wijmo.wijgrid.embeddedFiltersImpl._anyCmp(C,B,function(E,D){return E===D||(E?E.indexOf(D)>=0:false)})}},notcontain:{name:"NotContain",arity:2,applicableTo:["string"],operator:function(C,B){return !A.wijmo.wijgrid.embeddedFilters.contains.operator(C,B)}},beginswith:{name:"BeginsWith",arity:2,applicableTo:["string"],operator:function(C,B){return A.wijmo.wijgrid.embeddedFiltersImpl._anyCmp(C,B,function(E,D){return E===D||(E?E.indexOf(D)===0:false)})}},endswith:{name:"EndsWith",arity:2,applicableTo:["string"],operator:function(C,B){return A.wijmo.wijgrid.embeddedFiltersImpl._anyCmp(C,B,function(F,D){var E=F===D;if(!E&&F){idx=F.lastIndexOf(D);if(idx>=0){E=F.length-idx===D.length}}return E})}},equals:{name:"Equals",arity:2,applicableTo:["string","number","datetime","currency","boolean"],operator:function(C,B){return A.wijmo.wijgrid.embeddedFiltersImpl._anyCmp(C,B,function(D,E){return D===E})}},notequal:{name:"NotEqual",arity:2,applicableTo:["string","number","datetime","currency","boolean"],operator:function(C,B){return A.wijmo.wijgrid.embeddedFiltersImpl._anyCmp(C,B,function(D,E){return D!==E})}},greater:{name:"Greater",arity:2,applicableTo:["string","number","datetime","currency","boolean"],operator:function(C,B){return A.wijmo.wijgrid.embeddedFiltersImpl._anyCmp(C,B,function(D,E){return D>E})}},less:{name:"Less",arity:2,applicableTo:["string","number","datetime","currency","boolean"],operator:function(C,B){return A.wijmo.wijgrid.embeddedFiltersImpl._anyCmp(C,B,function(D,E){return D<E})}},greaterorequal:{name:"GreaterOrEqual",arity:2,applicableTo:["string","number","datetime","currency","boolean"],operator:function(C,B){return A.wijmo.wijgrid.embeddedFiltersImpl._anyCmp(C,B,function(D,E){return D>=E})}},lessorequal:{name:"LessOrEqual",arity:2,applicableTo:["string","number","datetime","currency","boolean"],operator:function(C,B){return A.wijmo.wijgrid.embeddedFiltersImpl._anyCmp(C,B,function(D,E){return D<=E})}},isempty:{name:"IsEmpty",arity:1,applicableTo:["string"],operator:function(B){return A.wijmo.wijgrid.embeddedFiltersImpl._anyCmp(B,undefined,function(C){return !C&&C!==0&&C!==false})}},notisempty:{name:"NotIsEmpty",arity:1,applicableTo:["string"],operator:function(B){return A.wijmo.wijgrid.embeddedFiltersImpl._anyCmp(B,undefined,function(C){return !!C||C===0||C===false})}},isnull:{name:"IsNull",arity:1,applicableTo:["string","number","datetime","currency","boolean"],operator:function(B){return A.wijmo.wijgrid.embeddedFiltersImpl._anyCmp(B,undefined,function(C){return C===null})}},notisnull:{name:"NotIsNull",arity:1,applicableTo:["string","number","datetime","currency","boolean"],operator:function(B){return A.wijmo.wijgrid.embeddedFiltersImpl._anyCmp(B,undefined,function(C){return C!==null})}}}})(jQuery);(function(A){A.extend(A.wijmo.wijgrid,{filterHelper:{getSingleValue:function(B){if(A.isArray(B)){B=B[0];if(A.isArray(B)){B=B[0]}}return B},getSingleOperatorName:function(B){if(A.isArray(B)){B=B[0]}return B.name||B||""},verify:function(E,I,G,H){if(E){if(A.isArray(E)){var F,D,B=[],C=[];if(!A.isArray(I)){I=[I]}for(F=0,D=E.length;F<D;F++){if(this._verifySingleOp(E[F],I[F],G,H)){B.push({name:E[F].name||E[F],condition:E[F].condition||"or"});C.push(I?I[F]:undefined)}}if(B.length){return{filterOperator:B,filterValue:C}}}else{if(this._verifySingleOp(E,I,G,H)){return{filterOperator:E,filterValue:I}}}}return null},_verifySingleOp:function(D,B,C,F){if(D&&(D=D.name||D)){var E;D=(D||"").toLowerCase();if(D!=="nofilter"&&(E=F.getByName(D))){if(A.inArray(C||"string",E.applicableTo)>=0){if(E.arity===1||E.arity>1&&this.getSingleValue(B)!==undefined){return true}}}}return false}}})})(jQuery);(function(A){A.extend(A.wijmo.wijgrid,{htmlTableAccessor:function(C){var E=[],B=0,D=C;F();function F(){var P=[],G,J,L,I,Q,O,N,H,M,K;for(J=0,L=D.rows.length;J<L;J++){G=[];E[J]=G;I=D.rows[J];for(Q=0,O=0,N=I.cells.length;Q<N;Q++,O++){H=I.cells[Q];for(;P[O]>1;O++){P[O]--;G[O]={cellIdx:-1,colIdx:-1}}if(!(P[O]>1)){P[O]=H.rowSpan}G[O]={cellIdx:Q,colIdx:-1};G[Q].colIdx=O;M=H.colSpan;for(;M>1;M--){G[++O]={cellIdx:-1,colIdx:-1}}}K=P.length;for(;O<K;O++){P[O]--;G[O]={cellIdx:-1,colIdx:-1}}B=Math.max(B,K)}}this.element=function(){return C};this.getCellIdx=function(H,G){return H<B?E[G][H].cellIdx:-1};this.getColumnIdx=function(I,G){if(typeof I!=="number"){var H=I;I=H.cellIndex;G=H.parentNode.rowIndex}return I<B?E[G][I].colIdx:-1};this.getSectionLength=function(G){return A.wijmo.wijgrid.getTableSectionLength(D,G)};this.getSectionRow=function(H,G){return A.wijmo.wijgrid.getTableSectionRow(D,G,H)};this.forEachColumnCellNatural=function(K,G,H){var L,M,I,J;for(L=0,M=D.rows.length;L<M;L++){I=D.rows[L];if(K<I.cells.length){J=G(I.cells[K],K,H);if(J!==true){return J}}}return true};this.forEachColumnCell=function(I,J,H){var K,L,M,N,G;for(K=0,L=E.length;K<L;K++){M=D.rows[K];N=this.getCellIdx(I,K);if(N>=0){G=J(M.cells[N],K,H);if(G!==true){return G}}}return true};this.forEachRowCell=function(G,M,H){var I=D.rows[G],L,J,K;for(L=0,J=I.cells.length;L<J;L++){K=M(I.cells[L],L,H);if(K!==true){return K}}return true};this.colGroupTag=function(){var G=D.getElementsByTagName("colgroup");return G!==null&&G.length>0?G[0]:null};this.colTags=function(){var G=this.colGroupTag();return G!==null?G.getElementsByTagName("col"):[]}}})})(jQuery);(function(A){A.wijmo.wijgrid.cellInfo=function(E,D){var C=false,B=null;this.cellIndex=function(F){if(arguments.length===0){return E}E=F};this.column=function(){if(B&&this._isValid()){var F=B._getDataToAbsOffset();return B._field("visibleLeaves")[E+F.x]}return null};this.rowIndex=function(F){if(arguments.length===0){return D}D=F};this.isEqual=function(F){return F&&F.rowIndex()===D&&F.cellIndex()===E};this.tableCell=function(){if(B&&this._isValid()){var F=B._getDataToAbsOffset();return B._view().getCell(E+F.x,D+F.y)}return null};this.container=function(){var G=this.tableCell(),F;if(G){F=A(G).children("div.wijmo-wijgrid-innercell");if(F){return F}}return null};this.value=function(F){var G,H;if(B&&this._isValid()){H=B.dataTable[D];if(H.rowType&A.wijmo.wijgrid.rowType.data){G=this.column();if(arguments.length===0){return H[G.dataIndex].value}else{F=B._parse(G,F);if(F===null&&G.valueRequired||G.dataType&&G.dataType!=="string"&&isNaN(F)){throw"invalid value"}H[G.dataIndex].value=F;B._dataStore.updateValue(H.originalRowIndex,G.dataKey,F)}}}};this.row=function(){var F=this._row();if(F!==null){F=B._createRowInfo(F);return F}return null};this.toString=function(){return E+":"+D};this._absToData=function(F){E-=F.x;D-=F.y;return this};this._clip=function(G){var F=false,H;if(E<(H=G.topLeft().cellIndex())){F=true;E=H}if(E>(H=G.bottomRight().cellIndex())){F=true;E=H}if(D<(H=G.topLeft().rowIndex())){F=true;D=H}if(D>(H=G.bottomRight().rowIndex())){F=true;D=H}return F};this._clone=function(){return new A.wijmo.wijgrid.cellInfo(E,D)};this._dataToAbs=function(F){E+=F.x;D+=F.y;return this};this._row=function(){return B&&this._isValid()?B._rows().item(D):null};this._isValid=function(){return E>=0&&D>=0};this._isEdit=function(F){if(!arguments.length){return C}C=F};this._setGridView=function(F){B=F}};A.wijmo.wijgrid.cellInfo.prototype.outsideValue=new A.wijmo.wijgrid.cellInfo(-1,-1);A.wijmo.wijgrid.cellInfoRange=function(C,B){if(!C||!B){throw"invalid arguments"}var D=C._clone(),E=B._clone();this.bottomRight=function(){return E};this.isEqual=function(F){return F&&D.isEqual(F.topLeft())&&E.isEqual(F.bottomRight())};this.topLeft=function(){return D};this.toString=function(){return D.toString()+" - "+E.toString()};this._isIntersect=function(I){var G,J,H,F;if(I){G=I.bottomRight().rowIndex()-I.topLeft().rowIndex()+1;J=E.rowIndex()-D.rowIndex()+1;if(I.topLeft().rowIndex()+G-D.rowIndex()<G+J){H=I.bottomRight().cellIndex()-I.topLeft().cellIndex()+1;F=E.cellIndex()-D.cellIndex()+1;return I.topLeft().cellIndex()+H-D.cellIndex()<H+F}}return false};this._isValid=function(){return D._isValid()&&E._isValid()};this._clip=function(F){return D._clip(F)|E._clip(F)};this._clone=function(){return new A.wijmo.wijgrid.cellInfoRange(D._clone(),E._clone())};this._containsCellInfo=function(F){return F&&F.cellIndex()>=D.cellIndex()&&F.cellIndex()<=E.cellIndex()&&F.rowIndex()>=D.rowIndex()&&F.rowIndex()<=E.rowIndex()};this._containsCellRange=function(F){return F&&this._containsCellInfo(F.topLeft())&&this._containsCellInfo(F.bottomRight())};this._extend=function(F,G){if(F===1){D.rowIndex(G.topLeft().rowIndex());E.rowIndex(G.bottomRight().rowIndex())}else{if(F===2){D.cellIndex(G.topLeft().cellIndex());E.cellIndex(G.bottomRight().cellIndex())}}return this};this._normalize=function(){var H=D.cellIndex(),G=D.rowIndex(),F=E.cellIndex(),I=E.rowIndex();D.cellIndex(Math.min(H,F));D.rowIndex(Math.min(G,I));E.cellIndex(Math.max(H,F));E.rowIndex(Math.max(G,I))}}})(jQuery);(function(A){A.extend(A.wijmo.wijgrid,{classFactory:function(H,I){var C="#fake#",D=/xyz/.test(function(){xyz})?/\b_base\b/:/.*/,B=H?H.prototype:function(){},F=H?new H(C):new B,G,E,J;for(G in I){if(I.hasOwnProperty(G)){E=I[G];if(B&&typeof E==="function"&&typeof B[G]==="function"&&D.test(E)){F[G]=function(K,L){return function(){var M=this._base,N;this._base=B[K];N=L.apply(this,arguments);if(M!==undefined){this._base=M}else{delete this._base}return N}}(G,E)}else{F[G]=E}}}J=function(K){K!==C&&this.ctor&&this.ctor.apply(this,arguments)};J.prototype=F;J.constructor=F;return J}})})(jQuery);(function(A){A.wijmo.wijgrid.baseView=A.wijmo.wijgrid.classFactory(null,{ctor:function(B){if(!B){throw"'wijgrid' must be specified"}this._rowHeaderSize=22;this._wijgrid=B;this._wijgrid.element.addClass("wijmo-wijgrid-table")},dispose:function(){this.toggleDOMSelection(true);this._wijgrid.element.removeClass("wijmo-wijgrid-table")},ensureWidth:function(C,B){this._setColumnWidth(C,B)},ensureHeight:function(){},getVisibleAreaBounds:function(){throw"not implemented"},render:function(){this._preRender();this._renderContent();this._postRender()},toggleDOMSelection:function(B){A.each(this.subTables(),function(C,D){new A.wijmo.wijgrid.domSelection(D.element()).toggleSelection(B)})},updateSplits:function(){throw"not implemented"},focusableElement:function(){throw"not implemented"},forEachColumnCell:function(){throw"not implemented"},forEachRowCell:function(){throw"not implemented"},getAbsoluteCellInfo:function(){throw"not implemented"},getAbsoluteRowIndex:function(){throw"not implemented"},getCell:function(){throw"not implemented"},getColumnIndex:function(){throw"not implemented"},getHeaderCell:function(){throw"not implemented"},getJoinedCols:function(){throw"not implemented"},getJoinedRows:function(){throw"not implemented"},getJoinedTables:function(){throw"not implemented"},subTables:function(){throw"not implemented"},_getMappedScrollMode:function(){var C=this._wijgrid.options.scrollMode,B="auto",D="auto";switch(C){case"horizontal":B="hidden";D="visible";break;case"vertical":B="visible";D="hidden";break;case"both":B="visible";D="visible"}return{vScrollBarVisibility:B,hScrollBarVisibility:D}},_postRender:function(){this.toggleDOMSelection(this._wijgrid.options.selectionMode==="none")},_preRender:function(){throw"not implemented"},_renderContent:function(){throw"not implemented"},_setColumnWidth:function(E,D){var C=this.getHeaderCell(E),B=this.getJoinedCols(E);if(D){A(C).setOutWidth(D);A.each(B,function(F,G){A(G).setOutWidth(D)})}},_getColumnWidth:function(G,C){var J,I,M,K,D,B,E,F,H,L;if(C){J=this._wijgrid._field("visibleLeaves")[G];if(J._realWidth!==undefined){I={width:J._realWidth,real:true}}else{if(J.isRowHeader){I={width:this._rowHeaderSize,real:true}}else{M=0;K=this.getJoinedTables(true,G);D=K[2];for(B=0;B<2;B++){E=K[B];if(E!==null){F=E.element().rows;if(F.length>0){H=F[0].cells[D];L=A(H).outerWidth();if(L>M){M=L}}}}I={width:M,real:false}}}C.push(I)}},_setTableWidth:function(C,F,G,B){var D,E;A.each(C,function(H,I){I.css("table-layout","fixed").setOutWidth(F)});D=C[0].outerWidth();E=D-F;E!==0&&this._setColumnWidth(B,G-E)},_sumWidthArray:function(C,D,E){var B=0;A.each(C,function(G,F){if(D!==undefined&&E!==undefined&&(G<D||G>E)){return true}B+=F.width});return B},_adjustWidthArray:function(C,D,N,G,K){var E=this._sumWidthArray(C),H=this._sumWidthArray(D),J=[],B,L=0,M,F,I=true;if(E<=N){A.extend(true,J,C);if(E==N||G){return J}else{B=N-E}}else{A.extend(true,J,D);if(H>=N){return J}else{B=N-H}}A.each(J,function(O,P){if(!P.real){L++}});if(L!==0){if(K!==undefined&&K>-1&&K<J.length&&!J[K].real){J[K].width+=B;return J}M=Math.floor(B/L);F=B-M*L;A.each(J,function(O,P){if(!P.real){P.width+=M;if(I){P.width+=F;I=false}}})}return J}})})(jQuery);(function(A){A.wijmo.wijgrid.flatView=A.wijmo.wijgrid.classFactory(A.wijmo.wijgrid.baseView,{ctor:function(B){this._base(B);this._dataTable=null;this._contentArea=null},getVisibleAreaBounds:function(){var B=A.wijmo.wijgrid.bounds(this._dataTable.element()),C;if(this._wijgrid.options.scrollMode==="none"){return B}else{C=A.wijmo.wijgrid.bounds(this._wijgrid.outerDiv.find(".wijmo-wijgrid-split-area-se:first")[0]);return{top:B.top,left:B.left,width:Math.min(C.width,B.width),height:Math.min(C.height,B.height)}}},updateSplits:function(){var J=this,B=this._wijgrid,E=B.options,K=B.element,F=[],C=[],H=[],L=B._field("visibleLeaves"),G=B.outerDiv,D,I;K.css({"table-layout":"",width:""});A.each(L,function(M,N){var O,P=N.width;if(P){O=typeof P==="string";if(O){P=G.width()*parseFloat(P)/100}if(N.ensurePxWidth||N.ensurePxWidth===undefined&&E.ensureColumnsPxWidth){N._realWidth=P}J._setColumnWidth(M,P)}});A.each(L,function(M){J._getColumnWidth(M,F)});K.css("width","1px");A.each(L,function(M){J._getColumnWidth(M,C)});D=G.innerWidth();H=this._adjustWidthArray(F,C,D,E.ensureColumnsPxWidth,E.autoExpandColumnIndex);A.each(H,function(O,N){var M=L[O];if(M._realWidth!==undefined){delete M._realWidth;return}J._setColumnWidth(O,N.width)});I=H.length-1;I!==-1&&this._setTableWidth([K],this._sumWidthArray(H,0,I),H[I].width,I)},focusableElement:function(){return A(this._dataTable.element())},forEachColumnCell:function(D,B,C){return this._dataTable.forEachColumnCell(D,B,C)},forEachRowCell:function(B,D,C){return this._dataTable.forEachRowCell(B,D,C)},getAbsoluteCellInfo:function(B){return new A.wijmo.wijgrid.cellInfo(this.getColumnIndex(B),B.parentNode.rowIndex)},getAbsoluteRowIndex:function(B){return B.rowIndex},getCell:function(B,C){var D=this._dataTable.getCellIdx(B,C),E;if(D>=0){E=this.getJoinedRows(C,0);if(E[0]){return E[0].cells[D]}}return null},getColumnIndex:function(B){return this._dataTable.getColumnIdx(B)},getHeaderCell:function(B){var C=this._wijgrid._field("visibleLeaves")[B],D;return C&&(D=this._wijgrid._headerRows())?(new A.wijmo.wijgrid.rowAccessor).getCell(D.item(C.thY),C.thX):null},getJoinedCols:function(C){var B=A(this._dataTable.element()).find("> colgroup");if(B.length){if(C<B[0].childNodes.length){return[B[0].childNodes[C],null]}}return[null,null]},getJoinedRows:function(C,B){return[this._dataTable.getSectionRow(C,B),null]},getJoinedTables:function(B,C){return[this._dataTable,null,C]},subTables:function(){return[this._dataTable]},_postRender:function(){this._wijgrid.element.find("> tbody").addClass("ui-widget-content wijmo-wijgrid-data");this._dataTable=new A.wijmo.wijgrid.htmlTableAccessor(this._wijgrid.element[0]);this._wijgrid.element.attr({role:"grid",cellpadding:"0",border:"0",cellspacing:"0"}).css("border-collapse","separate");this._base()},_preRender:function(){},_renderContent:function(){var Ao=this._wijgrid._field("visibleLeaves"),Af=this._wijgrid.element[0],Ac=null,Ae,Al,Q,Ak,X,An,O,Aw,Au,Ap,Aq,Aj,Am,Ah,N,a,Ab,P,As,T,Ai,Y,M,Aa,Ag,Z,Av,W,U,R=-1,V=0,At=A.wijmo.wijgrid.rowType,Ar=A.wijmo.wijgrid.renderState,Ad;Ae=this._wijgrid._field("spanTable");if(Ae&&Ae.length){Ac=Af.createTHead();Q=Ae[0].length;for(Ak=0,X=Ae.length;Ak<X;Ak++){An=this._wijgrid._createRow(Ac,At.header,Ak);Av=this._wijgrid._createRowInfo([An],At.header,Ar.rendering,-1,-1,-1,-1);O=0;for(Aw=0;Aw<Q;Aw++){Al=Ae[Ak][Aw];if(Al.column&&Al.column.parentVis){Al.column.thX=O++;Al.column.thY=Ak;Au=A(this._wijgrid._createCell(At.header,Ak,Aw,Al.column));Ap=Au.children("div");An.appendChild(Au[0]);this._wijgrid.cellFormatter.format(Ap,Al.column,Al.column.headerText,Av);this._wijgrid._cellCreated(Au,Aw,Al.column,Av,Ar.rendering,{colSpan:Al.colSpan,rowSpan:Al.rowSpan})}}this._wijgrid._rowCreated(Av)}}if(this._wijgrid.options.showFilter){if(!Ac){Ac=Af.createTHead()}An=this._wijgrid._createRow(Ac,At.filter,-1);Av=this._wijgrid._createRowInfo([An],At.filter,Ar.rendering,-1,-1,-1,-1);for(Aq=0,Aj=Ao.length;Aq<Aj;Aq++){Am=Ao[Aq];Au=A(this._wijgrid._createCell(At.filter,undefined,Aq,Am));An.appendChild(Au[0]);this._wijgrid.cellFormatter.format(Au,Am,A.wijmo.wijgrid.filterHelper.getSingleValue(Am.filterValue),Av);this._wijgrid._cellCreated(Au,Aq,Am,Av,Ar.rendering)}this._wijgrid._rowCreated(Av)}Ah=document.createElement("colgroup");for(Aq=0,Aj=Ao.length;Aq<Aj;Aq++){N=document.createElement("col");Ah.appendChild(N)}Af.appendChild(Ah);a=this._wijgrid.dataTable;Ab=A.wijmo.wijgrid.ensureTBody(Af);if(this._wijgrid._dataStore.dataMode()===A.wijmo.wijgrid.dataMode.dynamical){V=this._wijgrid.options.pageIndex*this._wijgrid.options.pageSize}for(Ak=0,P=a.length;Ak<P;Ak++){As=a[Ak];T=As.length;Ad=(As.rowType&At.data)!==0;An=this._wijgrid._createRow(Ab,As.rowType,As.originalRowIndex);Av=this._wijgrid._createRowInfo([An],As.rowType,Ar.rendering,Ak,Ad?++R:-1,Ad?As.originalRowIndex:-1,Ad?V+As.originalRowIndex:-1);for(Aw=0,Ai=Ao.length;Aw<Ai;Aw++){Am=Ao[Aw];Y=Am.dataIndex;M=0;Aa=false;switch(As.rowType){case At.data:case At.data|At.dataAlt:M=Y;if(M>=0&&(!As[M]||As[M].visible===false)){continue}break;case At.emptyDataRow:case At.groupHeader:case At.groupFooter:M=Aw;if(M>=T){Aa=true}}if(Aa){break}Au=A(this._wijgrid._createCell(As.rowType,As.originalRowIndex,M,Am));Ap=Au.children("div");An.appendChild(Au[0]);if(As.rowType&At.data&&Am.dataParser){Ag=null;if(M>=0){Z=As[M].value;Ag=this._wijgrid._toStr(Am,Z)}this._wijgrid.cellFormatter.format(Ap,Am,Ag,Av)}else{M>=0&&Ap.html(As[M].html)}W=M>=0?As[M].__attr:null;U=M>=0?As[M].__style:null;this._wijgrid._cellCreated(Au,Aw,Am,Av,Ar.rendering,W,U)}if(!An.cells.length){Ab.removeChild(An)}else{this._wijgrid._rowCreated(Av,As.__attr,As.__style)}}if(this._wijgrid.options.showFooter){An=this._wijgrid._createRow(Af.createTFoot(),At.footer,-1);Av=this._wijgrid._createRowInfo([An],At.footer,Ar.rendering,-1,-1,-1,-1);for(Aw=0,Ai=Ao.length;Aw<Ai;Aw++){Am=Ao[Aw];Au=A(this._wijgrid._createCell(At.footer,undefined,Aw,Am));Ap=Au.children("div");An.appendChild(Au[0]);this._wijgrid.cellFormatter.format(Ap,Am,"",Av);this._wijgrid._cellCreated(Au,Aq,Am,Av,Ar.rendering)}this._wijgrid._rowCreated(Av)}}})})(jQuery);(function(A){A.wijmo.wijgrid.fixedView=A.wijmo.wijgrid.classFactory(A.wijmo.wijgrid.baseView,{ctor:function(B){this._base(B);this._verScrollBarSize=18;this._mouseWheelHandler=A.proxy(this._onMouseWheel,this);this._rowsCount=null;this._viewTables={};this._table00=null;this._table01=null;this._table10=null;this._table11=null;this._scroller=null;this.element=B.element},dispose:function(){this._base();this._wijgrid.outerDiv.unbind("mousewheel",this._mouseWheelHandler)},ensureWidth:function(P,G,C){var Q=this._wijgrid,B=Q.options,H=Q._getRealStaticColumnIndex(),F=P<=H,M=A(this._table00.element()),O=A(this._table01.element()),E=A(this._table10.element()),N=A(this._table11.element()),L=F?[M,E]:[O,N],I=(F?M.width():O.width())+G-C,J=Q._field("frozener"),K=this.getScrollValue();this._scroller.data("wijsuperpanel")&&this._scroller.wijsuperpanel("destroy");this._base(P,G);this._setTableWidth(L,I,G,P);try{if(H>=0){B.splitDistanceX=M[0].offsetWidth}else{B.splitDistanceX=0}}catch(D){}this._updateSplitAreaBounds(0);N.css("height","");this._adjustRowHeight();N.height(Math.max(N.height(),E.height()));try{if(Q._getRealStaticRowIndex()>=0){B.splitDistanceY=Math.max(M[0].offsetHeight,O[0].offsetHeight)}else{B.splitDistanceY=0}}catch(D){}this._updateSplitAreaBounds(1);this.refreshPanel(K);J.refresh()},ensureHeight:function(D){var H,L=this._wijgrid,B=L.options,E=A(this._table00.element()),K=A(this._table01.element()),F=A(this._table10.element()),I=A(this._table11.element()),C=L._field("frozener"),J=this.getScrollValue();this._scroller.data("wijsuperpanel")&&this._scroller.wijsuperpanel("destroy");if(arguments.length>0){H=this.getJoinedRows(D,2);this._setRowHeight(H,this._getRowHeight(H))}I.css("height","");I.height(Math.max(I.height(),F.height()));try{if(L._getRealStaticRowIndex()>=0){B.splitDistanceY=Math.max(E[0].offsetHeight,K[0].offsetHeight)}else{B.splitDistanceY=0}}catch(G){}this._updateSplitAreaBounds(1);this.refreshPanel(J);C.refresh()},getScrollValue:function(){var B=this._getSuperPanel();return B?{type:"fixed",hScrollValue:B.options.hScroller.scrollValue,vScrollValue:B.options.vScroller.scrollValue}:{type:"fixed",hScrollValue:null,vScrollValue:null}},getVisibleAreaBounds:function(){return A.wijmo.wijgrid.bounds(this._wijgrid.outerDiv.find(".wijmo-wijsuperpanel-contentwrapper:first"))},refreshPanel:function(C){var D=this,F=this._wijgrid,G=F.options,B=this._getGridWidth(G.scrollMode),H=this._getMappedScrollMode(),E=this._testNeedVBar(F.outerDiv,F.element,A(this._table01.element()),G.scrollMode,F._autoHeight);this._scroller.width(B);F.outerDiv.find(".wijmo-wijgrid-split-area-ne").width(B-G.splitDistanceX-(E?this._verScrollBarSize:0));if(!this._scroller.data("wijsuperpanel")){this._scroller.wijsuperpanel({scroll:A.proxy(this._onScroll,this),bubbleScrollingEvent:false,vScroller:{scrollBarVisibility:H.vScrollBarVisibility,scrollValue:C.type==="fixed"?C.vScrollValue:null},hScroller:{scrollBarVisibility:H.hScrollBarVisibility,scrollValue:C.type==="fixed"?C.hScrollValue:null},hScrollerActivating:function(I,L){var K,J;if(F._autoHeight){K=F.element.height()+G.splitDistanceY-L.contentLength;if(K>0){D._scroller.height(D._scroller.height()+K);D._scroller.wijsuperpanel("paintPanel");return false}}J=F.outerDiv.find(".wijmo-wijgrid-split-area-sw");J.height(L.contentLength-G.splitDistanceY)}})}else{this._scroller.wijsuperpanel("paintPanel")}this._scroller.find(".wijmo-wijsuperpanel-hbarcontainer, .wijmo-wijsuperpanel-vbarcontainer").css("zIndex",5)},scrollTo:function(C){var I=this._wijgrid,F=I.options,Q=this._getSuperPanel(),H=C.tableCell(),N=H.nodeType?A(H):H,P,B,W,U,K,M,E,R,T,J,L,X=null,V=null,Y,O,G,D;if(Q&&N.is(":visible")){P=Q.getContentElement();B=P.parent();W=parseInt((P.css("left")+"").replace("px",""),10)*-1;U=parseInt((P.css("top")+"").replace("px",""),10)*-1;K=B.outerWidth()-F.splitDistanceX;M=B.outerHeight()-F.splitDistanceY;E=N.position();R=E.left;T=E.top;J=N.outerWidth();L=N.outerHeight();Y=I._getStaticIndex(true);O=I._getStaticIndex(false);G=C.rowIndex();D=C.cellIndex();if(G<=Y){if(D<=O){X=0;V=0}else{R+=W;if(R+J>W+K){W=X=R+J-K}if(R<W){X=R}V=0}}else{if(D<=O){T+=U;if(T+L>U+M){U=V=T+L-M}if(T<U){V=T}X=0}else{R-=F.splitDistanceX;if(T+L>U+M){U=V=T+L-M}if(R+J>W+K){W=X=R+J-K}if(T<U){V=T}if(R<W){X=R}}}X!==null&&Q.hScrollTo(X);V!==null&&Q.vScrollTo(V)}},updateSplits:function(C){var T=this._wijgrid,Q=T.options,B,M,H,N=this,U=[],E=[],D=[],J=T._getRealStaticColumnIndex(),P,F=Q.scrollMode,O=T._field("visibleLeaves"),V=A(this._table11.element()),R=A(this._table01.element()),I=A(this._table10.element()),K=A(this._table00.element()),L=T.outerDiv;this._scroller.data("wijsuperpanel")&&this._scroller.wijsuperpanel("destroy");L.unbind("mousewheel",this._mouseWheelHandler);B=V.find("tbody .wijmo-wijgrid-row:not(.wijmo-wijgrid-groupheaderrow):first");this.fooRow=M=B.clone().removeAttr("datarowindex").addClass("wijmo-wijgrid-foorow").appendTo(B.parent()).show().height(0).css({"font-size":"0"});this.fooRowCells=M.find(">td").height(0).css({"border-top":"0","border-bottom":"0"}).find(">div.wijmo-wijgrid-innercell").css({"padding-top":"0px","padding-bottom":"0px"}).empty();M.css("visibility","hidden");M.length===0&&T.element.css("width","100%");A.each([V,R,I,K],function(W,X){X.css({"table-layout":"",width:""})});A.each(O,function(X,Y){var W,Z=Y.width;if(Z){W=typeof Z==="string";if(W){Z=L.width()*parseFloat(Z)/100}if(Y.ensurePxWidth||Y.ensurePxWidth===undefined&&Q.ensureColumnsPxWidth){Y._realWidth=Z}N._setColumnWidth(X,Z)}});A.each(O,function(W){N._getColumnWidth(W,D)});A.each([K,R,I,V],function(W,X){X.css({width:"1px"})});A.each(O,function(W){N._getColumnWidth(W,E)});H=L.innerWidth();U=this._adjustWidthArray(D,E,H,Q.ensureColumnsPxWidth,Q.autoExpandColumnIndex);A.each(U,function(Y,X){var W=O[Y];if(W._realWidth!==undefined){delete W._realWidth;return}N._setColumnWidth(Y,X.width)});if(J>=0){P=J;this._setTableWidth([K,I],this._sumWidthArray(U,0,P),U[P].width,P)}try{if(J>=0){Q.splitDistanceX=K[0].offsetWidth}else{Q.splitDistanceX=0}}catch(G){}this._updateSplitAreaBounds(0);!Q.ensureColumnsPxWidth&&R.parent().width(H-Q.splitDistanceX);P=U.length-1;P!==-1&&this._setTableWidth([R,V],this._sumWidthArray(U,J+1,P),U[P].width,P);V.css("height","");this._adjustRowHeight();V.height(Math.max(V.height(),I.height()));try{if(T._getRealStaticRowIndex()>=0){Q.splitDistanceY=Math.max(K[0].offsetHeight,R[0].offsetHeight)}else{Q.splitDistanceY=0}}catch(G){}this._updateSplitAreaBounds(1);if(!Q.ensureColumnsPxWidth){if(this._testNeedVBar(T.outerDiv,V,R,F,T._autoHeight)){H-=this._verScrollBarSize;U=this._adjustWidthArray(D,E,H,Q.ensureColumnsPxWidth,Q.autoExpandColumnIndex);A.each(U,function(W,X){!X.real&&N._setColumnWidth(W,X.width)});if(J>=0){P=J;this._setTableWidth([K,I],this._sumWidthArray(U,0,P),U[P].width,P)}try{if(J>=0){Q.splitDistanceX=K[0].offsetWidth}else{Q.splitDistanceX=0}}catch(G){}this._updateSplitAreaBounds(0);R.parent().width(H-Q.splitDistanceX);P=U.length-1;P!==-1&&this._setTableWidth([R,V],this._sumWidthArray(U,J+1,P),U[P].width,P);V.css("height","");this._adjustRowHeight();V.height(Math.max(V.height(),I.height()));try{if(T._getRealStaticRowIndex()>=0){Q.splitDistanceY=Math.max(K[0].offsetHeight,R[0].offsetHeight)}else{Q.splitDistanceY=0}}catch(G){}this._updateSplitAreaBounds(1)}}this.refreshPanel(C);L.bind("mousewheel",this._mouseWheelHandler)},focusableElement:function(){return this._wijgrid.outerDiv},forEachColumnCell:function(G,B,C){var D=this.getJoinedTables(true,G),E,F;if(D[0]!==null){E=D[2];F=D[0].forEachColumnCell(E,B,C);if(F!==true){return F}if(D[1]!==null){F=D[1].forEachColumnCell(E,B,C);if(F!==true){return F}}}return true},forEachRowCell:function(C,G,H){var E=this.getJoinedTables(false,C),I=E[0],B=E[1],D,F;if(I!==null){D=E[2];if(D<I.element().rows.length){F=I.forEachRowCell(D,G,H);if(F!==true){return F}}if(B!==null&&D<B.element().rows.length){F=B.forEachRowCell(D,G,H);if(F!==true){return F}}}return true},getAbsoluteCellInfo:function(B){return new A.wijmo.wijgrid.cellInfo(this.getColumnIndex(B),this.getAbsoluteRowIndex(B.parentNode))},getAbsoluteRowIndex:function(B){var C=B.rowIndex,D=B.parentNode;while(D.tagName.toLowerCase()!=="table"){D=D.parentNode}return D===this._table00.element()||D===this._table01.element()?C:C+this._wijgrid._getRealStaticRowIndex()+1},getCell:function(H,C){var F=this.getJoinedTables(false,C),E,B,I,D,G;if(F[0]!==null){E=this.getJoinedTables(true,H);if(E[0]!==null){B=F[2];I=E[2];D=null;if(F[1]!==null){D=H===I?F[0]:F[1]}else{D=F[0]}G=D.getCellIdx(I,B);if(G>=0){return D.element().rows[B].cells[G]}}}return null},getColumnIndex:function(C){for(var F=null,D=null,B=false,E,F=C.parentNode;F.tagName.toLowerCase()!=="table";F=F.parentNode){}if(F!==null){if(F===this._table00.element()){D=this._table00}else{if(F===this._table01.element()){D=this._table01;B=true}else{if(F===this._table10.element()){D=this._table10}else{if(F===this._table11.element()){D=this._table11;B=true}}}}if(D!==null){E=D.getColumnIdx(C);if(B){E+=this._wijgrid._getRealStaticColumnIndex()+1}return E}}return -1},getHeaderCell:function(B){var C=this._wijgrid._field("visibleLeaves")[B],D;return C&&(D=this._wijgrid._headerRows())?(new A.wijmo.wijgrid.rowAccessor).getCell(D.item(C.thY),C.thX):null},getJoinedCols:function(B){var E=[],D=this.getJoinedTables(true,B),C=D[2];D.splice(D.length-1,1);A.each(D,function(F,G){E.push(G?A(G.element()).find("col")[C]:null)});return E},getJoinedRows:function(K,B){var M=null,N=null,L=null,O=null,H=this._wijgrid._getRealStaticRowIndex(),J=this._wijgrid._getRealStaticColumnIndex(),I=this._wijgrid._field("visibleLeaves").length-1,G=this._rowsCount-1,D=H===G,E=H<0,C=!D&&!E,F=0;if(D||C){if(J>=0&&J<I){L=this._table00;O=this._table01}else{L=J<0?this._table01:this._table00}F=L.getSectionLength(B);if(K<F){M=L.getSectionRow(K,B);if(O!==null){N=O.getSectionRow(K,B)}}}if(E||C&&M===null){if(!E){K-=F}if(J>=0&&J<I){L=this._table10;O=this._table11}else{L=J<0?this._table11:this._table10}M=L.getSectionRow(K,B);if(O!==null){N=O.getSectionRow(K,B)}}return M===null&&N===null?null:[M,N]},getJoinedTables:function(C,H){var F=null,D=null,E=H,G=this._wijgrid,B=G._getRealStaticRowIndex(),I=G._getRealStaticColumnIndex();if(C){if(H<=I){F=this._table00;D=this._table10}else{F=this._table01;D=this._table11;E=E-(I+1)}if(B<0){F=null}if(B===this._rowsCount-1){D=null}}else{if(H<=B){F=this._table00;D=this._table01}else{F=this._table10;D=this._table11;E=E-(B+1)}if(I<0){F=null}if(I===G._field("leaves").length-1){D=null}}if(F===null){F=D;D=null}return[F,D,E]},subTables:function(){return[this._table00,this._table01,this._table10,this._table11]},_getGridWidth:function(C){var D=this._wijgrid,E=D.element.outerWidth(true)+D.options.splitDistanceX,B=D.outerDiv.innerWidth();if(this._testNeedVBar(D.outerDiv,D.element,A(this._table01.element()),C,D._autoHeight)){E+=this._verScrollBarSize}if(E>B){E=B}return E},_getSuperPanel:function(){return this._scroller?this._scroller.data("wijsuperpanel"):null},_postRender:function(){var B;for(B in this._viewTables){this._viewTables.hasOwnProperty(B)&&A(this._viewTables[B]).addClass("wijmo-wijgrid-table").attr("role","grid").find("> tbody").addClass("ui-widget-content wijmo-wijgrid-data")}this._table00=new A.wijmo.wijgrid.htmlTableAccessor(this._viewTables.nw);this._table01=new A.wijmo.wijgrid.htmlTableAccessor(this._viewTables.ne);this._table10=new A.wijmo.wijgrid.htmlTableAccessor(this._viewTables.sw);this._table11=new A.wijmo.wijgrid.htmlTableAccessor(this._viewTables.se);this._rowsCount=Math.max(this._viewTables.nw.rows.length,this._viewTables.ne.rows.length)+Math.max(this._viewTables.sw.rows.length,this._viewTables.se.rows.length);A.each([this._viewTables.nw,this._viewTables.sw,this._viewTables.ne,this._viewTables.se],function(D,C){A(C).attr({cellpadding:"0",border:"0",cellspacing:"0"}).css("border-collapse","separate")});this._base()},_preRender:function(){this._wijgrid.outerDiv.wrapInner('<div class="wijmo-wijgrid-fixedview"><div class="wijmo-wijgrid-scroller"><div class="wijmo-wijgrid-split-area-se wijmo-wijgrid-content-area"></div></div></div>');this._scroller=this._wijgrid.outerDiv.find(".wijmo-wijgrid-scroller");this._scroller.after('<div class="wijmo-wijgrid-split-area wijmo-wijgrid-split-area-nw" style="overflow:hidden;position:absolute;z-index:4;top:0px;left:0px;"></div>');this._scroller.after('<div class="wijmo-wijgrid-split-area wijmo-wijgrid-split-area-ne" style="overflow:hidden;position:absolute;z-index:4;top:0px;left:0px;"></div>');this._scroller.after('<div class="wijmo-wijgrid-split-area wijmo-wijgrid-split-area-sw" style="overflow:hidden;position:absolute;z-index:4;top:0px;left:0px;"></div>')},_renderContent:function(){var AP=this._wijgrid,AC=AP._field("visibleLeaves"),Ay=document.createDocumentFragment(),Ax=AP._field("spanTable"),An=AP._getStaticIndex(true),AF=AP._getRealStaticColumnIndex(),Ae=AF===-1?-1:AC[AF].leavesIdx,Az={},Af,AN,a,AQ,Ao,Y,AT,Ad,AJ,AL,AR,AO,Ag,AI,AB,AE,AD,Aq,Ap,Ah,AM={},Aa,Ar,Am,AH,Av,AG,Au,Ab,At,As,Ak,Aj,Ac,Al,AK,Z=-1,Ai=0,AS=A.wijmo.wijgrid.rowType,AA=A.wijmo.wijgrid.renderState,Aw;this._viewTables={nw:Ay.appendChild(document.createElement("table")),ne:Ay.appendChild(document.createElement("table")),sw:Ay.appendChild(document.createElement("table")),se:Ay.appendChild(AP.element[0])};if(Ax&&Ax.length){Az.nw=this._viewTables.nw.createTHead();Az.ne=this._viewTables.ne.createTHead();Af=Ax[0].length;for(AN=0,a=Ax.length;AN<a;AN++){Y=null;AT=null;Y=AP._createRow(Az.nw,AS.header,AN);AT=AP._createRow(Az.ne,AS.header,AN);AK=AP._createRowInfo([Y,AT],AS.header,AA.rendering,-1,-1,-1,-1);Ad=0;for(AJ=0;AJ<Af;AJ++){AL=Ax[AN][AJ];if(AL.column&&AL.column.parentVis){AL.column.thX=Ad++;AL.column.thY=AN;AR=A(AP._createCell(AS.header,AN,AJ,AL.column));AG=AR.children("div");if(AJ<=Ae){Y.appendChild(AR[0])}else{AT.appendChild(AR[0])}AP.cellFormatter.format(AG,AL.column,AL.column.headerText,AK);AP._cellCreated(AR,AJ,AL.column,AK,AA.rendering,{colSpan:AL.colSpan,rowSpan:AL.rowSpan})}}AP._rowCreated(AK)}}if(AP.options.showFilter){if(Az.nw){Y=AP._createRow(Az.nw,AS.filter,-1)}if(Az.ne){AT=AP._createRow(Az.ne,AS.filter,-1)}AK=AP._createRowInfo([Y,AT],AS.filter,AA.rendering,-1,-1,-1,-1);for(AO=0,Ag=AC.length;AO<Ag;AO++){AI=AC[AO];AR=A(AP._createCell(AS.filter,undefined,AO,AI));if(AO<=AF){Y.appendChild(AR[0])}else{AT.appendChild(AR[0])}AP.cellFormatter.format(AR,AI,A.wijmo.wijgrid.filterHelper.getSingleValue(AI.filterValue),AK);AP._cellCreated(AR,AO,AI,AK,AA.rendering)}AP._rowCreated(AK)}AB={t0:this._viewTables.nw,t1:this._viewTables.sw};for(AE in AB){if(AB.hasOwnProperty(AE)){AD=document.createElement("colgroup");for(AO=0;AO<=AF;AO++){Aq=document.createElement("col");AD.appendChild(Aq)}Ap=AB[AE];Ap.appendChild(AD)}}AB={t0:this._viewTables.ne,t1:this._viewTables.se};for(AE in AB){if(AB.hasOwnProperty(AE)){AD=document.createElement("colgroup");for(AO=AF+1;AO<AC.length;AO++){Aq=document.createElement("col");AD.appendChild(Aq)}Ap=AB[AE];Ap.appendChild(AD)}}Ah=AP.dataTable;AM={nw:A.wijmo.wijgrid.ensureTBody(this._viewTables.nw),ne:A.wijmo.wijgrid.ensureTBody(this._viewTables.ne),sw:A.wijmo.wijgrid.ensureTBody(this._viewTables.sw),se:A.wijmo.wijgrid.ensureTBody(this._viewTables.se)};if(AP._dataStore.dataMode()===A.wijmo.wijgrid.dataMode.dynamical){Ai=AP.options.pageIndex*AP.options.pageSize}for(AN=0,Aa=Ah.length;AN<Aa;AN++){AQ=Ah[AN];Ao=AQ.length;Aw=(AQ.rowType&AS.data)!==0;Y=null;AT=null;if(AN<=An){Y=AP._createRow(AM.nw,AQ.rowType,AQ.originalRowIndex);AT=AP._createRow(AM.ne,AQ.rowType,AQ.originalRowIndex)}else{Y=AP._createRow(AM.sw,AQ.rowType,AQ.originalRowIndex);AT=AP._createRow(AM.se,AQ.rowType,AQ.originalRowIndex)}AK=AP._createRowInfo([Y,AT],AQ.rowType,AA.rendering,AN,Aw?++Z:-1,Aw?AQ.originalRowIndex:-1,Aw?Ai+AQ.originalRowIndex:-1);for(AJ=0,Ar=AC.length;AJ<Ar;AJ++){AI=AC[AJ];Am=AI.dataIndex;AH=0;Av=false;switch(AQ.rowType){case AS.data:case AS.data|AS.dataAlt:AH=Am;if(AH>=0&&(!AQ[AH]||AQ[AH].visible===false)){continue}break;case AS.emptyDataRow:case AS.groupHeader:case AS.groupFooter:AH=AJ;if(AH>=Ao){Av=true}}if(Av){break}AR=A(AP._createCell(AQ.rowType,AQ.originalRowIndex,AH,AI));AG=AR.children("div");if(AJ<=AF){Y.appendChild(AR[0])}else{AT.appendChild(AR[0])}if(AQ.rowType&AS.data&&AI.dataParser){Au=null;if(AH>=0){Ab=AQ[AH].value;Au=AP._toStr(AI,Ab)}AP.cellFormatter.format(AG,AI,Au,AK)}else{AH>=0&&AG.html(AQ[AH].html)}Ac=AH>=0?AQ[AH].__attr:null;Al=AH>=0?AQ[AH].__style:null;AP._cellCreated(AR,AJ,AI,AK,AA.rendering,Ac,Al)}if(AN<=An){if(!Y.cells.length){AM.nw.removeChild(Y);Y=null}if(!AT.cells.length){AM.ne.removeChild(AT);AT=null}(Y||AT)&&AP._rowCreated(AK,AQ.__attr,AQ.__style)}else{if(!Y.cells.length){AM.sw.removeChild(Y);Y=null}if(!AT.cells.length){AM.se.removeChild(AT);AT=null}(Y||AT)&&AP._rowCreated(AK,AQ.__attr,AQ.__style)}}if(AP.options.showFooter){Y=AP._createRow(this._viewTables.sw.createTFoot(),AS.footer,-1);AT=AP._createRow(this._viewTables.se.createTFoot(),AS.footer,-1);AK=AP._createRowInfo([Y,AT],AS.footer,AA.rendering,-1,-1,-1,-1);for(AJ=0,Ar=AC.length;AJ<Ar;AJ++){AI=AC[AJ];AR=A(AP._createCell(AS.footer,undefined,AJ,AI));AG=AR.children("div");if(AJ<=AF){Y.appendChild(AR[0])}else{AT.appendChild(AR[0])}AP.cellFormatter.format(AG,AI,"",AK);AP._cellCreated(AR,AO,AI,AK,AA.rendering)}AP._rowCreated(AK)}At=AP.outerDiv.find(".wijmo-wijgrid-split-area-nw");As=AP.outerDiv.find(".wijmo-wijgrid-split-area-ne");Ak=AP.outerDiv.find(".wijmo-wijgrid-split-area-sw");Aj=AP.outerDiv.find(".wijmo-wijgrid-content-area");At[0].innerHTML="";As[0].innerHTML="";Ak[0].innerHTML="";Aj[0].innerHTML="";A(this._viewTables.nw).appendTo(At);A(this._viewTables.ne).appendTo(As);A(this._viewTables.sw).appendTo(Ak);A(this._viewTables.se).appendTo(Aj)},_getRowHeight:function(D){if(D[0]&&D[1]){var C=[A(D[0]),A(D[1])],E,B;A.each(C,function(F,G){G.css("height","")});E=C[0].height();B=C[1].height();if(E>B){return E}else{if(E<B){return B}}}return null},_setRowHeight:function(E,D){if(E[0]&&E[1]){var C=[A(E[0]),A(E[1])],B;if(D===null){return}D+=1;A.each(C,function(F,G){G.height(D);B=D-G.height();B&&G.height(D+B)})}},_adjustRowHeight:function(){var E=this._wijgrid,C=E._getRealStaticColumnIndex(),F=E._field("visibleLeaves").length-1,O,U,H,T,N,I,K,J,L,G,D,R,Q,B,P,V;if(C>-1&&C<F){var M=[];O=E._getRealStaticRowIndex();U=this._rowsCount-1;H=this._viewTables;if(O>-1&&O<=U){T=H.ne;N=T.parentNode;I=H.nw;K=I.parentNode;P=I.rows;V=T.rows;R=P.length;for(Q=0;Q<R;Q++){M.push(this._getRowHeight([P[Q],V[Q]]))}}if(O>=-1&&O<U){J=H.se;L=J.parentNode;G=H.sw;D=G.parentNode;P=G.rows;V=J.rows;R=P.length;for(Q=0;Q<R;Q++){M.push(this._getRowHeight([P[Q],V[Q]]))}}if(O>-1&&O<=U){K.removeChild(I);N.removeChild(T)}if(O>=-1&&O<U){D.removeChild(G);L.removeChild(J)}if(O>-1&&O<=U){P=I.rows;V=T.rows;R=P.length;for(Q=0,B=0;Q<R;Q++){this._setRowHeight([P[Q],V[Q]],M[B++])}}if(O>=-1&&O<U){P=G.rows;V=J.rows;R=P.length;for(Q=0;Q<R;Q++){this._setRowHeight([P[Q],V[Q]],M[B++])}}if(O>-1&&O<=U){K.appendChild(I);N.appendChild(T)}if(O>=-1&&O<U){D.appendChild(G);L.appendChild(J)}}},_onScroll:function(C,F){var D,E,B={};if(F.dir==="h"){D=this._wijgrid.outerDiv.find(".wijmo-wijgrid-split-area-ne");E="scrollLeft"}else{D=this._wijgrid.outerDiv.find(".wijmo-wijgrid-split-area-sw");E="scrollTop"}if(F.animationOptions){B[E]=F.position;D.animate(B,F.animationOptions)}else{D[0][E]=F.position}},_onScrolled:function(){this._wijgrid.outerDiv.find(".wijmo-wijgrid-split-area-ne")[0].scrollLeft=parseInt((this._wijgrid.outerDiv.find(".wijmo-wijsuperpanel-templateouterwrapper").css("left")+"").replace("px",""),10)*-1;this._wijgrid.outerDiv.find(".wijmo-wijgrid-split-area-sw")[0].scrollTop=parseInt((this._wijgrid.outerDiv.find(".wijmo-wijsuperpanel-templateouterwrapper").css("top")+"").replace("px",""),10)*-1},_onMouseWheel:function(E,C){var D=this.getVisibleAreaBounds(),B;if(this._wijgrid._canInteract()&&A.ui.isOver(E.pageY,E.pageX,D.top,D.left,D.height,D.width)){if(C>0){B="top"}else{B="bottom"}if(this._scroller.data("wijsuperpanel")){this._scroller.wijsuperpanel("doScrolling",B);E.stopPropagation();E.preventDefault()}}},_testNeedVBar:function(E,F,G,O,D){var J,L=this._wijgrid,I=G.width()+L.options.splitDistanceX,M=F.height()+L.options.splitDistanceY,H=E.width(),C=E.height(),K,N=0,B=0;if(L.$superPanelHeader!==null){N=L.$superPanelHeader.outerHeight(true)}if(L.$bottomPagerDiv!==null){B=L.$bottomPagerDiv.outerHeight(true)}K=C-N-B;if(O==="both"||O==="vertical"){J=true}else{J=O==="auto"&&(M>K||!D&&I>H&&M>K-this._verScrollBarSize)}return J},_updateSplitAreaBounds:function(K){var H=this._wijgrid,I=H.options,L,E,B=0,G=0,C=H.outerDiv.find(".wijmo-wijgrid-split-area-nw"),F=H.outerDiv.find(".wijmo-wijgrid-split-area-ne"),J=H.outerDiv.find(".wijmo-wijgrid-split-area-sw"),D=H.outerDiv.find(".wijmo-wijgrid-split-area-se");if(K===0||K===2){C.width(I.splitDistanceX);J.width(I.splitDistanceX);D.css("marginLeft",I.splitDistanceX);F.css("marginLeft",I.splitDistanceX)}if(K===1||K===2){this._scroller.css("height","");D.css("marginTop",0);L=H.outerDiv.height();if(!H._autoHeight){this._scroller.height(L)}else{this._scroller.height(L+I.splitDistanceY)}C.height(I.splitDistanceY);F.height(I.splitDistanceY);if(H.$superPanelHeader!==null){B=H.$superPanelHeader.outerHeight(true)}if(H.$bottomPagerDiv!==null){G=H.$bottomPagerDiv.outerHeight(true)}E=L-B-G;H.$superPanelHeader!==null&&A.each([C,F],function(M,N){N.css("top",B+"px")});if(!H._autoHeight){J.height(E-I.splitDistanceY)}else{J.height(E)}J.css("top",I.splitDistanceY+B);D.css("marginTop",I.splitDistanceY)}}})})(jQuery);(function(A){A.wijmo.wijgrid.selection=function(I){var L=0,D,M=new A.wijmo.wijgrid.cellInfoOrderedCollection(I),J=new A.wijmo.wijgrid.cellInfoOrderedCollection(I),B=new A.wijmo.wijgrid.cellInfoOrderedCollection(I),K=new A.wijmo.wijgrid.cellInfoOrderedCollection(I),E=null,C=null,F={singlecell:[0,0,0],singlecolumn:[1,1,1],singlerow:[2,2,2],singlerange:[0,1,2],multicolumn:[1,1,1],multirow:[2,2,2],multirange:[0,1,2]};this.selectedCells=function(){return B};this.addRange=function(Q,R,P,N){if(!Q&&arguments.length===1){throw"invalid argument"}var O=arguments.length===4?new A.wijmo.wijgrid.cellInfoRange(new A.wijmo.wijgrid.cellInfo(Q,R),new A.wijmo.wijgrid.cellInfo(P,N)):Q._clone();O._normalize();if(!O._isValid()){throw"invalid argument"}this.beginUpdate();this._startNewTransaction(I._field("currentCell"));this._selectRange(O,false,true,0,null);this.endUpdate()};this.addColumns=function(N,O){if(!O&&O!==0){O=N}this.addRange(N,0,O,16777215)};this.addRows=function(N,O){if(!O&&O!==0){O=N}this.addRange(0,N,16777215,O)};this.removeRange=function(Q,R,P,N){if(!Q&&arguments.length===1){throw"invalid argument"}var O=arguments.length===4?new A.wijmo.wijgrid.cellInfoRange(new A.wijmo.wijgrid.cellInfo(Q,R),new A.wijmo.wijgrid.cellInfo(P,N)):Q._clone();O._normalize();if(!O._isValid()){throw"invalid argument"}this.beginUpdate();this._startNewTransaction(I._field("currentCell"));this._clearRange(O,0);this.endUpdate()};this.removeColumns=function(N,O){if(!O&&O!==0){O=N}this.removeRange(N,0,O,16777215)};this.removeRows=function(N,O){if(!O&&O!==0){O=N}this.removeRange(0,N,16777215,O)};this.addRows=function(N,O){if(!O&&O!==0){O=N}this.addRange(0,N,65535,O)};this.clear=function(){this.beginUpdate();J._clear();J._addFrom(B);this.endUpdate()};this.selectAll=function(){this.beginUpdate();this._selectRange(I._getDataCellsRange(),false,false,0,null);this.endUpdate()};this.beginUpdate=function(){L++};this.endUpdate=function(){if(L>0){L--;if(L===0){G();if(M.length()||J.length()){E!==null&&E.UnderlyingDataChanged();C!==null&&C.UnderlyingDataChanged();I._trigger("selectionChanged",null,{addedCells:M,removedCells:J})}M=new A.wijmo.wijgrid.cellInfoOrderedCollection(I);J._clear()}}};this._multipleRangesAllowed=function(){var N=I.options.selectionMode;return N&&((N=N.toLowerCase())==="multicolumn"||N==="multirow"||N==="multirange")};this._anchorCell=function(){return D};this._startNewTransaction=function(N){if(N){D=N._clone();K=new A.wijmo.wijgrid.cellInfoOrderedCollection(I)}};this._clearRange=function(Z,V){var R=I.options.selectionMode.toLowerCase(),X,T,W,N,O,U,b,Q,Y,P=I._getDataCellsRange();if(Z._isValid()&&R!=="none"&&B.length()>0){X=Z._clone();X._normalize();X._clip(P);if(!Z._isValid()){return}X._extend(F[R][V],P);this.beginUpdate();for(b=0,Q=B.length();b<Q;b++){Y=B.item(b);X._containsCellInfo(Y)&&J._add(Y)}this.endUpdate()}};this._selectRange=function(P,R,O,T,U){var N=I.options.selectionMode.toLowerCase(),V,Q=I._getDataCellsRange();if(N!=="none"&&P._isValid()){V=P._clone();V._normalize();V._clip(Q);if(!V._isValid()){return}this.beginUpdate();if(!this._multipleRangesAllowed()){this.clear()}else{if(R||O){if(O){J._clear();J._addFrom(K)}}else{this.clear()}}switch(N){case"singlecell":case"singlecolumn":case"singlerow":V=U===null?new A.wijmo.wijgrid.cellInfoRange(V.topLeft(),V.topLeft()):new A.wijmo.wijgrid.cellInfoRange(U,U)}V._extend(F[N][T],Q);H(V,true);this.endUpdate()}};function G(){var N=I._getDataToAbsOffset(),P=N.x,Q=N.y,O=I._view(),V,U,b,T,W,Y,R=A.wijmo.wijgrid.renderState,a,X,Z=-1;for(V=0,U=J.length();V<U;V++){b=J.item(V);if(M.indexOf(b)<0){T=O.getCell(b.cellIndex()+P,b.rowIndex()+Q);if(T){if(Z!==b.rowIndex()){a=I._createRowInfo(b._row());Z=b.rowIndex()}W=A(T);X=I._changeRenderState(W,R.selected,false);I.cellStyleFormatter.format(W,b.cellIndex(),b.column(),a,X)}B._remove(b);K._remove(b)}else{J._removeAt(V);V--;U--}}Z=-1;for(V=0,U=M.length();V<U;V++){b=M.item(V);Y=B.indexOf(b);if(Y<0){T=O.getCell(b.cellIndex()+P,b.rowIndex()+Q);if(T){if(Z!==b.rowIndex()){a=I._createRowInfo(b._row());Z=b.rowIndex()}W=A(T);X=I._changeRenderState(W,R.selected,true);I.cellStyleFormatter.format(W,b.cellIndex(),b.column(),a,X)}B._insertUnsafe(b,~Y);K._add(b)}else{M._removeAt(V);V--;U--}}}function H(Q,T){var O=Q.topLeft().cellIndex(),U=Q.topLeft().rowIndex(),P=Q.bottomRight().cellIndex(),V=Q.bottomRight().rowIndex(),R,N,W,X;if(T){R=M.length();for(N=U;N<=V;N++){if(I.dataTable[N].rowType&A.wijmo.wijgrid.rowType.data){for(W=O;W<=P;W++){X=new A.wijmo.wijgrid.cellInfo(W,N);if(R===0){M._appendUnsafe(X)}else{M._add(X)}}}}}else{R=J.length();for(N=U;N<=V;N++){for(W=O;W<=P;W++){X=new A.wijmo.wijgrid.cellInfo(W,N);if(R===0){J._appendUnsafe(X)}else{J._add(X)}}}}}};A.wijmo.wijgrid.cellInfoOrderedCollection=function(C){if(!C){throw"argument is null"}var B=[];this.item=function(D){return B[D]};this.length=function(){return B.length};this.indexOf=function(F,D){if(arguments.length===1){D=F.rowIndex();F=F.cellIndex()}var E=0,G=B.length-1,H,J,I;while(E<=G){H=E+(G-E>>1);J=B[H];I=J.rowIndex()-D;if(I===0){I=J.cellIndex()-F}if(I<0){E=H+1}else{if(I>0){G=H-1}else{return H}}}return ~E};this.toString=function(){var D="",F,E;for(F=0,E=B.length;F<E;F++){D+=B[F].toString()+"\n"}return D};this._add=function(E){var D=this.indexOf(E);if(D<0){B.splice(~D,0,E);E._setGridView(C);return true}return false};this._addFrom=function(D){if(D){var E=D.length(),G=B.length,F;if(G===0){B.length=E;for(F=0;F<E;F++){B[F]=D.item(F);B[F]._setGridView(C)}}else{for(F=0;F<E;F++){this._add(D.item(F))}}}};this._appendUnsafe=function(D){B[B.length]=D;D._setGridView(C)};this._insertUnsafe=function(D,E){B.splice(E,0,D)};this._clear=function(){B.length=0};this._remove=function(D){var E=this.indexOf(D);if(E>=0){B.splice(E,1);return true}return false};this._removeAt=function(D){B.splice(D,1)};this._getColumnsIndicies=function(){var E=[],D=B.length,F,G,H;if(D){F=[];for(G=0;G<D;G++){F[B[G].cellIndex()]=1}D=F.length;H=0;for(G=0;G<D;G++){if(F[G]){E[H++]=G}}}return E};this._getSelectedRowsIndicies=function(){var H=[],D=B.length,F,G,E;if(D){F=[];for(G=0;G<D;G++){F[B[G].rowIndex()]=1}D=F.length;E=0;for(G=0;G<D;G++){if(F[G]){H[E++]=G}}}return H};this._rectangulate=function(){var E=B.length,F=4294967295,D=4294967295,J=0,G=0,H,I;if(E){for(H=0;H<E;H++){I=B[H];F=Math.min(F,I.cellIndex());D=Math.min(D,I.rowIndex());J=Math.max(J,I.cellIndex());G=Math.max(G,I.rowIndex())}return new A.wijmo.wijgrid.cellInfoRange(new A.wijmo.wijgrid.cellInfo(F,D),new A.wijmo.wijgrid.cellInfo(J,G))}return null}}})(jQuery);(function(A){A.extend(A.wijmo.wijgrid,{selectionui:function(P){var E=10,G="{0}."+P.widgetName+".selectionui",Q=new A.wijmo.wijgrid.cellInfoOrderedCollection(P),I,R,J,V,K=false,H=false,U=P._view(),F=P._field("visibleLeaves").length,B=U.focusableElement();B.bind(T("mousedown"),D);this.dispose=function(){B.unbind(T("mousedown"),D);N()};function D(Y){if(!P._canInteract()||P.options.selectionMode.toLowerCase()==="none"){return}var a=U.getVisibleAreaBounds(),W={x:Y.pageX,y:Y.pageY},X=Y.target&&Y.target.tagName!==undefined?Y.target.tagName.toLowerCase():undefined,Z=A(Y.target);if((!X||Z.is("td.wijgridtd, th.wijgridtd, div.wijmo-wijgrid-innercell"))&&W.x>a.left&&W.x<a.left+a.width&&W.y>a.top&&W.y<a.top+a.height){C();I=W;R=O(I)}}function L(m){if(!R||!R._isValid()){return}var Ac={x:m.pageX,y:m.pageY},Ad,d,X,W,Aa,Ab,c,h,e,b,i,Y,Z,f,a,q=A.wijmo.wijgrid.renderState;if(!K){K=Math.abs(I.x-Ac.x)>E||Math.abs(I.y-Ac.y)>E}if(K){Ad=O(Ac);if(!Ad._isValid()){return}J=Ad;d=new A.wijmo.wijgrid.cellInfoRange(R,J);d._normalize();d._clip(P._getDataCellsRange());if(d._isValid()&&!d.isEqual(V)){X=P._getDataToAbsOffset();V=d;W=new A.wijmo.wijgrid.cellInfoOrderedCollection(P);Aa=d.bottomRight().rowIndex();Ab=d.bottomRight().cellIndex();for(c=d.topLeft().rowIndex();c<=Aa;c++){if(P.dataTable[c].rowType&A.wijmo.wijgrid.rowType.data){for(h=d.topLeft().cellIndex();h<=Ab;h++){W._appendUnsafe(new A.wijmo.wijgrid.cellInfo(h,c))}}}f=-1;for(e=0,b=Q.length();e<b;e++){i=Q.item(e);if(W.indexOf(i)<0){if(P.selection().selectedCells().indexOf(i)<0){h=U.getCell(i.cellIndex()+X.x,i.rowIndex()+X.y);if(h){if(f!==i.rowIndex()){Z=P._createRowInfo(i._row());f=i.rowIndex()}Y=A(h);a=P._changeRenderState(Y,q.selected,false);P.cellStyleFormatter.format(Y,i.cellIndex(),i.column(),Z,a)}}Q._removeAt(e);e--;b--}}f=-1;for(e=0,b=W.length();e<b;e++){i=W.item(e);if(Q.indexOf(i)<0&&P.selection().selectedCells().indexOf(i)<0){if(Q._add(i)){h=U.getCell(i.cellIndex()+X.x,i.rowIndex()+X.y);if(h){if(f!==i.rowIndex()){Z=P._createRowInfo(i._row());f=i.rowIndex()}Y=A(h);a=P._changeRenderState(Y,q.selected,true);P.cellStyleFormatter.format(Y,i.cellIndex(),i.column(),Z,a)}}}}}}}function M(c){N();if(K){K=false;if(V&&V._isValid()){P._changeCurrentCell(J);(!c.shiftKey||!P.selection()._multipleRangesAllowed()&&P.options.selectionMode.toLowerCase()!=="singleRange")&&P.selection()._startNewTransaction(R);P.selection().beginUpdate();P.selection()._selectRange(V,c.shiftKey,c.ctrlKey,0,J);P.selection().endUpdate();var X=P._view(),f=P._getDataToAbsOffset(),i,W,l,h,b,e=-1,Y,Z,a=A.wijmo.wijgrid.renderState;for(i=0,W=Q.length();i<W;i++){l=Q.item(i);if(P.selection().selectedCells().indexOf(l)<0){h=X.getCell(l.cellIndex()+f.x,l.rowIndex()+f.y);if(h!==null){if(e!==l.rowIndex()){Y=P._createRowInfo(l._row());e=l.rowIndex()}b=A(h);Z=P._changeRenderState(b,a.selected,false);P.cellStyleFormatter.format(b,l.cellIndex(),l.column(),Y,Z)}}}Q._clear();R=J=V=null;return false}}}function C(){if(!H){try{A(document).bind(T("mousemove"),L).bind(T("mouseup"),M)}finally{H=true}}}function N(){if(H){try{A(document).unbind(T("mousemove"),L).unbind(T("mouseup"),M)}finally{H=false}}}function T(W){return A.wijmo.wijgrid.stringFormat(G,W)}function O(Y){var q=0,r=F-1,p=0,o=-1,W,Z=new A.wijmo.wijgrid.rowAccessor(U,2,0,0),a,X,d,b;while(q<=r){p=(r-q>>1)+q;W=A.wijmo.wijgrid.bounds(U.getHeaderCell(p));if(!W){X=Z.item(0);W=A.wijmo.wijgrid.bounds(Z.getCell(X,p))}if(!W){break}if(Y.x<W.left){r=p-1}else{if(Y.x>W.left+W.width){q=p+1}else{o=p;break}}}if(o===-1){return A.wijmo.wijgrid.cellInfo.prototype.outsideValue}Z=new A.wijmo.wijgrid.rowAccessor(U,0,0,0);a=-1;q=0;r=Z.length()-1;p=0;while(q<=r){p=(r-q>>1)+q;X=Z.item(p);W=A.wijmo.wijgrid.bounds(Z.getCell(X,0));if(Y.y<W.top){r=p-1}else{if(Y.y>W.top+W.height){q=p+1}else{a=p;break}}}if(a===-1){return A.wijmo.wijgrid.cellInfo.prototype.outsideValue}d=P._getDataToAbsOffset();b=new A.wijmo.wijgrid.cellInfo(o-d.x,a-d.y);b._clip(P._getDataCellsRange());return b}}})})(jQuery);(function(A){A.wijmo.wijgrid.rowAccessor=function(B,D,E,C){if(!E){E=0}if(!C){C=0}this.item=function(G){var F=this.length();return G<F?B.getJoinedRows(G+E,D):null};this.length=function(){var F=B.getJoinedTables(true,0),G=0,H;if(H=F[0]){G=H.getSectionLength(D)}if(H=F[1]){G+=H.getSectionLength(D)}G-=E+C;if(G<0){G=0}return G};this.iterateCells=function(O,F,G){if(O&&F){var I=0,J,H,L,K,M,N;for(J=0,H=O.length;J<H;J++){L=O[J];if(L){for(K=0,M=L.cells.length;K<M;K++){N=F(L.cells[K],I++,G);if(N!==true){return}}}}}};this.getCell=function(F,G){var I,H;if(F&&(I=F[0])){H=I.cells.length;if(G<H){return I.cells[G]}G-=H;if(I=F[1]){H=I.cells.length;if(G<H){return I.cells[G]}}}return null};this.cellsCount=function(F){var G=0,H;if(F&&(H=F[0])){G=H.cells.Length;if(H=F[1]){G+=H.cells.Length}}return G}}})(jQuery);(function(A){A.extend(A.wijmo.wijgrid,{cellEditorHelper:function(){this.currentCellEditStart=function(F,G){var L=false,J=F.currentCell(),M,H,K,I;if(J._isValid()&&!J._isEdit()&&J.column().dataIndex>=0){M=J._row();if(M&&M.length){I=A.wijmo.wijgrid.dataPrefix(M[0],F._data$prefix,"rowType");if(I&A.wijmo.wijgrid.rowType.data){H={cell:J,event:G,handled:false};if(L=F._trigger("beforeCellEdit",null,H)){if(!H.handled){L=E(F,H)}}if(L){J._isEdit(true);if(F.options.showRowHeader){K=A(M[0].cells[0]).children("div.wijmo-wijgrid-innercell");if(K.length){K.empty();K.append(A("<div>&nbsp;</div>").addClass("ui-icon ui-icon-pencil"))}}}}}}return L};this.currentCellEditEnd=function(P,F){var N=P.currentCell(),Q=false,H,L,G,O,I,M,J;if(!N._isValid()||!N._isEdit()){return}H=N._row();if(H&&H.length){L=A.wijmo.wijgrid.dataPrefix(H[0],P._data$prefix,"rowType");if(!(L&A.wijmo.wijgrid.rowType.data)){return Q}G=F&&F.which===A.ui.keyCode.ESCAPE;if(!F||!G){O={cell:N,value:undefined};if(Q=P._trigger("beforeCellUpdate",null,O)){if(O.value===undefined){O.value=C(P,N)}I=false;if(O.cell.column().dataType==="datetime"){M=O.value?O.value.getTime():null;J=N.value()?N.value().getTime():null;I=M!==J}else{I=O.value!==N.value()}if(I){try{N.value(O.value)}catch(K){Q=false;P._trigger("invalidCellValue",null,{cell:N,value:O.value})}Q&&P._trigger("afterCellUpdate",null,{cell:N})}}}else{Q=true}if(Q){O={cell:N,event:F,handled:false};P._trigger("afterCellEdit",null,O);if(!O.handled){Q=B(P,O)}Q&&N._isEdit(false);P.options.showRowHeader&&A(H[0].cells[0]).children("div.wijmo-wijgrid-innercell").html("&nbsp;");window.setTimeout(function(){if(!P.destroyed){P.element.focus();A(P._view().focusableElement()).focus();N.tableCell().focus()}},50)}}return Q};function E(H,O){var G=O.cell.column(),I=false,M,N,L,J,F;if(G.dataIndex>=0){M=O.cell.value();I=true;try{N=O.cell.container();if(G.dataType==="boolean"){L=N.children("input");L.focus();if(O.event&&O.event.type==="keypress"){L.one("keyup",function(P){if(P.which===A.ui.keyCode.SPACE){P.preventDefault();L[0].checked=!M}})}}else{L=A("<input />").attr("type","text").addClass("wijgridinput wijmo-wijinput ui-state-focus").bind("keydown",H,D);L.bind(A.support.selectstart?"selectstart":"mousedown",function(P){P.stopPropagation()});if(O.event&&O.event.type==="keypress"&&O.event.which){L.val(String.fromCharCode(O.event.which))}else{switch(O.cell.column().dataType){case"currency":case"number":if(M!==null){L.val(M);break}default:L.val(H._toStr(O.cell.column(),M))}}N.empty().append(L);J=L.val().length;new A.wijmo.wijgrid.domSelection(L[0]).setSelection({start:J,end:J});L.focus();A.browser.msie&&setTimeout(function(){L.focus()},0);if(A.browser.mozilla&&document.createEvent&&L[0].dispatchEvent){F=document.createEvent("KeyboardEvent");F.initKeyEvent("keypress",false,true,null,false,false,false,false,0,A.ui.keyCode.SPACE);L[0].dispatchEvent(F);F=document.createEvent("KeyboardEvent");F.initKeyEvent("keypress",false,true,null,false,false,false,false,A.ui.keyCode.BACKSPACE,0);L[0].dispatchEvent(F)}}}catch(K){alert(K.message);I=false}}return I}function B(K,J){var L=J.cell.column(),N=false,O,F,M,I,H;if(L.dataIndex>=0){N=true;try{O=J.cell.container();F=K._toStr(L,J.cell.value());M=K.dataTable[J.cell.rowIndex()];I=K.data()[M.originalRowIndex];if(L.dataType==="boolean"){H=O.children("input");if(F==="true"){H.attr("checked","checked")}else{H.removeAttr("checked")}}else{K.cellFormatter.format(O,L,F,M.rowType,I)}}catch(G){alert("defaultAfterCellEdit: "+G.message);N=false}}return N}function D(F){if(F.which===A.ui.keyCode.ENTER){var G=F.data;if(G){G._endEditInternal(F);return false}}}function C(F,H){var I=H.container().find(":input:first"),G=null;if(I.length){G=I.attr("type")==="checkbox"?I[0].checked:I.val();G=F._parse(H.column(),G)}return G}}})})(jQuery);(function(A){A.extend(A.wijmo.wijgrid,{resizer:function(K){var L=[],G=10,C=1,F="{0}."+K.widgetName+".resizer",W=false,Q=null,B,T=null,V=null,U=null;this.addElement=function(X){if(X&&X.element){X.element.bind(R("mousemove"),E).bind(R("mousedown"),D).bind(R("mouseout"),I);L.push(X)}};this.dispose=function(){A.each(L,function(X,Y){Y.element.unbind(R("mousemove"),E).unbind(R("mousedown"),D).unbind(R("mouseout"),I)});P()};this.inProgress=function(){return W};function E(X){if(!W){var Y=N({x:X.pageX,y:X.pageY});if(Y&&Y._canSize()&&K._canInteract()){Y.element.css("cursor","e-resize");Q=Y;X.stopPropagation()}else{I(X)}}}function I(){if(!W){if(Q){Q.element.css("cursor","");Q=null}}}function D(Y){Q=N({x:Y.pageX,y:Y.pageY});if(Q&&Q._canSize()&&K._canInteract()){try{Q.element.css("cursor","");B=document.body.style.cursor;document.body.style.cursor="e-resize";T=V=A.wijmo.wijgrid.bounds(Q.element);U=A('<div class="wijmo-wijgrid-resizehandle ui-state-highlight">&nbsp;</div>');var X=K._view().getVisibleAreaBounds();U.css({left:Y.pageX,top:T.top,height:X.height+X.top-T.top});A(document.body).append(U)}finally{H();W=true;Y.stopPropagation()}}}function J(Y){var X=C*Math.round((Y.pageX-V.left)/C);V={left:V.left+X,top:Y.pageY};U.css("left",V.left)}function O(){try{document.body.style.cursor=B;U.remove();T!==V&&K._fieldResized(Q,T.width,V.left-T.left)}finally{Q=null;U=null;P();W=false}}function M(X){X.preventDefault()}function H(){if(!W){A(document).bind(R("mousemove"),J).bind(R("mouseup"),O);A(document.body).disableSelection();A.browser.msie&&A(document.body).bind("selectstart",M)}}function P(){if(W){A(document).unbind(R("mousemove"),J).unbind(R("mouseup"),O);A(document.body).enableSelection();A.browser.msie&&A(document.body).unbind("selectstart",M)}}function N(Z){var h,i,Y,a,X;for(h=0,i=L.length;h<i;h++){Y=L[h];a=A.wijmo.wijgrid.bounds(Y.element);X=A.ui.isOver(Z.y,Z.x,a.top,a.left+a.width-G,a.height,G);if(X){return Y}}return null}function R(X){return A.wijmo.wijgrid.stringFormat(F,X)}}})})(jQuery);(function(A){A.extend(A.wijmo.wijgrid,{frozener:function(Y){var I,H,Ak,Am,Ag="{0}."+Y.widgetName+".frozener",Ab=false,Al,a=null,Ac=null,R=null,Aa=null,U=A('<div class="wijmo-wijgrid-frozener-v ui-widget-header"></div>'),X=A('<div class="wijmo-wijgrid-frozener-h ui-widget-header"></div>'),Q=null,P=null,Z=Y.outerDiv.find(".wijmo-wijgrid-fixedview"),W=10;this.refresh=function(){this.dispose();this.addVElement(Y._getStaticIndex(false));this.addHElement(Y._getStaticIndex(true));this.attachDivEvent()};this.attachDivEvent=function(){Z.bind("mousemove",O).bind("mouseout",K).bind("mousedown",N)};this.addVElement=function(B){var D=A.wijmo.wijgrid.bounds(Z.find(".wijmo-wijgrid-split-area-nw")),F=A.wijmo.wijgrid.bounds(Z),C=Y._view().getVisibleAreaBounds(),E=D.left+D.width;if(E<=C.left+C.width){U.css({left:E-F.left-1,top:D.top-F.top,width:"0px",height:C.height+C.top-D.top}).appendTo(Z);I=Y._getRealStaticColumnIndex(true);Ak=B}};this.addHElement=function(B){var D=A.wijmo.wijgrid.bounds(Z.find(".wijmo-wijgrid-split-area-nw")),F=A.wijmo.wijgrid.bounds(Z),C=Y._view().getVisibleAreaBounds(),E=D.top+D.height;if(E<=C.top+C.height){X.css({left:D.left-F.left,top:E-F.top-1,width:C.width+C.left-D.left,height:"0px"}).appendTo(Z);H=Y._getRealStaticRowIndex(true);Am=B}};this.dispose=function(){U.remove();X.remove();Z.unbind("mousemove",O).unbind("mouseout",K).unbind("mousedown",N);L()};this.inProgress=function(){return Ab};function O(E){var C,B,D=Y._view().getVisibleAreaBounds();if(!Ab){if(Y._canInteract()&&A.ui.isOver(E.pageY,E.pageX,D.top,D.left,D.height,D.width)){C=A.wijmo.wijgrid.bounds(U);B=C.left+C.width/2;if(Math.abs(E.pageX-B)<W){Z.css("cursor","pointer");return}C=A.wijmo.wijgrid.bounds(X);B=C.top+C.height/2;if(Math.abs(E.pageY-B)<W){Z.css("cursor","pointer");return}K(E)}}}function K(){!Ab&&Z.css("cursor","")}function N(B){var C,D,F,E=Y._view().getVisibleAreaBounds();if(Y._canInteract()&&A.ui.isOver(B.pageY,B.pageX,E.top,E.left,E.height,E.width)){C=A.wijmo.wijgrid.bounds(U);D=C.left+C.width/2;if(Math.abs(B.pageX-D)<W){if(Ak===-1){a=R=-1}else{a=R=Y._getRealStaticColumnIndex()-I}Q=A('<div class="wijmo-wijgrid-resizehandle ui-widget-header"></div>');B.data={bVertical:true};A(document.body).append(Q)}else{C=A.wijmo.wijgrid.bounds(X);D=C.top+C.height/2;if(Math.abs(B.pageY-D)<W){if(Am===-1){Ac=Aa=-1}else{Ac=Aa=Y._getRealStaticRowIndex()-H}P=A('<div class="wijmo-wijgrid-resizehandle ui-widget-header"></div>');B.data={bVertical:false};A(document.body).append(P)}}if(B.data){Z.css("cursor","");Al=document.body.style.cursor;document.body.style.cursor="pointer";Ad(B.data);Ab=true}}}function V(B){var C=Y._view()._getSuperPanel();if(B.data.bVertical&&C.options.hScroller.scrollValue){C.hScrollTo(0)}else{!B.data.bVertical&&C.options.vScroller.scrollValue&&C.vScrollTo(0)}Ah(B)}function J(B){try{document.body.style.cursor=Al;if(B.data.bVertical){Q.remove();a!==R&&Y.option("staticColumnIndex",R)}else{P.remove();Ac!==Aa&&Y.option("staticRowIndex",Aa)}}finally{if(B.data.bVertical){Q=null}else{P=null}L();Ab=false}}function M(B){B.preventDefault()}function Ad(B){if(!Ab){if(B.bVertical){A(document).bind(T("mousemove"),{bVertical:true},V).bind(T("mouseup"),{bVertical:true},J)}else{A(document).bind(T("mousemove"),{bVertical:false},V).bind(T("mouseup"),{bVertical:false},J)}A(document.body).disableSelection();A.browser.msie&&A(document.body).bind("selectstart",M)}}function L(){if(Ab){A(document).unbind(T("mousemove"),V).unbind(T("mouseup"),J);A(document.body).enableSelection();A.browser.msie&&A(document.body).unbind("selectstart",M)}}function Ah(g){var b,f,B,F,C,G,D,E,e=Y._view().getVisibleAreaBounds();if(g.data.bVertical){f=A.wijmo.wijgrid.bounds(U);B=f.left+f.width/2;if(Math.abs(g.pageX-B)<W){R=a;Q.hide();return}b=Ai({x:g.pageX,y:g.pageY});if(b){f=A.wijmo.wijgrid.bounds(b.element);B=f.left+f.width/2;C=b.options.visLeavesIdx-I;G=Af(C);F=g.pageX<B?G!==a:C===a;D=F?f.left:f.left+f.width;if(!A.ui.isOverAxis(D,e.left-1,e.width+2)){return}R=F?G:C;Q.show().css({left:D,top:f.top,width:3,height:e.height+e.top-f.top})}}else{f=A.wijmo.wijgrid.bounds(X);B=f.top+f.height/2;if(Math.abs(g.pageY-B)<W){Aa=Ac;P.hide();return}b=Aj({x:g.pageX,y:g.pageY});if(b){f=A.wijmo.wijgrid.bounds(b);B=f.top+f.height/2;C=Y._view().getAbsoluteRowIndex(b)-H;G=Ae(C);F=g.pageY<B?G!==Ac:C===Ac;E=F?f.top:f.top+f.height;if(!A.ui.isOverAxis(E,e.top-1,e.height+2)){return}Aa=F?G:C;P.show().css({left:f.left,top:E,width:e.width+e.left-f.left,height:3})}}}function Af(B){return B>-1?B-1:-1}function Ae(B){return B>-1?B-1:-1}function Ai(E){for(var b=Y.columns(),G=0,C=b.length,F,l,B,D;G<C;G++){F=b[G];l=F.options;if(l.visible&&l.parentVis&&l.isLeaf){B=A.wijmo.wijgrid.bounds(F.element);D=A.ui.isOverAxis(E.x,B.left,B.width);if(D){return F}}}return null}function Aj(C){for(var b=Y._rows(),B=b.length(),E=0,D,G,F;E<B;E++){D=b.item(E)[0];G=A.wijmo.wijgrid.bounds(A(D));F=A.ui.isOverAxis(C.y,G.top,G.height);if(F){return D}}return null}function T(B){return A.wijmo.wijgrid.stringFormat(Ag,B)}}})})(jQuery);(function(A){A.extend(A.wijmo.wijgrid,{cellFormatterHelper:function(){this.format=function(J,I,E,F){if(F.type&A.wijmo.wijgrid.rowType.footer){if(I.aggregate&&I.aggregate!=="none"){E=A.wijmo.wijgrid.stringFormat(I.footerText||"{0}",I._totalsValue||"")}else{E=I.footerText||I._footerTextDOM||""}}var G=true,K=null,H={$container:J,column:I,formattedValue:E,row:F,afterDefaultCallback:null};if(A.isFunction(I.cellFormatter)){G=!I.cellFormatter(H)}if(G){switch(I.dataType){case"boolean":K=D;break;default:K=B}if(K){K(H);A.isFunction(H.afterDefaultCallback)&&H.afterDefaultCallback(H)}}};function B(E){switch(E.row.type){case A.wijmo.wijgrid.rowType.filter:C(E);break;default:E.$container.html(E.formattedValue?E.formattedValue:"&nbsp;")}}function D(J){var F,E,G="disabled='disabled'",K,H,I=A.wijmo.wijgrid.rowType;switch(J.row.type){case I.data:case I.data|I.dataAlt:F=J.column.owner;E=F.options.allowEditing&&J.column.readOnly!==true;if(E){G=""}if(F._parse(J.column,J.row.data[J.column.dataKey])===true){J.$container.html("<input class='wijgridinput' type='checkbox' checked='checked' "+G+" />")}else{J.$container.html("<input class='wijgridinput' type='checkbox' "+G+" />")}E&&J.$container.children("input").bind("mousedown",function(){K=J.$container.parent()[0];H=F.currentCell();H.tableCell()!==K&&F._onClick({target:K});!H._isEdit()&&F.beginEdit()}).bind("keydown",function(L){if(L.which===A.ui.keyCode.ENTER){F._endEditInternal(L);return false}});break;case I.filter:C(J)}}function C(E){if(E.column.dataIndex>=0&&!E.column.isBand&&E.column.showFilter){E.$container.html('<div class="wijmo-wijgrid-filter ui-widget ui-state-default ui-corner-all"><input type="text" class="wijmo-wijgrid-filter-input" style="width:1px" /><a class="wijmo-wijgrid-filter-trigger ui-corner-right ui-state-default" href="#"><span class="ui-icon ui-icon-triangle-1-s"></span></a></div>')}else{E.$container.html("&nbsp;")}}}})})(jQuery);(function(A){A.extend(A.wijmo.wijgrid,{dragAndDropHelper:function(M){var G="scope_"+ +new Date,P=null,B=null,L=null,O=false,F,C='<div class="ui-widget wijmo-wijgrid ui-widget-content ui-corner-all"><table class="wijmo-wijgrid-root wijmo-wijgrid-table"><tr class="wijmo-wijgrid-headerrow"></tr></table></div>';this.attachGroupArea=function(R){var Q;R.droppable({scope:G,tolerance:"pointer",greedy:true,accept:function(T){if(M.options.allowColMoving){Q=N(T);if(Q){return Q instanceof A.wijmo.c1groupedfield&&Q.options.groupedIndex===M._field("groupedColumns").length-1?false:!Q.options.isBand&&(Q.options.groupedIndex===undefined||Q instanceof A.wijmo.c1groupedfield)}}return false},drop:function(T,U){if(!J(T,U.draggable)&&(Q=N(U.draggable))){O=true}},over:function(){var T=M._field("groupedWidgets").length;F=T>0;L=T>0?M._field("groupedWidgets")[T-1]:R;R.data("thisDroppableWijField",L)},out:function(){if(L===R.data("thisDroppableWijField")){L=null}}})};this.attach=function(Q){var R,T;if(!Q||!(R=Q.element)){return}R.draggable({helper:function(){return Q instanceof A.wijmo.c1groupedfield?R.clone().addClass("wijmo-wijgrid-dnd-helper"):R.clone().wrap(C).width(R.width()).height(R.height()).closest(".wijmo-wijgrid").addClass("wijmo-wijgrid-dnd-helper")},appendTo:"body",scope:G,drag:function(U,W){K();if(L&&!J(U,R)){var V=L.element;if(!V){V=L}I(V,E(Q,L,U,W))}},start:function(){if(M._canInteract()&&M.options.allowColMoving&&!M._field("resizer").inProgress()){var W=Q.options,U=Q.options.travIdx,V=Q instanceof A.wijmo.c1groupedfield,X=V?"groupArea":"columns";if(V){W=A.wijmo.wijgrid.search(M.columns(),function(Y){return Y.options.travIdx===U});W=!W.found?A.wijmo.wijgrid.getColumnByTravIdx(M.options.columns,U).found:W.found.options}if(Q._canDrag()&&M._trigger("columnDragging",null,{drag:W,dragSource:X})){M._trigger("columnDragged",null,{drag:W,dragSource:X});return true}}return false},stop:function(V,U){K();try{if(O){if(!L.element){M._handleDragnDrop(Q.options.travIdx,-1,"left",Q instanceof A.wijmo.c1groupedfield,true)}else{M._handleDragnDrop(Q.options.travIdx,L.options.travIdx,E(Q,L,V,U),Q instanceof A.wijmo.c1groupedfield,L instanceof A.wijmo.c1groupedfield)}}}finally{L=null;O=false}}}).droppable({hoverClass:"ui-state-hover",scope:G,tolerance:"pointer",greedy:true,accept:function(U){if(M.options.allowColMoving){if(R[0]!==U[0]){T=N(U);if(T){return T._canDropTo(Q)}}}return false},drop:function(U,V){if(T=N(V.draggable)){O=true}},over:function(){F=false;L=Q;R.data("thisDroppableWijField",L)},out:function(){if(L===Q.element.data("thisDroppableWijField")){L=null}}})};this.detach=function(Q){var R;if(Q&&(R=Q.element)){R.data("draggable")&&R.draggable("destroy");R.data("droppable")&&R.droppable("destroy")}};this.dispose=function(){if(B){B.remove();B=null}if(P){P.remove();P=null}};function N(Q){var R=Q.data(A.wijmo.c1basefield.prototype._data$prefix+"widgetName");return !R?Q.data(A.wijmo.c1groupedfield.prototype._data$prefix):Q.data(R)}function I(R,Q){H().show().position({my:"center",at:Q+" top",of:R});D().show().position({my:"center",at:Q+" bottom",of:R})}function K(){H().hide();D().hide()}function H(){if(!B){B=A("<div />").addClass("wijmo-wijgrid-dnd-arrow-top").append(A("<span />").addClass("ui-icon ui-icon-arrowthick-1-s")).hide().appendTo(document.body)}return B}function D(){if(!P){P=A("<div />").addClass("wijmo-wijgrid-dnd-arrow-bottom").append(A("<span />").addClass("ui-icon ui-icon-arrowthick-1-n")).hide().appendTo(document.body)}return P}function J(T,Q){var R=A.wijmo.wijgrid.bounds(Q,false);return T.pageX>R.left&&T.pageX<R.left+R.width&&T.pageY>R.top&&T.pageY<R.top+R.height}function E(Q,U,T){if(!U.element){return"left"}if(F){return"right"}var W=A.wijmo.wijgrid.bounds(U.element,false),R=W.width/6,X=W.left+W.width/2,Y="right",V;if(T.pageX<X){Y="left"}if(U instanceof A.wijmo.c1groupedfield){if(Q instanceof A.wijmo.c1groupedfield){V=U.options.groupedIndex-Q.options.groupedIndex;if(Math.abs(V)===1){Y=V<0?"left":"right"}}return Y}V=U.options.linearIdx-Q.options.linearIdx;if(U.options.isBand&&Q.options.parentIdx!==U.options.travIdx&&Math.abs(T.pageX-X)<R){return"center"}if(Q.options.parentIdx===U.options.parentIdx&&Math.abs(V)===1){Y=V<0?"left":"right"}return Y}}})})(jQuery);(function(A){A.extend(A.wijmo.wijgrid,{cellStyleFormatterHelper:function(D){if(!D){throw"invalid arguments"}this.format=function(G,N,K,O,H,J,F){var I=A.wijmo.wijgrid.renderState,M=A.wijmo.wijgrid.rowType,L=O.type,P,Q=null;if(N===0&&D.options.showRowHeader){K=null}if(L===M.groupHeader||L===M.groupFooter){K=null;if(J&&(Q=J.groupInfo)){K=D._field("leaves")[Q.leafIndex];delete J.groupInfo}}P={$cell:G,state:H,row:O,column:K,_cellIndex:N,_purpose:Q?Q.purpose:undefined};if(H===I.rendering){E(P,J,F)}else{C(P,H&I.current);B(P,H&I.selected)}A.isFunction(D.options.cellStyleFormatter)&&D.options.cellStyleFormatter(P)};function E(J,I,H){var K=A.wijmo.wijgrid.rowType,M,G,F=J.column,L=J.row.type;if(L!==K.header&&L!==K.filter){J.$cell.addClass("wijgridtd")}else{L===K.header&&J.$cell.addClass("wijgridth")}if(I){for(M in I){if(I.hasOwnProperty(M)){G=I[M];if((M==="colSpan"||M==="rowSpan")&&!(G>1)){continue}if(M==="class"){J.$cell.addClass(G)}else{J.$cell.attr(M,G)}}}}if(H){for(M in H){if(H.hasOwnProperty(M)){if(M==="paddingLeft"){J.$cell.children(".wijmo-wijgrid-innercell").css(M,H[M]);continue}J.$cell.css(M,H[M])}}}if(J._cellIndex===0&&D.options.showRowHeader){J.$cell.attr({role:"rowheader",scope:"row"}).addClass("ui-state-default ui-widget-content wijmo-wijgrid-rowheader")}else{switch(L){case K.header:J.$cell.attr({role:"columnheader",scope:"col"});break;case K.footer:J.$cell.attr({role:"columnfooter",scope:"col"});break;default:J.$cell.attr("role","gridcell")}}if(L&K.data){if(J._cellIndex>=0&&F&&F.dataParser){J.$cell.attr("headers",escape(F.headerText));F.readOnly&&J.$cell.attr("aria-readonly",true);F.dataIndex>=0&&J.$cell.addClass("wijdata-type-"+(F.dataType||"string"))}}if(L===K.groupHeader||L===K.groupFooter){F&&J._purpose===A.wijmo.wijgrid.groupRowCellPurpose.aggregateCell&&J.$cell.addClass("wijdata-type-"+(F.dataType||"string"))}}function C(G,F){var H=A.wijmo.wijgrid.rowType;if(F){G.$cell.addClass("ui-state-active");if(G.row.type===H.header){G.$cell.addClass("wijmo-wijgrid-current-headercell")}else{G.$cell.addClass("wijmo-wijgrid-current-cell")}}else{G.$cell.removeClass("ui-state-active");if(G.row.type===H.header){G.$cell.removeClass("wijmo-wijgrid-current-headercell")}else{G.$cell.removeClass("wijmo-wijgrid-current-cell")}}}function B(G,F){if(F){G.$cell.addClass("ui-state-highlight").attr("aria-selected","true")}else{G.$cell.removeClass("ui-state-highlight").removeAttr("aria-selected")}}}})})(jQuery);(function(A){A.extend(A.wijmo.wijgrid,{rowStyleFormatterHelper:function(D){if(!D){throw"invalid arguments"}this.format=function(K,J,L){var H=A.wijmo.wijgrid.renderState,G=K.state,I=K;if(G===H.rendering){E(I,J,L)}else{C(I,G&H.current);F(I,G&H.hovered);B(I,G&H.selected)}A.isFunction(D.options.rowStyleFormatter)&&D.options.rowStyleFormatter(I)};function E(I,M,G){var L="wijmo-wijgrid-row ui-widget-content",J="wijmo-wijgrid-row ui-widget-content",H=A.wijmo.wijgrid.rowType,K;I.$rows.attr("role","row");if(M){for(K in M){if(M.hasOwnProperty(K)){if(K==="class"){I.$rows.addClass(M[K])}else{I.$rows.attr(K,M[K])}}}}if(G){for(K in G){G.hasOwnProperty(K)&&I.$rows.css(K,G[K])}}switch(I.type&~H.dataAlt){case H.header:L="wijmo-wijgrid-headerrow";break;case H.data:L=J+" wijmo-wijgrid-datarow";if(I.type&H.dataAlt){L+=" wijmo-wijgrid-alternatingrow"}break;case H.emptyDataRow:L=J+" wijmo-wijgrid-emptydatarow";break;case H.filter:L="wijmo-wijgrid-filterrow";break;case H.groupHeader:L=J+" wijmo-wijgrid-groupheaderrow";break;case H.groupFooter:L=J+" wijmo-wijgrid-groupfooterrow";break;case H.footer:L="wijmo-wijgrid-footerrow ui-state-highlight";break;default:throw A.wijmo.wijgrid.stringFormat("unknown rowType: {0}",I.row.type)}I.$rows.addClass(L)}function C(H,G){if(D.options.showRowHeader){if(G){A(H.$rows[0].cells[0]).addClass("ui-state-active wijmo-wijgrid-current-rowheadercell")}else{A(H.$rows[0].cells[0]).removeClass("ui-state-active wijmo-wijgrid-current-rowheadercell")}}}function F(H,G){if(G){H.$rows.addClass("ui-state-hover")}else{H.$rows.removeClass("ui-state-hover")}}function B(G,H){H}}})})(jQuery);(function(A){A.extend(A.wijmo.wijgrid,{tally:function(){var C=0,D=0,G=0,E=0,H=0,I=0,J,F;this.add=function(K){if(K===null||K===""){return}E++;if(typeof K==="string"){if(J===undefined||K<J){J=K}if(F===undefined||K>F){F=K}}if(typeof K==="number"){if(G===0){I=K;H=K}G++;C+=K;D+=K*K;if(K<I){I=K}if(K>H){H=K}}};this.getValueString=function(M){if(G){var K=B(M.aggregate),L=M.owner;return L._toStr(M,K)}if(E){switch(M.aggregate){case"max":return F;case"min":return J;case"count":return E.toString()}}return""};function B(K){switch(K){case"average":return G===0?0:C/G;case"count":return E;case"max":return H;case"min":return I;case"sum":return C;case"std":return G<=1?0:Math.sqrt(B("var"));case"stdPop":return G<=1?0:Math.sqrt(B("varPop"));case"var":return G<=1?0:B("varPop")*G/(G-1);case"vapPop":if(G<=1){return 0}var L=C/G;return D/G-L*L}return 0}}})})(jQuery);(function(A){A.extend(A.wijmo.wijgrid,{columnsGenerator:function(){this.generate=function(G,F,E){switch(G){case"append":D(F,E);break;case"merge":B(F,E);break;default:throw A.wijmo.wijgrid.stringFormat('Unsupported value: "{0}"',G)}};function D(J,E){var H=J.getFieldNames(),I,G,F;for(I=0,G=H.length;I<G;I++){F=C(H[I]);E.push(F)}}function B(J,I){var M=[],H=J.getFieldNames(),N={},E,G,K,F,L;for(E=0,G=H.length;E<G;E++){N[F=H[E]]=F}A.wijmo.wijgrid.traverse(I,function(O){if(O.isLeaf&&!O.isBand){K=O.dataKey;if(A.wijmo.wijgrid.validDataKey(K)){if(N[K]!==undefined){delete N[K]}}else{K!==null&&M.push(O)}}});if(M.length){E=0;for(K in N){if(N.hasOwnProperty(K)){L=M[E++];if(L){L.dataKey=N[K];delete N[K]}}}}for(K in N){if(N.hasOwnProperty(K)){L=C(N[K]);I.push(L)}}}function C(E){return A.wijmo.wijgrid.createDynamicField({dataKey:E})}}})})(jQuery);(function(){if(!window.Raphael){return}$.extend({round:function(C,A){if(!C){return 0}var B=Globalize.format(C,"N"+A);return Globalize.parseFloat(B)},toOADate:function(A){var B=86400000,C=A-new Date(1900,0,1)+2*B;return C},fromOADate:function(C){var B=86400000,A=new Date(C-2*B+ +new Date(1900,0,1));return A}});$.wijraphael={isSVGElem:function(B){var A="http://www.w3.org/2000/svg";return B.nodeType===1&&B.namespaceURI===A},addClass:function(A,B){B=B||"";$.each(A,function(){if($.wijraphael.isSVGElem(this)){var C=this;$.each(B.split(/\s+/),function(D,E){var F=C.className?C.className.baseVal:C.getAttribute("class");if($.inArray(E,F.split(/\s+/))===-1){F+=(F?" ":"")+E;if(C.className){C.className.baseVal=F}else{C.setAttribute("class",F)}}})}else{$(this).addClass(B)}})},getPositionByAngle:function(B,F,D,A){var E={},C=Raphael.rad(A);E.x=B+D*Math.cos(-1*C);E.y=F+D*Math.sin(-1*C);return E},hasClass:function(D,B){if(!B||B.length===0){return false}if($.wijraphael.isSVGElem(D)){var A=D.className?D.className.baseVal:D.getAttribute("class"),C=false;$.each(A.split(/\s+/),function(E,F){if(F===B){C=true;return false}});return C}else{return $(D).hasClass(B)}},sector:function(D,E,F,B,C){var G=$.wijraphael.getPositionByAngle(D,E,F,B),A=$.wijraphael.getPositionByAngle(D,E,F,C);return["M",D,E,"L",G.x,G.y,"A",F,F,0,+(C-B>180),0,A.x,A.y,"z"]}};$.expr.filter.CLASS=function(C,B){var A=!$.wijraphael.isSVGElem(C)?C.className:C.className?C.className.baseVal:C.getAttribute("class");return(" "+A+" ").indexOf(B)>-1};$.expr.preFilter.CLASS=function(F,A,H,I,D,C){var E=0,G=null,J=null;F=" "+F[1].replace(/\\/g,"")+" ";if(C){return F}for(E=0,G={};G;E++){G=A[E];if(!G){try{G=A.item(E)}catch(B){}}if(G){J=!$.wijraphael.isSVGElem(G)?G.className:(G.className?G.className.baseVal:"")||G.getAttribute("class");if(D^(J&&(" "+J+" ").indexOf(F)>-1)){!H&&I.push(G)}else{if(H){A[E]=false}}}}return false};Raphael.fn.tri=function(G,H,A){var K=G,B=H-A,I=Math.cos(Math.PI/6)*A,L=Math.tan(Math.PI/3)*I,D=G+I,C=H+L,E=G-I,F=H+L,J=["M",K,B,"L",D,C,"L",E,F,"z"];return this.path(J.concat(" "))};Raphael.fn.invertedTri=function(G,H,A){var K=G,B=H+A,I=Math.cos(Math.PI/6)*A,L=Math.tan(Math.PI/3)*I,D=G+I,C=H-L,E=G-I,F=H-L,J=["M",K,B,"L",D,C,"L",E,F,"z"];return this.path(J.concat(" "))};Raphael.fn.box=function(C,D,B){var E=Math.cos(Math.PI/4)*B,A=["M",C-E,D-E,"L",C+E,D-E,"L",C+E,D+E,"L",C-E,D+E,"z"];return this.path(A.concat(" "))};Raphael.fn.diamond=function(B,C,D){var A=["M",B,C-D,"L",B+D,C,"L",B,C+D,"L",B-D,C,"z"];return this.path(A.concat(" "))};Raphael.fn.cross=function(C,D,B){var E=Math.cos(Math.PI/4)*B,A=["M",C-E,D-E,"L",C+E,D+E,"M",C-E,D+E,"L",C+E,D-E];return this.path(A.concat(" "))};Raphael.fn.paintMarker=function(F,A,B,C){var D=this,E=null;if(!F){F="circle"}switch(F){case"circle":E=D.circle(A,B,C);break;case"tri":E=D.tri(A,B,C);break;case"invertedTri":E=D.invertedTri(A,B,C);break;case"box":E=D.box(A,B,C);break;case"diamond":E=D.diamond(A,B,C);break;case"cross":E=D.cross(A,B,C)}return E};Raphael.prototype.htmlText=function(C,F,I,E,A,L){function D(P,R,N){var T=/<(b|strong)>/,O=/<(i|em)>/,Q=/href=[\"\']([^\"\']+)[\"\']/,M=/<a/;N&&P.attr(N);T.test(R)&&P.attr("font-weight","bold");O.test(R)&&P.attr("font-style","italic");if(M.test(R)){R.match(Q)[1]&&P.attr("href",R.match(Q)[1])}}var B=I.toString().split(/<br\s?\/>|\\r/i),K=this,G=K.set(),H=0,J=0;A=A||3;L=L||5;$.each(B,function(N,P){var O=0,M=P.split("|||");P=P.replace(/<([A-Za-z]+(.|\n)*?)>/g,"|||<$1>").replace(/<\/([A-Za-z]*)>/g,"</$1>|||");$.each(M,function(T,U){var W=null,Q=null,V=0,R=0;if(U!==""){W=U;W=$.trim(W.replace(/<(.|\n)*?>/g,""));I=K.text(0,0,W);D(I,U,E);Q=I.wijGetBBox();V=Q.width/2+H;R=-Q.height/2+J;H=H+Q.width+A;I.translate(V,R);G.push(I);if(O<Q.height){O=Q.height}}});J+=O+L;H=O=0});J=0;G.transform(Raphael.format("...t{0},{1}",C-G.getBBox().x,F-G.getBBox().y));return G};Raphael.fn.line=function(D,B,C,A){return this.path(["M",D,B,"L",C,A])};Raphael.fn.roundRect=function(F,G,A,M,C,E,D,B){var J=[],I=[-1,1,1,1,1,-1,-1,-1],L=["v","h","v","h"],H=null,K=null;$.each([C,E,D,B],function(O,N){if(typeof N==="number"){J=J.concat({x:N,y:N})}else{if(typeof N==="object"){J=J.concat(N)}else{J=J.concat({x:0,y:0})}}});H=["M",F+J[0].x,G];K=[M-J[0].y-J[1].y,A-J[1].x-J[2].x,J[2].y+J[3].y-M,J[3].x+J[0].x-A];$.each(J,function(N,O){if(O.x&&O.y){H=H.concat("a",O.x,O.y,0,0,0,I[2*N]*O.x,I[2*N+1]*O.y)}H=H.concat(L[N],K[N])});H.push("z");return this.path(H)};Raphael.fn.wrapText=function(F,G,I,D,H,N){var E=this,O=N.rotation,B=O?$.extend(true,{},N,{rotation:0}):N,A=G,K=E.set(),L=null,J=null,M=[];function C(Q,R,X){var T=null,W=null,V=Q.split(" "),P=[],U=[],Y="";while(V.length){Y+=" "+V[0];T=E.text(-1000,-1000,Y);T.attr(X);W=T.wijGetBBox();if(W.width>R){if(U.length){P.push(U);Y=V[0]}U=[V.shift()]}else{U.push(V.shift())}V.length===0&&P.push(U);T.wijRemove();T=null}return P}$.each(C(I,D,B),function(R,Q){var T=Q.join(" "),U=H||"near",V=E.text(F,A,T),P=0,W=0;V.attr(B);L=V.wijGetBBox();switch(U){case"near":P=D-L.width/2;W+=L.height/2;A+=L.height;break;case"center":P+=D/2;W+=L.height/2;A+=L.height;break;case"far":P+=L.width/2;W+=L.height/2;A+=L.height}L.x+=P;L.y+=W;if(O){V.attr({x:V.attr("x")+P,y:V.attr("y")+W})}else{V.transform(Raphael.format("...T{0},{1}",P,W))}K.push(V);M.push(L)});if(O){L=K.wijGetBBox();if(K.length>1){$.each(K,function(Q,P){P.attr({y:P.attr("y")-L.height/2});M[Q].y-=L.height/2});J={x:L.x+L.width/2,y:L.y+L.height/2};$.each(K,function(V,Y){var P=Math,T=M[V],W={x:T.x+T.width/2,y:T.y+T.height/2},Q=P.sqrt(P.pow(W.x-J.x,2)+P.pow(W.y-J.y,2)),X=0,U=null,R=null;Y.attr({rotation:O});if(Q===0){return true}U=Y.wijGetBBox();X=Raphael.deg(P.asin(P.abs(W.y-J.y)/Q));if(W.y>J.y){if(W.x>J.x){X-=360}else{X=-1*(X+180)}}else{if(W.x>J.x){X*=-1}else{X=-1*(180-X)}}R=$.wijraphael.getPositionByAngle(J.x,J.y,Q,-1*(O+X));Y.attr({y:Y.attr("y")+R.y-U.y-U.height/2})})}else{K[0].transform(Raphael.format("...R{0}",O))}}return K};Raphael.fn.getSVG=function(){function F(N,O){var Q="<"+N+" ",P=null,M=false;$.each(O,function(R,T){if(R==="text"||R==="opacity"||R==="transform"||R==="path"||R==="w"||R==="h"||R==="translation"){return true}if(T){if(R==="stroke"&&T===0){T="none"}Q+=R+"='"+T+"' "}});if(O.opacity){P=O.opacity;Q+="opacity='"+P+"' style='opacity:"+P+";";M=true}if(O.transform&&O.transform.length>0){P=O.transform;if(M){Q+="transform:"+P}else{Q+="style='transform:"+P;M=true}}if(M){Q+="'"}if(O.text){P=O.text;Q+="><tspan>"+P+"</tspan>"}else{Q+=">"}Q+="</"+N+">";return Q}for(var K=this,B='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="'+K.canvas.offsetWidth+'" height="'+K.canvas.offsetHeight+'"><desc>Created with Raphael</desc><defs></defs>',H="",D,J,L,A=0,C=0,G=0,E=0,I=K.bottom;I;I=I.next){if(I&&I.type){switch(I.type){case"path":for(A=0,C=I.attrs.path.length;A<C;A++){J=I.attrs.path[A];for(G=0,E=J.length;G<E;G++){L=J[G];if(G<1){H+=L}else{if(G===E-1){H+=L}else{H+=L+","}}}}if(H&&H.length>0){I.attrs.d=H.replace(/,/g," ")}break;case"text":if(!I.attrs["text-anchor"]){I.attrs["text-anchor"]="middle"}break;case"image":D=I.transformations;I.attrs.transform=D?D.join(" "):"";break;case"ellipse":case"rect":B+=F(I.type,I.attrs)}}}B+="</svg>";return B};Raphael.el.wijRemove=function(){var B=this,A;if(B.removed){return}if(B.node.parentNode){A=$(B.node).data();A&&$(B.node).removeData();B.remove()}};Raphael.st.wijRemove=function(){$.each(this,function(A,B){B.wijRemove&&B.wijRemove()})};Raphael.el.wijGetBBox=function(){var B=this,A=B.getBBox();if(Raphael.vml&&B.type==="text"){B.shape.style.display="inline";A.width=B.shape.scrollWidth;A.height=B.shape.scrollHeight}return A};Raphael.el.wijAnimate=function(F,A,D,C){if(!F||$.isEmptyObject(F)){return}var B=this.shadow,E=0,G={easeInCubic:">",easeOutCubic:"<",easeInOutCubic:"<>",easeInBack:"backIn",easeOutBack:"backOut",easeOutElastic:"elastic",easeOutBounce:"bounce"};if(G[D]){D=G[D]}this.animate(F,A,D,C);if(B&&B.offset){E=B.offset;if(F.x){F.x+=E}if(F.y){F.y+=E}this.shadow.animate(F,A,D,C)}};Raphael.el.wijAttr=function(C,B){this.attr(C,B);if(this.shadow){if(typeof C==="object"){var A=$.extend(true,{},C);if(A.fill){delete A.fill}if(A.stroke){delete A.stroke}if(A["stroke-width"]){delete A["stroke-width"]}this.shadow.attr(A,B)}else{if(typeof C==="string"){switch(C){case"clip-rect":case"cx":case"cy":case"fill-opacity":case"font":case"font-family":case"font-size":case"font-weight":case"height":case"opacity":case"path":case"r":case"rotation":case"rx":case"ry":case"scale":case"stroke-dasharray":case"stroke-linecap":case"stroke-linejoin":case"stroke-miterlimit":case"stroke-opacity":case"stroke-width":case"translation":case"width":this.shadow.attr(C,B);break;case"x":this.shadow.attr(C,B);this.shadow.attr("transform","...t1,0");break;case"y":this.shadow.attr(C,B);this.shadow.attr("transform","...t0,1")}}}}};Raphael.st.wijAttr=function(A,B){$.each(this.items,function(C,D){D.wijAttr(A,B)});return this};Raphael.st.wijAnimate=function(G,A,C,B){var F=0,E=0,D=null;for(F=0,E=this.items.length;F<E;F++){D=this.items[F];D.wijAnimate(G,A,C,B)}return this};Raphael.st.wijGetBBox=function(){for(var E=[],F=[],B=[],D=[],I=Math.max,C=Math.min,A="push",J="apply",G=null,H=0,H=this.items.length-1;H>=0;H--){G=this.items[H].wijGetBBox();E[A](G.x);F[A](G.y);B[A](G.x+G.width);D[A](G.y+G.height)}E=C[J](0,E);F=C[J](0,F);return{x:E,y:F,width:I[J](0,B)-E,height:I[J](0,D)-F}}})();(function(B){if(!window.Raphael){return}B.wijchart={getDiffAttrs:function(C,D){var E={};B.each(D,function(F){if(typeof C==="undefined"){return true}else{if(typeof C[F]==="undefined"){E[F]=D[F]}else{if(C[F]!==D[F]){E[F]=D[F]}}}});return E},paintShadow:function(F,D,H){if(F.removed){return}var G=F.clone(),E=D||1,C=H||"#cccccc";G.insertBefore(F);G.attr({transform:Raphael.format("...T{0},{1}",E,E),stroke:C,"stroke-width":E});G.toBack();G.offset=E;F.shadow=G},getScaling:function(E,C,D,F){var G=C-D;if(G===0){G=1}if(E){G=-G}return F/G},getTranslation:function(C,E,D,H,F){var G=0;if(C){G=E.y;G-=F*D}else{G=E.x;G-=F*H}return G},getXSortedPoints:function(E){var G=E.data.x,I=[].concat(G),C=[].concat(E.data.y),D=[],H=G;if(G.length===0){return}function F(K,J){return K-J}if(typeof G[0]==="number"){H=[].concat(G).sort(F)}B.each(H,function(K,J){B.each(I,function(L,M){if(J===M){if(typeof M!=="number"){M=K}D.push({x:M,y:C[L]});I.splice(L,1);C.splice(L,1);return false}})});return D},sector:function(H,D,G,E,I){var C=B.wijraphael.getPositionByAngle(H,D,G,E),F=B.wijraphael.getPositionByAngle(H,D,G,I);return["M",H,D,"L",C.x,C.y,"A",G,G,0,+(I-E>180),0,F.x,F.y,"z"]},donut:function(C,K,J,I,L,F){var M=B.wijraphael.getPositionByAngle(C,K,J,L),H=B.wijraphael.getPositionByAngle(C,K,J,F),E=B.wijraphael.getPositionByAngle(C,K,I,L),D=B.wijraphael.getPositionByAngle(C,K,I,F),G=F-L>180;return["M",M.x,M.y,"A",J,J,0,+G,0,H.x,H.y,"L",D.x,D.y,"A",I,I,0,+G,1,E.x,E.y,"L",M.x,M.y,"z"]},getFirstValidListValue:function(D){var C;B.each(D,function(E,F){if(F===null){return true}else{if(typeof F==="undefined"){return true}}C=F;return false});return C},getLastValidListValue:function(C){var D=[].concat(C).reverse();return B.wijchart.getFirstValidListValue(D)},isHole:function(D,C){return D===null?true:typeof D==="undefined"?true:typeof D!=="undefined"?D===C?true:false:false}};var A={content:"",contentStyle:{},title:"",titleStyle:{},style:{fill:"white","fill-opacity":0.5},closeBehavior:"auto",mouseTrailing:true,triggers:"hover",animated:"fade",showAnimated:null,hideAnimated:null,duration:500,showDuration:500,hideDuration:500,easing:null,showEasing:null,hideEasing:null,showDelay:150,hideDelay:150,relativeTo:"mouse",compass:"east",offsetX:0,offsetY:0,showCallout:true,calloutFilled:false,calloutFilledStyle:{fill:"black"},calloutLength:12,calloutOffset:0,calloutAnimation:{easing:null,duration:500},windowCollisionDetection:true,calloutSide:null,width:null,height:null,beforeShowing:null};Raphael.fn.closeBtn=function(F,J,E){var G=Math.cos(Math.PI/4)*E,H=this.set(),D=["M",F-G,J-G,"L",F+G,J+G,"M",F-G,J+G,"L",F+G,J-G],I=this.path(D.concat(" ")),C=null;I.attr({cursor:"pointer"});H.push(I);C=this.rect(F-E,J-E,E*2,E*2);C.attr({fill:"white","fill-opacity":0,cursor:"pointer",stroke:"none"});H.push(C);return H};Raphael.fn.tooltip=function(AF,Ac){var AT=B.extend(true,{},A,Ac),AV=this,Av=null,Af=0,Ag=0,AU,AO,AN,a,AW,AC=null,AB=null,AP=null,AS=5,AR=null,AK=AV.tooltip.animations,AJ=AT.calloutOffset,Au=AT.width,At=AT.height,AE=AT.calloutLength/2,AG=0,AL=0,AM=0,AQ,Ak=function(E,C){var F=E.getBBox(),D={x:0,y:0};switch(C.toLowerCase()){case"east":D.x=F.x+F.width;D.y=F.y+F.height/2;break;case"eastnorth":D.x=F.x+F.width;D.y=F.y;break;case"eastsouth":D.x=F.x+F.width;D.y=F.y+F.height;break;case"west":D.x=F.x;D.y=F.y+F.height/2;break;case"westnorth":D.x=F.x;D.y=F.y;break;case"westsouth":D.x=F.x;D.y=F.y+F.height;break;case"north":D.x=F.x+F.width/2;D.y=F.y;break;case"northeast":D.x=F.x+F.width;D.y=F.y;break;case"northwest":D.x=F.x;D.y=F.y;break;case"south":D.x=F.x+F.width/2;D.y=F.y+F.height;break;case"southeast":D.x=F.x+F.width;D.y=F.y+F.height;break;case"southwest":D.x=F.x;D.y=F.y+F.height}return D},Ax=function(C){if(C){window.clearTimeout(C);C=null}},AA=function(C){if(AR){var E,D,F;if(AT.hideAnimated||AT.animated){E=AT.hideAnimated;if(!E){E=AT.animated}if(E&&AK[E]){F={animated:E,duration:AT.hideDuration||AT.duration,easing:AT.hideEasing||AT.easing,context:AR,show:false};AK[E](F)}}D=AT.hideDuration;if(C){D=C}window.setTimeout(function(){var H,G;if(AU){AU.wijRemove();AU=null}if(AO){AO.wijRemove();AO=null}if(AN){AN.wijRemove();AN=null}if(a){for(H=0,G=a.length;H<G;H++){a[H].unclick()}a.wijRemove();a=null}if(AW){AW.wijRemove();AW=null}AP=null;AR=null},D)}},Ar=function(){AC&&Ax(AC);AB&&Ax(AB)},AH=function(){Ar();if(AT.hideDelay){AB=window.setTimeout(function(){AA()},AT.hideDelay)}else{AA()}},Ay=function(C){var D="";switch(C.toLowerCase()){case"east":D="right-middle";AL=2;AM=0;break;case"eastnorth":D="right-top";AL=2;AM=-2;break;case"eastsouth":D="right-bottom";AL=2;AM=2;break;case"west":D="left-middle";AL=-2;AM=0;break;case"westnorth":D="left-top";AL=-2;AM=-2;break;case"westsouth":D="left-bottom";AL=-2;AM=2;break;case"north":D="top-middle";AL=0;AM=-2;break;case"northeast":D="top-right";AL=2;AM=-2;break;case"northwest":D="top-left";AL=-2;AM=-2;break;case"south":D="bottom-middle";AL=0;AM=2;break;case"southeast":D="bottom-right";AL=2;AM=2;break;case"southwest":D="bottom-left";AL=-2;AM=2}return D},Am=function(E,F){var C=[],D=AT.compass;if(AT.calloutSide){D=AT.calloutSide}switch(D.toLowerCase()){case"east":case"eastsouth":case"eastnorth":C=["M",E.x+F,E.y+F,"l",-F,-F,"l",F,-F,"Z"];break;case"west":case"westsouth":case"westnorth":C=["M",E.x-F,E.y-F,"l",F,F,"l",-F,F,"Z"];break;case"north":case"northeast":case"northwest":C=["M",E.x-F,E.y-F,"l",F,F,"l",F,-F,"Z"];break;case"south":case"southeast":case"southwest":C=["M",E.x-F,E.y+F,"l",F,-F,"l",F,F,"Z"]}return C},As=function(E,D){if(B.isFunction(E)){var C=null,H,G={target:null,fmt:E},F;if(D&&D.target){F=D.target;if(!F.raphael||!F.raphaelid){F=F.parentNode}if(F.raphael&&F.raphaelid){H=AV.getById(F.raphaelid);G.target=H}else{G.target=D.target}}C=B.proxy(G.fmt,G);return C().toString()}return E},An=function(D){if(AT.calloutSide){var C=AE||AG;switch(AT.calloutSide){case"south":case"north":if(D){AW.animate({translation:-Au/2+C+AJ+",0"},D)}else{AW.translate(-Au/2+C+AJ,0)}break;case"east":case"west":if(D){AW.animate({translation:"0,"+(-At/2+C+AJ)},D)}else{AW.translate(0,-At/2+C+AJ)}}}},Ah=/\{([^\}]+)\}/g,Ae=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,Ai=function(E,C,D){var F=D;C.replace(Ae,function(K,I,H,J,G){I=I||J;if(F){if(F[I]!=="string"){F=F[I]}if(typeof F==="function"&&G){F=F()}}});F=(F===null||F===D?E:F).toString();return F},b=function(C,D){return String(C).replace(Ah,function(E,F){return Ai(E,F,D)})},Ap=function(L,H,D,G,K){var N=H.split("-"),V=5,E=D.getBBox(),U=Math.round(E.width),Q=Math.round(E.height),I=Math.round(E.x)-V,J=Math.round(E.y)-V,R=0,T=0,P=0,M=0,F=null,O=null,C=null;if(AT.width){U=U>AT.width?U:AT.width}if(AT.height){Q=Q>AT.height?Q:AT.height}Au=U;At=Q;R=Math.min(Q/4,U/4,G);if(K){K=Math.min(Q/4,U/4,K)}if(K){T=K;F={top:"M{x},{y}h{w4},{w4},{w4},{w4}a{r},{r},0,0,1,{r},{r}v{h4},{h4},{h4},{h4}a{r},{r},0,0,1,-{r},{r}l-{right},0-{offset},0,-{left},0a{r},{r},0,0,1-{r}-{r}v-{h4}-{h4}-{h4}-{h4}a{r},{r},0,0,1,{r}-{r}z",bottom:"M{x},{y}l{left},0,{offset},0,{right},0a{r},{r},0,0,1,{r},{r}v{h4},{h4},{h4},{h4}a{r},{r},0,0,1,-{r},{r}h-{w4}-{w4}-{w4}-{w4}a{r},{r},0,0,1-{r}-{r}v-{h4}-{h4}-{h4}-{h4}a{r},{r},0,0,1,{r}-{r}z",right:"M{x},{y}h{w4},{w4},{w4},{w4}a{r},{r},0,0,1,{r},{r}v{h4},{h4},{h4},{h4}a{r},{r},0,0,1,-{r},{r}h-{w4}-{w4}-{w4}-{w4}a{r},{r},0,0,1-{r}-{r}l0-{bottom},0-{offset},0-{top}a{r},{r},0,0,1,{r}-{r}z",left:"M{x},{y}h{w4},{w4},{w4},{w4}a{r},{r},0,0,1,{r},{r}l0,{top},0,{offset},0,{bottom}a{r},{r},0,0,1,-{r},{r}h-{w4}-{w4}-{w4}-{w4}a{r},{r},0,0,1-{r}-{r}v-{h4}-{h4}-{h4}-{h4}a{r},{r},0,0,1,{r}-{r}z"}}else{F={top:"M{x},{y}h{w4},{w4},{w4},{w4}a{r},{r},0,0,1,{r},{r}v{h4},{h4},{h4},{h4}a{r},{r},0,0,1,-{r},{r}l-{right},0-{gap},{gap}-{gap}-{gap}-{left},0a{r},{r},0,0,1-{r}-{r}v-{h4}-{h4}-{h4}-{h4}a{r},{r},0,0,1,{r}-{r}z",bottom:"M{x},{y}l{left},0,{gap}-{gap},{gap},{gap},{right},0a{r},{r},0,0,1,{r},{r}v{h4},{h4},{h4},{h4}a{r},{r},0,0,1,-{r},{r}h-{w4}-{w4}-{w4}-{w4}a{r},{r},0,0,1-{r}-{r}v-{h4}-{h4}-{h4}-{h4}a{r},{r},0,0,1,{r}-{r}z",right:"M{x},{y}h{w4},{w4},{w4},{w4}a{r},{r},0,0,1,{r},{r}v{h4},{h4},{h4},{h4}a{r},{r},0,0,1,-{r},{r}h-{w4}-{w4}-{w4}-{w4}a{r},{r},0,0,1-{r}-{r}l0-{bottom}-{gap}-{gap},{gap}-{gap},0-{top}a{r},{r},0,0,1,{r}-{r}z",left:"M{x},{y}h{w4},{w4},{w4},{w4}a{r},{r},0,0,1,{r},{r}l0,{top},{gap},{gap}-{gap},{gap},0,{bottom}a{r},{r},0,0,1,-{r},{r}h-{w4}-{w4}-{w4}-{w4}a{r},{r},0,0,1-{r}-{r}v-{h4}-{h4}-{h4}-{h4}a{r},{r},0,0,1,{r}-{r}z"}}O=([{x:I+V,y:J,w:U,w4:U/4,h4:Q/4,left:0,right:U-R*2-T*2,top:0,bottom:Q-R*2-T*2,r:V,h:Q,gap:R,offset:T*2},{x:I+V,y:J,w:U,w4:U/4,h4:Q/4,left:U/2-R-T,right:U/2-R-T,top:Q/2-R-T,bottom:Q/2-R-T,r:V,h:Q,gap:R,offset:T*2},{x:I+V,y:J,w:U,w4:U/4,h4:Q/4,right:0,left:U-R*2-T*2,bottom:0,top:Q-R*2-T*2,r:V,h:Q,gap:R,offset:T*2}])[N[1]==="middle"?1:(N[1]==="left"||N[1]==="top")*2];C=AV.path(b(F[N[0]],O));switch(N[0]){case"top":P=L.x-(I+V+O.left+R+K);M=L.y-(J+V+Q+V+R+K);break;case"bottom":P=L.x-(I+V+O.left+R+K);M=L.y-(J-R-K);break;case"left":P=L.x-(I+V+U+V+R+K);M=L.y-(J+V+O.top+R+K);break;case"right":P=L.x-(I-R-T);M=L.y-(J+V+O.top+R+T)}C.translate(P,M);D.translate(P,M);return C},Aw=function(J,K,Q,C,D,E){var O=J.getBBox(),P=0,N=K,H=O.x+D,I=O.y+E,M=AV.width,L=AV.height,F=Q,G=C;if(AV.raphael.vml){M=B(AV.canvas).width();L=B(AV.canvas).height()}if(H+Q<0){if(N.toLowerCase().indexOf("west")===-1){if(H+O.width/2+O.width-Q<=M){P++;N=N.toLowerCase()+"east";F=0-Q}}else{if(H+O.width+O.width-Q<=M){P++;N=N.toLowerCase().replace("west","east");F=0-Q}}}if(I+C<0){if(N.toLowerCase().indexOf("north")===-1){if(I+O.height/2+O.height-C<=L){P++;N=N.toLowerCase()+"south";G=0-C}}else{if(I+O.height+O.height-C<=L){P++;N=N.toLowerCase().replace("north","south");G=0-C}}}if(H+O.width+Q>M){if(N.toLowerCase().indexOf("east")===-1){if(H-O.width/2-Q>=0){P++;N=N.toLowerCase()+"west";F=0-Q}}else{if(H-O.width-Q>=0){P++;N=N.toLowerCase().replace("east","west");F=0-Q}}}if(I+O.height+C>L){if(N.toLowerCase().indexOf("south")===-1){if(I-O.height/2-C>=0){P++;N=N.toLowerCase()+"north";G=0-C}}else{if(I-O.height-C>=0){P++;N=N.toLowerCase().replace("south","north");G=0-C}}}return P?{compass:N,offsetX:F,offsetY:G}:false},AI=function(h,f,i,c,X,W,Z){var j,H,d,F=AV.set(),e=null,D=null,U=null,V=0,N=0,T=250,g=0,Y=0,m,K={x:h.x,y:h.y},l=null;d=Ay(X);K.x+=W+AL;K.y+=Z+AM;AR=AV.set();if(AO){B.each(AO,function(E,C){B(C.node).unbind(".Rtooltip")});AO.wijRemove()}if(f&&f.length>0){AO=AV.htmlText(-1000,-1000,f,AT.titleStyle);AR.push(AO);j=AO.getBBox()}else{j={left:-1000,top:-1000,width:0,height:0}}if(AU){B.each(AU,function(E,C){B(C.node).unbind(".Rtooltip")});AU.wijRemove()}if(i&&i.length>0){AU=AV.htmlText(-1000,-1000,i,AT.contentStyle);AR.push(AU);H=AU.getBBox()}else{H={left:-1000,top:-1000,width:0,height:0}}if(a){for(g=0,Y=a.length;g<Y;g++){a[g].unclick()}a.wijRemove()}AU&&AU.transform(Raphael.format("...T0,{0}",j.height/2+H.height/2));if(AT.closeBehavior==="sticky"){a=AV.closeBtn(-1000,-1000,AS);AR.push(a);if(AT.width&&AT.width>j.width+AS*2&&AT.width>H.width+AS*2){a.transform(Raphael.format("...T{0},{1}",AT.width-AS,AS))}else{if(j.width>=H.width-AS*2){a.transform(Raphael.format("...T{0},{1}",j.width+AS,AS))}else{a.transform(Raphael.format("...T{0},{1}",H.width-AS,AS))}}B.each(a,function(){this.click(function(C){AH(C)})})}if(AO){F.push(AO);AT.relatedElement&&AO.insertBefore(AT.relatedElement)}if(AU){F.push(AU);AT.relatedElement&&AU.insertBefore(AT.relatedElement)}if(a){F.push(a);AT.relatedElement&&a.insertBefore(AT.relatedElement)}if(!AT.showCallout){AE=0}if(AT.calloutSide||AT.calloutFilled){AE=0;AG=AT.calloutLength/2;if(AT.calloutSide){d=Ay(AT.calloutSide)}}if(AT.calloutSide&&F.length===0){AU=AV.htmlText(-1000,-1000," ");F.push(AU);AT.relatedElement&&AU.insertBefore(AT.relatedElement)}if(AW){B(AW.node).unbind(".Rtooltip");AW.wijRemove()}if(AN){B(AN.node).unbind(".Rtooltip");AN.wijRemove()}if(AP){if(AT.calloutSide||AT.calloutFilled){e=Am(AP,AG);AW=AV.path(e.concat(" "));AT.relatedElement&&AW.insertBefore(AT.relatedElement);AT.calloutFilled&&AW.attr(AT.calloutFilledStyle);AT.calloutSide&&An(0)}AN=Ap(AP,d,F,AE,AG);AT.relatedElement&&AN.insertBefore(AT.relatedElement);if(c){m=Aw(AN,X,W,Z,K.x-AP.x,K.y-AP.y);if(m){AI(h,f,i,false,m.compass,m.offsetX,m.offsetY);return}}AR.push(AW);AR.push(AN);V=K.x-AP.x;N=K.y-AP.y;l=Raphael.animation({transform:Raphael.format("...T{0},{1}",V,N)},T);AN&&AN.animate(l);AO&&AO.animate(l);AU&&AU.animate(l);a&&a.animate(l);AW&&AW.animate(l)}else{if(AT.calloutSide||AT.calloutFilled){e=Am(K,AG);AW=AV.path(e.concat(" "));AT.relatedElement&&AW.insertBefore(AT.relatedElement);AT.calloutFilled&&AW.attr(AT.calloutFilledStyle);AT.calloutSide&&An(0)}AN=Ap(K,d,F,AE,AG);AT.relatedElement&&AN.insertBefore(AT.relatedElement);if(c){m=Aw(AN,X,W,Z,0,0);if(m){AI(h,f,i,false,m.compass,m.offsetX,m.offsetY);return}}AR.push(AW);AR.push(AN);if(AT.showAnimated||AT.animated){D=AT.showAnimated;if(!D){D=AT.animated}if(D&&AK[D]){U={animated:D,duration:AT.showDuration||AT.duration,easing:AT.showEasing||AT.easing,context:AR,show:true};AK[D](U)}}}AP=K;AN.attr(AT.style);if(AT.relatedElement){AO&&AO.insertBefore(AT.relatedElement);AU&&AU.insertBefore(AT.relatedElement);a&&a.insertBefore(AT.relatedElement)}else{F.toFront()}},Al=function(E,J){var F=null,C=null,D=null,I=null,G,H;if(B.isFunction(AT.beforeShowing)){D=null;I={target:null,options:AT,fmt:AT.beforeShowing};if(J&&J.target){H=J.target;if(!H.raphael||!H.raphaelid){H=H.parentNode}if(H.raphael&&H.raphaelid){G=AV.getById(H.raphaelid);I.target=G}else{G=J.target;I.target=G}}D=B.proxy(I.fmt,I);D()}F=AT.title;C=AT.content;F=As(F,J);C=As(C,J);if(!F&&!C){return}AI(E,F,C,AT.windowCollisionDetection,AT.compass,AT.offsetX,AT.offsetY)},Ad=function(D,C){Ar();if(AT.showDelay){AC=window.setTimeout(function(){Al(D,C)},AT.showDelay)}else{Al(D,C)}},AD=function(E){Av=B(AV.canvas.parentNode).offset();Af=Av.left;Ag=Av.top;var C=AT.relativeTo,D={x:0,y:0},G=null,F=E.target;switch(C){case"mouse":D.x=E.pageX-Af;D.y=E.pageY-Ag;break;case"element":if(!F.raphael||!F.raphaelid){F=F.parentNode}if(F.raphael&&F.raphaelid){G=AV.getById(F.raphaelid);D=Ak(G,AT.compass)}}Ad(D,E)},Aq=function(C){switch(AT.triggers){case"hover":B(C.node).bind("mouseover.Rtooltip",function(D){AD(D)}).bind("mouseout.Rtooltip",function(D){AT.closeBehavior==="auto"&&AH(D)});AT.mouseTrailing&&AT.relativeTo==="mouse"&&B(C.node).bind("mousemove.Rtooltip",function(D){AD(D)});break;case"click":B(C.node).bind("click.Rtooltip",function(D){AD(D)})}},Ao=function(E){var C,D;if(E){if(E.length){for(C=0,D=E.length;C<D;C++){Aq(E[C])}}else{Aq(E)}}},Az=function(){if(AQ){switch(AT.triggers){case"hover":AQ.live("mouseover.Rtooltip",function(C){AD(C)}).live("mouseout.Rtooltip",function(C){AT.closeBehavior==="auto"&&AH(C)});AT.mouseTrailing&&AT.relativeTo==="mouse"&&AQ.live("mousemove.Rtooltip",function(C){AD(C)});break;case"click":AQ.live("click.Rtooltip",function(C){AD(C)})}}},Aj=function(){var C,D;if(AF){if(AF.length){for(C=0,D=AF.length;C<D;C++){B(AF[C].node).unbind(".Rtooltip")}}else{B(AF.node).unbind(".Rtooltip")}}AQ&&AQ.die("Rtooltip")},Ab=function(){Aj();AA(0)},Aa=function(){this.hide=function(){AH()};this.showAt=function(C){Ad(C)};this.resetCalloutOffset=function(C){var F=AT.calloutOffset,E=AT.calloutSide,D=AT.calloutAnimation;if(AW){if(E==="south"||E==="north"){AW.animate({translation:C-F+",0"},D.duration,D.easing)}else{(E==="east"||E==="west")&&AW.animate({translation:"0,"+(C-F)},D.duration,D.easing)}}AT.calloutOffset=C};this.destroy=function(){Ab()};this.getOptions=function(){return AT};this.setTargets=function(C){Ao(C)};this.setSelector=function(C){AQ=C;Az()};this.setOptions=function(C){AT=B.extend(true,AT,C)}};AF&&Ao(AF);AQ&&Az(AQ);return new Aa};Raphael.fn.tooltip.animations={fade:function(D){var C=D.context;if(D.show){C.attr({opacity:0});C.animate({opacity:1},D.duration,D.easing)}else{C.animate({opacity:0},D.duration,D.easing)}}}})(jQuery);(function(A){A.widget("wijmo.wijchartcore",{options:{width:null,height:null,seriesList:[],seriesStyles:[{stroke:"#00cc00",opacity:0.9,"stroke-width":1},{stroke:"#0099cc",opacity:0.9,"stroke-width":1},{stroke:"#0055cc",opacity:0.9,"stroke-width":1},{stroke:"#2200cc",opacity:0.9,"stroke-width":1},{stroke:"#8800cc",opacity:0.9,"stroke-width":1},{stroke:"#d9007e",opacity:0.9,"stroke-width":1},{stroke:"#ff0000",opacity:0.9,"stroke-width":1},{stroke:"#ff6600",opacity:0.9,"stroke-width":1},{stroke:"#ff9900",opacity:0.9,"stroke-width":1},{stroke:"#ffcc00",opacity:0.9,"stroke-width":1},{stroke:"#ffff00",opacity:0.9,"stroke-width":1},{stroke:"#ace600",opacity:0.9,"stroke-width":1}],seriesHoverStyles:[{opacity:1,"stroke-width":1.5},{opacity:1,"stroke-width":1.5},{opacity:1,"stroke-width":1.5},{opacity:1,"stroke-width":1.5},{opacity:1,"stroke-width":1.5},{opacity:1,"stroke-width":1.5},{opacity:1,"stroke-width":1.5},{opacity:1,"stroke-width":1.5},{opacity:1,"stroke-width":1.5},{opacity:1,"stroke-width":1.5},{opacity:1,"stroke-width":1.5},{opacity:1,"stroke-width":1.5}],marginTop:25,marginRight:25,marginBottom:25,marginLeft:25,textStyle:{fill:"#888","font-size":10,stroke:"none"},header:{text:"",style:{fill:"none",stroke:"none"},textStyle:{"font-size":18,fill:"#666",stroke:"none"},compass:"north",orientation:"horizontal",visible:true},footer:{text:"",style:{fill:"#fff",stroke:"none"},textStyle:{fill:"#000",stroke:"none"},compass:"south",orientation:"horizontal",visible:false},legend:{text:"",textMargin:{left:2,top:2,right:2,bottom:2},style:{fill:"none",stroke:"none"},textStyle:{fill:"#333",stroke:"none"},titleStyle:{"font-weight":"bold",fill:"#000",stroke:"none"},compass:"east",orientation:"vertical",visible:true},axis:{x:{alignment:"center",style:{stroke:"#999999","stroke-width":0.5},visible:true,textVisible:true,text:"",textStyle:{fill:"#888","font-size":15,"font-weight":"bold"},labels:{style:{fill:"#333","font-size":11},textAlign:"near",width:null},compass:"south",autoMin:true,autoMax:true,min:null,max:null,origin:null,autoMajor:true,autoMinor:true,unitMajor:null,unitMinor:null,gridMajor:{visible:false,style:{stroke:"#CACACA","stroke-dasharray":"- "}},gridMinor:{visible:false,style:{stroke:"#CACACA","stroke-dasharray":"- "}},tickMajor:{position:"none",style:{fill:"black"},factor:1},tickMinor:{position:"none",style:{fill:"black"},factor:1},annoMethod:"values",annoFormatString:"",valueLabels:[]},y:{alignment:"center",style:{stroke:"#999999","stroke-width":0.5},visible:false,textVisible:true,text:"",textStyle:{fill:"#888","font-size":15,"font-weight":"bold"},labels:{style:{fill:"#333","font-size":11},textAlign:"center",width:null},compass:"west",autoMin:true,autoMax:true,min:null,max:null,origin:null,autoMajor:true,autoMinor:true,unitMajor:null,unitMinor:null,gridMajor:{visible:true,style:{stroke:"#999999","stroke-width":"0.5","stroke-dasharray":"none"}},gridMinor:{visible:false,style:{stroke:"#CACACA","stroke-dasharray":"- "}},tickMajor:{position:"none",style:{fill:"black"},factor:1},tickMinor:{position:"none",style:{fill:"black"},factor:1},annoMethod:"values",annoFormatString:"",valueLabels:[]}},hint:{enable:true,content:null,contentStyle:{fill:"#d1d1d1","font-size":16},title:null,titleStyle:{fill:"#d1d1d1","font-size":16},style:{fill:"#000000","stroke-width":"2"},animated:"fade",showAnimated:"fade",hideAnimated:"fade",duration:120,showDuration:120,hideDuration:120,easing:"",showEasing:"",hideEasing:"",showDelay:0,hideDelay:150,compass:"north",offsetX:0,offsetY:0,showCallout:true,calloutFilled:false,calloutFilledStyle:{fill:"#000"}},showChartLabels:true,chartLabelStyle:{},chartLabelFormatString:"",disableDefaultTextStyle:false,shadow:true,beforeSeriesChange:null,seriesChanged:null,beforePaint:null,painted:null},innerState:{},_setOption:function(K,L){var B=this,J=B.options,C=null,F=0,N=0,D=J.axis.x.tickMajor.factor,H=J.axis.x.tickMinor.factor,I=J.axis.y.tickMajor.factor,G=J.axis.y.tickMinor.factor,E,M;if(K==="seriesList"){if(!L){L=[]}C=A.Event("beforeserieschange");if(B._trigger("beforeSeriesChange",C,{oldSeriesList:J.seriesList,newSeriesList:L})===false){return false}J.seriesList=L;B._trigger("seriesChanged",null,L);B.seriesTransition=true;B._init()}else{if(A.isPlainObject(J[K])){A.extend(true,J[K],L);if(K==="axis"){if(J.axis.x.tickMajor.factor<0){J.axis.x.tickMajor.factor=D}if(J.axis.x.tickMinor.factor<0){J.axis.x.tickMinor.factor=H}if(J.axis.y.tickMajor.factor<0){J.axis.y.tickMajor.factor=I}if(J.axis.y.tickMinor.factor<0){J.axis.y.tickMinor.factor=G}}}else{A.Widget.prototype._setOption.apply(B,arguments)}}K==="disabled"&&B._handleDisabledOption(L,B.chartElement);if(K==="seriesTransition"||K==="animation"||K==="disabled"){return}F=J.seriesList.length;if(K==="seriesList"||K==="seriesStyles"){for(E=J.seriesStyles.length,N=E;N<F;N++){J.seriesStyles[N]=J.seriesStyles[N%E]}}if(K==="seriesList"||K==="seriesHoverStyles"){M=J.seriesHoverStyles.length;for(N=M;N<F;N++){J.seriesHoverStyles[N]=J.seriesHoverStyles[N%M]}}B.redraw()},_create:function(){var E=this,B=E.options,G=B.width||E.element.width(),D=B.height||E.element.height(),C=null,F;E.updating=0;E.innerState={};if(E.element.length>0){if(E.element.is("table")){E._parseTable();C=A("<div></div>");G&&C.css("width",G);D&&C.css("height",D);E.element.after(C);E.chartElement=C}else{E.chartElement=E.element}B.disabled&&E.disable();E.chartElement.addClass("ui-widget");F=new Raphael(E.chartElement[0],G,D);E.canvas=F;F.customAttributes.rotation=function(H){return{transform:"...R"+H}};F.customAttributes.scale=function(H){return{transform:"...S"+H}};F.customAttributes.translation=function(I,H){return{transform:Raphael.format("...T{0},{1}",I,H)}};E._bindLiveEvents()}E.headerEles=[];E.footerEles=[];E.legendEles=[];E.axisEles=[];E.legends=[];E.legendIcons=[];E.legendDots=[];E.chartLabelEles=[];E.seriesEles=[]},_getDefFill:function(){return["#00cc00","#0099cc","#0055cc","#2200cc","#8800cc","#d9007e","#ff0000","#ff6600","#ff9900","#ffcc00","#ffff00","#ace600"]},_handleDisabledOption:function(B,C){var D=this;if(B){if(!D.disabledDiv){D.disabledDiv=D._createDisabledDiv(C)}D.disabledDiv.appendTo("body")}else{if(D.disabledDiv){D.disabledDiv.remove();D.disabledDiv=null}}},_createDisabledDiv:function(B){var C=this,D=C.options,F=B||C.element,G=F.offset(),E=D.width||F.outerWidth(),H=D.height||F.outerHeight();return A("<div></div>").addClass("ui-disabled").css({"z-index":"99999",position:"absolute",width:E,height:H,left:G.left,top:G.top})},_init:function(){var B=this,C=B.options;A.each(C.seriesList,function(G,F){var D=F.data,E;if(typeof D==="undefined"||D===null){E=A.inArray(F,C.seriesList);C.seriesList.splice(E,1)}});!B.rendered&&B._paint();A.Widget.prototype._init.apply(B,arguments)},destroy:function(){var B=this;B._unbindLiveEvents();B._clearChartElement();B.chartElement.removeClass("ui-widget");A(".wijchart-canvas-object",B.chartElement[0]).die(B.widgetName);B.element!==B.chartElement&&B.chartElement.remove();B.element.empty();if(B.disabledDiv){B.disabledDiv.remove();B.disabledDiv=null}A.Widget.prototype.destroy.apply(B,arguments)},getCanvas:function(){return this.canvas},addSeriesPoint:function(E,C,G){var D=this.options.seriesList,B=null,F=null;if(E>=D.length){return}B=D[E];F=B.data||[];F.x.push(C.x);F.y.push(C.y);if(G){F.x.shift();F.y.shift()}this._setOption("seriesList",D)},beginUpdate:function(){var B=this;B.updating++},endUpdate:function(){var B=this;B.updating--;B.redraw()},redraw:function(C){var F=this,B=F.options,E=0,D=0;if(F.updating>0){return}if(C&&F.rendered){return}E=B.width||F.element.width();D=B.height||F.element.height();if(E<1||D<1){return}F.canvas.setSize(E,D);F._paint()},getSVG:function(){return Raphael.type==="SVG"?this.chartElement.html():this.canvas.wij.getSVG()},exportChart:function(){var B=document.createElement("form"),C=this.getSVG();B.action="http://export.highcharts.com/";B.method="post";B.style.display="none";document.body.appendChild(B);A.each(["filename","type","width","svg"],function(F,E){var D=document.createElement("input");A(D).attr("name",E).attr("type","hidden").attr("value",({filename:"chart",type:"image/png",width:600,svg:C})[E]);B.appendChild(D)});B.submit();document.body.removeChild(B)},_parseTable:function(){if(!this.element.is("table")){return}var C=this,D=C.element,F=C.options,G=A("caption",D),B=A("thead th",D),H=[],E=A("tbody tr",D);if(G.length){F.header=A.extend({visible:true,text:A.trim(A(G[0]).text())},F.header);if(G.length>1){F.footer=A.extend({visibel:true,text:A.trim(A(G[1]).text())},F.footer)}}F.legend=A.extend({visible:true},F.legend);C._getSeriesFromTR(B,E,H);C.options.seriesList=H},_getSeriesFromTR:function(E,D,B){var F=[],G=null,C=null;E.length&&E.each(function(){G=A.trim(A(this).text());F.push(G)});D.length&&D.each(function(){var H=A("th",A(this)),K=A.trim(H.text()),J=[],I=A("td",A(this));I.length&&I.each(function(){var L=A(this);J.push(parseFloat(A.trim(L.text())))});C={label:K,legendEntry:true,data:{x:F,y:J}};B.push(C)})},_clearChartElement:function(){var B=this,C=B.chartElement.data("fields");if(B.headerEles.length){A.each(B.headerEles,function(D,E){E.wijRemove();E=null});B.headerEles=[]}if(B.footerEles.length){A.each(B.footerEles,function(D,E){E.wijRemove();E=null});B.footerEles=[]}if(B.legendEles.length){A.each(B.legendEles,function(D,E){E.wijRemove();E=null});B.legendEles=[]}if(B.legends.length){A.each(B.legends,function(D,E){E.wijRemove();E=null});B.legends=[]}if(B.legendIcons.length){A.each(B.legendIcons,function(D,E){E.wijRemove();E=null});B.legendIcons=[]}if(B.legendDots.length){A.each(B.legendDots,function(D,E){E.wijRemove();E=null});B.legendDots=[]}if(B.axisEles.length){A.each(B.axisEles,function(D,E){E.wijRemove();E=null});B.axisEles=[]}if(B.chartLabelEles.length){A.each(B.chartLabelEles,function(D,E){E.wijRemove();E=null});B.chartLabelEles=[]}C&&C.chartElements&&A.each(C.chartElements,function(E,D){D.length&&A.each(D,function(F,G){if(G[0]!==null){G.stop().wijRemove();G=null}});D=[]});B.canvas.clear();B.innerState={}},_text:function(D,B,C){var E=this.canvas.text(D,B,C);if(this.options.disableDefaultTextStyle){E.node.style.cssText=""}return E},_paint:function(){var D=this,G=D.options,F=D.element,C=F.css("display")==="none"||F.css("visibility")==="hidden",B={},E=null;if(C){B=F.css("left");E=F.css("position");F.css("left","-10000px");F.css("position","absolute");F.show()}if(F.is(":hidden")){if(C){F.css("left",B);F.css("position",E);F.hide()}return}D._clearChartElement();if(D._trigger("beforePaint")===false){return}D.canvasBounds={startX:0,endX:G.width||F.width(),startY:0,endY:G.height||F.height()};D._paintHeader();D._paintFooter();D._paintLegend();D._paintChartArea();D._paintChartLabels();D._paintTooltip();D._trigger("painted");D.rendered=true;if(C){F.css("left",B);F.css("position",E);F.hide()}},_calculatePosition:function(B,H,D){var E={x:0,y:0},F=5,C=5,G=this.canvasBounds;switch(B){case"north":E.x=(G.endX-G.startX)/2;E.y=G.startY+D/2+C;G.startY=G.startY+C*2+D;break;case"south":E.x=(G.endX-G.startX)/2;E.y=G.endY-D/2-C;G.endY=G.endY-C*2-D;break;case"east":E.x=G.endX-H/2-F;E.y=(G.endY-G.startY)/2;G.endX=G.endX-F*2-H;break;case"west":E.x=G.startX+H/2+F;E.y=(G.endY-G.startY)/2;G.startX=G.startX+F*2+H}return E},_paintHeader:function(){var L=2,M=this,H=M.options,J=H.header,E=null,I=null,D=null,C=null,F=null,K=null,G=0,B=null;if(J.text&&J.text.length>0&&J.visible){E=J.compass;I=M._text(0,0,J.text);A.wijraphael.addClass(A(I.node),"wijchart-header-text");G=M._getRotationByCompass(E);D=A.extend(true,{},H.textStyle,J.textStyle);I.attr(D);I.transform("...R"+G);C=I.wijGetBBox();F=M._calculatePosition(E,C.width,C.height);I.transform(Raphael.format("...T{0},{1}",F.x,F.y));K=I.wijGetBBox();B=M.canvas.rect(K.x-L,K.y-L,K.width+2*L,K.height+2*L);A.wijraphael.addClass(A(B.node),"wijchart-header-container");B.attr(J.style);B.toBack();M.headerEles.push(I);M.headerEles.push(B)}},_paintFooter:function(){var L=2,M=this,H=M.options,J=H.footer,E=null,I=null,D=null,C=null,F=null,K=null,G=0,B=null;if(J.text&&J.text.length>0&&J.visible){E=J.compass;I=M._text(0,0,J.text);A.wijraphael.addClass(A(I.node),"wijchart-footer-text");G=M._getRotationByCompass(E);D=A.extend(true,{},H.textStyle,J.textStyle);I.attr(D);I.transform("...R"+G);C=I.wijGetBBox();F=M._calculatePosition(E,C.width,C.height);I.transform(Raphael.format("...T{0},{1}",F.x,F.y));K=I.wijGetBBox();B=M.canvas.rect(K.x-L,K.y-L,K.width+2*L,K.height+2*L);A.wijraphael.addClass(A(B.node),"wijchart-footer-container");B.attr(J.style);B.toBack();M.footerEles.push(I);M.footerEles.push(B)}},_getRotationByCompass:function(B){var C=0;if(B==="east"){C=90}else{if(B==="west"){C=-90}}return C},_paintLegend:function(){if(!this.options.legend.visible){return}var Aq=this,Ac=Aq.options,Ao=A.extend(true,{size:{width:22,height:10}},Ac.legend),Ap=2,L=Ac.seriesStyles,Aj=[].concat(Ac.seriesList),X=Ao.compass,V=Ao.orientation,Ag,Q,J,Am,Ad=Aq.canvasBounds,Ab=Ad.endX-Ad.startX,Aa=Ad.endY-Ad.startY,Ae=Ao.size.width,P=Ao.size.height,Ah=0,Ak=0,Af=0,a=0,Z=0,An=1,K=0,Y=0,W=0,M=0,Al=0,N,U,O,Ai,T=[],R=0;if(Ao.text&&Ao.text.length){Ag=Aq._text(0,0,Ao.text);A.wijraphael.addClass(A(Ag.node),"wijchart-legend-title");Q=A.extend(true,{},Ac.textStyle,Ao.textStyle,Ao.titleStyle);Ag.attr(Q);Aq.legendEles.push(Ag)}if(Ao.reversed){Aj=Aj.reverse()}A.each(Aj,function(B,C){C=A.extend(true,{legendEntry:true,display:"show"},C);function D(j){var I=Ao.reversed?Aj.length-1-R:R,H=L[I],F=A.extend(true,{fill:"none",opacity:1,stroke:"black"},H),f,G,E,d;R++;if(j.legendEntry&&j.display!=="exclude"){f=Aq._text(0,0,j.label);A.wijraphael.addClass(A(f.node),"wijchart-legend-text wijchart-legend");G=A.extend(true,{},Ac.textStyle,Ao.textStyle);f.attr(G);Aq.legends.push(f);E=A.extend(F,{"stroke-width":1});d=Aq.canvas.rect(0,0,Ae,P);A.wijraphael.addClass(A(d.node),"wijchart-legend-icon wijchart-legend");d.attr(E);Aq.legendIcons.push(d);T.push(E)}}if(C.type==="pie"&&C.legendEntry){A.each(C.data,function(F,E){E=A.extend({legendEntry:C.legendEntry},E);D(E)})}else{D(C)}});J=Aq.legends.length;Am=Ao.textMargin;if(Ag){Ah=Ag.wijGetBBox().height}A.each(Aq.legends,function(C,B){var D=B.wijGetBBox();if(D.width>Ak){Ak=D.width}if(D.height>Af){Af=D.height}});if(X==="east"||X==="west"){if(V==="horizontal"){a=J*(Ak+Ae+Ap)+J*(Am.left+Am.right);if(a>Ab/2){An=Math.floor(Ab/2/Ak);if(An<1){An=1}}else{An=J}}else{if(V==="vertical"){Z=Af*J+Ah+J*(Am.top+Am.bottom);if(Z>Aa){An=Math.ceil(Z/Aa)}else{An=1}}}}else{if(X==="south"||X==="north"){if(V==="horizontal"){a=(Ak+Ae+Ap)*J+J*(Am.left+Am.right);if(a>Ab){An=Math.floor(J/a*Ab);if(An<1){An=1}}else{An=J}}else{if(V==="vertical"){Z=Af*J+Ah+J*(Am.top+Am.bottom);if(Z>Aa/2){K=Math.floor(Aa-Ah)/2/Af;An=Math.ceil(J/K)}else{An=1}}}}}Y=An*(Ak+Ae+Ap)+An*(Am.left+Am.right);W=Af*Math.ceil(J/An)+Ah+Math.ceil(J/An)*(Am.top+Am.bottom);N=Aq._calculatePosition(X,Y,W);U=N.x-Y/2;O=N.y-W/2;Ai=Aq.canvas.rect(U-Ap,O-Ap,Y+2*Ap,W+2*Ap);A.wijraphael.addClass(A(Ai.node),"wijchart-legend-container");Ai.attr(Ao.style);Ai.toBack();Aq.legendEles.push(Ai);Ag&&Ag.transform(Raphael.format("...T{0},{1}",U+Y/2,O+Ah/2));M=Ah;A.each(Aq.legends,function(H,I){var D=Ao.reversed?Aj.length-1-H:H,E=I.wijGetBBox(),F=Aq.legendIcons[H],B=U+Al*(Ae+Ak+Ap)+(Al+1)*Am.left+Al*Am.right,C=O+M+E.height/2+Am.top,G=C-F.wijGetBBox().height/2,b;F.wijRemove();F=Aq.canvas.rect(B,G,Ae,P);A(F.node).data("index",D);A.wijraphael.addClass(A(F.node),"wijchart-legend-icon wijchart-legend");Aq.legendIcons[H]=F;b=T[H];b&&F.attr(b);I.transform(Raphael.format("...T{0},{1}",B+Ae+Ap+E.width/2,C));I.toFront();A(I.node).data("index",D);Al++;if(Al===An){Al=0;M+=Af+Am.top+Am.bottom}})},_hasAxes:function(){return this.widgetName==="wijpiechart"?false:true},_applyAxisText:function(E){var C=this,D=E.text,G=null,I=null,F=null,B=0,J=0,H=C.canvasBounds;if(D!==null&&D!==undefined&&D.length>0){I=C._text(-100,-100,D);F=A.extend(true,{},C.options.textStyle,E.textStyle);I.attr(F);G=I.wijGetBBox();if(F["margin-left"]){J+=parseFloat(F["margin-left"])}if(F["margin-top"]){B+=parseFloat(F["margin-top"])}if(F["margin-right"]){J+=parseFloat(F["margin-right"])}if(F["margin-bottom"]){B+=parseFloat(F["margin-bottom"])}switch(E.compass){case"north":H.startY+=G.height+B;break;case"south":H.endY-=G.height+B;break;case"east":H.endX-=G.height+J;break;case"west":H.startX+=G.height+J}I.wijRemove()}return G},_isSeriesDataEmpty:function(){var C=this,B=C.options.seriesList;if(!B||B.length===0){return true}A.each(B,function(D,E){if(!E.data||(!E.data.x||!E.data.y)&&!E.data.xy){return true}});return false},_paintTooltip:function(){var E=this,C=E.options,I=C.hint,D=!C.disabled&&I.enable,F=I,G,B,H=A.isFunction;if(D&&!E.tooltip){F=A.extend(true,{},I,{});G=I.title;B=I.content;if(H(G)){F.title=function(){return E._getTooltipText(G,this.target)}}if(H(B)){F.content=function(){return E._getTooltipText(B,this.target)}}F.beforeShowing=function(){E._onBeforeTooltipShowing(this)};E.tooltip=E.canvas.tooltip(null,F)}},_getTooltipText:function(B,E){var D=A(E.node).data("wijchartDataObj"),C={data:D,label:D.label,x:D.x,y:D.y,target:E,fmt:B};return A.proxy(B,C)()},_onBeforeTooltipShowing:function(B){var C=B.target;if(C){B.options.style.stroke=C.attrs.stroke||C.attrs.fill}},_paintChartArea:function(){var G=this,D=G.options,H=D.axis,E=2,F=null,C=null,I=null,J=5,K=0,B=0;G._applyMargins();if(G._isSeriesDataEmpty()){return}if(G._hasAxes()){if(G.innerState.axisInfo){G.axisInfo=G.innerState.axisInfo;G.canvasBounds=G.innerState.canvasBounds}else{F=G._applyAxisText(H.x,{});C=G._applyAxisText(H.y,{});G.axisInfo={x:{id:"x",tprec:0,isTime:false,offset:0,vOffset:0,max:0,min:0,majorTickRect:null,minorTickRect:null,annoFormatString:null,textBounds:F,axisTextOffset:E,autoMax:true,autoMin:true,autoMajor:true,autoMinor:true},y:{id:"y",tprec:0,isTime:false,offset:0,vOffset:0,max:0,min:0,majorTickRect:null,minorTickRect:null,annoFormatString:null,textBounds:C,axisTextOffset:E,autoMax:true,autoMin:true,autoMajor:true,autoMinor:true}};I=G._getDataExtreme();if(H.x.autoMin&&G.axisInfo.x.autoMin){H.x.min=I.txn}else{if(H.x.min&&G._isDate(H.x.min)){H.x.min=A.toOADate(H.x.min)}}if(H.x.autoMax&&G.axisInfo.x.autoMax){H.x.max=I.txx}else{if(H.x.max&&G._isDate(H.x.max)){H.x.max=A.toOADate(H.x.max)}}if(H.y.autoMin&&G.axisInfo.y.autoMin){H.y.min=I.tyn}else{if(H.y.min&&G._isDate(H.y.min)){H.y.min=A.toOADate(H.y.min)}}if(H.y.autoMax&&G.axisInfo.y.autoMax){H.y.max=I.tyx}else{if(H.y.max&&G._isDate(H.y.max)){H.y.max=A.toOADate(H.y.max)}}do{B=G._autoPosition(G.axisInfo,H,"y");K=G._autoPosition(G.axisInfo,H,"x");if(B===G.axisInfo.y.offset&&K===G.axisInfo.x.offset){J=0;break}if(!isNaN(K)&&!isNaN(B)){if(B!==G.axisInfo.y.offset&&B!==0){G.axisInfo.y.offset=B;G.axisInfo.y.vOffset=K}if(K!==G.axisInfo.x.offset&&K!==0){G.axisInfo.x.offset=K;G.axisInfo.x.vOffset=B}}J--}while(J>0);G._adjustPlotArea(H.x,G.axisInfo.x);G._adjustPlotArea(H.y,G.axisInfo.y);G.innerState.axisInfo=G.axisInfo;G.innerState.canvasBounds=G.canvasBounds}G._paintAxes();G._paintPlotArea()}else{G._paintPlotArea()}},_adjustPlotArea:function(C,D){var B=this.canvasBounds;C.max=D.max;C.min=D.min;switch(C.compass){case"north":B.startY+=D.offset;break;case"south":B.endY-=D.offset;break;case"east":B.endX-=D.offset;break;case"west":B.startX+=D.offset}},_autoPosition:function(B,D,C){return this._autoPositionCartesianAxis(B,D,C)},_autoPositionCartesianAxis:function(K,B,J){var M=this,F=null,D=M.canvasBounds,C=B[J].compass,E=J==="x"?"y":"x",L=B[E].origin,H=K[E].max,I=K[E].min,G=0,N;if(L!==null&&M._isDate(L)){L=A.toOADate(L)}M._calculateParameters(K[J],B[J]);F=M._getMaxExtents(K[J],B[J]);switch(C){case"north":case"south":N=F.height;K[J].maxExtent=N;return N;case"east":case"west":N=F.width;K[J].maxExtent=N;return N}},_getMaxExtents:function(P,Q,M){var T=this,D=T.options,K=null,V={width:0,height:0},G=P.min,F=P.max,C=P.isTime,U=Q.annoFormatString,B=D.is100Percent,N=0,E=Q.compass,J=Q.labels,R,O=false,L=T.canvasBounds,H,I;P.majorTickRect=T._getTickRect(P,Q,true,true,M);P.minorTickRect=T._getTickRect(P,Q,false,true,M);K=T._getMajorTickValues(P,Q);if(!Q.textVisible){return V}if(!U||U.length===0){U=P.annoFormatString}R=A.extend(true,{},D.textStyle,Q.textStyle,J.style);I=R.transform;I&&I.length&&A.each(I,function(W,X){if(X[0].toLowerCase()==="r"){O=true;return false}});R=A.extend(true,R,P.textStyle);H=L.endX-L.startX-P.vOffset-P.axisTextOffset;if(K&&K.length){H=H/(K.length-1);A.each(K,function(Y,W){var X,a,Z;if(W<G||W>F){return true}if(Q.annoMethod==="valueLabels"){if(W<0){return true}if(N>=Q.valueLabels.length){return false}W=Q.valueLabels[N];if(W.text){W=W.text}else{if(typeof W.value!=="undefined"){W=W.value;if(U&&U.length){W=Globalize.format(W,U)}}}}else{if(Q.annoMethod==="values"){if(U&&U.length){if(C){W=A.fromOADate(W)}W=Globalize.format(W,U)}else{if(B&&P.id==="y"){W=Globalize.format(W,"p0")}}}}if(J.width){X=T.canvas.wrapText(-100,-100,W,J.width,J.textAlign,R)}else{X=T._text(-100,-100,W).attr(R)}a=X.wijGetBBox();if(!T._isVertical(E)&&!O&&Q.annoMethod==="valueLabels"){if(a.width>H){X.attr({transform:"r-45"});a=X.wijGetBBox();if(Y===0){R.transform="r-45";P.textStyle={transform:"r-45"};Z=X.clone();Z.attr({transform:"r0"});a=Z.wijGetBBox();if(Math.sqrt(2)*a.height>H){X.attr({transform:"r-90"});R.transform="r-90";P.textStyle={transform:"r-90"}}Z.wijRemove();a=X.wijGetBBox()}}}X.wijRemove();if(a.width>V.width){V.width=a.width}if(a.height>V.height){V.height=a.height}N++})}if(V.width<J.width){V.width=J.width}P.labelWidth=V.width;return V},_getMajorTickValues:function(B,E){var C=[],D=E.valueLabels;D&&D.length>0&&A.each(D,function(F,G){if(typeof G.text!=="undefined"||typeof G.value!=="undefined"){return false}if(typeof G==="string"){D[F]={text:G,gridLine:false}}else{D[F]={value:G,gridLine:false}}});if(E.annoMethod==="valueLabels"&&D&&D.length>0&&typeof D[0].value!=="undefined"){C=this._getSortedDataValues(B,E);return C}C=this._getTickValues(B.max,B.min,E.unitMajor,B.tprec,!B.isTime,E.autoMajor);return C},_getSortedDataValues:function(F,E){var C=this,D=[],B=E.valueLabels;A.each(B,function(I,G){var H=G.value;if(C._isDate(H)){D.push(A.toOADate(H))}else{if(typeof H==="number"){D.push(H)}else{D.push(I)}}});return D},_getMinorTickValues:function(D,B){var C=[];C=this._getTickValues(D.max,D.min,B.unitMinor,D.tprec,!D.isTime,B.autoMinor);return C},_getTickValues:function(O,M,N,P,J,K){var C=this,H=[],I=M,B=0,G=0,L=0,F=0,Q=0,E=0;try{if(N===0){H=[O,M]}else{if(K){if(P+1<0){P=-1}else{if(P+1>15){P=14}}E=A.round(C._signedCeiling(M/N)*N,P+1);if(E<O){M=E}L=parseInt(A.round(O/N,5),10);F=parseInt(A.round(M/N,5),10);Q=parseInt(L-F+1,10);if(Q>1){G=F*N;if(G<M){Q--;M+=N}G=M+(Q-1)*N;if(G>O){Q--}}if(Q<1){Q=2;M=I;N=O-M}}else{Q=parseInt((O-M)/N+1,10);if(Q>1){G=M+(Q-1)*N;if(G>O){Q--}}if(Q<1){Q=2;N=O-M}}for(B=0;B<Q;B++){if(J){if(K){H[B]=A.round(M+B*N,P+1)}else{H[B]=M+B*N}}else{H[B]=M+B*N}}}}catch(D){}return H},_getTickRect:function(H,N,G,B){var J=N.compass,L=0,K=null,C=3,D=2,F=2,M=N.tickMajor.factor,E=N.tickMinor.factor,I={x:0,y:0,width:0,height:0};if(G){K=N.tickMajor.position;M=M>0?M:1;L=C*M}else{K=N.tickMinor.position;E=E>0?E:1;L=D*E}if(K==="none"||K==="inside"&&B){L=0}if(J==="east"||J==="west"){I={x:0,y:-1,width:L*F,height:F};if(J==="east"&&(K==="outside"||K==="cross"&&B)||J==="west"&&K==="inside"){I.width+=2}else{if(!B){if(K==="corss"){I.width<<=1}I.width+=2}}}else{I={x:-1,y:0,width:F,height:L*F};if(J==="south"&&(K==="outside"||K==="corss"&&B)||J==="north"&&K==="inside"){I.height+=2}else{if(!B){if(K==="cross"){I.height<<=1}I.height+=2}}}return I},_applyMargins:function(){var C=this,B=C.options,D=C.canvasBounds;D.startX+=B.marginLeft;D.endX-=B.marginRight;D.startY+=B.marginTop;D.endY-=B.marginBottom},_paintAxes:function(){var F=this,C=F.options.axis,H=F.axisInfo,D=C.x,E=C.y,B=H.x,G=H.y,I;I=F._paintAxis(D,B);E.origin!==null&&F._translateAxisIfNeeded(I,D.compass,E.origin,E.compass,G.max,G.min);I=F._paintAxis(E,G);D.origin!==null&&F._translateAxisIfNeeded(I,E.compass,D.origin,D.compass,B.max,B.min)},_translateAxisIfNeeded:function(K,E,G,F,B,J){var C=this,D=F==="west"||F==="east",H=C.canvasBounds,I=G,L;if(C._isDate(I)){I=A.toOADate(I)}if(!D){if(E==="west"){L=(I-J)/(B-J)*(H.endX-H.startX)}else{L=(I-B)/(B-J)*(H.endX-H.startX)}A.each(K,function(M,N){N.transform(Raphael.format("...T{0},{1}",L,0))})}else{if(E==="south"){L=(J-I)/(B-J)*(H.endY-H.startY)}else{L=(B-I)/(B-J)*(H.endY-H.startY)}A.each(K,function(M,N){N.transform(Raphael.format("...T{0},{1}",0,L))})}},_paintAxis:function(Ao,As){var Ar=this,W=Ar.options,Ap=Ar.canvasBounds,K={x:0,y:0},Aq={x:0,y:0},Ab=Ao.compass,Ah=2,Ac=true,Ak=null,Al=[],a=[],Ae=[],Am=As.max,An=As.min,N=Ao.unitMajor,L=Ao.unitMinor,M=Ao.tickMajor.position,Ad=Ao.tickMinor.position,X=As.maxExtent,Q=Ao.tickMajor.style,O=Ao.tickMinor.style,P=As.majorTickRect,U=As.minorTickRect,Af=As.axisTextOffset,V=Ao.gridMajor,R=Ao.gridMinor,Ag=Ao.labels,Y=0,T=[],Z=0,Ai=Ao.annoFormatString,Aa=null,Aj=[];if(!Ai||Ai.length===0){Ai=As.annoFormatString}Al=Ar._getMajorTickValues(As,Ao);if(Ad!=="none"){a=Ar._getMinorTickValues(As,Ao);Ae=Ar._resetMinorTickValues(a,Al)}switch(Ab){case"south":K.x=Ap.startX;K.y=Ap.endY;Aq.x=Ap.endX;Aq.y=Ap.endY;Ac=false;break;case"north":K.x=Ap.startX;K.y=Ap.startY-Ah;Aq.x=Ap.endX;Aq.y=Ap.startY-Ah;Ac=false;break;case"east":K.x=Ap.endX;K.y=Ap.endY;Aq.x=Ap.endX;Aq.y=Ap.startY;break;case"west":K.x=Ap.startX-Ah;K.y=Ap.endY;Aq.x=Ap.startX-Ah;Aq.y=Ap.startY}if(Ao.visible){Ak=Ar.canvas.line(K.x,K.y,Aq.x,Aq.y).attr(Ao.style);A.wijraphael.addClass(A(Ak.node),"wijchart-axis");Ar.axisEles.push(Ak);Aj.push(Ak)}A.each(Al,function(G,H){var b=H,E=As.isTime,D=W.is100Percent,J,I,F=false,C={};if(H<An||H>Am){return true}if(Ao.annoMethod==="valueLabels"){if(Z>=Ao.valueLabels.length){return false}b=Ao.valueLabels[Z];F=b.gridLine;C=b.gridLineStyle;if(b.text){b=b.text}else{if(typeof b.value!=="undefined"){b=b.value;if(Ai&&Ai.length){b=Globalize.format(b,Ai)}}}}else{if(Ao.annoMethod==="values"){if(Ai&&Ai.length){if(E){b=A.fromOADate(H)}b=Globalize.format(b,Ai)}else{if(D&&As.id==="y"){b=Globalize.format(H,"p0")}}}}Aa=A.extend(true,{},W.textStyle,Ao.textStyle,Ag.style,As.textStyle);J=Ar._paintMajorMinor(Am,An,H,M,N,P,Ab,K,Aq,X,Af,Q,b,V,Ao.textVisible,Aa,Ag.textAlign,Ag.width?As.labelWidth:null,F,C);if(J){if(J.elements){Aj=Aj.concat(J.elements)}I=J.textInfo}if(I){T.push(I);if(Y<I.len){Y=I.len}}Z++});A.each(Ae,function(B,C){var D;if(C>An&&C<Am){D=Ar._paintMajorMinor(Am,An,C,Ad,L,U,Ab,K,Aq,X,Af,O,null,R,Ao.textVisible,Aa,Ag.textAlign,Ag.width?As.labelWidth:null);if(D&&D.elements){Aj=Aj.concat(D.elements)}}});Ao.text&&Ao.text.length>0&&Aj.push(Ar._paintAxisText(Ao,As));return Aj},_paintAxisText:function(W,U){if(!W.text||W.text.length===0){return}var J=this,Y=W.text,D=W.compass,Z=W.alignment,P=J.canvasBounds,Q=P.startX,N=P.startY,E=P.endX,B=P.endY,L=Q,M=N,T=U.textBounds,O=J._isVertical(D),K=U.axisTextOffset,C=U.majorTickRect,a=W.tickMajor.position,X=O?C.width:C.height,R=null,V=null,G=0,F=0,I=0,H=0;R=A.extend(true,{},J.options.textStyle,W.textStyle);if(R["margin-top"]){G=parseFloat(R["margin-top"])}if(R["margin-left"]){F=parseFloat(R["margin-left"])}if(R["margin-right"]){I=parseFloat(R["margin-right"])}if(R["margin-bottom"]){H=parseFloat(R["margin-bottom"])}if(a==="cross"){X=X/2}else{if(a==="inside"){X=0}}if(O){switch(Z){case"near":M=B-T.width/2;break;case"center":M=(N+B)/2;break;case"far":M=N+T.width/2}if(D==="west"){L=Q-(U.offset+K+X+T.height/2+I)}else{L=E+U.offset+K+X+T.height/2+F}}else{switch(Z){case"near":L=Q+T.width/2;break;case"center":L=(Q+E)/2;break;case"far":L=E-T.width/2}if(D==="north"){M=N-(U.offset+K+X+T.height/2+H)}else{M=B+U.offset+K+X+T.height/2+G}}V=J._text(L,M,Y);A.wijraphael.addClass(A(V.node),"wijchart-axis-text");J.axisEles.push(V);V.attr(R);O&&V.transform("...R-90");return V},_resetMinorTickValues:function(F,B){for(var D=0,E=0,G=null,C=null,D=F.length-1;D>=0;D--){G=F[D];for(E=B.length-1;E>=0;E--){C=B[E];G===C&&F.splice(D,1)}}return F},_paintMajorMinor:function(N,Aj,O,Am,R,At,Ak,Ai,X,Ap,Al,Aa,V,Af,U,W,Z,Aq,Y,T){var Au=this,M=Ai.x,As=Ai.y,Ar=-1,Ao=-1,Ad=true,Av=Au.canvasBounds,P=null,Ac=null,Ab=[],Ae=[],Aw=null,a={"stroke-width":2},An={text:null,len:0},Ah=null,Q={},Ag=[];switch(Ak){case"south":if(Am==="inside"){As-=At.height}else{if(Am==="cross"){As-=At.height/2}}if(Aq){Ao=As+Al+At.height}else{Ao=As+Al+At.height+Ap/2}Ad=false;break;case"west":if(Am==="outside"){M-=At.width}else{if(Am==="cross"){M-=At.width/2}}if(Aq){Ar=M-(Al+Ap)}else{Ar=M-(Al+Ap/2)}break;case"north":if(Am==="outside"){As-=At.height}else{if(Am==="cross"){As-=At.height/2}}if(Aq){Ao=As-(Al+Ap)}else{Ao=As-(Al+Ap/2)}Ad=false;break;case"east":if(Am==="inside"){M-=At.width}else{if(Am==="cross"){M-=At.width/2}}if(Aq){Ar=M+Al+At.width}else{Ar=M+Al+At.width+Ap/2}}if(Ad){As+=(O-Aj)/(N-Aj)*(X.y-Ai.y);Ae=["M",Av.startX,As,"H",Av.endX];if(Af.visible){if(As!==Av.startY&&Ak==="east"||As!==Av.endY&&Ak==="west"){Aw=Au.canvas.path(Ae.concat(" "));A.wijraphael.addClass(A(Aw.node),"wijchart-axis-gridline");Aw.attr(Af.style);Au.axisEles.push(Aw)}}if(Y){if(As!==Av.startY&&Ak==="east"||As!==Av.endY&&Ak==="west"){Aw=Au.canvas.path(Ae.concat(" "));A.wijraphael.addClass(A(Aw.node),"wijchart-axis-gridline");Aw.attr(A.extend(true,Af.style,T));Au.axisEles.push(Aw)}}Ao=As;if(Am!=="none"){Ab=["M",M,As,"h",At.width];Aa["stroke-width"]=At.height}}else{M+=(O-Aj)/(N-Aj)*(X.x-Ai.x);Ae=["M",M,Av.startY,"V",Av.endY];if(Af.visible){if(M!==Av.startX&&Ak==="south"||M!==Av.endX&&Ak==="north"){Aw=Au.canvas.path(Ae.concat(" "));A.wijraphael.addClass(A(Aw.node),"wijchart-axis-gridline");Aw.attr(Af.style);Au.axisEles.push(Aw)}}if(Y){if(As!==Av.startY&&Ak==="south"||As!==Av.endY&&Ak==="north"){Aw=Au.canvas.path(Ae.concat(" "));A.wijraphael.addClass(A(Aw.node),"wijchart-axis-gridline");Aw.attr(A.extend(true,{},Af.style,T));Au.axisEles.push(Aw)}}if(Aq){Ar=M-Aq/2}else{Ar=M}if(Am!=="none"){Ab=["M",M,As,"v",At.height];Aa["stroke-width"]=At.width}}if(Am!=="none"){Ac=Au.canvas.path(Ab.concat(" "));A.wijraphael.addClass(A(Ac.node),"wijchart-axis-tick");a=A.extend(a,Aa);Ac.attr(a);Au.axisEles.push(Ac);Ag.push(Ac)}if(V!==null&&U){if(Aq){An=Au.canvas.wrapText(Ar,Ao,V.toString(),Aq,Z,W);A.wijraphael.addClass(A(An.node),"wijchart-axis-label");Ad}else{An=Au._text(Ar,Ao,V.toString());A.wijraphael.addClass(A(An.node),"wijchart-axis-label");An.attr(W)}Au.axisEles.push(An);Ag.push(An);!U&&An.hide();if(Z!=="center"){Ah=An.getBBox();P={text:An,len:Ad?Ah.width:Ah.height}}}Q={textInfo:P,elements:Ag};return Q},_paintPlotArea:function(){},_paintChartLabels:function(){var C=this,B=C.options.chartLabels;B&&B.length&&A.each(B,function(E,F){var D;F=A.extend(true,{compass:"east",attachMethod:"coordinate",attachMethodData:{seriesIndex:-1,pointIndex:-1,x:-1,y:-1},offset:0,visible:false,text:"",connected:false},F);if(F.visible){D=C._getChartLabelPointPosition(F);if(typeof D.x!=="number"||typeof D.y!=="number"){return false}C._setChartLabel(F,D)}})},_getChartLabelPointPosition:function(){},_setChartLabel:function(O,N,H,I){var L=this,G=O.compass,D=L.options,J=A.extend(true,{},D.textStyle,D.chartLabelStyle),B=L._text(0,0,O.text).attr(J),E=O.offset,F=0,C=0,K=null,M=null;A.wijraphael.addClass(A(B.node),"wijchart-label-text");L.chartLabelEles.push(B);K=L._getCompassTextPosition(G,B.wijGetBBox(),E,N,H);if(E&&O.connected){M=L.canvas.path("M"+N.x+" "+N.y+"L"+K.endPoint.x+" "+K.endPoint.y);A.wijraphael.addClass(A(M.node),"wijchart-label-connect");M.attr(I);L.chartLabelEles.push(M)}F=K.endPoint.x+K.offsetX;C=K.endPoint.y+K.offsetY;B.transform(Raphael.format("...T{0},{1}",F,C)).toFront()},_getCompassTextPosition:function(C,F,D,H,E){var I=0,B=0,G={x:0,y:0};switch(C.toLowerCase()){case"east":E=0;break;case"west":E=180;break;case"north":E=90;break;case"south":E=270;break;case"northeast":E=45;break;case"northwest":E=135;break;case"southeast":E=315;break;case"southwest":E=225}if(E>=0&&E<45/2||E>675/2&&E<360){I=F.width/2}else{if(E>=45/2&&E<135/2){I=F.width/2;B=F.height/-2}else{if(E>=135/2&&E<225/2){B=F.height/-2}else{if(E>=225/2&&E<315/2){I=F.width/-2;B=F.height/-2}else{if(E>=315/2&&E<405/2){I=F.width/-2}else{if(E>=405/2&&E<495/2){I=F.width/-2;B=F.height/2}else{if(E>=495/2&&E<585/2){B=F.height/2}else{I=F.width/2;B=F.height/2}}}}}}}G=A.wijraphael.getPositionByAngle(H.x,H.y,D,E);return{endPoint:G,offsetX:I,offsetY:B}},_mouseDown:function(B,C){this._trigger("mouseDown",B,C)},_mouseUp:function(B,C){this._trigger("mouseUp",B,C)},_mouseOver:function(B,C){this._trigger("mouseOver",B,C)},_mouseOut:function(B,C){this._trigger("mouseOut",B,C)},_mouseMove:function(B,C){this._trigger("mouseMove",B,C)},_click:function(B,C){this._trigger("click",B,C)},_mouseMoveInsidePlotArea:function(){},_mouseMoveOutsidePlotArea:function(){},_bindLiveEvents:function(){this._bindLegendEvents();this._bindCanvasEvents()},_bindCanvasEvents:function(){var C=this,B=C.chartElement;B.bind("mousemove",function(F){var H=B.offset(),E=C.canvasBounds,G={left:F.pageX-H.left,top:F.pageY-H.top},D=C.options.disabled;if(D){return}if(G.left>=E.startX&&G.left<=E.endX&&G.top>=E.startY&&G.top<=E.endY){C._mouseMoveInsidePlotArea(F,G)}else{C._mouseMoveOutsidePlotArea(F,G)}})},_bindLegendEvents:function(){var D=this,B=D.options.disabled,C=D.chartElement,E=D.widgetName;A(".wijchart-legend",C[0]).live("click."+E,function(F){if(B){return}var G=A(F.target);if(G[0].tagName&&G[0].tagName==="tspan"){G=G.parent()}D._legendClick(G)})},_legendClick:function(G){if(typeof G.data("index")==="undefined"){return}var J=this,H=J.options.legend,B=G.data("index"),F=J.chartElement.data("fields"),C=J.seriesEles,L,K=J.legendIcons[B],E=J.legends[B],I=A(E.node),D=B,M;if(F&&F.seriesEles){C=F.seriesEles}if(J.legendDots&&J.legendDots.length>B){M=J.legendDots[B]}if(H.reversed){D=J.legends.length-1-B}L=C[D];if(L){if(!I.data("hidden")){J._hideSerieEles(L);!I.data("textOpacity")&&I.data("textOpacity",E.attr("opacity")||1);!I.data("iconOpacity")&&I.data("iconOpacity",K.attr("opacity")||1);M&&!I.data("dotOpacity")&&I.data("dotOpacity",K.attr("opacity")||1);E.attr("opacity","0.3");K.attr("opacity","0.3");M&&M.attr("opacity","0.3");I.data("hidden",true)}else{J._showSerieEles(L);E.attr("opacity",I.data("textOpacity"));K.attr("opacity",I.data("iconOpacity"));M&&M.attr("opacity",I.data("dotOpacity"));I.data("hidden",false)}}},_showSerieEles:function(){},_hideSerieEles:function(){},_unbindLiveEvents:function(){var B=this,C=this.chartElement,D=B.widgetName;A(".wijchart-legend",C[0]).die(D);C.unbind("mousemove")},_isBarChart:function(){return false},_isPieChart:function(){return false},_calculateParameters:function(O,Q){var T=this,N=Q.max,P=Q.min,K=Q.autoMax&&O.autoMax,M=Q.autoMin&&O.autoMin,B=Q.autoMajor&&O.autoMajor,C=Q.autoMinor&&O.autoMinor,H=null,G=null,D=Q.annoMethod==="valueLabels",U=0,I=0,F=0,R=0,L=0,J=O.isTime,E=T.options.adjustMinValue;if(K&&N!==Number.MIN_VALUE){if(O.id!=="x"&&T._isBarChart()){if(N<0&&0.5*(N-P)>-N){N=0}}}if(M&&P!==Number.MAX_VALUE){if(O.id!=="x"&&T._isBarChart()){if(P>0&&0.5*(N-P)>P){P=0}}}if(N===P){if(P!==0){P-=1}N+=1}R=N-P;if(J){H=Q.annoFormatString;if(!H||H.length===0){H=T._getTimeDefaultFormat(N,P);O.annoFormatString=H}L=T._niceTimeUnit(0,H)}G=T._nicePrecision(R);O.tprec=G;if(K){if(J){I=T._roundTime(N,L,true);if(I<N){N=I+L}else{N=I}}else{I=T._precCeil(-G,N);if(typeof I==="number"){N=I}}}if(M){if(J){F=T._roundTime(P,L,false);if(F>P){P=F-L}else{P=F}}else{F=T._precFloor(-G,P);if(typeof F==="number"){P=F}}}O.max=N;O.min=P;O.annoFormatString=H;O.tinc=L;if(B||C){R=N-P;T._calculateMajorMinor(Q,O);U=Q.unitMajor;if(K&&U!==0&&!J&&!D){R=N-parseInt(N/U,10)*U;if(R!==0){N+=U-R;N=T._precCeil(-G,N)}}if(M&&U!==0&&!J&&!D){R=P-parseInt(P/U,10)*U;if(R!==0){if(R<0){R+=U}P-=Math.abs(R);P=T._precFloor(-G,P)}}if(M&&U!==0&&!D&&(typeof E==="undefined"||E===false)&&M&&P===Q.min&&P-U>=0&&O.id==="y"){P-=U}}O.max=N;O.min=P},_roundTime:function(D,J,B){var H=this,K=J,I=A.fromOADate(D),G,E,C,F;if(K>0){G={year:I.getFullYear(),month:I.getMonth(),day:I.getDate(),hour:I.getHours(),minute:I.getMinutes(),second:I.getSeconds()};if(K<H._tmInc.minute){G.second=H._tround(G.second,K,B);return H._getTimeAsDouble(G)}G.second=0;if(K<H._tmInc.hour){K/=H._tmInc.minute;G.minute=H._tround(G.minute,K,B);return H._getTimeAsDouble(G)}G.minute=0;if(K<H._tmInc.day){K/=H._tmInc.hour;G.hour=H._tround(G.hour,K,B);return H._getTimeAsDouble(G)}G.hour=0;if(K<H._tmInc.month){K/=H._tmInc.day;G.day=H._tround(G.day,K,B);return H._getTimeAsDouble(G)}G.day=1;if(K<H._tmInc.year){K/=H._tmInc.month;G.month=H._tround(G.month,K,B);return H._getTimeAsDouble(G)}G.month=0;K/=H._tmInc.year;G.year=H._tround(G.year,K,B);return H._getTimeAsDouble(G)}else{E=I;C=E-K;F=parseInt(C/J,10)*J;if(B&&F!==C){F+=J}E=K+F;return E}},_tround:function(D,E,B){var C=parseInt(D/E*E,10);if(B&&C!==D){C+=parseInt(E,10)}return C},_getTimeAsDouble:function(D){var C=0,B=0,E=null;if(D.day<1){B=-1-D.day;D.day=1}else{if(D.day>28){B=D.day-28;D.day=28}}if(D.month<0){C=-1-D.day;D.month=0}else{if(D.month>11){C=D.month-11;D.month=11}}E=new Date(D.year,D.month,D.day,D.hour,D.minute,D.second);E.setDate(E.getDate()+B);E.setMonth(E.getMonth()+C);return A.toOADate(E)},_getTimeDefaultFormat:function(B,C){var E=this,D=B-C,F="d";if(D>2*E._tmInc.year){F="yyyy"}else{if(D>E._tmInc.year){F="MMM yy"}else{if(D>3*E._tmInc.month){F="MMM"}else{if(D>2*E._tmInc.week){F="MMM d"}else{if(D>2*E._tmInc.day){F="ddd d"}else{if(D>E._tmInc.day){F="ddd H:mm"}else{if(D>E._tmInc.hour){F="H:mm"}else{if(D>=1000){F="H:mm:ss"}}}}}}}}return F},_niceTimeUnit:function(D,C){var B=this,E=D;E=B._niceTimeSpan(E,C);return E},_niceTimeSpan:function(G,C){var F=this,E=F._manualTimeInc(C),B=0,D=0;B=Math.ceil(G);if(B===0){return F._timeSpanFromTmInc(E)}D=1;if(E<F._tmInc.minute){if(B<F._tmInc.minute){D=F._getNiceInc([1,2,5,10,15,30],B,E);if(D!==0){return D}}E=F._tmInc.minute}if(E<F._tmInc.hour){if(B<F._tmInc.hour){D=F._getNiceInc([1,2,5,10,15,30],B,E);if(D!==0){return D}}E=F._tmInc.hour}if(E<F._tmInc.day){if(B<F._tmInc.day){D=F._getNiceInc([1,3,6,12],B,E);if(D!==0){return D}}E=F._tmInc.day}if(E<F._tmInc.month){if(B<F._tmInc.month){D=F._getNiceInc([1,2,7,14],B,E);if(D!==0){return D}}E=F._tmInc.month}if(E<F._tmInc.year){if(B<F._tmInc.year){D=F._getNiceInc([1,2,3,4,6],B,E);if(D!==0){return D}}E=F._tmInc.year}D=100*F._tmInc.year;if(B<D){D=F._getNiceInc([1,2,5,10,20,50],B,E);if(D===0){D=100*F._tmInc.year}}return D},_getNiceInc:function(E,G,B){for(var D=0,F=0,C=E.length,D=0;D<C;D++){F=E[D]*B;if(G<=F){return F}}return 0},_timeSpanFromTmInc:function(E){var C=1000,B=E,D=1;if(E!==this._tmInc.maxtime){if(E>this._tmInc.tickf1){C=E}else{E+=7;while(B>0){D*=10;B--}C=D}}return C},_manualTimeInc:function(D){var C=this,B=C._tmInc.second;if(!D||D.length===0){return B}if(D.indexOf("s")>=0){B=C._tmInc.second}else{if(D.indexOf("m")>=0){B=C._tmInc.minute}else{if(D.indexOf("h")>=0||D.indexOf("H")>=0){B=C._tmInc.hour}else{if(D.indexOf("d")>=0){B=C._tmInc.day}else{if(D.indexOf("M")>=0){B=C._tmInc.month}else{if(D.indexOf("y")>=0){B=C._tmInc.year}}}}}}return B},_tmInc:{tickf7:-7000,tickf6:-6000,tickf5:-5000,tickf4:-4000,tickf3:-3000,tickf2:-2000,tickf1:-1,second:1000,minute:60000,hour:3600000,day:86400000,week:604800000,month:2678400000,year:31536000000,maxtime:2147483647},_niceTickNumber:function(F){if(parseFloat(F)===0){return F}else{if(F<0){F=-F}}var C=Math.log(F)/Math.log(10),B=parseInt(this._signedFloor(C),10),E=F/Math.pow(10,B),D=10;if(E<=1){D=1}else{if(E<=2){D=2}else{if(E<=5){D=5}}}return D*Math.pow(10,B)},_niceNumber:function(E,B,C){if(parseFloat(E)===0){return E}else{if(E<0){E=-E}}var D=E/Math.pow(10,B),F=10;if(C){if(D<1.5){F=1}else{if(D<3){F=2}else{if(D<7){F=5}}}}else{if(D<=1){F=1}else{if(D<=2){F=2}else{if(D<=5){F=5}}}}return F*Math.pow(10,B)},_nicePrecision:function(E){if(E<=0||typeof E!=="number"){return 0}var D=Math.log(E)/Math.log(10),C=parseInt(this._signedFloor(D),10),B=E/Math.pow(10,C);if(B<3){C=-C+1}return C},_precCeil:function(B,D){var C=Math.pow(10,B),E=D/C;E=Math.ceil(E);return E*C},_precFloor:function(B,D){var C=Math.pow(10,B),E=D/C;E=Math.floor(E);return E*C},_signedCeiling:function(B){return B<0?Math.floor(B):Math.ceil(B)},_signedFloor:function(B){return B<0?Math.ceil(B):Math.floor(B)},_getDataExtreme:function(){var B={txx:0,txn:0,tyx:0,tyn:0};this._getDataExtremes(B);if(B.txn>B.txx){B.txn=0;B.txx=1}return B},_getDataExtremes:function(K){var E=this,C=E.options,D=C.seriesList,H=C.stacked,G=C.is100Percent,O=C.axis,M=E.axisInfo,B=[],L=[],I=[],F=[],N,J=0;if(!D||D.length===0){return K}A.each(D,function(Q,U){if(U.type==="pie"){return true}U=A.extend(true,{display:"show"},U);var Y=U.data,V=0,R=0,T=[].concat(Y.xy),P=T.length,W,X;if(U.display==="exclude"){return true}B=[].concat(Y.x);L=[].concat(Y.y);if(Y.xy&&P){B=[];L=[];while(R<P){B[V]=T[R];L[V]=T[R+1];R+=2;V++;Y.x=B;Y.y=L}}else{if(!Y.x){B=[];A.each(L,function(Z){B.push(Z)});Y.x=B}}H&&Q>0&&A.each(L,function(Z){L[Z]+=I[Z]});I=L;W=E._getMinMaxValue(B);X=E._getMinMaxValue(L);if(J===0){K.txx=W.max;K.txn=W.min;K.tyx=X.max;K.tyn=X.min}else{if(K.txx<W.max){K.txx=W.max}if(K.txn>W.min){K.txn=W.min}if(K.tyx<X.max){K.tyx=X.max}if(K.tyn>X.min){K.tyn=X.min}}J++});if(G){K.tyx=1;K.tyn=0}if(B.length){N=A.wijchart.getFirstValidListValue(B);if(E._isDate(N)){M.x.isTime=true}else{if(typeof N!=="number"){A.each(B,function(P,Q){F.push({text:Q,value:P,gridLine:false})});O.x.annoMethod="valueLabels";O.x.valueLabels=F;O.x.max=B.length-1;O.x.min=0;O.x.unitMajor=1;O.x.unitMinor=0.5;M.x.autoMax=false;M.x.autoMin=false;M.x.autoMajor=false;M.x.autoMinor=false}}}if(L.length){N=A.wijchart.getFirstValidListValue(L);if(E._isDate(N)){M.y.isTime=true}else{if(typeof N!=="number"){A.each(L,function(P,R){var Q=O.y.annoFormatString,T=R;if(Q&&Q.length>0){T=Globalize.format(T,Q)}else{T=T.toString()}F.push({text:T,value:R,gridLine:false})});O.y.annoMethod="valueLabels";O.y.valueLabels=F;O.x.max=L.length-1;O.x.min=0;O.y.unitMajor=1;O.x.unitMinor=0.5;M.y.autoMax=false;M.y.autoMin=false;M.y.autoMajor=false;M.y.autoMinor=false}}}return K},_isDate:function(B){return !B?false:typeof B==="object"&&B.constructor===Date},_getMinMaxValue:function(E){var F=this,D={min:0,max:0},B=0,C;if(!E.length){return}C=A.wijchart.getFirstValidListValue(E);if(typeof C!=="number"){if(F._isDate(C)){D.min=C;D.max=C}else{D.min=0;D.max=E.length-1;return D}}else{D.min=C;D.max=C}for(B=0;B<E.length;B++){if(E[B]===null||typeof E[B]==="undefined"){continue}if(E[B]<D.min){D.min=E[B]}else{if(E[B]>D.max){D.max=E[B]}}}if(F._isDate(D.min)){D.min=A.toOADate(D.min);D.max=A.toOADate(D.max)}return D},_isVertical:function(B){return B==="west"||B==="east"},_calculateMajorMinor:function(U,W){var T=this,Y=T.options,N=T.canvasBounds,Aa=U.autoMajor,Z=U.autoMinor,D=W.max,E=W.min,F=W.isTime,a=W.tinc,B=W.annoFormatString,C=null,H=null,V=null,L=null,P=null,K=null,O=null,J=null,Q=null,X=D-E,G=0,I=0,M=0,R=0;if(Aa){Q=A.extend(true,{},Y.textStyle,U.textStyle,U.labels.style);if(F){C=Globalize.format(A.fromOADate(D),B);H=Globalize.format(A.fromOADate(E),B);P=T._text(-1000,-1000,C).attr(Q);K=T._text(-1000,-1000,H).attr(Q);V=P.wijGetBBox();L=K.wijGetBBox();P.wijRemove();K.wijRemove()}else{O=T._nicePrecision(X);J=O+1;if(J<0||J>15){J=0}P=T._text(-1000,-1000,A.round(D,J)).attr(Q);K=T._text(-1000,-1000,A.round(E,J)).attr(Q);V=P.wijGetBBox();L=K.wijGetBBox();P.wijRemove();K.wijRemove()}if(V.width<L.width){V.width=L.width}if(V.height<L.height){V.height=L.height}if(!T._isVertical(U.compass)){G=N.endX-N.startX-W.vOffset-W.axisTextOffset;R=G/V.width;if(Number.POSITIVE_INFINITY===R){M=0}else{M=parseInt(R,10)}}else{I=N.endY-N.startY-W.vOffset-W.axisTextOffset;R=I/V.height;if(Number.POSITIVE_INFINITY===R){M=0}else{M=parseInt(R,10)}}R=X;if(M>0){X/=M;if(F){if(X<a){R=a}else{R=T._niceTimeUnit(X,W.annoFormatString)}}else{W.tprec=T._nicePrecision(X);R=T._niceNumber(2*X,-O,true);if(R<X){R=T._niceNumber(X,-O+1,false)}if(R<X){R=T._niceTickNumber(X)}}}U.unitMajor=R}if(Z&&U.unitMajor&&!isNaN(U.unitMajor)){U.unitMinor=U.unitMajor/2}}})})(jQuery);(function(A){A.widget("wijmo.wijbarchart",A.wijmo.wijchartcore,{options:{horizontal:true,stacked:false,is100Percent:false,clusterOverlap:0,clusterWidth:85,clusterRadius:0,clusterSpacing:0,animation:{enabled:true,duration:400,easing:">"},seriesTransition:{enabled:true,duration:400,easing:">"},mouseDown:null,mouseUp:null,mouseOver:null,mouseOut:null,mouseMove:null,click:null},_create:function(){var C=this,D=C.options,B=C._getDefFill();D.horizontal&&A.extend(true,D.axis,{x:{compass:"west"},y:{compass:"south"}});A.extend(true,{compass:"east"},D.hint);A.each(D.seriesStyles,function(E,F){if(!F.fill){F.fill=B[E]}});A.wijmo.wijchartcore.prototype._create.apply(C,arguments);C.chartElement.addClass("wijmo-wijbarchart")},_setOption:function(C,B){C==="horizontal"&&!B&&A.extend(true,this.options.axis,{x:{compass:"south"},y:{compass:"west"}});A.wijmo.wijchartcore.prototype._setOption.apply(this,arguments)},destroy:function(){var C=this,E=C.chartElement,B=E.data("fields"),D=B&&B.bars;E.removeClass("wijmo-wijbarchart");A.wijmo.wijchartcore.prototype.destroy.apply(this,arguments);D&&D.length&&A.each(D,function(F,G){G=null});E.data("fields",null)},_isBarChart:function(){return true},getBar:function(C){var D=this.chartElement,B=D.data("fields");return B.chartElements.bars[C]},_paintTooltip:function(){var D=this,B=D.chartElement,C=B.data("fields");A.wijmo.wijchartcore.prototype._paintTooltip.apply(this,arguments);if(D.tooltip){if(C&&C.trackers&&C.trackers.length){D.tooltip.setTargets(C.trackers);D.tooltip.setOptions({relatedElement:C.trackers[0]})}}},_getTooltipText:function(C,B){var E=A(B.node),D,F;if(E.data("owner")){E=E.data("owner")}D=E.data("wijchartDataObj");F={data:D,value:D.value,label:D.label,total:D.total,target:B,fmt:C,x:D.x,y:D.y};return A.proxy(C,F)()},_paintPlotArea:function(){var B=this,C=B.options;B.chartElement.wijbar({canvas:B.canvas,bounds:B.canvasBounds,tooltip:B.tooltip,widgetName:B.widgetName,horizontal:C.horizontal,stacked:C.stacked,axis:C.axis,seriesList:C.seriesList,seriesStyles:C.seriesStyles,seriesHoverStyles:C.seriesHoverStyles,seriesTransition:C.seriesTransition,showChartLabels:C.showChartLabels,textStyle:C.textStyle,chartLabelStyle:C.chartLabelStyle,chartLabelFormatString:C.chartLabelFormatString,shadow:C.shadow,disabled:C.disabled,clusterOverlap:C.clusterOverlap,clusterWidth:C.clusterWidth,clusterSpacing:C.clusterSpacing,is100Percent:C.is100Percent,clusterRadius:C.clusterRadius,animation:C.animation,isYTime:B.axisInfo.y.isTime,isXTime:B.axisInfo.x.isTime,mouseDown:A.proxy(B._mouseDown,B),mouseUp:A.proxy(B._mouseUp,B),mouseOver:A.proxy(B._mouseOver,B),mouseOut:A.proxy(B._mouseOut,B),mouseMove:A.proxy(B._mouseMove,B),click:A.proxy(B._click,B)})},_showSerieEles:function(B){A.each(B,function(C,D){if(D.bar){D.bar.show();D.bar.shadow&&D.bar.shadow.show();D.bar.tracker&&D.bar.tracker.show()}D.dcl&&D.dcl.show();D.animatedBar&&D.animatedBar.show()})},_hideSerieEles:function(B){A.each(B,function(C,D){if(D.bar){D.bar.hide();D.bar.shadow&&D.bar.shadow.hide();D.bar.tracker&&D.bar.tracker.hide()}D.dcl&&D.dcl.hide();D.animatedBar&&D.animatedBar.hide()})},_calculateParameters:function(E,C){A.wijmo.wijchartcore.prototype._calculateParameters.apply(this,arguments);if(E.id==="x"){var B=C.unitMinor,D=this._getBarAdjustment(E);if(D===0){D=B}else{if(B<D&&B!==0){D=Math.floor(D/B)*B}}E.min-=D;E.max+=D;this._calculateMajorMinor(C,E)}},_getBarAdjustment:function(E){for(var F=0,C=this.options,B=E.max,D=E.min,H=C.seriesList,G=0,I=0,G=0;G<H.length;G++){I=H[G].data.x.length;if(F<I){F=I}}if(F>1){return(B-D)/F*C.clusterWidth*0.0125}else{if(F===1){if(D===0&&B===1){D=-1;E.min=D}return(B-D)*0.0125}else{return 0}}}});A.fn.extend({wijbar:function(AT){var Ay=function(D,B,C){AT.shadow&&A.wijchart.paintShadow(D,B,C)},AJ=A.wijraphael.addClass,Az=A.wijchart.getScaling,Av=A.wijchart.getTranslation,AX=this,a=AT.canvas,AO=AT.widgetName,AU=AT.horizontal,AM=AT.stacked,AE=[].concat(AT.seriesList),AK=AE.length,Au=[].concat(AT.seriesStyles.slice(0,AK)),AA=[].concat(AT.seriesHoverStyles.slice(0,AK)),AD=AT.bounds,AG=AT.animation,Ao=AG&&AG.enabled,AQ={x:AD.startX,y:AD.startY},AC=AD.endX-AQ.x,AH=AD.endY-AQ.y,AR=AT.axis.x,AS=AT.axis.y,AL=AT.disabled,Aw=AT.mouseDown,Am=AT.mouseUp,An=AT.mouseOver,Al=AT.mouseOut,Ax=AT.mouseMove,As=AT.click,Ar=AT.tooltip,AI=Az(AU,AR.max,AR.min,AU?AH:AC),AB=Az(!AU,AS.max,AS.min,AU?AC:AH),Ap=Av(AU,AQ,AR.max,AR.min,AI),Aq=Av(!AU,AQ,AS.max,AS.min,AB),AV=AX.data("fields")||{},AP=AV.chartElements||{},AN=AV.aniBarsAttr,AW,Aa=AT.isYTime,Ac=AT.isXTime;function Ai(B){for(var F=Number.MAX_VALUE,C=B.length,E,D=1;D<C;D++){E=B[D].x-B[D-1].x;if(E<F&&E>0){F=E}}return F===Number.MAX_VALUE?2:F}function Ah(B){A.each(B,function(C,D){D.stackValues()});return B}function At(F){var D=[],B=A.wijchart.getXSortedPoints;function E(H){var G=this;G.x=H;G.paSpec=[];G.stackValues=function(){var I=G.paSpec.length,J;if(I>1){J=G.paSpec[0];A.each(G.paSpec,function(K,L){if(K===0){return true}L.y+=J.y;J=L})}}}function C(L,O){var J=B(O),N=O.length,P=null,M=0,G=0,Q=0,I=true,K=0,H=false;if(J){M=J.length}if(D){Q=D.length}A.each(J,function(R,T){if(I){I=false;K=T.x}else{if(K===T.x){H=true}else{H=false}K=T.x}while(G<Q&&D[G].x<T.x){G++}if(G<Q){if(D[G].x!==T.x){P=new E(T.x,N);D.splice(G,0,P);Q=D.length}else{P=D[G]}}else{P=new E(T.x,N);D.push(P);Q=D.length}P.paSpec.push({y:T.y,sIdx:L,pIdx:R,dupl:H})})}A.each(F,function(G,H){C(G,H)});return D}function AF(D,C,B){return D<C?C:D>B?B:D}function Ad(F,C,D,G,B,E){A.each(E,function(L,H){var I=H.x,J=H.y,K=0;H.x=C*I+G;H.y=D*J+B;if(F){K=H.x;H.x=H.y;H.y=K}});return E}function Af(K,F,H,G){var E=A.extend(true,{},AT.textStyle,AT.chartLabelStyle),D=AU?{x:K.x+K.width,y:K.y+K.height/2}:{x:K.x+K.width/2,y:K.y},C=AT.chartLabelFormatString,B,I,J=F;if(G){E=A.extend(true,E,G)}if(H){J=A.fromOADate(F)}if(C&&C.length){J=Globalize.format(J,AT.chartLabelFormatString)}else{if(!H){J=A.round(J,2)}}I=a.text(D.x,D.y,J).attr(E);AJ(A(I.node),"wijbarchart-label");B=I.getBBox();if(AU){I.attr({x:D.x+B.width/2})}else{I.attr({y:D.y-B.height/2})}return I}function Ab(Bk,AY,Z,Ba,Bb,A5,A0,A1,p,b,Bf,e,Y,V){var c=AT.is100Percent,A3=Ba.min,A9=Ba.max,A2=Bb.min,A4=Bb.max,D=Ba.scale,R=Ba.late,W=Bb.scale,U=Bb.late,A8,Bl,AZ,Bj,A6=null,Bc,X=A5,Bi=A5["stroke-width"],P=A5.stroke,Be,Bg,Bh,Bd,A7=-1;if(AT.axis.y.origin!==null){A7=W*AT.axis.y.origin+U}if(AM){if(c){if(e>0){Bk.height=AY/e}if(Bf||Bf===0){Bk.y=Bf/e;Bk.height-=Bk.y}}else{Bk.height=AY;if(Bf||Bf===0){Bk.height-=Bf;Bk.y=Bf}}}else{if(Bf||Bf===0){Bk.x+=Bk.width*(1-b);Bk.height=AY}}Bl=[{x:Bk.x,y:Bk.y},{x:Bk.x+Bk.width,y:Bk.y+Bk.height}];AZ=(A3<=Bl[0].x&&Bl[0].x<=A9||A3<=Bl[1].x&&Bl[1].x<=A9)&&(A2<=Bl[0].y&&Bl[0].y<=A4||A2<=Bl[1].y&&Bl[1].y<=A4);Bl[0].x=AF(Bl[0].x,A3,A9);Bl[0].y=AF(Bl[0].y,A2,A4);Bl[1].x=AF(Bl[1].x,A3,A9);Bl[1].y=AF(Bl[1].y,A2,A4);Bl=Ad(AU,D,W,R,U,Bl);if(Bl[0].x>Bl[1].x){A8=Bl[0].x;Bl[0].x=Bl[1].x;Bl[1].x=A8}if(Bl[0].y>Bl[1].y){A8=Bl[0].y;Bl[0].y=Bl[1].y;Bl[1].y=A8}Bj={x:Bl[0].x,y:Bl[0].y,width:Bl[1].x-Bl[0].x,height:Bl[1].y-Bl[0].y};if(AZ){if(Bj.width===0){Bj.width=0.5}if(Bj.height===0){Bj.height=0.5}}if(AT.showChartLabels){A6=Af(Bj,AY,Y,V)}Bc=A5.r?A5.r:AT.clusterRadius;if(Bc){X=A.extend(true,{},A5,{r:0})}if(P!=="none"&&Bi){Bi=parseInt(Bi,10)}if(!Bi||isNaN(Bi)){Bi=0}Bg=Bj.width-Bi;Bh=Bj.height-Bi;if(Bg<0){Bg=0}if(Bh<0){Bh=0}if(A0){if(A7===-1){if(AU){A7=p.x}else{A7=p.y+Z-Bi}}if(Bc){if(AU){Be=a.roundRect(Bj.x,Bj.y,Bg,Bh,0,0,Bc,Bc).hide();Bd=a.rect(A7,Bj.y,0,Bh)}else{Be=a.roundRect(Bj.x,Bj.y,Bg,Bh,Bc,0,0,Bc).hide();Bd=a.rect(Bj.x,A7,Bj.width,0)}Ay(Bd,A1);Bd.wijAttr(X);Bd.bar=Be}else{if(AU){Be=a.rect(A7,Bj.y,0,Bh)}else{Be=a.rect(Bj.x,A7,Bj.width,0)}Bd=Be}if(A6){A6.attr({opacity:0});Bd.chartLabel=A6}Bd.left=Bj.x;Bd.top=Bj.y;Bd.width=Bg;Bd.height=Bh;Bd.r=Bc}else{if(Bc){Be=a.roundRect(Bj.x,Bj.y,Bg,Bh,0,0,Bc,Bc)}else{Be=a.rect(Bj.x,Bj.y,Bg,Bh)}}Ay(Be,A1);if(A0&&Bc){Be.shadow&&Be.shadow.hide()}Be.wijAttr(A5);return{rect:Bj,dcl:A6,animatedBar:Bd,bar:Be}}function Aj(N,X,J,W,Y,Z,F,e,O,B){var T=AT.clusterOverlap/100,b=AT.clusterWidth/100,H=1,c=AT.clusterSpacing+H,P=N.length,V,U,Q=[],I=[],G=[],L=[],K=[],M=[],R=a.set();if(O||B){A.each(N,function(C,E){var D=A.extend(true,{},E);D.data&&D.data.y&&D.data.y.length&&O&&A.each(D.data.y,function(f,g){D.data.y[f]=A.toOADate(g)});D.data&&D.data.x&&D.data.x.length&&B&&A.each(D.data.x,function(f,g){D.data.x[f]=A.toOADate(g)});K.push(D)});V=At(K)}else{V=At(N)}if(AM){V=Ah(V)}U=Ai(V)*b;if(P>1&&!AM){T-=V.length*(P-1)*c/(AU?F:Z);U/=P*(1-T)+T}A.each(V,function(D,E){var j=E.paSpec,i=j.length,f,C,h,g;if(AM){f=U}else{f=U*(i*(1-T)+T)}C={x:E.x-f/2,y:0,width:U,height:j[0].y};A.each(j,function(d,m){if(!L[d]){L[d]=[]}if(!M[d]){M[d]=[]}var p=m.sIdx,n=X[p],l=N[p],q;g=Ab(C,m.y,F,W,Y,n,Ao,H,e,T,d>0?j[d-1].y:null,j[j.length-1].y,O,l.textStyle);h=g.bar;q=h.clone().attr({opacity:0.01,fill:"white","fill-opacity":0.01});AJ(A(h.node),"wijchart-canvas-object wijbarchart");A(h.node).data("wijchartDataObj",A.extend(true,{index:D,bar:h,type:"bar",style:n,hoverStyle:J[p],x:l.data.x[D],y:l.data.y[D]},l));A(q.node).data("owner",A(h.node));AJ(A(q.node),"wijbarchart bartracker");g.bar.tracker=q;R.push(q);I.push(h);g.animatedBar&&G.push(g.animatedBar);g.dcl&&Q.push(g.dcl);L[d][D]=g.rect;M[d][D]=g})});A.each(Q,function(C,D){D.toFront()});R.toFront();return{bars:I,animatedBars:G,rects:L,chartLabels:Q,seriesEles:M,trackers:R}}function Ak(G){var D=AT.seriesTransition,B,C,F=[],E;if(Ao){B=AG.duration||2000;C=AG.easing||"linear";A.each(G,function(J,I){var H=AU?{width:I.width,x:I.left}:{height:I.height,y:I.top};if(AN&&D.enabled){if(AN.length>J){E=A.wijchart.getDiffAttrs(AN[J],I.attr());if(AU){E.x=AN[J].x;E.width=AN[J].width}else{E.y=AN[J].y;E.height=AN[J].height}if(E.path){delete E.path}I.attr(E);B=D.duration;C=D.easing}}F.push(A.extend(true,{},I.attr(),H));I.tracker&&I.tracker.hide();I.stop().wijAnimate(H,B,C,function(){var M=this,L=M.r,K=M;M.chartLabel&&M.chartLabel.wijAnimate({opacity:1},250);if(M.tracker){M.tracker.show();M.tracker.attr({width:M.width,height:M.height,x:M.attr("x"),y:M.attr("y")})}if(L){K=M.bar;K.show();K.shadow&&K.shadow.show();if(M.shadow){M.shadow.wijRemove();M.shadow=null}M.wijRemove();M=null}})});AV.aniBarsAttr=F}}function Ae(){var B=A.isFunction;Ar&&Ar.setTargets(AP.bars);A(".wijbarchart",AX[0]).live("mousedown."+AO,function(E){if(AL){return}if(B(Aw)){var D=A(E.target),C;if(D.data("owner")){D=D.data("owner")}C=D.data("wijchartDataObj");Aw.call(AX,E,C)}}).live("mouseup."+AO,function(E){if(AL){return}if(B(Am)){var D=A(E.target),C;if(D.data("owner")){D=D.data("owner")}C=D.data("wijchartDataObj");Am.call(AX,E,C)}}).live("mouseover."+AO,function(E){if(AL){return}if(B(An)){var D=A(E.target),C;if(D.data("owner")){D=D.data("owner")}C=D.data("wijchartDataObj");An.call(AX,E,C)}}).live("mouseout."+AO,function(C){if(AL){return}var D=A(C.target),E,F;if(D.data("owner")){D=D.data("owner")}E=D.data("wijchartDataObj");F=E.bar;B(Al)&&Al.call(AX,C,E);if(!E.hoverStyle){F&&F.attr({opacity:"1"})}else{F.attr(E.style)}}).live("mousemove."+AO,function(C){if(AL){return}var D=A(C.target),E,F;if(D.data("owner")){D=D.data("owner")}E=D.data("wijchartDataObj");F=E.bar;B(Ax)&&Ax.call(AX,C,E);if(!E.hoverStyle){F&&F.attr({opacity:"0.8"})}else{F.attr(E.hoverStyle)}}).live("click."+AO,function(E){if(AL){return}if(B(As)){var D=A(E.target),C;if(D.data("owner")){D=D.data("owner")}C=D.data("wijchartDataObj");As.call(AX,E,C)}})}function Ag(){A(".wijbarchart",AX[0]).die(AO)}Ag();if(AU&&!AM){AE.reverse();Au.reverse();AA.reverse()}if(AK===0){return}AW=Aj(AE,Au,AA,{min:AR.min,max:AR.max,late:Ap,scale:AI},{min:AS.min,max:AS.max,late:Aq,scale:AB},AC,AH,AQ,Aa,Ac);AX.data("plotInfos",{xscale:AI,xlate:Ap,yscale:AB,ylate:Aq,rects:AW.rects});Ak(AW.animatedBars);AP.bars=AW.bars;AP.animatedBars=AW.animatedBars;AP.chartLabels=AW.chartLabels;AV.seriesEles=AW.seriesEles;AV.trackers=AW.trackers;if(!AV.chartElements){AV.chartElements={}}AU&&!AM&&AV.seriesEles.reverse();A.extend(true,AV.chartElements,AP);AX.data("fields",AV);Ae()}})})(jQuery);(function(A){if(!window.Raphael){return}A.widget("wijmo.wijlinechart",A.wijmo.wijchartcore,{options:{stacked:false,hole:null,type:"line",animation:{enabled:true,direction:"horizontal",duration:2000,easing:">"},seriesTransition:{enabled:true,duration:2000,easing:">"},mouseDown:null,mouseUp:null,mouseOver:null,mouseOut:null,mouseMove:null,click:null},_create:function(){var B=this,C=B.options;A.wijmo.wijchartcore.prototype._create.apply(B,arguments);B.chartElement.addClass("wijmo-wijlinechart");C.type==="area"&&B.chartElement.addClass("wijmo-wijareachart")},destroy:function(){var B=this,C=B.options;B.chartElement.removeClass("wijmo-wijlinechart");C.type==="area"&&B.chartElement.removeClass("wijmo-wijareachart");A.wijmo.wijchartcore.prototype.destroy.apply(B,arguments);if(B.aniPathsAttr&&B.aniPathsAttr.length){A.each(B.aniPathsAttr,function(D,E){E=null});B.aniPathsAttr=null}},getLinePath:function(E){var B=this,D=B.chartElement.data("fields"),F,C;if(D&&D.chartElements){F=D.chartElements;if(F.paths&&F.paths.length){return F.paths[E]}}return C},getLineMarkers:function(D){var C=this,B=C.options,E=C.chartElement.data("fields"),F,G;if(B.seriesList&&B.seriesList[D].markers&&B.seriesList[D].markers.visible){if(E&&E.chartElements){F=E.chartElements;if(F.markersSet&&F.markersSet.length){return F.markersSet[D]}}}return G},_showSerieEles:function(C){var B=this.options,D;C.markers&&A.each(C.markers,function(E,G){var F=A(G.node).data("wijchartDataObj");if(F&&F.lineSeries&&F.lineSeries.markers){if(!F.lineSeries.markers.visible){return true}}G.show()});C.dcl&&A.each(C.dcl,function(E,F){B.showChartLabels&&F.show()});if(C.path){D=A(C.path.node).data("wijchartDataObj");if(D.visible||D.display==="show"){C.path.show();C.path.shadow&&C.path.shadow.show();C.path.area&&C.path.area.show();C.path.tracker&&C.path.tracker.show()}}},_hideSerieEles:function(B){B.markers&&A.each(B.markers,function(C,D){D.hide()});B.dcl&&A.each(B.dcl,function(C,D){D.hide()});if(B.path){B.path.hide();B.path.shadow&&B.path.shadow.hide();B.path.area&&B.path.area.hide();B.path.tracker&&B.path.tracker.hide()}},_paintLegend:function(){var Q=this,F=Q.options,M=0,I=0,L=0,H=null,K=F.seriesList,D=F.seriesStyles,N=null,E=null,B=null,J=0,C=0,P=null,G=null,O=null;A.extend(true,F,{legend:{size:{width:30,height:3}}});A.wijmo.wijchartcore.prototype._paintLegend.apply(Q,arguments);if(F.legend.visible){if(Q.legends.length&&Q.legendIcons.length){for(M=0,I=Q.legendIcons.length;M<I;M++){H=Q.legendIcons[M];H.attr({fill:H.attr("stroke")})}}if(!F.legend.reversed){for(M=0,I=K.length;M<I;M++){N=K[M];E=D[M];if(N.legendEntry&&N.display!=="exclude"){if(N.markers&&N.markers.visible){H=Q.legendIcons[L];B=H.wijGetBBox();J=B.x+B.width/2;C=B.y+B.height/2;P=N.markerStyle;P=A.extend({fill:E.stroke,stroke:E.stroke,opacity:1},P);G=N.markers.type;if(!G){G="circle"}O=Q.canvas.paintMarker(G,J,C,3);A.wijraphael.addClass(A(O.node),"chart-legend-dot wijchart-legend");O.attr(P);A(O.node).data("index",M);Q.legendDots.push(O)}L++}}}else{for(M=K.length-1;M>=0;M--){N=K[M];E=D[M];if(N.legendEntry&&N.display!=="exclude"){if(N.markers&&N.markers.visible){H=Q.legendIcons[L];B=H.wijGetBBox();J=B.x+B.width/2;C=B.y+B.height/2;P=N.markerStyle;P=A.extend({fill:E.stroke,stroke:E.stroke,opacity:1},P);G=N.markers.type;if(!G){G="circle"}O=Q.canvas.paintMarker(G,J,C,3);A.wijraphael.addClass(A(O.node),"chart-legend-dot wijchart-canvas-object wijchart-legend");O.attr(P);A(O.node).data("index",M);Q.legendDots.push(O)}L++}}}}},_mouseDown:function(){A.wijmo.wijchartcore.prototype._mouseDown.apply(this,arguments)},_mouseUp:function(){A.wijmo.wijchartcore.prototype._mouseUp.apply(this,arguments)},_mouseOver:function(B,D){var C=this;if(!D||D.type!=="line"){return}A.wijmo.wijchartcore.prototype._mouseOver.apply(this,arguments);if(D.path.removed){return}if(C.hoverLine!==D){C.isNewLine=true;if(C.hoverLine){if(!C.hoverLine.path.removed){C.hoverLine.path.wijAttr(C.hoverLine.lineStyle);if(C.hoverPoint&&!C.hoverPoint.isSymbol){C.hoverPoint.marker.wijAttr(C.hoverPoint.markerStyle);C.hoverPoint.marker.transform("s1")}}}D.lineHoverStyle&&D.path.wijAttr(D.lineHoverStyle);C.hoverLine=D;C.hoverPoint=null}},_mouseOut:function(){A.wijmo.wijchartcore.prototype._mouseOut.apply(this,arguments)},_mouseMove:function(){A.wijmo.wijchartcore.prototype._mouseMove.apply(this,arguments)},_click:function(){A.wijmo.wijchartcore.prototype._click.apply(this,arguments)},_mouseMoveInsidePlotArea:function(F,C){var O=this,Q=O.tooltip,I=O.options.hint,R,T=0,M,U,G,H,B=null,P=null,J=null,E=I.title,D=I.content,K=A.isFunction(E),N=A.isFunction(D),L=0;if(Q){J=Q.getOptions()}if(O.hoverLine){if(O.isNewLine){I.enable&&Q&&Q.hide();O.isNewLine=false}R=O.hoverLine.lineMarkers;T=-1;M={x:0,y:0};A.each(R,function(Z,W){if(W.removed){return true}var Y=W.wijGetBBox(),V=Y.x+Y.width/2,X=Math.abs(V-C.left);if(Z===0||X<L){L=X;T=Z;M={x:V,y:Y.y+Y.height/2}}});if(O.hoverPoint&&O.hoverPoint.index===T){return}if(T>-1){if(R[T].removed){return}U=A(R[T].node).data("wijchartDataObj");if(U){if(O.hoverPoint&&!O.hoverPoint.isSymbol){if(!O.hoverPoint.removed){O.hoverPoint.marker.wijAttr(O.hoverPoint.markerStyle);O.hoverPoint.marker.transform("s1")}}if(!U.isSymbol){!U.marker.removed&&U.marker.wijAttr(U.markerHoverStyle)}}O.hoverPoint=U}if(Q){P=O.hoverPoint;G=P.valX;H=P.valY;if(K||N){if(K){J.title=function(){var W={pointIndex:T,lineIndex:P.lineSeries.index,x:G,y:H,label:P.lineSeries.label,data:P,fmt:E},V=A.proxy(W.fmt,W),X=V();return X}}if(N){J.content=function(){var W={pointIndex:T,lineIndex:P.lineSeries.index,x:G,y:H,label:P.lineSeries.label,data:P,fmt:D},X=A.proxy(W.fmt,W),V=X();return V}}}B=A.extend({stroke:O.hoverLine.path.attr("stroke")},I.style);J.style.stroke=B.stroke;Q.showAt(M)}}A.wijmo.wijchartcore.prototype._mouseMoveInsidePlotArea.apply(O,arguments)},_mouseMoveOutsidePlotArea:function(){var B=this;B._clearHoverState();A.wijmo.wijchartcore.prototype._mouseMoveOutsidePlotArea.apply(B,arguments)},_clearHoverState:function(){var D=this,B=D.tooltip,C=D.options.hint;C.enable&&B&&B.hide();if(D.hoverLine){if(!D.hoverLine.path.removed){D.hoverLine.path.wijAttr(D.hoverLine.lineStyle);if(D.hoverPoint&&!D.hoverPoint.isSymbol){D.hoverPoint.marker.wijAttr(D.hoverPoint.markerStyle);D.hoverPoint.marker.transform("s1")}}}D.hoverLine=null;D.hoverPoint=null},_paintPlotArea:function(){var C=this,D=C.options,B;if(!C.aniPathsAttr){C.aniPathsAttr=[]}B={bounds:C.canvasBounds,widgetName:C.widgetName,canvas:C.canvas,tooltip:C.tooltip,stacked:D.stacked,hole:D.hole,type:D.type,axis:D.axis,animation:D.animation,seriesTransition:D.seriesTransition,seriesList:D.seriesList,seriesStyles:D.seriesStyles,seriesHoverStyles:D.seriesHoverStyles,showChartLabels:D.showChartLabels,chartLabelStyle:D.chartLabelStyle,chartLabelFormatString:D.chartLabelFormatString,isXTime:C.axisInfo.x.isTime,isYTime:C.axisInfo.y.isTime,disabled:D.disabled,hint:D.hint,aniPathsAttr:C.aniPathsAttr,chartLabelEles:C.chartLabelEles,mouseDown:A.proxy(C._mouseDown,C),mouseUp:A.proxy(C._mouseUp,C),mouseOver:A.proxy(C._mouseOver,C),mouseOut:A.proxy(C._mouseOut,C),mouseMove:A.proxy(C._mouseMove,C),click:A.proxy(C._click,C)};C.chartElement.wijline(B)}})})(jQuery);(function(A){if(!window.Raphael){return}A.wijchart._line=function(Z,U){var W=this,F=U.bounds,P=U.widgetName,E=U.canvas,J=U.animation,G=U.seriesTransition,Aa=U.hint,Ab=U.tooltip,K=U.mouseDown,Ac=U.mouseUp,I=U.mouseOver,Ae=U.mouseOut,H=U.mouseMove,a=U.click,R=[],D=[],M=[],N=[],L=[],Ad=U.disabled,X=E.set(),Y=U.aniPathsAttr,O=[],Q,V=Z.data("fields")||{},T=[];W.render(U,O,Y,N,L,R,X,D,M,T);(J.enabled||G.enabled)&&W.playAnimation(J,G,X,F,N,Y);Y.length=0;A.each(O,function(B,C){Y.push(C)});W.unbindLiveEvents(Z,P);W.bindLiveEvents(Z,E,F,P,K,Ac,I,Ae,H,a,Ad,Aa,M,Ab);Q={paths:N,shadowPaths:L,markersSet:R,animationSet:X,symbols:D};if(!V.chartElements){V.chartElements={}}V.seriesEles=T;A.extend(true,V.chartElements,Q);Z.data("fields",V)};A.wijchart._line.prototype.playAnimation=function(I,F,D,E,C,B){var H=this,G=I.duration,J=I.easing;if(I.direction==="horizontal"){if(F.enabled){G=F.duration;J=F.easing}H.playHAnimation(G,J,D,E)}else{A.each(C,function(K,L){if(B&&B.length&&F.enabled){G=F.duration;J=F.easing;H.playVAnimation(L,B,K,G,J)}else{L.straight&&H.playVStraightAnimation(L,G,J)}})}};A.wijchart._line.prototype.playVAnimation=function(F,B,C,D,H){var G,E;F.shadow&&F.shadow.hide();F.tracker&&F.tracker.hide();G=B[C];E=A.wijchart.getDiffAttrs(G.path,F.attr());if(!A.isEmptyObject(E)){F.attr(G.path);F.wijAnimate(E,D,H,function(){F.shadow&&F.shadow.show();F.tracker&&F.tracker.show()})}A.each(F.markers,function(I,K){var J=A.wijchart.getDiffAttrs(G.markers[I],K.attr());if(!A.isEmptyObject(J)){K.attr(G.markers[I]);K.wijAnimate(J,D,H)}});F.labels&&A.each(F.labels,function(I,J){var K=A.wijchart.getDiffAttrs(G.labels[I],J.attr()),L=G.labels[I];if(L&&L.text){delete L.text}if(!A.isEmptyObject(K)){J.attr(L);J.wijAnimate(K,D,H)}});if(F.area){E=A.wijchart.getDiffAttrs(G.area,F.area.attr());if(!A.isEmptyObject(E)){F.area.attr(G.area);F.area.wijAnimate(E,D,H)}}};A.wijchart._line.prototype.playVStraightAnimation=function(E,G,B){var C,D,F;E.shadow&&E.shadow.hide();E.tracker&&E.tracker.hide();C=E.straight;D=E.attr().path;E.attr({path:C});E.wijAnimate({path:D},G,B,function(){E.shadow&&E.shadow.show();E.tracker&&E.tracker.show()});A.each(E.markers,function(I,J){if(J.straight){var H=J.attr().cy;J.attr({cy:J.straight});J.wijAnimate({cy:H},G,B)}});if(E.area){F=E.area;C=F.straight;D=F.attr().path;F.attr({path:C});F.wijAnimate({path:D},G,B)}};A.wijchart._line.prototype.playHAnimation=function(D,G,F,E){var B=E.endX-E.startX+20,C=E.endY-E.startY+20;F.wijAttr("clip-rect",E.startX-10+" "+(E.startY-10)+" 0 "+C);F.wijAnimate({"clip-rect":E.startX-10+" "+(E.startY-10)+" "+B+" "+C},D,G,function(){if(Raphael.vml){var H=null,J=null,I=this.node;if(I&&I.clipRect){H=this.attrs;delete H["clip-rect"];I.clipRect=null;J=A(I).parent();J.before(I);J.remove();this.attr(H)}}})};A.wijchart._line.prototype.render=function(AC,Af,As,AA,Ao,V,At,Ab,Y,W){var An=this,Ar=AC.bounds,Av=AC.canvas,Ap=AC.stacked,a=AC.hole,T=AC.type,Z=AC.axis,U=AC.animation,Aa=AC.seriesTransition,Ay=false,Aq=AC.seriesList,Ae=AC.seriesStyles,Ac=AC.seriesHoverStyles,Ah=AC.showChartLabels,Ad=AC.chartLabelStyle,Aj=AC.chartLabelFormatString,Al=AC.isXTime,Aw=AC.isYTime,Ai=AC.chartLabelEles,R,AE,AF,Ak,Am,AD,X=[],Ag=[],AG,Au,Ax,Az,AB;A.each(Aq,function(J,G){var D=[],B=[],H=[],K,F,I,E,L,C;if(G.display==="exclude"){return true}C=Ae[J];G=A.extend(true,{display:"show",fitType:"line",markers:{visible:false,type:"circle"},visible:true},G);K=G.data;F=A.extend({stroke:"black",opacity:1,fill:"none","stroke-linejoin":"round","stroke-linecap":"round"},C);E=G.markerStyle;E=A.extend({fill:F.stroke,stroke:F.stroke,opacity:1,width:3},E);I=Ac[J];L=A.extend(true,{},I,{transform:"s1.5","stroke-width":1},Aq.markerHoverStyle);Am=[].concat(K.x);AD=[].concat(K.y);Ax=Av.set();Au=[];Ak=G.fitType;Az=false;if(G.markers.symbol&&G.markers.symbol.length){Az=true}R=Av.set();if(!As||As.length===0||U.enabled&&!Aa.enabled){Ay=true}if(Ay){if(AD.length>0){AE=A.wijchart.getFirstValidListValue(AD);if(Aw){AE=A.toOADate(AE)}AF=A.wijchart.getLastValidListValue(AD);if(Aw){AF=A.toOADate(AF)}}}AB=An.processYValues(AD,G.display,a,Ap,X);A.each(AD,function(N,M){AG=Am[N];if(Al){AG=A.toOADate(AG)}M=AD[N];if(AB[N].isHole){if(G.display==="excludeHole"){return true}if(!AB[N].isValue){return true}}if(Aw){M=A.toOADate(M)}if(AG===undefined){return false}Au=An.renderPoint(Ar,Av,H,Au,Ax,D,At,R,B,Ai,Aj,Ay,AE,AF,AG,M,K.y[N],Z,Ak,Al,Aw,N,E,L,G,Az,Ah,Ab,Am,AD,AB,G.display,Ap)});An.renderPath(Av,Ar,G,AA,Ao,Y,I,E,L,Ax,V,At,Au,Af,H,F,Ad,D,B,R,J,T,Ag,Ap);W.push({markers:Ax,path:AA[AA.length-1],shadowPath:Ao[Ao.length-1],dcl:R})});A.each(AA,function(B,C){C.tracker&&C.tracker.toFront()})};A.wijchart._line.prototype.renderPath=function(Ai,Av,Aw,Y,P,Q,Aa,X,Z,Aq,N,a,As,V,Am,M,W,Ah,Ab,Ao,An,R,T,O){var At,Ag,U,Ak,Au,Aj,Ar,Ad,Ae,Ap,Af,Al,Ac;At=Ai.path(As.join(" "));At.straight=Am.join(" ");A.wijchart.paintShadow(At);if(An===0){T.length=0;if(As.length>1){Au=As[1];Aj=As[As.length-2]}else{Au=Av.startX;Aj=Av.endX}A.merge(T,["L",Au,Av.endY,"L",Aj,Av.endY])}Ar=Ai.path(As.join(" "));At.tracker=Ar;if(M["stroke-width"]){Ad=10+parseFloat(M["stroke-width"])}else{Ad=10}Ar.attr({"stroke-width":Ad,stroke:"#C0C0C0",opacity:0.01});A.wijraphael.addClass(A(Ar.node),"wijchart-canvas-object wijlinechart linetracker");A(Ar.node).data("owner",A(At.node));if(R==="area"){if(M.fill&&M.fill!=="none"){Ag=M.fill;delete M.fill}else{Ag=M.stroke}U=0.5;At.wijAttr(M);if(As.length>1){Au=As[1]}else{Au=Av.startX}if(O){if(An>0){Ap=Raphael.parsePathString(Y[An-1].attr("path"));if(Ap.length>0){for(Ac=Ap.length-1;Ac>=0;Ac--){Af=Ap[Ac];if(Af.length===3){As.push("L");As.push(Af[1]);As.push(Af[2])}}As.push("Z")}}else{As.push("V");As.push(Av.endY);As.push("H");As.push(Au);As.push("Z")}}else{Al=Raphael.parsePathString(At.attr("path"));if(Al.length>0){As=[];A.each(Al,function(B,C){A.each(C,function(D,E){As.push(E)});if(C[0]==="M"){Au=C[1]}if(B<Al.length-1&&Al[B+1][0]==="M"){As.push("V");As.push(Av.endY);As.push("H");As.push(Au);As.push("Z")}if(B===Al.length-1){As.push("V");As.push(Av.endY);As.push("H");As.push(Au);As.push("Z")}})}}Ak=Ai.path(As.join(" "));A.wijraphael.addClass(A(Ak.node),"wijlinechart-area");Ak.wijAttr({fill:Ag,opacity:U,stroke:"none"});Am.push("V");Am.push(Av.endY);Am.push("H");Am.push(Au);Am.push("Z");Ak.straight=Am.join(" ");At.area=Ak;a.push(Ak);V.push({path:A.extend(true,{},At.attr()),area:A.extend(true,{},Ak.attr()),markers:Ah,labels:Ab})}else{At.wijAttr(M);V.push({path:A.extend(true,{},At.attr()),markers:Ah,labels:Ab})}At.markers=Aq;Y.push(At);if(At.shadow){P[An]=At.shadow}a.push(At);Q[An]={lineStyle:M,lineHoverStyle:Aa,markerStyle:X,markerHoverStyle:Z};(!Aw.markers.visible||Aw.display==="hide")&&Aq.hide();if(!Aw.visible||Aw.display==="hide"){At.hide();At.shadow&&At.shadow.hide();At.area&&At.area.hide()}Aw.markers.style&&Aq.attr(Aw.markers.style);Aq.toFront();if(Ao.length){Ae=A.extend(true,{},W);if(Aw.textStyle){Ae=A.extend(true,Ae,Aw.textStyle)}Ao.attr(Ae);Ao.toFront();At.labels=Ao}N[An]=Aq;Aw.index=An;Aw.type="line";Aw.path=At;Aw.lineMarkers=Aq;Aw.lineStyle=M;Aw.lineHoverStyle=Aa;A.wijraphael.addClass(A(At.node),"wijchart-canvas-object wijlinechart");A(At.node).data("wijchartDataObj",Aw)};A.wijchart._line.prototype.renderPoint=function(AV,As,AD,AE,Ac,Aj,Aq,Al,Ap,Ak,Au,AG,Az,Ao,AN,AH,Ag,AP,Ae,Ab,Ay,AS,AF,Av,AA,An,Am,Ai,At,Ar,AM,Ad,Ah){var AC=this,a=AV.endX-AV.startX,Af=AV.endY-AV.startY,AJ=AP.x.min,AQ=AP.y.min,Aw=AP.x.max,Aa=AP.y.max,Ax=a/(Aw-AJ),AI=Af/(Aa-AQ),AB,Z,AO,AT=0,AU,AL,AR,AK;if(isNaN(AN)||typeof AN==="string"){AO=AS}else{AO=AN}AT=AV.startX+(AO-AJ)*Ax;AU=AV.endY-(AH-AQ)*AI;AM[AS].x=AT;AM[AS].y=AU;if(AG){AL=Az+(Ao-Az)/(Aw-AJ)*(AO-AJ);AL=AV.endY-(AL-AQ)*AI;AD.push(AM[AS].idx?"L":"M");AD.push(AT);AD.push(AL)}if(!AM[AS].isHole){AE=AC.getPathArrByFitType(AE,Ae,AS,Ar.length,AV,At,Ar,AT,AU,Ab,Ay,AN,AH,Ax,AI,AJ,AQ,AM,Ad,Ah)}if(Am){AK=AC.renderChartLabel(As,Ay,AH,Au,AT,AU);Ak.push(AK);Al.push(AK);Ap.push(A.extend(true,{},AK.attr()))}AB=AC.renderMarker(As,Ai,An,AA.markers,AS,AT,AU,AF);Z=AB.dot;if(AG){Z.straight=AL}AR={};AR.valX=At[AS];AR.valY=Ag;AR.marker=Z;AR.index=AS;AR.type="marker";AR.lineSeries=AA;AR.x=AT;AR.y=AU;AR.isSymbol=AB.isSymbol;AR.markerStyle=AF;AR.markerHoverStyle=Av;A(Z.node).data("wijchartDataObj",AR);Ac.push(Z);Aj.push(A.extend(true,{},Z.attr()));Aq.push(Z);return AE};A.wijchart._line.prototype.processYValues=function(I,D,B,H,F){var C=[],E=0,G=0;A.each(I,function(L,J){if(!E){G=L}var K={isHole:false,isValue:true,idx:E,firstYIdx:G,x:0,y:0};E++;if(A.wijchart.isHole(J,B)){if(H){I[L]=0}else{K.isHole=true;if(D==="excludeHole"){E--;K.idx=0}else{E=0;K.idx=0}if(!A.wijchart.isHole(B)&&J===B){K.isValue=true}else{K.isValue=false}}}C.push(K);if(H&&L<F.length){I[L]+=F[L]}});F.length=0;A.merge(F,I);return C};A.wijchart._line.prototype.renderMarker=function(E,G,H,K,I,C,D,N){var F,J=null,M=false,L,B;if(H){F=K.symbol;A.each(F,function(O,P){if(P.index===I){J=E.image(P.url,C-P.width/2,D-P.height/2,P.width,P.height);G.push(J);M=true;return false}})}if(J===null){L=K.type;B=N.width;J=E.paintMarker(L,C,D,B);K.visible&&J.attr(N)}A.wijraphael.addClass(A(J.node),"wijchart-canvas-object wijlinechart wijchart-canvas-marker");return{dot:J,isSymbol:M}};A.wijchart._line.prototype.renderChartLabel=function(D,I,H,J,E,C){var G,F,B;G=I?A.wijchart.fromOADate(H):H;if(J&&J.length){G=Globalize.format(G,J)}F=D.text(E,C,G);A.wijraphael.addClass(A(F.node),"wijlinechart-label");B=F.wijGetBBox();F.transform(Raphael.format("...T{0},{1}",0,-B.height));return F};A.wijchart._line.prototype.getAnchors=function(C,D,M,K,I,J){var G=(M-C)/2,H=(I-M)/2,L=Math.atan((M-C)/Math.abs(K-D)),P=Math.atan((I-M)/Math.abs(K-J)),B=0,N=0,E=0,O=0,F=0;L=D<K?Math.PI-L:L;P=J<K?Math.PI-P:P;B=Math.PI/2-(L+P)%(Math.PI*2)/2;N=G*Math.sin(B+L);E=G*Math.cos(B+L);O=H*Math.sin(B+P);F=H*Math.cos(B+P);return{x1:M-N,y1:K+E,x2:M+O,y2:K+F}};A.wijchart._line.prototype.getPathArrByFitType=function(Am,Ai,An,Ag,a,N,R,Aq,J,O,M,Ab,L,V,K,Aa,P,Ap,U,Ad){var Q=this,Z=null,Ac=0,W=0,X=0,Y=0,Aj=null,Al=null,T=Ap[An],Ak=false,Ae=T.idx,Ao,Ah=An-1,Af=An+1;if(U==="excludeHole"&&!Ad){if(An>0&&An<Ag-1){Af=-1;Ah=-1;for(Ao=An+1;Ao<Ag;Ao++){Ak=true;if(Ap[Ao].isHole){continue}Af=Ao;Ak=false;break}for(Ao=An-1;Ao>=0;Ao--){if(Ap[Ao].isHole){continue}Ah=Ao;break}if(Ah>-1){X=Ap[Ah].x;Ac=Ap[Ah].y}}}else{if(An<Ag-1){Ak=Ap[Af].isHole}if(An>0&&An<Ag-1){X=Ap[Ah].x;Ac=Ap[Ah].y}}if(Ad){Ai="line"}if(Ai==="line"){Am=Am.concat([Ae?"L":"M",Aq,J])}else{if(Ai==="spline"){if(!Ae){if(An===Ag-1){Am=Am.concat(["M",Aq,J])}else{if(Ak){Am=Am.concat(["M",Aq,J])}else{Am=Am.concat(["M",Aq,J,"C",Aq,J])}}}else{if(Ae&&An<Ag-1&&!Ak){Z=R[Af];if(M){Z=A.toOADate(Z)}W=a.endY-(Z-P)*K;if(isNaN(Ab)||typeof Ab==="string"){Y=a.startX+(Af-Aa)*V}else{Aj=N[Af];if(O){Aj=A.toOADate(Aj)}Y=a.startX+(Aj-Aa)*V}Al=Q.getAnchors(X,Ac,Aq,J,Y,W);Am=Am.concat([Al.x1,Al.y1,Aq,J,Al.x2,Al.y2])}else{Am=Am.concat([Aq,J,Aq,J])}}}else{if(Ai==="bezier"){if(!Ae){Am=Am.concat(["M",Aq,J])}else{if(An<Ag-1&&Ap[An+1].isHole&&Ae%2===1||An===Ag-1&&Ae%2===1){Am=Am.concat(["Q",Aq,J,Aq,J])}else{if(Ae%2===0){Am=Am.concat([Aq,J])}else{Am=Am.concat(["Q",Aq,J])}}}}}}return Am};A.wijchart._line.prototype.bindLiveEvents=function(K,I,J,O,M,E,G,H,N,F,B){var L={element:K,mousedown:function(P){if(B){return}var T=A(P.target),Q,R=null;if(T.data("owner")){T=T.data("owner")}Q=T.data("wijchartDataObj");if(T.hasClass("wijchart-canvas-marker")){R=Q.lineSeries;if(!R.markers.visible){M.call(K,P,R)}else{M.call(K,P,Q)}}else{M.call(K,P,Q)}},mouseup:function(T){if(B){return}var R=A(T.target),Q,P=null;if(R.data("owner")){R=R.data("owner")}Q=R.data("wijchartDataObj");if(R.hasClass("wijchart-canvas-marker")){P=Q.lineSeries;if(!P.markers.visible){E.call(K,T,P)}else{E.call(K,T,Q)}}else{E.call(K,T,Q)}},mouseover:function(V){if(B){return}var T=A(V.target),Q,P=null,R=null,U=0;if(T.data("owner")){T=T.data("owner")}Q=T.data("wijchartDataObj");if(T.hasClass("wijchart-canvas-marker")){P=Q.lineSeries;if(!P.markers.visible){G.call(K,V,P)}else{G.call(K,V,Q)}}else{G.call(K,V,Q)}},mouseout:function(T){if(B){return}var R=A(T.target),Q,P=null;if(R.data("owner")){R=R.data("owner")}Q=R.data("wijchartDataObj");if(R.hasClass("wijchart-canvas-marker")){P=Q.lineSeries;if(!P.markers.visible){H.call(K,T,P)}else{H.call(K,T,Q)}}else{H.call(K,T,Q)}},mousemove:function(T){if(B){return}var R=A(T.target),Q,P=null;if(R.data("owner")){R=R.data("owner")}Q=R.data("wijchartDataObj");if(R.hasClass("wijchart-canvas-marker")){P=Q.lineSeries;if(!P.markers.visible){N.call(K,T,P)}else{N.call(K,T,Q)}}else{N.call(K,T,Q)}},click:function(T){if(B){return}var R=A(T.target),Q,P=null;if(R.data("owner")){R=R.data("owner")}Q=R.data("wijchartDataObj");if(R.hasClass("wijchart-canvas-marker")){P=Q.lineSeries;if(!P.markers.visible){F.call(K,T,P)}else{F.call(K,T,Q)}}else{F.call(K,T,Q)}}},D=null,C=K.offset();A(".wijlinechart",K[0]).live("mousedown."+O,A.proxy(L.mousedown,L)).live("mouseup."+O,A.proxy(L.mouseup,L)).live("mouseover."+O,A.proxy(L.mouseover,L)).live("mouseout."+O,A.proxy(L.mouseout,L)).live("mousemove."+O,A.proxy(L.mousemove,L)).live("click."+O,A.proxy(L.click,L))};A.wijchart._line.prototype.unbindLiveEvents=function(C,B){A(".wijlinechart",C[0]).die(B)};A.fn.extend({wijline:function(B){new A.wijchart._line(this,B)}})})(jQuery);(function(A){A.widget("wijmo.wijpiechart",A.wijmo.wijchartcore,{options:{radius:null,innerRadius:0,animation:{enabled:true,duration:400,easing:">",offset:10},seriesTransition:{enabled:true,duration:1000,easing:"bounce"},mouseDown:null,mouseUp:null,mouseOver:null,mouseOut:null,mouseMove:null,click:null},_create:function(){var B=this,C=B._getDefFill();A.wijmo.wijchartcore.prototype._create.apply(B,arguments);B.chartElement.addClass("wijmo-wijpiechart");A.each(this.options.seriesStyles,function(D,E){if(!E.fill){E.fill=C[D]}})},destroy:function(){var F=this,C=F.chartElement,D=C.data("fields"),E=D&&D.sectors,B=D&&D.labels;C.removeClass("wijmo-wijpiechart");A.wijmo.wijchartcore.prototype.destroy.apply(this,arguments);E&&E.length&&A.each(E,function(G,H){H=null});B&&B.length&&A.each(B,function(G,H){H=null});C.data("fields",null)},_isPieChart:function(){return true},getSector:function(B){var C=this.chartElement.data("fields");return C&&C.chartElements?C.chartElements.sectors[B]:null},_getSeriesFromTR:function(D,B,C){var I=null,H=null,E=null,G=null,F=null;B.length&&B.each(function(){H=A("th",A(this));I=A.trim(H.text());E=A("td",A(this));if(E.length){G=parseFloat(A.trim(A(E[0]).text()))}F={label:I,legendEntry:true,data:G};C.push(F)})},_showSerieEles:function(C){var B=this.options.showChartLabels;if(C.sector){C.sector.show();C.sector.shadow&&C.sector.shadow.show();C.sector.tracker&&C.sector.tracker.show()}C.label&&B&&C.label.show()},_hideSerieEles:function(B){if(B.sector){B.sector.hide();B.sector.shadow&&B.sector.shadow.hide();B.sector.tracker&&B.sector.tracker.hide()}B.label&&B.label.hide()},_hasAxes:function(){return false},_mouseDown:function(){A.wijmo.wijchartcore.prototype._mouseDown.apply(this,arguments)},_mouseUp:function(){A.wijmo.wijchartcore.prototype._mouseUp.apply(this,arguments)},_mouseOver:function(){A.wijmo.wijchartcore.prototype._mouseOver.apply(this,arguments)},_mouseOut:function(){A.wijmo.wijchartcore.prototype._mouseOut.apply(this,arguments)},_mouseMove:function(){A.wijmo.wijchartcore.prototype._mouseMove.apply(this,arguments)},_click:function(){A.wijmo.wijchartcore.prototype._click.apply(this,arguments)},_paintTooltip:function(){var C=this,B=C.chartElement,D=B.data("fields");A.wijmo.wijchartcore.prototype._paintTooltip.apply(this,arguments);if(C.tooltip){if(D.trackers&&D.trackers.length){C.tooltip.setSelector(A(".wijchart-canvas-object",B[0]));C.tooltip.setOptions({relatedElement:D.trackers[0]})}}},_paintPlotArea:function(){var E=this,F=E.options,D=E.canvasBounds,B=D.endX-D.startX,G=D.endY-D.startY,C=F.radius;if(!C){C=Math.min(B,G)/2}else{if(B<2*C){C=B/2}if(G<2*C){C=G/2}}F.radius=C;D.startX+=B/2-C;D.endX=D.startX+2*C;D.startY+=G/2-C;D.endY=D.startY+2*C;E.chartElement.wijpie({canvas:E.canvas,tooltip:E.tooltip,bounds:D,radius:C,widgetName:E.widgetName,innerRadius:F.innerRadius,seriesList:F.seriesList,seriesStyles:F.seriesStyles,seriesHoverStyles:F.seriesHoverStyles,seriesTransition:F.seriesTransition,showChartLabels:F.showChartLabels,disabled:F.disabled,textStyle:F.textStyle,chartLabelStyle:F.chartLabelStyle,shadow:F.shadow,animation:F.animation,mouseDown:A.proxy(E._mouseDown,E),mouseUp:A.proxy(E._mouseUp,E),mouseOver:A.proxy(E._mouseOver,E),mouseOut:A.proxy(E._mouseOut,E),mouseMove:A.proxy(E._mouseMove,E),click:A.proxy(E._click,E)})},_getTooltipText:function(C,B){var E=A(B.node),D,F;if(E.data("owner")){E=E.data("owner")}D=E.data("wijchartDataObj");F={data:D,value:D.value,label:D.label,total:D.total,target:B,fmt:C};return A.proxy(C,F)()}})})(jQuery);(function(A){A.fn.extend({wijpie:function(AJ){var Al=function(D,B,C){AJ.shadow&&A.wijchart.paintShadow(D,B,C)},Aq=A.wijchart.getDiffAttrs,AA=A.wijraphael.addClass,Aw=A.wijraphael.getPositionByAngle,AK=this,Ah=AJ.bounds,AM=AJ.widgetName,AD=AJ.canvas,V=AJ.animation,Ap=AJ.seriesList,X=AJ.seriesStyles,Af=AJ.seriesHoverStyles,AH=AJ.radius,AF=AJ.innerRadius,AB=AJ.seriesTransition,Z=AJ.showChartLabels,Y=AJ.chartLabelStyle,AC=AJ.disabled,Am=AJ.mouseDown,Ab=AJ.mouseUp,Ad=AJ.mouseOver,Ae=AJ.mouseOut,An=AJ.mouseMove,Ai=AJ.click,Ac=AJ.tooltip,AN=AK.data("fields")||{},AI=AN.chartElements||{},At=AN.aniSectorAttrs,Au=AN.aniLabelAttrs,Aj=[],Ak=[],Ay=[],AG=[],Az=[],AE=0,Ar=0,a=Ah.startX,Aa=Ah.startY,Ao=[],As,AL,Av;function W(){var C={x:0,y:0},B=A.isFunction;Ac&&Ac.setTargets(Az);A(".wijpiechart",AK[0]).live("mousedown."+AM,function(F){if(AC){return}var E=A(F.target),D;if(E.data("owner")){E=E.data("owner")}D=E.data("wijchartDataObj");if(!D){return}B(Am)&&Am.call(AK,F,D)}).live("mouseup."+AM,function(F){if(AC){return}var E=A(F.target),D;if(E.data("owner")){E=E.data("owner")}D=E.data("wijchartDataObj");if(!D){return}B(Ab)&&Ab.call(AK,F,D)}).live("mouseover."+AM,function(I){if(AC){return}var J=A(I.target),F,H,D=V&&V.enabled,K,L,M,G,E;if(J.data("owner")){J=J.data("owner")}F=J.data("wijchartDataObj");if(!F){return}H=F.pieID||"";K=F.index;L=AK.data("fields").chartElements["sectors"+H][K];M=L.showAnimationTimer;G=L.hideAnimationTimer;E=L.explodeAnimationShowing;B(Ad)&&Ad.call(AK,I,F);if(L.removed){return}L.wijAttr(F.hoverStyle);if(D){if(G){window.clearTimeout(G);G=null;L.hideAnimationTimer=G}if(M){window.clearTimeout(M);M=null;L.showAnimationTimer=null}if(E){return}M=window.setTimeout(function(){var O=V.duration,N=V.easing;if(L.removed){return}C=L.getOffset(V.offset||10);L.offset=C;L.wijAnimate({transform:Raphael.format("t{0},{1}",C.x,C.y)});L.tracker&&!L.tracker.removed&&L.tracker.wijAnimate({transform:Raphael.format("t{0},{1}",C.x,C.y)});E=true;L.explodeAnimationShowing=E},150);L.showAnimationTimer=M}}).live("mouseout."+AM,function(I){if(AC){return}var J=A(I.target),M,H,D=V&&V.enabled,K,L,G,F,E;if(J.data("owner")){J=J.data("owner")}M=J.data("wijchartDataObj");if(!M){return}H=M.pieID||"";K=M.index;L=AK.data("fields").chartElements["sectors"+H][K];G=L.showAnimationTimer;F=L.hideAnimationTimer;E=L.explodeAnimationShowing;B(Ae)&&Ae.call(AK,I,M);if(L.removed){return}if(M.style.segment){delete M.style.segment}L.wijAttr(M.style);if(D){if(F){window.clearTimeout(F);F=null;L.hideAnimationTimer=F}if(G){window.clearTimeout(G);G=null;L.showAnimationTimer=G}if(!E){return}F=window.setTimeout(function(){var O=V.duration,N=V.easing;C=L.offset;!L.removed&&L.wijAnimate({transform:"t0,0"});L.tracker&&!L.tracker.removed&&L.tracker.wijAnimate({transform:"t0,0"});C={x:0,y:0};E=false;L.explodeAnimationShowing=E},150);L.hideAnimationTimer=F}}).live("mousemove."+AM,function(F){if(AC){return}var E=A(F.target),D;if(E.data("owner")){E=E.data("owner")}D=E.data("wijchartDataObj");if(!D){return}B(An)&&An.call(AK,F,D)}).live("click."+AM,function(F){if(AC){return}var E=A(F.target),D;if(E.data("owner")){E=E.data("owner")}D=E.data("wijchartDataObj");if(!D){return}B(Ai)&&Ai.call(AK,F,D)})}function Ag(){A(".wijpiechart",AK[0]).die(AM)}AD.customAttributes.segment=function(C,D,I,E,H,G){var B=null,F=0.01;if(E-I>360-F){E-=F}else{if(E-I<F){E+=F}}if(G){B=A.wijchart.donut(C,D,H,G,I,E)}else{B=A.wijchart.sector(C,D,H,I,E)}return{path:B}};A.each(Ap,function(B,C){if(C&&typeof C.data==="number"){Ar+=C.data}});var Ax=AD.set();A.each(Ap,function(B,P){var J=A.extend({opacity:1,stroke:"gray","stroke-width":1},X[B]),C=360*P.data/Ar,M=a+AH,K=Aa+AH,D,O,Q,L,R,N;Av=P.pieID;P=A.extend(true,{offset:0},P);if(P.offset){D=Aw(M,K,P.offset,AE+C/2);M=D.x;K=D.y}As=[M,K,AE,AE+C,AH,AF].concat(" ");if(At&&AB.enabled){J.segment=As;if(B<At.length){AL=At[B]}else{AL=A.extend(true,{},J);AL.segment=[M,K,0,360,AH,AF].concat(" ")}O=AD.path().attr(AL);J=Aq(AL,J);!O.removed&&O.wijAnimate(J,AB.duration,AB.easing,function(){Al(O);N&&!N.removed&&!O.removed&&N.attr({path:O.attr("path")});delete J.segment})}else{O=AD.path().attr({segment:As});Al(O);O.wijAttr(J)}O.angles={start:AE,end:AE+C};O.getOffset=function(E){var F=Aw(M,K,E,(O.angles.start+O.angles.end)/2);return{x:F.x-M,y:F.y-K}};O.center={x:M,y:K};O.radius=AH;if(AF){O.innerRadius=AF}N=O.clone().attr({opacity:0.01,fill:"white","fill-opacity":0.01});AA(A(N.node),"wijchart-canvas-object wijpiechart pietracker wijchart-tracker"+B);A(N.node).data("owner",A(O.node));O.tracker=N;Ax.push(N);AA(A(O.node),"wijchart-canvas-object wijpiechart");A(O.node).data("wijchartDataObj",P);if(Z){L=Aw(M,K,P.offset+AH*2/3,AE+C/2);R=A.extend(true,{},R,Y);if(P.textStyle){R=A.extend(true,R,P.textStyle)}if(Au&&AB.enabled){if(B<Au.length){AL=Au[B];AL.text=P.label;Q=AD.text(0,0,"").attr(AL);R=Aq(AL,R);R.x=L.x;R.y=L.y;Q.wijAnimate(R,AB.duration,AB.easing)}else{Q=AD.text(L.x,L.y,P.label).attr(R)}}else{Q=AD.text(L.x,L.y,P.label).attr(R)}AA(A(Q.node),"wijchart-canvas-object wijpiechart");A(Q.node).data("wijchartDataObj",P);Az.push(Q);AG.push(Q);Ak[B]=Q.attr()}Ao.push({label:AG[B],sector:O});Aj[B]=O.attr();Ay.push(O);Az.push(O);P.style=J;P.hoverStyle=Af[B];P.index=B;P.value=P.data;P.y=P.data;P.total=Ar;P.type="pie";AE+=C});AI.sectors=Ay;if(Av){AI["sectors"+Av]=Ay;AI["labels"+Av]=AG}AI.labels=AG;if(!AN.chartElements){AN.chartElements={}}Ax.toFront();A.extend(true,AN.chartElements,AI);AN.aniSectorAttrs=Aj;AN.aniLabelAttrs=Ak;AN.seriesEles=Ao;AN.trackers=Ax;AK.data("fields",AN);Ag();W()}})})(jQuery);(function(A){A.widget("wijmo.wijtree",{options:{allowDrag:false,allowDrop:false,allowEdit:false,allowSorting:true,allowTriState:true,autoCheckNodes:true,autoCollapse:false,disabled:false,expandCollapseHoverUsed:false,showCheckBoxes:false,showExpandCollapse:true,expandAnimation:{effect:"blind",easing:"easeOutExpo",duration:200},expandDelay:0,collapseAnimation:{effect:"blind",easing:"easeOutExpo",duration:200},collapseDelay:0,draggable:null,droppable:null,dropVisual:null,nodeBlur:null,nodeClick:null,nodeCheckChanged:null,nodeCollapsed:null,nodeExpanded:null,nodeDragging:null,nodeDragStarted:null,nodeBeforeDropped:null,nodeDropped:null,nodeMouseOver:null,nodeMouseOut:null,nodeTextChanged:null,selectedNodeChanged:null},_create:function(){this._initState();this._createTree();this._attachEvent();this._attachNodeEvent()},_setOption:function(F,E){var D=this,C=false,B;switch(F){case"allowDrag":D._setAllowDrag(E);break;case"allowDrop":D._setAllowDrop(E);break;case"showCheckBoxes":D._setCheckBoxes(E);break;case"showExpandCollapse":if(D.options.showExpandCollapse!==E){C=true}break;case"disabled":if(E){D.widgetDom.addClass("ui-state-disabled")}else{D.widgetDom.removeClass("ui-state-disabled")}B=D.element.find(":wijmo-wijtreecheck");B.length&&B.wijtreecheck("option","disabled",E)}A.Widget.prototype._setOption.apply(D,arguments);C===true&&D._setHitArea(E)},_initState:function(){var B=this;B._selectedNodes=[];B._checkedNodes=[];B._enabled=true;B._insertPosition="unKnown";B.nodeWidgetName="wijtreenode"},_createTree:function(){var D=this,C=D.options,E=[],B="wijmo-wijtree ui-widget ui-widget-content ui-helper-clearfix ui-corner-all";if(D.element.is("ul")){D.$nodes=D.element;D.element.wrap("<div></div>");D.widgetDom=D.element.parent()}else{if(D.element.is("div")){D.widgetDom=D.element;D.$nodes=D.widgetDom.children("ul:eq(0)")}}if(D.$nodes.length){D.widgetDom.addClass(B).attr({role:"tree","aria-multiselectable":true});D.$nodes.addClass("wijmo-wijtree-list ui-helper-reset");E=D._createChildNodes();D._hasChildren=E.length>0;D._setField("nodes",E);D.nodes=E;D.widgetDom.append(A("<div>").css("clear","both"))}C.disabled&&D.disable()},_createChildNodes:function(){var C=this,B={},D=[];C.$nodes.children("li").each(function(){var E=A(this);C._createNodeWidget(E,B);D.push(C._getNodeWidget(A(this)))});return D},_createNodeWidget:function(E,D){var C=this,B=C.nodeWidgetName;if(A.fn[B]){E.data("owner",this);if(!!D&&A.isPlainObject(D)){A.extend(D,{treeClass:this.widgetBaseClass});E[B](D)}else{E[B]({treeClass:this.widgetBaseClass})}}return E},_attachEvent:function(){var B=this;B.element.bind(A.browser.msie?"focusin.":"focus."+B.widgetName,A.proxy(B._onFocus,B)).bind("mouseover."+this.widgetName,A.proxy(B._onMouseOver,B));B.options.allowDrop&&B._attachDroppable()},_attachDroppable:function(){var D=this,C=D.options,B={accept:"li",scope:"tree"},F=function(G){C.showCheckBoxes&&C.allowTriState&&!G.element.is(":"+D.widgetBaseClass)&&G._getField("nodes").length>0&&G._getField("nodes")[0]._setParentCheckState()},E=C.droppable;A.extend(B,E);B.drop=function(N,R){var O=R.draggable,Q=D._getNodeWidget(O),I,J,G,K,H,P,M,L=-1;if(D._trigger("nodeBeforeDropped",N,R)===false||!Q){return}I=Q._dropTarget;J=Q._insertPosition;if(I&&J!=="unKnown"){G=O.data("owner");if(G){M=O.index()}if(J==="end"){L=I._getField("nodes").length;K=I}else{if(J==="before"||J==="after"){K=I._getField("owner");H=K._getField("nodes");P=A.inArray(I,H);if(P!==-1){L=J==="before"?P:P+1}}}if(E&&A.isFunction(E.drop)){R.oldParent=G.element;R.newParent=K.element;R.oldIndex=M;R.newIndex=L;E.drop.call(D.element,N,R)}else{G&&G.remove(O);L!==-1&&K.add(O,L)}A("a:eq(0)",O).blur();Q._tree._isDragging=false;Q.options.selected&&Q._setSelected(false);F(G);F(K);A.extend(R,{sourceParent:G?G.element:null,sIndex:M,targetParent:K.element,tIndex:L,widget:Q});D._trigger("nodeDropped",N,R)}};D.widgetDom.droppable(B)},_attachNodeEvent:function(){this.element.bind("click."+this.widgetName,A.proxy(this._onClick,this)).bind("mouseout."+this.widgetName,A.proxy(this._onMouseOut,this)).bind("keydown."+this.widgetName,A.proxy(this._onKeyDown,this))},_onClick:function(B){this._callEvent(B,"_onClick");A.browser.webkit&&this.widgetDom.focus()},_onFocus:function(B){this._callEvent(B,"_onFocus")},_onKeyDown:function(B){this._callEvent(B,"_onKeyDown")},_onMouseOut:function(B){this._callEvent(B,"_onMouseOut")},_onMouseOver:function(B){this._callEvent(B,"_onMouseOver")},_callEvent:function(C,B){var D=C.target,E;if(D){E=this._getNodeWidgetByDom(D);if(E===null){return}E[B](C)}},_nodeSelector:function(){return":wijmo-wijtreenode"},getSelectedNodes:function(){return this._selectedNodes},getCheckedNodes:function(){var C=this,B=[],D=C.nodeWidgetName;A(C._nodeSelector(),C.element).each(function(){A(this)[D]("option","checked")&&A(this)[D]("option","checkState")!=="indeterminate"&&B.push(A(this))});return B},destroy:function(){var C=this,D=C.$nodes,B="wijmo-wijtree ui-widget ui-widget-content ui-helper-clearfix ui-corner-all";C.widgetDom.removeClass(B).removeAttr("role").removeAttr("aria-multiselectable");C.widgetDom.data("droppable")&&C.widgetDom.droppable("destroy");C.widgetDom.children("div[style]:last").remove();D.removeData("nodes").removeClass("wijmo-wijtree-list ui-helper-reset");D.children("li").each(function(){var E=C._getNodeWidget(A(this));E&&E.destroy()});A.Widget.prototype.destroy.apply(this)},add:function(H,J){var I=null,D={},L,K,B=this,E,F,G="<li><a href='{0}'>{1}</a></li>",C;if(typeof H==="string"){L=A(G.replace(/\{0\}/,"#").replace(/\{1\}/,H));B._createNodeWidget(L,D);I=L.data(L.data("widgetName"))}else{if(H.jquery){!H.data("widgetName")&&B._createNodeWidget(H,D);I=H.data(H.data("widgetName"))}else{if(H.nodeType){L=A(H);B._createNodeWidget(L,D);I=L.data(L.data("widgetName"))}else{if(A.isPlainObject(H)){L=A(G.replace(/\{0\}/,H.url).replace(/\{1\}/,H.text));B._createNodeWidget(L,H);I=L.data(L.data("widgetName"))}}}}if(I===null){return}K=B._getField("nodes");if(!J||J>K.length){J=K.length}C=I._getField("nodes");I._tree=B;for(E=0;E<C.length;E++){C[E]._tree=B}I._setField("owner",this);F=K.length;if(F>0&&F!==J){I.element.get(0)!==K[J].element.get(0)&&I.element.insertBefore(K[J].element)}else{B.$nodes.append(I.element)}B._changeCollection(J,I);B._refreshNodesClass()},remove:function(C){var E=-1,B,D;if(C.jquery){E=C.index()}else{if(typeof C==="number"){E=C}}D=this._getField("nodes");if(E<0||E>=D.length){return}B=D[E];B.element.detach();this._changeCollection(E);this._refreshNodesClass()},_changeCollection:function(C,D){var B=this._getField("nodes");if(D){B.splice(C,0,D)}else{B.splice(C,1)}},getNodes:function(){return this.nodes},findNodeByText:function(C){var B=A(".wijmo-wijtree-node a>span",this.$nodes).filter(function(){return A(this).text()===C});return B.length?this._getNodeWidgetByDom(B.get(0)):null},_setAllowDrag:function(F){var E=this,D,B=E._nodeSelector(),C=E.nodeWidgetName;if(F){D=E.element.find(B);D.each(function(){var G=A(this).data(C);if(!A(this).data("draggable")&&!G.$navigateUrl.data("events").mousedown){G.$navigateUrl.one("mousedown",G,G._onMouseDown)}})}else{D=E.element.find(B+":ui-draggable");D.draggable("destroy")}},_setAllowDrop:function(B){if(B){!this.widgetDom.data("droppable")&&this._attachDroppable()}else{this.widgetDom.droppable&&this.widgetDom.droppable("destroy")}},_setCheckBoxes:function(C){var B=this;B.$nodes.children("li").each(function(){var D=B._getNodeWidget(A(this));D!==null&&D._setCheckBoxes(C)})},_setHitArea:function(C){var B=this;B.$nodes.children("li").each(function(){var D=B._getNodeWidget(A(this));D!==null&&D._setHitArea(C)})},_getNodeWidget:function(B){return B.is(this._nodeSelector())?B.data(B.data("widgetName")):null},_getNodeWidgetByDom:function(B){var C=this._getNodeByDom(B);return this._getNodeWidget(C)},_getNodeByDom:function(B){return A(B).closest(this._nodeSelector())},_refreshNodesClass:function(){for(var B=this._getField("nodes"),C=0;C<B.length;C++){B[C]._initNodeClass()}},_getField:function(B){return this.element.data(B)},_setField:function(B,C){return this.element.data(B,C)}})})(jQuery);(function(A){A.widget("wijmo.wijtreenode",{options:{accessKey:"",checked:false,collapsedIconClass:"",expanded:false,expandedIconClass:"",itemIconClass:"",navigateUrl:"",selected:false,text:"",toolTip:""},_setOption:function(C,E){var D=this,B;switch(C){case"accessKey":D.$navigateUrl!==null&&D.$navigateUrl.attr("accesskey",E);break;case"checked":D._checkState=E?"checked":"unChecked";D._setChecked(E);break;case"collapsedIconClass":case"expandedIconClass":case"itemIconClass":D.options[C]=E;D._initNodeImg();break;case"expanded":D._setExpanded(E);break;case"selected":D._setSelected(E);break;case"text":D._setText(E);break;case"toolTip":D._setToolTip(E);break;case"navigateUrl":D._setNavigateUrlHref(E);break;case"disabled":if(D._isClosestDisabled()&&E===true){return}B=D.element.find(":wijmo-wijtreecheck");B.length&&B.wijtreecheck("option","disabled",E)}A.Widget.prototype._setOption.apply(D,arguments)},_initState:function(){this._tree=null;this._dropTarget=null;this._checkState="unChecked";this._value=this._text=this._navigateUrl="";this._insertPosition="unKnown";this._hasNodes=false},_create:function(){this._initState();this._createTreeNode();this._initNode();this.element.data("widgetName",this.widgetName)},_createTreeNode:function(){var D=this.element,C=this,B=[];this.$navigateUrl=D.children("a");if(C._tree===null){C._tree=C._getTree()}C.$nodeBody=null;C.$checkBox=null;C.$nodeImage=A("<span>");C.$hitArea=null;C.$nodes=null;C.$nodeBody=A("<div>").attr({role:"treeitem","aria-expanded":false,"aria-checked":false,"aria-selected":false});if(C._tree.options.showCheckBoxes===true){C.$checkBox=A("<div>")}if(C.$navigateUrl.length===0){C.$navigateUrl=D.children("div");C.$navigateUrl.addClass("wijmo-wijtree-template");C._isTemplate=true}if(C.$navigateUrl.length===0){C.$navigateUrl=A("<a>");C.$navigateUrl.attr("href","#")}if(!C._isTemplate){C.$text=C.$navigateUrl.find("span:eq(0)");if(C.$text.length===0){C.$navigateUrl.wrapInner("<span></span>");C.$text=C.$navigateUrl.find("span:eq(0)")}}C._hasChildren=C._getChildren();C.$inner=A("<span></span>").addClass("ui-helper-clearfix wijmo-wijtree-inner ui-corner-all");B=C._createChildNodes(D);C.$inner.append(C.$nodeImage);if(C.$checkBox!==null){C.$inner.append(C.$checkBox);C.$checkBox.wijtreecheck()}C.$inner.append(C.$navigateUrl);C.$nodeBody.append(C.$inner);C._setField("nodes",B);D.prepend(C.$nodeBody)},_createChildNodes:function(D){var C=this,B=[];if(C._hasChildren){D.addClass("wijmo-wijtree-parent");C.$nodeBody.addClass("wijmo-wijtree-node wijmo-wijtree-header ui-state-default");C.$hitArea=A("<span>");C.$inner.prepend(C.$hitArea);C.$nodes=D.find("ul:eq(0)").addClass("wijmo-wijtree-list ui-helper-reset wijmo-wijtree-child");B=C._createChildNode()}else{D.addClass("wijmo-wijtree-item");C.$nodeBody.addClass("wijmo-wijtree-node ui-state-default")}return B},_createChildNode:function(){var B=this,C=[];B.$nodes.children().filter("li").each(function(F){var E=A(this),D;E.data("owner",B);E.wijtreenode(B.options);D=B._getNodeWidget(E);D._index=F;C.push(D)});return C},_initNode:function(){var C=this,B=C.options;if(!C._initialized){C._initialized=true;C._initNavigateUrl();if(!C._isTemplate&&C.$text){C._text=C.$text.html();B.text=C.$text.html()}C._hasChildren=C._getChildren();C._initNodesUL();C._initNodeClass();C._initNodeImg();C._initCheckBox();C.$navigateUrl.one("mousedown",C,C._onMouseDown)}},_initNodeClass:function(){var C=this,D=C.options,B="ui-icon "+(D.expanded?"ui-icon-triangle-1-se":"ui-icon-triangle-1-e");if(C._tree.options.showExpandCollapse){if(C._hasChildren||!!D.hasChildren){if(C.$hitArea!==null){C.$hitArea.removeClass("ui-icon ui-icon-triangle-1-se ui-icon-triangle-1-e").addClass(B)}else{C.$hitArea=A("<span>").addClass(B).prependTo(C.$inner);C.element.removeClass("wijmo-wijtree-node ui-state-default ui-corner-all").addClass("wijmo-wijtree-parent")}C._hasChildren&&C.$nodes[D.expanded?"show":"hide"]()}else{if(C.$hitArea){C.$hitArea.remove();C.$hitArea=null;C.element.removeClass("wijmo-wijtree-parent").addClass("wijmo-wijtree-node ui-state-default ui-corner-all")}}}D.selected&&C.$inner&&C.$inner.addClass("ui-state-active")},_initCheckBox:function(){var C=this,B=C.options;if(C.$checkBox&&B.checkState){switch(B.checkState){case"checked":C.$checkBox.wijtreecheck("option","checkState","check");break;case"indeterminate":C.$checkBox.wijtreecheck("option","checkState","triState");break;case"unChecked":C.$checkBox.wijtreecheck("option","checkState","unCheck");break;default:C.$checkBox.wijtreecheck("option","checkState","unCheck")}}},_initNodesUL:function(){var B=this;if(B._tree.options.showExpandCollapse){B._hasChildren&&B.$nodes[B._expanded?"show":"hide"]()}},_initNavigateUrl:function(){var C=this,B=C.$navigateUrl.attr("href");C.$navigateUrl.bind("blur."+C.widgetName,C,C._onBlur);if(!this._isTemplate){C._navigateUrl=!!B?B:"";C._setNavigateUrlHref(B)}},_initNodeImg:function(){var C=this,D=C.options,B=C.element;if(C.$nodeImage===null||!C.$nodeImage.length){C.$nodeImage=A("<span>")}if(B.attr("expandediconclass")){D.expandedIconClass=B.attr("expandediconclass");B.removeAttr("expandediconclass")}if(B.attr("collapsediconclass")){D.collapsedIconClass=B.attr("collapsediconclass");B.removeAttr("collapsediconclass")}if(B.attr("itemiconclass")){D.itemIconClass=B.attr("itemiconclass");B.removeAttr("itemiconclass")}if(D.collapsedIconClass!==""&&D.expandedIconClass!==""){C.$nodeImage.removeClass().addClass("ui-icon").addClass(D.expanded?D.expandedIconClass:D.collapsedIconClass);!C._tree.options.showExpandCollapse&&C.$nodeImage.addClass(D.expandedIconClass);C.$nodeImage.insertBefore(C.$checkBox)}else{if(D.itemIconClass!==""){C.$nodeImage.removeClass().addClass("ui-icon");C.$nodeImage.addClass(D.itemIconClass);C.$nodeImage.insertBefore(C.$checkBox)}}},_setNavigateUrlHref:function(B){if(this.$navigateUrl){if(B===""||typeof B==="undefined"){B="#"}this.$navigateUrl.attr("href",B)}},_editNode:function(){this._tree._editMode=true;this.$navigateUrl.hide();if(!this.$editArea){this.$editArea=A('<input type="text">').wijtextbox()}this.$editArea.val(this.$text.html());this.$editArea.insertBefore(this.$navigateUrl);this.$editArea.bind("blur",this,this._editionComplete);this.$editArea.focus()},_editionComplete:function(C){var D=C.data,B;D._tree._editMode=false;if(D.$editArea){B=D.$editArea.val();D.$editArea.remove()}D.$navigateUrl.show();D.$editArea=null;D._changeText(B)},_changeText:function(B){var D=this,C=D.options;if(D.$text!==null&&B!==""){D.$text.text(B);C.text=B;D._tree._trigger("nodeTextChanged",null,D)}},_expandCollapseItem:function(){var C=this,B=C.options;if(!C._tree.options.disabled&&!C._isClosestDisabled()){(C._hasChildren||B.hasChildren)&&C._setExpanded(!B.expanded)}},_expandNode:function(C){var D=this,B=D._tree.options;if(!B.disabled&&!D._isClosestDisabled()){if(C){if(B.expandDelay>0){if(typeof D._expandTimer!=="undefined"){D._expandTimer=window.clearTimeout(D._expandTimer)}D._expandTimer=window.setTimeout(function(){D._expandNodeVisually()},B.expandDelay)}else{D._expandNodeVisually()}}else{if(B.collapseDelay>0){D._collapseTimer=window.clearTimeout(D._collapseTimer);D._collapseTimer=window.setTimeout(function(){D._collapseNodeVisually()},B.collapseDelay)}else{D._collapseNodeVisually()}}}},_expandNodeVisually:function(){var C=this,B,D=C.options;if(C._tree.options.autoCollapse){B=C.element.siblings(":"+this.widgetBaseClass);A.each(B,function(E){var F=C._getNodeWidget(B[E]);F.options.expanded&&F._setExpanded(false)})}D.collapsedIconClass!==""&&D.expandedIconClass!==""&&C.$nodeImage.removeClass(D.collapsedIconClass).addClass(D.expandedIconClass);C._internalSetNodeClass(true);C._show()},_collapseNodeVisually:function(){var B=this;B.options.collapsedIconClass!==""&&B.options.expandedIconClass!==""&&B.$nodeImage.removeClass(B.options.expandedIconClass).addClass(B.options.collapsedIconClass);B._internalSetNodeClass(false);B._hide()},_internalSetNodeClass:function(B){this.$hitArea.removeClass("ui-icon ui-icon-triangle-1-se ui-icon-triangle-1-e").addClass("ui-icon "+(B?"ui-icon-triangle-1-se":"ui-icon-triangle-1-e"))},_show:function(){this._animation(true)},_hide:function(){this._animation(false)},_animation:function(C){var F=this,D=F.$nodes,B=C?"expandAnimation":"collapseAnimation",E=C?"nodeExpanded":"nodeCollapsed",H,G=F._tree.options[B];if(D){if(G){H=G.animated||G.effect;if(A.effects&&!!H){D[C?"show":"hide"](H,{},G.duration,function(){F._tree._trigger(E,null,F)})}else{D[C?"show":"hide"](G.duration,function(){F._tree._trigger(E,null,F)})}}else{D[C?"show":"hide"]();F._tree._trigger(E,null,F)}}},_getBounds:function(F){var D=F.height(),C=F.width(),B=F.offset().top,E=F.offset().left;return{h:D,w:C,t:B,l:E}},_isMouseInsideRect:function(B,C){return B.x<C.l||B.x>=C.l+C.w?false:B.y<=C.t+1||B.y>=C.t+C.h?false:true},_getNodeByMouseOn:function(B){A("li").each(function(){var C=this._getBounds(A(this));if(A.ui.isOver(B.y,B.x,C.t,C.l,C.h,C.w)){return A(this)}});return null},_drowTemplate:function(D,C,B){var E="unKnown",G=B.is(".wijmo-wijtree-node")?B:B.children(".wijmo-wijtree-node"),F=this._getBounds(G);C.width(G.width());if(D.y>F.t&&D.y<F.t+F.h/2){C.offset({left:F.l,top:F.t});E="before"}else{if(D.y>F.t+F.h/2&&D.y<F.t+F.h){C.offset({left:F.l,top:F.t+F.h});E="after"}}return E},_beginDrag:function(D){var E=this,C=E.element,B,H=E._tree.options,I=H.draggable,G={cursor:"point",cursorAt:{top:15,left:-25},helper:function(){return A("<div>"+E.$navigateUrl.html()+"</div>").addClass("ui-widget-header ui-corner-all")},distance:A.browser.msie?1:10,handle:E.$navigateUrl,scope:"tree"},F=A("<div>").addClass("wijmo-wijtree-insertion ui-state-default");if(typeof H.dropVisual==="string"){B=A(H.dropVisual);F=B.length?B:F}else{if(A.isFunction(H.dropVisual)){B=A(H.dropVisual.call());F=B.length?B:F}}F.hide();A.extend(G,I);G.start=function(J,K){E._tree._isDragging=true;E._tree.widgetDom.prepend(F);E._tree._trigger("nodeDragStarted",J,E);if(I&&A.isFunction(I.start)){I.start.call(E.element,J,K)}else{C.hide()}};G.drag=function(L,J){var N=L.srcElement||L.originalEvent.target,M=A(N),O,K={x:L.pageX,y:L.pageY};F&&F.hide();if(M){O=E._getNodeWidget(M);if(O){if(M.closest(".wijmo-wijtree-inner",E.element).length){E._insertPosition="end"}else{F.show();E._insertPosition=E._drowTemplate(K,F,O.element)}E._dropTarget=O}}E._tree._trigger("nodeDragging",L,E);I&&A.isFunction(I.drag)&&I.drag.call(E.element,L,J)};G.stop=function(J,K){F.remove();E._dropTarget=null;E._insertPosition="unKnown";if(I&&A.isFunction(I.stop)){I.stop.call(E.element,J,K)}else{C.show();E._resetDrag()}};C.draggable(G).trigger(D);A.browser.mozilla&&E._setFocused(true)},_resetDrag:function(){var D=this,C,B;!D._tree.options.allowDrag&&D.element.data("draggable")&&D.element.draggable("destroy");C=D._getField("nodes");for(B=0;B<C.length;B++){C[B]._resetDrag()}},_checkClick:function(){var C=this,B=C.options;if(!C._tree.options.disabled&&!C._isClosestDisabled()){if(B.checked&&C._checkState==="indeterminate"){C._checkState="checked";C._checkItem()}else{C._checkState=B.checked?"unChecked":"checked";C._setChecked(!B.checked)}C._tree._trigger("nodeCheckChanged",null,C)}},_checkItem:function(){var D=this,C=false,B=D._tree;if(B===null||!B.options.showCheckBoxes){return}if(B.options.autoCheckNodes&&D._checkState!=="indeterminate"){C=true;D._changeCheckState(D.options.checked)}B.options.allowTriState&&D._setParentCheckState();D[D.options.checked?"_checkNode":"_unCheckNode"](C)},_checkNode:function(C){var F=this,B=F.options,E=this._getField("nodes"),D;if(F._checkState==="checked"){F.$checkBox.wijtreecheck("option","checkState","check");B.checkState="checked"}else{if(F._checkState==="indeterminate"){F.$checkBox.wijtreecheck("option","checkState","triState");B.checkState="indeterminate"}}if(C){for(D=0;D<E.length;D++){E[D]._checkNode(true)}}},_unCheckNode:function(D){var C=this._getField("nodes"),B=this.options,E;this.$checkBox.wijtreecheck("option","checkState","unCheck");B.checkState="unChecked";if(D){for(E=0;E<C.length;E++){C[E]._unCheckNode(true)}}},_changeCheckState:function(B){var C=this._getField("nodes");A.each(C,function(D,E){E.options.checked=B;E.$nodeBody.attr("aria-checked",B);E._checkState=B?"checked":"unChecked";E._changeCheckState(B)})},_setParentCheckState:function(){var G=this._getOwner(),F,D=true,C=false,H=false,E,B=this;if(G.element.is(":"+B.options.treeClass)){return}F=G._getField("nodes");for(E=0;E<F.length;E++){if(F[E]._checkState==="indeterminate"){H=true}if(F[E].options.checked){C=true}else{D=false}if(!D&&C){break}}if(H){G._checkState="indeterminate";G._setChecked(true)}else{if(C){if(D){G._checkState="checked";G._checkNode(false)}else{G._checkState="indeterminate"}G._setChecked(true)}else{G._checkState="unChecked";G._setChecked(false);G._unCheckNode(false)}}G._setParentCheckState()},_onKeyDown:function(C){var B=A(C.target),D=this;B.closest(".wijmo-wijtree-inner",D.element).length>0&&D._keyAction(C)},_onClick:function(C){var B=A(C.target),D=this;if(B.closest(".wijmo-checkbox",D.element).length>0){D._checkClick(C);C.preventDefault();C.stopPropagation()}else{if(B.hasClass("ui-icon-triangle-1-se")||B.hasClass("ui-icon-triangle-1-e")){D._expandCollapseItem(C);C.preventDefault();C.stopPropagation()}else{B.closest(".wijmo-wijtree-inner",D.element).length>0&&D._click(C)}}},_onMouseDown:function(C){var B=A(C.target),D=C.data;if(D._tree.options.allowDrag){B.closest(".wijmo-wijtree-node",D.element).length>0&&D._beginDrag(C)}},_onMouseOver:function(E){var C=A(E.target),D=this,B=A(E.relatedTarget);if(C.closest(".wijmo-wijtree-inner",D.element).length>0&&(this._tree._overNode!==D||B.is(":"+this.widgetBaseClass))){D._mouseOver(E);this._tree._overNode=D}D._mouseOverHitArea(E)},_onMouseOut:function(D){var F=A(D.target),E=this,C=A(D.relatedTarget),B=this._getNodeWidget(C);if(F.closest(".wijmo-wijtree-inner",E.element).length>0&&(this._tree._overNode!==B||C.is(":"+this.widgetBaseClass))){E._mouseOut(D);if(!B){this._tree._overNode=null}}E._mouseOutHitArea(D)},_onFocus:function(B){var D=A(B.target),C=this;if(D.closest(".wijmo-wijtree-inner",C.element).length>0&&!C._tree.options.disabled&&!C._isClosestDisabled()&&!(D.hasClass("ui-icon-triangle-1-se")||D.hasClass("ui-icon-triangle-1-e"))&&!D.closest(".wijmo-checkbox",C.element).length){C._tree._focusNode&&C._tree._focusNode.$navigateUrl.blur();C._focused=true;C._tree._focusNode=this;C.$inner.addClass("ui-state-focus")}},_onBlur:function(D){var B=A(D.target),C=D.data;if(!C._tree.options.disabled&&!C._isClosestDisabled()){C._focused=false;B.closest(".wijmo-wijtree-inner",C.element).length>0&&C.$inner.removeClass("ui-state-focus");C._tree._trigger("nodeBlur",D,C)}},_click:function(D){var E=this,B=E.options,C=E._tree;if(!C.options.disabled&&!E._isClosestDisabled()){if(!/^[#,\s]*$/.test(E._navigateUrl)){return}E._isClick=true;C._ctrlKey=D.ctrlKey;if(B.selected&&C._ctrlKey){E._setSelected(false)}else{if(B.selected&&C.options.allowEdit&&!E._isTemplate){E._editNode()}else{E._setSelected(!B.selected)}}if(!E._isTemplate){D.preventDefault();D.stopPropagation()}}else{E._setNavigateUrlHref("")}},_selectNode:function(C,F){var D=this,B,E;if(!D._tree.options.disabled&&!D._isClosestDisabled()&&!D._tree._isDragging){B=D._tree._ctrlKey;if(B){E=A.inArray(D,D._tree._selectedNodes);if(E!==-1&&!C){D._tree._selectedNodes.splice(E,1);D.$inner.removeClass("ui-state-active")}}else{A.each(D._tree._selectedNodes,function(G,H){H.$inner.removeClass("ui-state-active");H.options.selected=false;H.$nodeBody.attr("aria-selected",false)});D._tree._selectedNodes=[]}if(C){E=A.inArray(D,D._tree._selectedNodes);E===-1&&this._tree._selectedNodes.push(D);D.$inner.addClass("ui-state-active")}else{D.$inner.removeClass("ui-state-active")}D._isClick&&D._tree._trigger("nodeClick",F,D);D._isClick=false;D._tree._ctrlKey=false;D._tree._trigger("selectedNodeChanged",F,D)}},_keyAction:function(D){var B=D.target,C=this;if(C._tree.options.disabled||C._isClosestDisabled()){return}if(B){if(C._tree._editMode&&D.keyCode!==A.ui.keyCode.ENTER){return}switch(D.keyCode){case A.ui.keyCode.UP:C._moveUp();break;case A.ui.keyCode.DOWN:C._moveDown();break;case A.ui.keyCode.RIGHT:C._tree.options.showExpandCollapse&&C._moveRight();break;case A.ui.keyCode.LEFT:C._tree.options.showExpandCollapse&&C._moveLeft();break;case 83:!C._tree._editMode&&C._tree.options.allowSorting&&C.sortNodes();break;case 113:C._tree.options.allowEdit&&C._editNode();break;case 109:C._tree.options.showExpandCollapse&&this._expanded&&C._setExpanded(false);break;case 107:C._tree.options.showExpandCollapse&&!this._expanded&&C._setExpanded(true);break;case A.ui.keyCode.ENTER:if(C._tree._editMode){D.data=C;C._editionComplete(D)}break;case A.ui.keyCode.SPACE:if(C._tree.options.showCheckBoxes){C._checkState=C.options.checked?"unChecked":"checked";C._setChecked(!C.options.checked)}}C._customKeyDown(D.keyCode);if(!C._isTemplate){D.preventDefault();D.stopPropagation()}}},_customKeyDown:function(){},_prevNode:function(B){if(B.element.prev().length>0){return B.element.prev().data(this.widgetName)}},_nextNode:function(B){if(B.element.next().length>0){return B.element.next().data(this.widgetName)}},_getNextExpandedNode:function(D){var B=D,E=D._getField("nodes"),C;if(D._expanded&&E.length>0){C=E[E.length-1];if(C!==null){B=this._getNextExpandedNode(C)}}return B},_getNextNode:function(B){var D=null,C=this;if(B.element.is(":"+C.options.treeClass)){return null}D=C._nextNode(B);return D?D:C._getNextNode(B._getOwner())},_moveUp:function(){var B=this._getCurrentLevel(),C=this._prevNode(this);if(!C){B>0&&this._getOwner()._setFocused(true)}else{this._getNextExpandedNode(C)._setFocused(true)}},_moveDown:function(){var D=this._getField("nodes"),C,B,E;if(this._expanded&&D.length>0){D[0]._setFocused(true)}else{C=this._nextNode(this);if(C){C._setFocused(true)}else{B=this._getOwner();E=this._getNextNode(B);E&&E._setFocused(true)}}},_moveLeft:function(){var B=this._getOwner();if(this._expanded){this._setExpanded(false)}else{B!==null&&!B.element.is(":"+this.options.treeClass)&&B._setFocused(true)}},_moveRight:function(){if(this._hasChildren){if(!this._expanded){this._setExpanded(true)}else{var B=this._getField("nodes")[0];B!==null&&B._setFocused(true)}}},_mouseOver:function(C){var D=this,B=D._tree;if(!B.options.disabled&&!D._isClosestDisabled()&&!B._editMode){D._mouseOverNode();!B._isDragging&&B._trigger("nodeMouseOver",C,D)}},_mouseOut:function(C){var D=this,B=D._tree;if(!B.options.disabled&&!D._isClosestDisabled()&&!B._editMode){D._mouseOutNode();!B._isDragging&&B._trigger("nodeMouseOut",C,D)}},_mouseOverNode:function(){if(this.$inner!==null&&!this._isOverNode){this.$inner.addClass("ui-state-hover");this._isOverNode=true}},_mouseOutNode:function(){if(this.$inner!==null&&this._isOverNode){this.$inner.removeClass("ui-state-hover");this._isOverNode=false}},_mouseOverHitArea:function(E){var D,C,F=this,B=F._tree;if(!B.options.disabled&&!F._isClosestDisabled()){if(B.options.expandCollapseHoverUsed){if(F._hasChildren&&!F._isOverHitArea){D=F._getBounds(F.element);C={x:E.pageX,y:E.pageY};if(F._isMouseInsideRect(C,D)){F._isOverHitArea=true;F._setExpanded(true)}}}}},_mouseOutHitArea:function(E){var C={x:E.pageX,y:E.pageY},D,F=this,B=F._tree;if(!B.options.disabled&&!F._isClosestDisabled()){if(B.options.expandCollapseHoverUsed){if(F._hasChildren&&!!F._isOverHitArea){D=F._getBounds(F.element);if(!F._isMouseInsideRect(C,D)){F._isOverHitArea=false;F._setExpanded(false)}}else{if(F._getOwner().element.is(":"+F.widgetBaseClass)){D=F._getBounds(F._getOwner().element);if(!F._isMouseInsideRect(C,D)){F._getOwner()._isOverHitArea=false;F._getOwner()._setExpanded(false)}}}}}},destroy:function(){var B=this,C;B.element.data("draggable")&&B.element.draggable("destroy");B.$hitArea&&B.$hitArea.remove();B.$checkBox&&B.$checkBox.remove();B.$nodeImage&&B.$nodeImage.remove();B.$navigateUrl.unwrap().unwrap().removeClass("ui-state-default ui-state-active").unbind("mousedown").unbind("blur");C=this.element.find("ul:first").show();C.removeClass();C.children("li").each(function(){var D=B._getNodeWidget(A(this));D.destroy()});B.element.removeData("nodes").removeData("owner").removeData("widgetName").removeClass();A.Widget.prototype.destroy.apply(this)},add:function(H,I){var K=null,B,J,G=this,C,E,D="<li><a href='{0}'>{1}</a></li>",F;if(typeof H==="string"){B=A(D.replace(/\{0\}/,"#").replace(/\{1\}/,H));G._createNodeWidget(B);K=B.data(B.data("widgetName"))}else{if(H.jquery){!H.data("widgetName")&&G._createNodeWidget(H);K=H.data(H.data("widgetName"))}else{if(H.nodeType){B=A(H);G._createNodeWidget(B);K=B.data(B.data("widgetName"))}else{if(A.isPlainObject(H)){B=A(D.replace(/\{0\}/,H.url).replace(/\{1\}/,H.text));G._createNodeWidget(B,H);K=B.data(B.data("widgetName"))}}}}if(K===null){return}J=G._getField("nodes");if(!I||I>J.length){if(I!==0){I=J.length}}C=K._getField("nodes");K._tree=G._tree;for(E=0;E<C.length;E++){C[E]._tree=G._tree}K._setField("owner",G);F=J.length;if(!G.$nodes){G.$nodes=A("<ul></ul>").addClass("wijmo-wijtree-list ui-helper-reset wijmo-wijtree-child");G.element.append(G.$nodes)}if(F>0&&F!==I){K.element.get(0)!==J[I].element.get(0)&&K.element.insertBefore(J[I].element)}else{G.$nodes.append(K.element)}G._changeCollection(I,K);G._collectionChanged("add")},remove:function(D){var F=-1,E,C=this,B=this._getField("nodes");if(D.jquery){F=D.index()}else{if(typeof D==="number"){F=D}}if(F<0||F>=B.length){return}E=B[F];E.element.detach();C._changeCollection(F);C._collectionChanged("remove")},getNodes:function(){return this._getField("nodes")},_changeCollection:function(C,D){var B=this._getField("nodes");if(D){B.splice(C,0,D)}else{B.splice(C,1)}},sortNodes:function(){var B=this._getField("nodes");this._sort();A.each(B,function(C,D){D._index=C;D._insertBefore(C)});this._refreshNodesClass()},check:function(B){this._setOption("checked",B)},select:function(B){this._setOption("selected",B)},getOwner:function(){var B=this._getOwner();return B&&B.element.is("li")?B:null},expand:function(){this._setOption("expanded",true)},collapse:function(){this._setOption("expanded",false)},_insertBefore:function(C){var B=this.element.parent().children("li");this.element.index()!==C&&this.element.insertBefore(B.eq(C))},_sort:function(){var B=this._getField("nodes");if(this._isSorted){if(!this._isDecsSort){B.sort(this._compare2NodeTextAcs);this._isDecsSort=true}else{B.sort(this._compare2NodeTextDesc);this._isDecsSort=false}}else{B.sort(this._compare2NodeTextAcs);this._isSorted=true;this._isDecsSort=true}},_compare2NodeTextAcs:function(C,B){if(C!==null&&B!==null){return C._text.localeCompare(B._text)}},_compare2NodeTextDesc:function(C,B){if(C!==null&&B!==null){return -1*C._text.localeCompare(B._text)}},_collectionChanged:function(){this._hasChildren=this._getChildren();this._initNodeClass();this._refreshNodesClass()},_refreshNodesClass:function(){for(var B=this._getField("nodes"),C=0;C<B.length;C++){B[C]._initNodeClass()}},_setChecked:function(B){var C=this;if(C.options.checked===B&&C._checkState!=="indeterminate"){return}C.options.checked=B;C.$nodeBody.attr("aria-checked",B);this._checkItem()},_isClosestDisabled:function(){var B=this;return B.element.closest(".wijmo-wijtree-disabled,.wijmo-wijtreenode-disabled",B._tree.element).length?true:false},_setExpanded:function(B){var C=this;if(C._expanded===B){return}if(C._hasChildren){C._expanded=B;C.options.expanded=B;C.$nodeBody.attr("aria-expanded",B);C._expandNode(B)}},_setFocused:function(B){if(B){this.$navigateUrl.focus();(A.browser.msie||A.browser.webkit)&&this._setFocusNode()}else{this.$navigateUrl.blur()}},_setFocusNode:function(){this._tree._focusNode&&A.browser.webkit&&this._tree._focusNode.$navigateUrl.blur();this._focused=true;this._tree._focusNode=this;this.$inner.addClass("ui-state-focus")},_setToolTip:function(B){if(B.length){this.element.attr("title",B)}else{this.element.removeAttr("title")}},_setText:function(B){if(this._text!==B&&B.length){this._text=B;this._changeText(B)}},_setSelected:function(D){var B=this,C=B.options;if(C.selected!==D){C.selected=D;B.$nodeBody.attr("aria-selected",D);B._selectNode(D);B._setFocused(D)}},_setCheckBoxes:function(C){var B=this;B.$checkBox&&B.$checkBox[C?"show":"hide"]();B.$nodes&&B.$nodes.children("li").each(function(){var D=B._getNodeWidget(A(this));D!==null&&D._setCheckBoxes(C)})},_setHitArea:function(C){var B=this;if(B._hasChildren){if(C){B._initNodeClass();B.$hitArea&&B.$hitArea.show()}else{B._expanded=true;B.options.expanded=true;B.$nodeBody.attr("aria-expanded",true);B.$nodes&&B.$nodes.show();B._initNodeClass();B.$hitArea&&B.$hitArea.hide()}}B.$nodes&&B.$nodes.children("li").each(function(){var D=B._getNodeWidget(A(this));D!==null&&D._setHitArea(C)})},_getOwner:function(){return this._getField("owner")},_getTree:function(){var B=this._getOwner();return B?B.element.is(":"+this.options.treeClass)?B:B._getTree():null},_getInitElement:function(){var D=A("<li>"),B=this,C=A("<ul>"),E=B._getField("nodes");D.append(B.$navigateUrl.clone());if(E.length){D.append(C);A.each(E,function(G,F){var H=F._getInitElement();C.append(H)})}return D},_getChildren:function(){return this.element.find(">ul:first>li").length>0&&this.element.children("ul:first")},_getNodeWidget:function(C){var D=this._getNodeByDom(C),B;if(D.length>0){B=D.data(D.data("widgetName"));return B}return null},_createNodeWidget:function(C,B){if(A.fn.wijtreenode){C.data("owner",this);if(!!B&&A.isPlainObject(B)){A.extend(B,{treeClass:this.options.treeClass});C.wijtreenode(B)}else{C.wijtreenode({treeClass:this.options.treeClass})}}return C},_getNodeByDom:function(B){return A(B).closest(":"+this.widgetBaseClass)},_getCurrentLevel:function(){return this.element.parentsUntil(":"+this.options.treeClass).length-1},_getField:function(B){return this.element.data(B)},_setField:function(B,C){return this.element.data(B,C)}})})(jQuery);(function(C){var B="ui-icon ui-icon-check",A="ui-icon ui-icon-stop";C.widget("wijmo.wijtreecheck",{options:{checkState:"unCheck"},_create:function(){var D=this,E=this.options;if(D.element.is("div")){D.element.addClass("wijmo-checkbox ui-widget").attr("role","checkbox");D.$icon=C("<span>");D.$icon.addClass("wijmo-checkbox-icon");if(E.checkState==="check"){D.$icon.addClass("ui-icon ui-icon-check")}else{E.checkState==="triState"&&D.$icon.addClass("ui-icon ui-icon-stop")}D.$body=C("<div></div>").addClass("wijmo-checkbox-box ui-widget ui-corner-all ui-state-default").css({position:"relative"}).append(D.$icon);D.element.append(D.$body);D.element.bind("mouseover.wijtreecheck",function(){!D.options.disabled&&D.$body.removeClass("ui-state-default").addClass("ui-state-hover")}).bind("mouseout.wijtreecheck",function(){!D.options.disabled&&D.$body.removeClass("ui-state-hover").not(".ui-state-focus").addClass("ui-state-default")})}},_setOption:function(F,E){var D=this;if(F==="checkState"){if(E==="unCheck"){D.$body.removeClass("ui-state-active");D.$icon.removeClass("ui-icon ui-icon-check ui-icon-stop ui-state-active")}else{if(E==="check"){D.$body.addClass("ui-state-active");D.$icon.removeClass(A).addClass(B)}else{if(E==="triState"){D.$body.addClass("ui-state-active");D.$icon.removeClass(B).addClass(A)}}}}C.Widget.prototype._setOption.apply(D,arguments)},destory:function(){this.element.children().remove();this.element.removeClass("wijmo-checkbox ui-widget");C.Widget.prototype.destroy.apply(this)}})})(jQuery);(function(Q){var L="wijmo-wijupload",T="wijmo-wijupload-fileRow",O="."+T,A="wijmo-wijupload-filesList",D="wijmo-wijupload-commandRow",R="wijmo-wijupload-uploadAll",V="wijmo-wijupload-cancelAll",C="wijmo-wijupload-buttonContainer",G="wijmo-wijupload-upload",P="."+G,J="wijmo-wijupload-cancel",H="."+J,B="wijmo-wijupload-file",U="wijmo-wijupload-progress",I="wijmo-wijupload-loading",E="ui-widget-content",M="ui-corner-all",F="ui-state-highlight",K,N;K=function(m,q,Z){var p,o=Q("input",q),n=new XMLHttpRequest,r=function(b){if(b.indexOf("\\")>-1){b=b.substring(b.lastIndexOf("\\")+1)}return b},Y=function(f,d){var e=r(d.val());f.open("POST",Z,true);f.setRequestHeader("Wijmo-RequestType","XMLHttpRequest");f.setRequestHeader("Cache-Control","no-cache");f.setRequestHeader("Wijmo-FileName",e);f.setRequestHeader("Content-Type","application/octet-stream");f.send(d.get(0).files[0])},X=function(b){if(b){b.abort();b=null}},a=function(b){if(b){b=null}},W;W=function(){var b=this;b.fileRow=q;b.xhr=n;b.inputFile=o;b.upload=function(){Y(n,o)};b.cancel=function(){X(n);Q.isFunction(b.onCancel)&&b.onCancel()};b.destroy=function(){a(n)};b.updateAction=function(c){Z=c};b.onCancel=null;b.onComplete=null;b.onProgress=null;n.upload.onprogress=function(c){if(c.lengthComputable){var d;if(Q.isFunction(b.onProgress)){d={supportProgress:true,loaded:c.loaded,total:c.total,fileName:r(o.val())};b.onProgress(d)}}};n.onreadystatechange=function(h){if(n.readyState===4){var e=n.responseText,g;if(Q.isFunction(b.onComplete)){g={e:h,response:e,supportProgress:true};b.onComplete(g)}}}};p=new W;return p};N=function(r,Y,t){var q,z=Q("input",Y),u=z.attr("id"),W="wijUploadForm_"+r,v=Q("#"+W),y="wijUploadIfm_"+u,x=true,w=Q('<iframe id="'+y+'" name="'+y+'">'),Z=function(b,d){v.empty();v.attr("target",b.attr("name"));if(d){d.parent().append(d.clone());v.append(d)}v.submit()},X=function(b){b.attr("src","javascript".concat(":false;"))},s=function(d,b){if(b&&v){v.remove();v=null}if(d){d.remove();d=null}},a;if(v.length===0){v=Q('<form method="post" enctype="multipart/form-data"></form>');v.attr("action",t).attr("id",W).attr("name",W).appendTo("body")}w.css("position","absolute").css("top","-1000px").css("left","-1000px");w.appendTo("body");a=function(){var b=this;b.fileRow=Y;b.iframe=w;b.inputFile=z;b.upload=function(){var c;Z(w,z);if(Q.isFunction(b.onProgress)){c={supportProgress:false,loaded:1,total:1};b.onProgress(c)}};b.doPost=function(){Z(w)};b.cancel=function(){X(w);Q.isFunction(b.onCancel)&&b.onCancel()};b.updateAction=function(c){t=c;v.attr("action",c)};b.destroy=function(c){s(w,c)};b.onCancel=null;b.onComplete=null;b.onProgress=null;w.bind("load",function(e){if(!Q.browser.safari){if(x){x=false;return}}if(w.attr("src")==="javascript".concat(":false;")){return}var c=e.target,l,m,f;try{m=c.contentDocument?c.contentDocument:window.frames[0].document;if(m.XMLDocument){l=m.XMLDocument}else{if(m.body){l=m.body.innerHTML}else{l=m}}if(Q.isFunction(b.onComplete)){f={e:e,response:l,supportProgress:false};b.onComplete(f)}}catch(n){l=""}})};q=new a;return q};Q.widget("wijmo.wijupload",{options:{action:"",autoSubmit:false,change:null,upload:null,totalUpload:null,progress:null,totalProgress:null,complete:null,totalComplete:null,maximumFiles:0},_create:function(){var Z=this,W=Z.options,Y=+new Date,X=Z.supportXhr();Z.filesLen=0;Z.totalUploadFiles=0;Z.useXhr=X;Z.id=Y;Z._createContainers();Z._createUploadButton();Z._createFileInput();Z._bindEvents();W.disabled&&Z.disable()},_setOption:function(W,Y){var X=this;Q.Widget.prototype._setOption.apply(this,arguments);W==="disabled"&&X._handleDisabledOption(Y,X.upload)},_handleDisabledOption:function(W,X){var Y=this;if(W){if(!Y.disabledDiv){Y.disabledDiv=Y._createDisabledDiv(X)}Y.disabledDiv.appendTo("body")}else{if(Y.disabledDiv){Y.disabledDiv.remove();Y.disabledDiv=null}}},_createDisabledDiv:function(X){var W=this,Z=X?X:W.upload,a=Z.offset(),h=Z.outerWidth(),Y=Z.outerHeight();return Q("<div></div>").addClass("ui-disabled").css({"z-index":"99999",position:"absolute",width:h,height:Y,left:a.left,top:a.top})},destroy:function(){var W=this;W.upload.removeClass(L);W.upload.undelegate(W.widgetName);W.input.remove();W.addBtn.remove();W.filesList.remove();W.commandRow.remove();W.isCreateByInput==true&&W.element.css({display:""}).unwrap();if(W.uploaders){Q.each(W.uploaders,function(X,Y){Y.destroy&&Y.destroy(true);Y=null});W.uploaders=null}if(W.disabledDiv){W.disabledDiv.remove();W.disabledDiv=null}},widget:function(){return this.upload},supportXhr:function(){var W=false;if(typeof(new XMLHttpRequest).upload==="undefined"){W=false}else{W=true}return W},_createContainers:function(){var Y=this,W,Z,X;if(Y.element.is(":input")&&Y.element.attr("type")==="file"){Y.isCreateByInput=true;Y.maxDisplay=Y.element.attr("multiple")?0:1;Y.upload=Y.element.css({display:"none"}).wrap("<div>").parent()}else{if(Y.element.is("div")){Y.upload=Y.element}else{throw'The initial markup must be "DIV", "INPUT[type=file]"'}}Y.upload.addClass(L);W=Q("<ul>").addClass(A).appendTo(Y.upload);Z=Q("<div>").addClass(D).appendTo(Y.upload);Y.filesList=W;Z.hide();Y.commandRow=Z;Y._createCommandRow(Z)},_createCommandRow:function(W){var Y=Q("<a>").attr("href","#").text("uploadAll").addClass(R).button({icons:{primary:"ui-icon-circle-arrow-n"},label:"Upload All"}),X=Q("<a>").attr("href","#").text("cancelAll").addClass(V).button({icons:{primary:"ui-icon-cancel"},label:"Cancel All"});W.append(Y).append(X)},_createUploadButton:function(){var W=this,X=Q("<a>").attr("href","#").button({label:"Upload files"});X.mousemove(function(b){if(W.input){var Z=b.pageX,Y=b.pageY;W.input.offset({left:Z+10-W.input.width(),top:Y+10-W.input.height()})}});W.addBtn=X;W.upload.prepend(X)},_createFileInput:function(){var Z=this,Y=Z.addBtn,a=Y.offset(),W="wijUpload_"+Z.id+"_input"+Z.filesLen,X=Q("<input>").attr("type","file").prependTo(Z.upload);Z.filesLen++;X.attr("id",W).attr("name",W).css("position","absolute").offset({left:a.left+Y.width()-X.width(),top:a.top}).css("z-index","9999").css("opacity",0).height(Y.height()).css("cursor","pointer");Z.input=X;X.bind("change",function(b){var d,c;if(Z._trigger("change",b,Q(this))===false){return false}Z._createFileInput();d=Z._createFileRow(Q(this));Z._setAddBtnState();if(Z.options.autoSubmit){c=Q(P,d);c&&c.click()}X.unbind("change")});Z.uploadAll=false},_setAddBtnState:function(){var Y=this,W=Y.options.maximumFiles||Y.maxDisplay,Z=Y.addBtn,X;if(!W){return}if(!Z){return}if(!Y.maskDiv){Y.maskDiv=Q("<div></div>").css("position","absolute").css("z-index","9999").width(Z.outerWidth()).height(Z.outerHeight()).offset(Z.offset()).appendTo(Y.element)}X=Q("li",Y.filesList);if(X.length>=W){Z.button({disabled:true});Y.maskDiv.show();Y.input&&Y.input.css("left","-1000px")}else{Z.button({disabled:false});Y.maskDiv.hide()}},_createFileRow:function(a){var W=this,i=Q("<li>"),X=a.val(),b,g,Z,j=Q("<span>").addClass(C),Y=Q("<a>").attr("href","#").text("upload").addClass(G).button({text:false,icons:{primary:"ui-icon-circle-arrow-n"},label:"upload"}),d=Q("<a>").attr("href","#").text("cancel").addClass(J).button({text:false,icons:{primary:"ui-icon-cancel"},label:"cancel"});i.addClass(T).addClass(E).addClass(M);i.append(a);a.hide();b=Q("<span>"+W._getFileName(X)+"</span>").addClass(B).addClass(F).addClass(M);i.append(b);i.append(j);g=Q("<span />").addClass(U);j.append(g);j.append(Y).append(d);i.appendTo(W.filesList);Z=Q(O,W.upload);if(Z.length){W.commandRow.show();W._createUploader(i);W._resetProgressAll()}return i},_createUploader:function(X){var Y=this,W=Q("input",X),a=Y.options.action,Z;if(Y.useXhr){Z=K(Y.id,X,a)}else{Z=N(Y.id,X,a)}Z.onCancel=function(){var b=this;Y._trigger("cancel",null,b.inputFile);Y.totalUploadFiles--;Y.totalUploadFiles===0&&Y.uploadAll&&Y._trigger("totalComplete")};if(Y._wijUpload()){Z.onProgress=function(d){var b=Q("."+U,this.fileRow);if(d.supportProgress){b.html(Math.round(1000*d.loaded/d.total)/10+"%");Y._trigger("progress",null,{sender:d.fileName,loaded:d.loaded,total:d.total});Y._progressTotal(d.fileName,d.loaded)}else{b.addClass(I)}};Z.onComplete=function(h){var m=this,n=Y.uploaders[m.inputFile.attr("id")],b=Y._getFileName(m.inputFile.val()),d=Y._getFileSize(m.inputFile[0]),o=Q("."+U,m.fileRow),l=h.e.currentTarget;Y._trigger("complete",h.e,m.inputFile);o.removeClass(I);o.html("100%");Y._removeFileRow(m.fileRow,n,true);Y._progressTotal(b,d);Y.totalUploadFiles--;Y.totalUploadFiles===0&&Y.uploadAll&&Y._trigger("totalComplete",h.e,h)}}if(typeof Y.uploaders==="undefined"){Y.uploaders={}}Y.uploaders[W.attr("id")]=Z},_progressTotal:function(h,X){var Y=this,g=Y.progressAll,Z,W;if(!Y.uploadAll){return}if(g&&g.loadedSize){g.loadedSize[h]=X;Z=Y._getLoadedSize(g.loadedSize);W=g.totalSize}Y._trigger("totalProgress",null,{loaded:Z,total:W})},_getLoadedSize:function(X){var W=0;Q.each(X,function(Y,Z){W+=Z});return W},_getTotalSize:function(){var W=this,X=0;W.uploaders&&Q.each(W.uploaders,function(Y,Z){X+=W._getFileSize(Z.inputFile[0])});return X},_resetProgressAll:function(){this.progressAll={totalSize:0,loadedSize:{}}},_wijUpload:function(){return true},_wijcancel:function(){},_upload:function(){},_bindEvents:function(){var X=this,W=X.progressAll;X.upload.delegate(H,"click."+X.widgetName,function(){var Y=Q(this),b=Y.parents(O),a=Q("input",b[0]),Z=X.uploaders[a.attr("id")];X._wijcancel(a);X._wijUpload()&&Z&&Z.cancel();if(W){W.totalSize-=X._getFileSize(a[0]);if(W.loadedSize[a.val()]){delete W.loadedSize[a.val()]}}X._removeFileRow(b,Z,false)});X.upload.delegate(P,"click."+X.widgetName,function(Y){var Z=Q(this),d=Z.parents(O),b=Q("input",d[0]),a=X.uploaders[b.attr("id")];if(X._trigger("upload",Y,b)===false){return false}X.totalUploadFiles++;X._upload(d);a&&X._wijUpload()&&a.upload()});X.upload.delegate("."+R,"click."+X.widgetName,function(Y){X.uploadAll=true;!X.progressAll&&X._resetProgressAll();if(X._trigger("totalUpload",Y,null)===false){return false}X.progressAll.totalSize=X._getTotalSize();X._wijuploadAll(Q(P,X.filesList[0]));X._wijUpload()&&Q(P,X.filesList[0]).each(function(a,Z){Q(Z).click()})});X.upload.delegate("."+V,"click."+X.widgetName,function(){X._resetProgressAll();Q(H,X.filesList[0]).each(function(Z,Y){Q(Y).click()})})},_wijuploadAll:function(){},_wijFileRowRemoved:function(){this._setAddBtnState()},_removeFileRow:function(b,a,W){var X=this,Y,Z;if(a){Y=a.inputFile.attr("id")}b.fadeOut(1500,function(){b.remove();X._wijFileRowRemoved(b,a.inputFile,W);if(X.uploaders[Y]){delete X.uploaders[Y]}Z=Q(O,X.upload);if(Z.length){X.commandRow.show();a&&a.destroy&&a.destroy()}else{X.commandRow.hide();X._resetProgressAll();a&&a.destroy&&a.destroy(true)}})},_getFileName:function(W){if(W.indexOf("\\")>-1){W=W.substring(W.lastIndexOf("\\")+1)}return W},_getFileSize:function(X){if(X.files&&X.files.length>0){var W=X.files[0];if(W.size){return W.size}}return 0}})})(jQuery);(function(A){A.widget("wijmo.wijwizard",{options:{navButtons:"auto",autoPlay:false,delay:3000,loop:false,hideOption:{fade:true},showOption:{fade:true,duration:400},ajaxOptions:null,cache:false,cookie:null,stepHeaderTemplate:"",panelTemplate:"",spinner:"",add:null,remove:null,activeIndexChanged:null,show:null,load:null,validating:null},_defaults:{stepHeaderTemplate:"<li><h1>#{title}</h1>#{desc}</li>",panelTemplate:"<div></div>",spinner:"<em>Loading&#8230;</em>"},_create:function(){this._pageLize(true)},_init:function(){var B=this.options;if(B.disabled){this.disable()}else{B.autoPlay&&this.play()}},_setOption:function(C,B){A.Widget.prototype._setOption.apply(this,arguments);switch(C){case"activeIndex":this.show(B);break;case"navButtons":this._createButtons();break;default:this._pageLize()}},play:function(){var B=this.options,D=this;if(!this.element.data("intId.wijwizard")){var C=window.setInterval(function(){var E=B.activeIndex+1;if(E>=D.panels.length){if(B.loop){E=0}else{D.stop();return}}D.show(E)},B.delay);this.element.data("intId.wijwizard",C)}},stop:function(){var B=this.element.data("intId.wijwizard");if(B){window.clearInterval(B);this.element.removeData("intId.wijwizard")}},_normalizeBlindOption:function(C){if(C.blind===undefined){C.blind=false}if(C.fade===undefined){C.fade=false}if(C.duration===undefined){C.duration=200}if(typeof C.duration==="string"){try{C.duration=parseInt(C.duration,10)}catch(B){C.duration=200}}},_createButtons:function(){var B=this,C=this.options;this._removeButtons();if(C.navButtons==="none"){return}if(!this.buttons){var F=C.navButtons;if(F==="auto"){F=this.list?"common":"edge"}this.buttons=A("<div/>");this.buttons.addClass("wijmo-wijwizard-buttons");var E=function(G,H){if(C.disabled){return}H.is(":not(.ui-state-disabled)")&&H.addClass("ui-state-"+G)},D=function(H,G){if(C.disabled){return}G.removeClass("ui-state-"+H)};if(F==="common"){this.backBtn=A("<a href='#'><span class='ui-button-text'>back</span></a>").addClass("ui-widget ui-button ui-button-text-only ui-state-default ui-corner-all").appendTo(this.buttons).bind({click:function(){B.back();return false},mouseover:function(){E("hover",A(this))},mouseout:function(){D("hover",A(this))},mousedown:function(){E("active",A(this))},mouseup:function(){D("active",A(this))}}).attr("role","button");this.nextBtn=A("<a href='#'><span class='ui-button-text'>next</span></a>").addClass("ui-widget ui-button ui-button-text-only ui-state-default ui-corner-all").appendTo(this.buttons).bind({click:function(){B.next();return false},mouseover:function(){E("hover",A(this))},mouseout:function(){D("hover",A(this))},mousedown:function(){E("active",A(this))},mouseup:function(){D("active",A(this))}}).attr("role","button")}else{this.backBtn=A("<a href='#'/>").addClass("wijmo-wijwizard-prev ui-state-default ui-corner-right").append("<span class='ui-icon ui-icon-triangle-1-w'></span>").appendTo(this.buttons).bind({click:function(){B.back();return false},mouseover:function(){E("hover",A(this))},mouseout:function(){D("hover",A(this))},mousedown:function(){E("active",A(this))},mouseup:function(){D("active",A(this))}}).attr("role","button");this.nextBtn=A("<a href='#'/>").addClass("wijmo-wijwizard-next ui-state-default ui-corner-left").append("<span class='ui-icon ui-icon-triangle-1-e'></span>").appendTo(this.buttons).bind({click:function(){B.next();return false},mouseover:function(){E("hover",A(this))},mouseout:function(){D("hover",A(this))},mousedown:function(){E("active",A(this))},mouseup:function(){D("active",A(this))}}).attr("role","button")}this.buttons.appendTo(this.element)}},_removeButtons:function(){if(this.buttons){this.buttons.remove();this.buttons=undefined}},_pageLize:function(B){var C=this,D=this.options;this.list=this.element.find("ol,ul").eq(0);if(this.list&&this.list.length===0){this.list=null}if(this.list){this.lis=A("li",this.list)}if(B){this.panels=A("> div",this.element);var E=/^#.+/;this.panels.each(function(G,F){var H=A(F).attr("src");H&&!E.test(H)&&A.data(F,"load.wijwizard",H.replace(/#.*$/,""))});this.element.addClass("wijmo-wijwizard ui-widget ui-helper-clearfix");if(this.list){this.list.addClass("ui-widget ui-helper-reset wijmo-wijwizard-steps ui-helper-clearfix").attr("role","tablist");this.lis.addClass("ui-widget-header ui-corner-all").attr("role","tab")}this.container=A("<div/>");this.container.addClass("wijmo-wijwizard-content ui-widget ui-widget-content ui-corner-all");this.container.append(this.panels);this.container.appendTo(this.element);this.panels.addClass("wijmo-wijwizard-panel ui-widget-content").attr("role","tabpanel");if(D.activeIndex===undefined){if(typeof D.activeIndex!="number"&&D.cookie){D.activeIndex=parseInt(C._cookie(),10)}if(typeof D.activeIndex!="number"&&this.panels.filter(".wijmo-wijwizard-actived").length){D.activeIndex=this.panels.index(this.panels.filter(".wijmo-wijwizard-actived"))}D.activeIndex=D.activeIndex||(this.panels.length?0:-1)}else{if(D.activeIndex===null){D.activeIndex=-1}}D.activeIndex=D.activeIndex>=0&&this.panels[D.activeIndex]||D.activeIndex<0?D.activeIndex:0;this.panels.addClass("wijmo-wijwizard-hide").attr("aria-hidden",true);if(D.activeIndex>=0&&this.panels.length){this.panels.eq(D.activeIndex).removeClass("wijmo-wijwizard-hide").addClass("wijmo-wijwizard-actived").attr("aria-hidden",false);this.load(D.activeIndex)}this._createButtons()}else{this.panels=A("> div",this.container);D.activeIndex=this.panels.index(this.panels.filter(".wijmo-wijwizard-actived"))}this._refreshStep();this._initScroller();D.cookie&&this._cookie(D.activeIndex,D.cookie);D.cache===false&&this.panels.removeData("cache.wijwizard");if(D.showOption===undefined||D.showOption===null){D.showOption={}}this._normalizeBlindOption(D.showOption);if(D.hideOption===undefined||D.hideOption===null){D.hideOption={}}this._normalizeBlindOption(D.hideOption);this.panels.unbind(".wijwizard")},_initScroller:function(){if(!this.lis){return}var B=0;this.lis.each(function(){B+=A(this).outerWidth(true)});if(this.element.innerWidth()<B){if(this.scrollWrap===undefined){this.list.wrap("<div class='scrollWrap'></div>");this.scrollWrap=this.list.parent();A.effects.save(this.list,["width","height","overflow"])}this.list.width(B+8);this.scrollWrap.height(this.list.outerHeight(true));this.scrollWrap.wijsuperpanel({allowResize:false,hScroller:{scrollBarVisibility:"hidden"},vScroller:{scrollBarVisibility:"hidden"}})}else{this._removeScroller()}},_removeScroller:function(){if(this.scrollWrap){this.scrollWrap.wijsuperpanel("destroy").replaceWith(this.scrollWrap.contents());this.scrollWrap=undefined;A.effects.restore(this.list,["width","height","overflow"])}},_refreshStep:function(){var B=this.options;if(this.lis){this.lis.removeClass("ui-priority-primary").addClass("ui-priority-secondary").attr("aria-selected",false);if(B.activeIndex>=0&&B.activeIndex<=this.lis.length-1){this.lis&&this.lis.eq(B.activeIndex).removeClass("ui-priority-secondary").addClass("ui-priority-primary").attr("aria-selected",true);this.scrollWrap&&this.scrollWrap.wijsuperpanel("scrollChildIntoView",this.lis.eq(B.activeIndex))}}if(this.buttons&&!B.loop){this.backBtn[B.activeIndex<=0?"addClass":"removeClass"]("ui-state-disabled").attr("aria-disabled",B.activeIndex===0);this.nextBtn[B.activeIndex>=this.panels.length-1?"addClass":"removeClass"]("ui-state-disabled").attr("aria-disabled",B.activeIndex>=this.panels.length-1)}},_sanitizeSelector:function(B){return B.replace(/:/g,"\\:")},_cookie:function(){var B=this.cookie||(this.cookie=this.options.cookie.name);return A.cookie.apply(null,[B].concat(A.makeArray(arguments)))},_ui:function(B){return{panel:B,index:this.panels.index(B)}},_removeSpinner:function(){this.element.removeClass("ui-state-processing");var B=this.element.data("spinner.wijwizard");if(B){this.element.removeData("spinner.wijwizard");B.remove()}},_resetStyle:function(B){B.css({display:""});!A.support.opacity&&B[0].style.removeAttribute("filter")},destroy:function(){var B=this.options;this.abort();this.stop();this._removeScroller();this._removeButtons();this.element.unbind(".wijwizard").removeClass(["wijmo-wijwizard","ui-widget","ui-helper-clearfix"].join(" ")).removeData("wijwizard");this.list&&this.list.removeClass("ui-widget ui-helper-reset wijmo-wijwizard-steps ui-helper-clearfix").removeAttr("role");if(this.lis){this.lis.removeClass("ui-widget-header ui-corner-all ui-priority-primary ui-priority-secondary").removeAttr("role");this.lis.each(function(){if(A.data(this,"destroy.wijwizard")){A(this).remove()}else{A(this).removeAttr("aria-selected")}})}this.panels.each(function(){var C=A(this).unbind(".wijwizard");A.each(["load","cache"],function(D,E){C.removeData(E+".wijwizard")});if(A.data(this,"destroy.wijwizard")){A(this).remove()}else{A(this).removeClass(["ui-state-default","wijmo-wijwizard-actived","ui-state-active","ui-state-hover","ui-state-focus","ui-state-disabled","wijmo-wijwizard-panel","ui-widget-content","wijmo-wijwizard-hide"].join(" ")).css({position:"",left:"",top:""}).removeAttr("aria-hidden")}});this.container.replaceWith(this.container.contents());B.cookie&&this._cookie(null,B.cookie);return this},add:function(F,H,B){if(F===undefined){F=this.panels.length}if(H===undefined){H="Step "+F}var C=this,D=this.options,G=A(D.panelTemplate||C._defaults.panelTemplate).data("destroy.wijwizard",true),E;G.addClass("wijmo-wijwizard-panel ui-widget-content ui-corner-all wijmo-wijwizard-hide").attr("aria-hidden",true);if(F>=this.panels.length){if(this.panels.length>0){G.insertAfter(this.panels[this.panels.length-1])}else{G.appendTo(this.container)}}else{G.insertBefore(this.panels[F])}if(this.list&&this.lis){E=A((D.stepHeaderTemplate||C._defaults.stepHeaderTemplate).replace(/#\{title\}/g,H).replace(/#\{desc\}/g,B));E.addClass("ui-widget-header ui-corner-all ui-priority-secondary").data("destroy.wijwizard",true);if(F>=this.lis.length){E.appendTo(this.list)}else{E.insertBefore(this.lis[F])}}this._pageLize();if(this.panels.length==1){D.activeIndex=0;E.addClass("ui-priority-primary");G.removeClass("wijmo-wijwizard-hide").addClass("wijmo-wijwizard-actived").attr("aria-hidden",false);this.element.queue("wijwizard",function(){C._trigger("show",null,C._ui(C.panels[0]))});this._refreshStep();this.load(0)}this._trigger("add",null,this._ui(this.panels[F]));return this},remove:function(E){var D=this.options,B=this.lis.eq(E).remove(),C=this.panels.eq(E).remove();if(E<D.activeIndex){D.activeIndex--}this._pageLize();C.hasClass("wijmo-wijwizard-actived")&&this.panels.length>=1&&this.show(E+(E<this.panels.length?0:-1));this._trigger("remove",null,this._ui(C[0]));return this},_showPanel:function(F){var D=this,B=this.options,E=A(F);E.addClass("wijmo-wijwizard-actived");if((B.showOption.blind||B.showOption.fade)&&B.showOption.duration>0){var C={duration:B.showOption.duration};if(B.showOption.blind){C.height="toggle"}if(B.showOption.fade){C.opacity="toggle"}E.hide().removeClass("wijmo-wijwizard-hide").animate(C,B.showOption.duration||"normal",function(){D._resetStyle(E);D._trigger("show",null,D._ui(E[0]));D._removeSpinner();E.attr("aria-hidden",false);D._trigger("activeIndexChanged",null,D._ui(E[0]))})}else{E.removeClass("wijmo-wijwizard-hide").attr("aria-hidden",false);D._trigger("show",null,D._ui(E[0]));D._removeSpinner();D._trigger("activeIndexChanged",null,D._ui(E[0]))}},_hidePanel:function(F){var C=this,D=this.options,E=A(F);E.removeClass("wijmo-wijwizard-actived");if((D.hideOption.blind||D.hideOption.fade)&&D.hideOption.duration>0){var B={duration:D.hideOption.duration};if(D.hideOption.blind){B.height="toggle"}if(D.hideOption.fade){B.opacity="toggle"}E.animate(B,D.hideOption.duration||"normal",function(){E.addClass("wijmo-wijwizard-hide").attr("aria-hidden",true);C._resetStyle(E);C.element.dequeue("wijwizard")})}else{E.addClass("wijmo-wijwizard-hide").attr("aria-hidden",true);this.element.dequeue("wijwizard")}},show:function(E){if(E<0||E>=this.panels.length){return this}if(this.element.queue("wijwizard").length>0){return this}var B=this,F=this.options,C=A.extend({},this._ui(this.panels[F.activeIndex]));C.nextIndex=E;C.nextPanel=this.panels[E];if(this._trigger("validating",null,C)===false){return this}var D=this.panels.filter(":not(.wijmo-wijwizard-hide)"),G=this.panels.eq(E);F.activeIndex=E;this.abort();F.cookie&&this._cookie(F.activeIndex,F.cookie);this._refreshStep();if(G.length){D.length&&this.element.queue("wijwizard",function(){B._hidePanel(D)});this.element.queue("wijwizard",function(){B._showPanel(G)});this.load(E)}else{throw"jQuery UI wijwizard: Mismatching fragment identifier."}return this},next:function(){var B=this.options;if(B.disabled){return false}var C=B.activeIndex+1;if(B.loop){C=C%this.panels.length}if(C<this.panels.length){this.show(C);return true}return false},back:function(){var B=this.options;if(B.disabled){return false}var C=B.activeIndex-1;if(B.loop){C=C<0?this.panels.length-1:C}if(C>=0){this.show(C);return true}return false},load:function(G){var C=this,E=this.options,D=this.panels.eq(G)[0],B=A.data(D,"load.wijwizard");this.abort();if(!B||this.element.queue("wijwizard").length!==0&&A.data(D,"cache.wijwizard")){this.element.dequeue("wijwizard");return}this.element.addClass("ui-state-processing");if(E.spinner){var F=this.element.data("spinner.wijwizard");if(!F){F=A("<div/>");F.addClass("wijmo-wijwizard-spinner");F.html(E.spinner||C._defaults.spinner);F.appendTo(document.body);this.element.data("spinner.wijwizard",F);F.wijpopup({showEffect:"blind",hideEffect:"blind"})}F.wijpopup("show",{of:this.element,my:"center center",at:"center center"})}this.xhr=A.ajax(A.extend({},E.ajaxOptions,{url:B,dataType:"html",success:function(J,H){A(D).html(J);E.cache&&A.data(D,"cache.wijwizard",true);C._trigger("load",null,C._ui(C.panels[G]));try{E.ajaxOptions&&E.ajaxOptions.success&&E.ajaxOptions.success(J,H)}catch(I){}},error:function(J,I){C._trigger("load",null,C._ui(C.panels[G]));try{E.ajaxOptions&&E.ajaxOptions.error&&E.ajaxOptions.error(J,I,G,D)}catch(H){}}}));C.element.dequeue("wijwizard");return this},abort:function(){this.element.queue([]);this.panels.stop(false,true);this.element.queue("wijwizard",this.element.queue("wijwizard").splice(-2,2));if(this.xhr){this.xhr.abort();delete this.xhr}this._removeSpinner();return this},url:function(C,B){this.panels.eq(C).removeData("cache.wijwizard").data("load.wijwizard",B);return this},count:function(){return this.panels.length}})})(jQuery);(function(W){var U="wijmo-wijribbon",I=U+"-disabled",P=U+"-bigbutton",Ad=U+"-panel",G=U+"-groups",O=U+"-group",J=O+"-content",H=O+"-label",Q=U+"-dropdown",M=U+"-dropdowngroup",F=U+"-abbrev",T=F+"group",Ab=U+"-text",D=U+"-icon",K=U+"-abbrevicon",Ag="ui-widget-content",N="ui-helper-reset",Ac="ui-tabs-nav",Y="ui-helper-clearfix",X="ui-corner-all",V="ui-button-text",Ae="ui-state-default",Aa="ui-state-hover",Z="ui-state-active",Af="ui-state-disabled",E="ui-icon",R=E+"-triangle-1-s",L="ui-tabs-hide";W.widget("wijmo.wijribbon",{options:{click:null},_create:function(){var A=this;A._ribbonify();A.options.disabled&&A._setDisabled(true)},_setOption:function(B,A){W.Widget.prototype._setOption.apply(this,arguments);B==="disabled"&&this._setDisabled(A)},_setDisabled:function(B){var A=this,a=A.element,C=A.disabledModal;a.wijtabs("option","disabled",B);if(B){if(!C){C=W("<div></div>").addClass(Af+" "+I).css({top:0,left:0,"z-index":"10000","background-color":"lightgray",position:"absolute"}).appendTo(a.parent()).bind("click mousedown mouseup mouseover mouseout focus keydown keypress",function(b){b.stopPropagation();b.preventDefault();return false});A.disabledModal=C}C.width(a.width()).height(a.height()).show()}else{C&&C.hide()}},_ribbonify:function(){var A=this;A.buttons={};A.listUis={};A._getButtonSets();A._createButtons();A._createGroup();A._createSplit();A._createDropdwon();A._hideShowedList();A._createTab();W("."+N+":not(."+G+", ."+Ac+")",A.element).hover(function(){W(this).addClass(Aa)},function(){W(this).removeClass(Aa)});W(".ui-button",A.element).bind("mouseenter",function(){W("."+V,this).addClass(Aa)}).bind("mouseleave",function(){W("."+V,this).removeClass(Aa)});W("button.ui-button").bind("mousedown",function(){A._addActiveClassToButtonText(this)}).bind("mouseup",function(){A._addActiveClassToButtonText(this)});W("label.ui-button").bind("click",function(){A._addActiveClassToLabelButtonText(this)})},_addActiveClassToButtonText:function(A){if(A){if(W(A).hasClass(Z)){W("."+V,A).addClass(Z)}else{W("."+V,A).removeClass(Z)}}},_addActiveClassToLabelButtonText:function(A){var a=this,C,g,B;if(A){g=W(A).attr("for");C=W("#"+g,a.element);if(C.is(":checkbox")){a._addActiveClassToButtonText(A)}else{if(C.is(":radio")){B=a.element.find("[name='"+C.attr("name")+"']");W.each(B,function(){a._updateGroupElementTextState(this)})}}}},_updateGroupElementTextState:function(A){var C=this,B;if(!A){return}B=W("[for='"+W(A).attr("id")+"']",W(A).parent());if(B){if(B.hasClass(Z)){B.children("."+V).addClass(Z)}else{B.children("."+V).removeClass(Z)}}},_getButtonSets:function(){var A=this,B;A.groups=[];A.splits=[];A.dropdowns=[];W("span>button, span>:checkbox, span>:radio, div>button, div>:checkbox, div>:radio",A.element).each(function(a,C){B=W(C).parent();if(W(">ul",B).length===0){A.groups.push(B)}else{if(W(">button",B).length===2){A.splits.push(B)}else{W(">button",B).length===1&&A.dropdowns.push(B)}}});A.groups=A._unique(A.groups);A.splits=A._unique(A.splits)},_unique:function(B){var A=W.map(B,function(C){return C.get(0)});return W.map(W.unique(A),function(C){return W(C)})},_createButtons:function(){var A=this,B=A.element;W(":checkbox",B).each(function(){A._createButton(W(this),"checkbox")});W(":radio",B).each(function(){A._createButton(W(this),"radio")});W("button",B).each(function(){A._createButton(W(this),"button")})},_createButton:function(c,A){var C=this,a=C._buildButtonOption(c,A),i=c.data("commandName"),B;c.button(a);if(!a.text){if(A==="button"){c.children("."+V).text(i)}else{B=W("[for='"+c.attr("id")+"']",c.parent());B&&B.children("."+V).text(i)}}C._triggerEvent(c)},_createGroup:function(){W.each(this.groups,function(A,B){B.buttonset()})},_createSplit:function(){var A=this;W.each(A.splits,function(a,B){var C=B.children("ul"),d=B.children("button:eq(0)"),c=d.data("commandName"),f=B.children("button:eq(1)"),b;C.children("li").addClass(X);B.addClass(U+"-"+c);f.button({icons:{primary:R},text:false}).data("list",C).unbind("click").bind("click",function(e){e.stopPropagation();e.preventDefault()}).bind("mouseup",function(e){C=W(this).data("list");if(C.is(":visible")){A.showList.hide().css("z-index","");A.showList=null}else{C.show().position({my:"left top",at:"left bottom",of:B}).css("z-index",9999);A.showList=C}e.stopPropagation();e.preventDefault()});f.children("."+V).text("foo");B.after(C);C.css("position","absolute").addClass(N+" "+Y+" "+X+" "+Q).hide();B.buttonset();b={ui:d,defaultValue:d.button("option","label"),buttons:[],type:"split",trigger:f,list:C};W("button, :checkbox, :radio",C).bind("click",function(e){C.hide().css("z-index","");A.showList=null;e.preventDefault()});C.find(">li>button,>li>:radio,>li>:checkbox").each(function(g,i){var h=W(i).data("commandName");if(h!==""&&A.buttons[h]){A.buttons[h].parent=d;A.buttons[h].type="split"}b.buttons.push(W(i))});if(c!==""){A.listUis[c]=b}})},_createDropdwon:function(){var A=this;A.dropdownLabels={};W.each(A.dropdowns,function(C,c){var B=c.children("ul"),a=c.children("button:eq(0)"),d=a.data("commandName"),b;B.children("li").addClass(X);c.addClass(U+"-"+d);a.button({icons:{secondary:R}}).unbind("click").bind("click",function(e){e.stopPropagation();e.preventDefault()}).bind("mouseup",function(e){if(B.is(":visible")){A.showList.hide().css("z-index","");A.showList=null}else{if(A.showList){A.showList.hide();A.showList=null}B.show().position({my:"left top",at:"left bottom",of:a}).css("z-index",9999);A.showList=B;A.isShow=true}e.stopPropagation();e.preventDefault()});b={ui:a,defaultValue:a.button("option","label"),buttons:[],type:"dropdown",list:B};W("button, :checkbox, :radio",B).bind("click",function(e){var j=W(this).data("commandName"),l,i=a.children("."+V).width();if(!A.dropdownLabels[j]){A.dropdownLabels[j]=A._getDropdownLabelSubstr(W(this).button("option","label"),a.children("."+V),i)}l=A.dropdownLabels[j];a.button("option","label",l);a.attr("title",W(this).button("option","label"));B.hide().css("z-index","");A.showList=null;e.preventDefault()});B.css("position","absolute").addClass(N+" "+Y+" "+X+" "+Q).hide();c.buttonset();B.find(">li>button,>li>:radio,>li>:checkbox").each(function(h,g){var e=W(g).data("commandName");if(e!==""&&A.buttons[e]){A.buttons[e].parent=a;A.buttons[e].type="dropdown"}b.buttons.push(W(g))});if(d!==""){A.listUis[d]=b}})},_createTab:function(){var A=this,B=A.element;B.addClass(U);A.tabEle=B;if(W(">ul",B).length>0){B.wijtabs();A._createRibbonGroups();return true}else{B.addClass(U+"-simple").addClass(Y)}return false},updateRibbonSize:function(){var A=this;A.tabEle.children("div").each(function(C,B){var l=W(B),a=l.is(":visible"),j=l.find(">ul>li"),m=[],b;b=l.width();if(!a){l.removeClass(L);b=l.width()}j.each(function(f,i){var n=W(i),o=n.find(">div:last"),h=W.trim(o.text());m.push({width:n.outerWidth(true),text:h})});A._adjustRibbonGroupIfNeeded(j,m,b);!a&&l.addClass(L)})},_createRibbonGroups:function(){var A=this;A.tabEle.children("div").each(function(a,b){var B=W(b),c=B.is(":visible"),C=B.find(">ul>li"),f=[],e;!c&&B.removeClass(L);e=B.width();B.addClass(Ad);B.find(">ul").addClass(N+" "+Y+" "+Ag+" "+X+" "+G);C.each(function(o,i){var n=W(i),l=n.find(">div:last"),m=Ae+" "+O,p=W.trim(l.text());if(l){m+=" "+U+"-"+p.toLowerCase()}n.addClass(m);l.addClass(H);n.wrapInner("<div class = '"+J+"'></div>");n.children().bind("mouseover",function(){W(this).addClass(Aa)}).bind("mouseout",function(){W(this).removeClass(Aa)});l.appendTo(n);f.push({width:n.outerWidth(true),text:p})});A._originalGroupInfo=f;A._adjustRibbonGroupIfNeeded(C,f,e);!c&&B.addClass(L)})},_adjustRibbonGroupIfNeeded:function(t,r,b){for(var m=this,q=t.length-1,s=0,B=0,a=0,A,C,p;q>=0;q--){a=0;for(s=0;s<q;s++){a+=r[s].width}if(a+B+r[q].width<=b){A=W(t[q]).children("."+M);C=W(t[q]).children("."+T);if(A){W(t[q]).addClass(U+"-"+r[q].text.toLowerCase()).prepend(A.children());A.remove();C&&C.remove()}}else{p=r[q];B+=m._createDropDownRibbonGroup(p.text,t[q])}}},_createDropDownRibbonGroup:function(e,b){var a=this,A=U+"-"+e.toLowerCase(),B=W(b).removeClass(A),C;B.wrapInner("<div class='"+M+" "+O+"'></div>").children().hide().addClass(A).bind("mouseup."+a.widget,function(){if(a.showDrpDwnGroup!==null){a.showDrpDwnGroup.hide().css("z-index","");a.showDrpDwnGroup=null}});C=W("<div class='"+T+"'><span class='"+F+e.toLowerCase()+" "+D+" "+K+"'></span><span class='"+Ab+"'>"+e+"</span><span class='"+E+" "+R+" "+D+"'></span></div>").appendTo(B).unbind(a.widget).bind("mouseover."+a.widget,function(){W(this).addClass(Aa)}).bind("mouseout."+a.widget,function(){W(this).removeClass(Aa)}).bind("click."+a.widget,function(c){var f=W(this).siblings("."+M);if(f.is(":visible")){f.hide().css("z-index","");a.showDrpDwnGroup=null}else{a.showDrpDwnGroup&&a.showDrpDwnGroup.hide().css("z-index","");f.show().position({my:"left top",at:"left bottom",of:this}).css("z-index","10000");a.showDrpDwnGroup=f;c.stopPropagation()}});return B.outerWidth(true)},_hideShowedList:function(){var A=this;W(document).bind("mouseup",function(B){var C=B.target;if(A.showList){if(W(C).is(document)||!W.contains(A.showList.get(0),C)){A.showList.hide().css("z-index","");A.showList=null}}if(A.showDrpDwnGroup){if(W(C).is(document)||!W.contains(A.showDrpDwnGroup.get(0),C)){A.showDrpDwnGroup.hide().css("z-index","");A.showDrpDwnGroup=null}}})},_buildButtonOption:function(q,B){var C=true,p=this,u=q.attr("class"),r,s,n,o,t,A,a;if(u&&u!==""&&u!==P){s=u.split(" ")[0];q.removeClass(s);t=W.trim(q.text());if(t===""){C=false}}else{if(B==="checkbox"||B==="radio"){if(W.trim(q.attr("id"))===""){return}A=W("[for='"+q.attr("id")+"']",q.parent());if(!A.is("label")){return}u=A.attr("class");if(u&&u!==""&&u!==P){s=u.split(" ")[0];A.removeClass(s);t=W.trim(A.text());if(t===""){C=false}}else{r=A.children("span,div")}}else{if(B==="button"){r=q.children("span,div")}}if(r){if(r.length===1){if(r.eq(0).attr("class")!==""){n=r.eq(0);s=n.attr("class");C=false}}else{if(r.length===2){if(r.eq(0).attr("class")){n=r.eq(0);s=n.attr("class");if(n.is("span")){o="left"}else{if(n.is("div")){o="top"}}t=r.eq(1).text()}}else{if(B==="button"&&W.trim(q.text())!==""){t=W.trim(q.text())}}}}}if(B==="button"){q.empty();a=W.trim(q.attr("name"));a!==""&&q.removeAttr("name")}else{a=W.trim(A.attr("name"));a!==""&&A.removeAttr("name")}if(a!==""){q.data("commandName",a);p.buttons[a]={button:q}}return{label:t,icons:{primary:s},position:o,text:C}},_triggerEvent:function(B){var A=this;B.bind("click",function(a){var g=B.data("commandName"),b=A.buttons[g],C={};if(b&&b.parent){C.name=b.parent.data("commandName")}C.commandName=g;A._trigger("click",a,C);if(B.is("button")){a.preventDefault();a.stopPropagation()}})},_getDropdownLabelSubstr:function(m,n,a){var B=this,C=m.length,A=0,q=C,p=Math.floor((A+q)/2),s=W("<span></span>"),r=m.substr(0,p),o;s.appendTo(n.parent());o=B._calculateWidth(r,s);while(o!==a&&q>A){r=m.substr(0,p+1);o=B._calculateWidth(r,s);if(o>a){q=p-1}else{if(o<a){A=p+1}}p=Math.floor((A+q)/2)}s.remove();return r},_calculateWidth:function(A,B){B.text(A);return B.width()},hideDropdown:function(A){var B=this,C=B.listUis[A];C&&C.list&&C.list.hide()},getDropdownList:function(A){var B=this,a=B.listUis[A],C={};a&&W.each(a.buttons,function(b,d){C[d.data("commandName")]=d.button("option","label")});return C},setButtonDisabled:function(B,A){var i=this.buttons[B],C=false,c,a;if(i&&i.button){c=i.button;C=c.is("button");c.button("option","disabled",A);if(C){c.children("."+V).text(B)}else{W("[for='"+c.attr("id")+"']",c.parent()).children("."+V).text(B)}a=this.listUis[B];if(a&&a.type==="split"){a.trigger.button("option","disabled",A);a.trigger.children("."+V).text(B)}}},setButtonsDisabled:function(A){var B=this;W.each(A,function(C,c){B.setButtonDisabled(C,c)})},setButtonsChecked:function(B){var A=this;W.each(B,function(C,a){if(W.isPlainObject(a)){A.setButtonChecked(C,a.checked,a.name)}else{A.setButtonChecked(C,a)}})},setButtonChecked:function(a,c,d){var n=this,B,m=n.buttons[a],A,o,C;if(m&&m.button){A=m.button;if(A.is("button")){if(c){A.addClass(Z)}else{A.removeClass(Z)}}else{A.attr("checked",c);A.button("refresh")}if(m.parent){if(m.type==="dropdown"){if(c){if(!n.dropdownLabels[a]){n.dropdownLabels[a]=n._getDropdownLabelSubstr(A.button("option","label"),m.parent.children("."+V),m.parent.children("."+V).width())}C=n.dropdownLabels[a];m.parent.button("option","label",C);m.parent.attr("title",A.button("option","label"));B=W(":radio",m.parent.closest("ul"));B&&W.each(B,function(){n._updateGroupElementTextState(this)})}}}else{n._addActiveClassToButtonText(A.button("widget"))}}else{if(d){o=n.listUis[d];if(o){o.ui.button("option","label",o.defaultValue);o.buttons&&W.each(o.buttons,function(e,f){f.attr("checked",false);f.button("refresh");n._addActiveClassToButtonText(f.button("widget"))})}}}}})})(jQuery);(function(A5){var A4=alert,AZ=window,DR=document,A6=parseInt,BS,B0,BW,A8,At,B1=[],Aq=null,DL=true,Ap=true,AW=0,AI=[],AV=null,E5=null,AF="wijeditor-",Ay="setButtonDisabled",Ao="setButtonsDisabled",Az="setButtonChecked",Do="setButtonsChecked",BV="form",Dq="imagebutton",B4="textarea",BX="button",BY="textbox",Cg="list",B6="passwordfield",Dl="dropdownlist",Dp="hiddenfield",B3="radio",Ck="checkbox",Ah="insertcol",D3="insertrow",Fh="insertcell",D2="splitcell",Ax="mergecell",Ai="deletecol",D1="deleterow",Ff="deletecell",A0="justifyleft",Am="justifycenter",An="justifyright",Fa="justifyfull",Ca="borders",Aj="insertorderedlist",CR="insertunorderedlist",B8="outdent",B2="indent",E6="backcolor",E4="fontcolor",A1="bold",AX="italic",AK="strikethrough",A2="underline",AR="subscript",AT="superscript",D4="template",Aa="removeformat",Dj="insertbreak",DF="insertparagraph",DC="insertprintpagebreak",Cl="inserthorizontalrule",D0="tablebutton",Ak="inserttable",Cm="edittable",E8="wysiwyg",D6="split",Fg="code",Au="wordwrap",Di="fullscreen",AE="undo",CW="redo",B9="preview",DV="cleanup",DM="cut",DX="copy",DZ="paste",Cn="selectall",DU="media",E9="specialchar",BU="datetime",DY="find",DW="inspect",DO="save",B7="spelling",As="imagebrowser",DN="link",AY="xx-small",Bi="x-small",AQ="small",AN="medium",AL="large",AM="x-large",A7="xx-large",AS="fontname",AD="fontsize",Dk="blockquote",Fi="insertcode",A3="wijmo-wijribbon",DH=A3+"-bigbutton",AP=A3+"-dropdownbutton",EX=A3+"-splitbutton",CH=A3+"-list",CF=A3+"-save",Ea=A3+"-save16",Cv=A3+"-undo",CE=A3+"-redo",Ej=A3+"-preview",Ev=A3+"-cleanup",Cr=A3+"-cut",CD=A3+"-copy",CN=A3+"-paste",EK=A3+"-selectall",Ep=A3+"-bgcolor",CI=A3+"-color",CM=A3+"-bold",El=A3+"-italic",EF=A3+"-underline",D8=A3+"-strike",Cs=A3+"-sub",Cq=A3+"-sup",Ez=A3+"-template",Bv=A3+"-removeformat",EY=A3+"-justifyleft",BE=A3+"-justifycenter",By=A3+"-justifyright",Bs=A3+"-justifyfull",Eu=A3+"-borders",EN=A3+"-orderlist",E1=A3+"-unorderlist",Ei=A3+"-outdent",Ek=A3+"-indent",Es=A3+"-inspect",CB=A3+"-find",Ds=A3+"-table",DI=A3+"-inserttable",DE=A3+"-edittable",EG=A3+"-insertcol",EH=A3+"-insertrow",EO=A3+"-insertcell",EL=A3+"-splitcell",EM=A3+"-mergecell",EI=A3+"-deletecol",EJ=A3+"-deleterow",E0=A3+"-deletecell",Bu=A3+"-insertbreak",BR=A3+"-insertparagraph",BN=A3+"-insertprintpagebreak",EB=A3+"-inserthr",CC=A3+"-form",EA=A3+"-textarea",Eg=A3+"-textbox",EC=A3+"-password",BA=A3+"-hiddenfield",Bt=A3+"-imagebutton",En=A3+"-button",Et=A3+"-listbox",BI=A3+"-dropdownlist",CO=A3+"-radio",Ew=A3+"-checkbox",CG=A3+"-link",D9=A3+"-link16",Bx=A3+"-imagebrowser",CJ=A3+"-media",EW=A3+"-specialchar",Ex=A3+"-datetime",EZ=A3+"-blockquote",EP=A3+"-insertcode",Dr=A3+"-modes",EQ=A3+"-designview",EU=A3+"-sourceview",EE=A3+"-splitview",Eq=A3+"-wordwrap",ER=A3+"-fullscreen",A9="wijmo-wijeditor",ET=A9+"-container",Dy=A9+"-header",Dz=A9+"-content",Dx=A9+"-footer",DQ=A9+"-pathselector",DD=A9+"-fullscreen",AO=A9+"-dialog",Cp=AO+"-hr",AC=AO+"-buttons",C7=AO+"-button",C5=AO+"-text",C9=A9+"-imagedlg",Er=C9+"-content",Eh=C9+"-fields",Ag=C9+"-imagefield",CL=C9+"-imagelist",Eo=C9+"-preview",CQ=C9+"-imagesrc",Cj=C9+"-imagealt",Al=C9+"-imagewidth",AA=C9+"-imageheight",Ch=C9+"-css",AJ=C9+"-hideimagelist",Da=A9+"-templatedlg",BZ=Da+"-toplabels",Cz=Da+"-topleftlabel",Cx=Da+"-toprightlabel",Ct=Da+"-content",BO=Da+"-templatelist",Cu=Da+"-preview",CA=Da+"-templateinfo",Ar=Da+"-nameinfo",E7=Da+"-descriptioninfo",BQ=Da+"-fields",Aw=Da+"-name",CU=Da+"-description",Cw=Da+"-buttons",Ci=Da+"-delete",B5=Da+"-save",AH=A9+"-linkdlg",CV=AH+"-address",DG=AH+"-linktype",AB=AH+"-anchor",Ba=AH+"-text",CT=AH+"-target",Bj=AH+"-css",E3=A9+"-codedlg",Du=E3+"-source",BH=E3+"-sourcelabel",C1=A9+"-taginsdlg",ES=C1+"-caption",E2=C1+"-taglabel",DB=C1+"-tagtext",BF=C1+"-filterempty",EV=C1+"-attribs",CS=C1+"-attriblist",Bg=C1+"-innerhtml",Av=C1+"-css",D5=A9+"-colordlg",AU=D5+"-picker",CY=D5+"-color",C3=A9+"-tabledlg",Bm=C3+"-rows",AG=C3+"-columns",Bk=C3+"-width",Bn=C3+"-height",Bo=C3+"-border",Bq=C3+"-cellpadding",Bl=C3+"-cellspacing",Br=C3+"-csstext",CZ=C3+"-bgcolor",C2=A9+"-previewdlg",Bz=C2+"-caption",Bh=C2+"-navigator",Dt=C2+"-prev",Dw=C2+"-next",DJ=C2+"-printall",DK=C2+"-printone",Dn=C2+"-ok",DS=C2+"-printdocument",Dh=C2+"-previewiframe",CP=A9+"-cleanupdlg",BC=CP+"-caption",BK=CP+"-document",BB=CP+"-actions",DT=A9+"-finddlg",CK=DT+"-find",Ey=DT+"-replace",CX=A9+"-mediadlg",Em=CX+"-type",Dm=CX+"-src",DA=CX+"-width",Dv=CX+"-height",C0=A9+"-specialchardlg",BJ=C0+"-chars",Dg=C0+"-preview",DP=C0+"-content",Bw=C0+"-list",Bp=C0+"_label",BL=C0+"-punctuation",BP=C0+"-symbols",BM=C0+"-diacritics",C4="wijmo-formatspan",C6="."+AC+" input:first",C8="."+AC+" input:last",Cy=["Bold","Italic","UnderLine","StrikeThrough","SubScript","SuperScript","JustifyLeft","JustifyCenter","JustifyRight","JustifyFull","Border","NumberedList","BulletedList","Outdent","Indent"],BD=["Bold","Italic","Link","BlockQuote","StrikeThrough","InsertDate","InsertImage","NumberedList","BulletedList","InsertCode"],BG=["Bold","Italic","StrikeThrough","UnderLine","ForeColor","FontSize","Link","InsertImage","NumberedList","BulletedList","BlockQuote"],ED={Form:{name:"form",tip:"Form",css:CC},Image:{name:"imagebutton",tip:"Image Button",css:Bt},TextArea:{name:"textarea",tip:"TextArea",css:EA},Button:{name:"button",tip:"Button",css:En},TextBox:{name:"textbox",tip:"TextBox",css:Eg},List:{name:"list",tip:"ListBox",css:Et},PasswordField:{name:"passwordfield",tip:"Password Field",css:EC},DropDownList:{name:"dropdownlist",tip:"DropDownList",css:BI},HiddenField:{name:"hiddenfield",tip:"Hidden Field",css:BA},Radio:{name:"radio",tip:"RadioButton",css:CO},CheckBox:{name:"checkbox",tip:"CheckBox",css:Ew},InsertColumn:{name:"insertcol",tip:"Insert Column",css:EG},InsertRow:{name:"insertrow",tip:"Insert Row",css:EH},InsertCell:{name:"insertcell",tip:"Insert Cell",css:EO},SplitCell:{name:"splitcell",tip:"Split Cell",css:EL},MergeCell:{name:"mergecell",tip:"Merge Cell",css:EM},DeleteColumn:{name:"deletecol",tip:"Delete Column",css:EI},DeleteRow:{name:"deleterow",tip:"Delete Row",css:EJ},DeleteCell:{name:"deletecell",tip:"Delete Cell",css:E0},JustifyLeft:{name:"justifyleft",tip:"Justify Left",css:EY,grpname:"alignment"},JustifyCenter:{name:"justifycenter",tip:"Justify Center",css:BE,grpname:"alignment"},JustifyRight:{name:"justifyright",tip:"Justify Right",css:By,grpname:"alignment"},JustifyFull:{name:"justifyfull",tip:"Justify Full",css:Bs,grpname:"alignment"},Border:{name:"borders",tip:"Border",css:Eu},NumberedList:{name:"insertorderedlist",tip:"Numbered List",css:EN,grpname:"list"},BulletedList:{name:"insertunorderedlist",tip:"Bulleted List",css:E1,grpname:"list"},Outdent:{name:"outdent",tip:"Outdent",css:Ei,grpname:"block"},Indent:{name:"indent",tip:"Indent",css:Ek,grpname:"block"},BackColor:{name:"backcolor",tip:"Background Color",css:Ep},ForeColor:{name:"fontcolor",tip:"Font Color",css:CI},Bold:{name:"bold",tip:"Bold",css:CM},Italic:{name:"italic",tip:"Italic",css:El},StrikeThrough:{name:"strikethrough",tip:"Strikethrough",css:D8},UnderLine:{name:"underline",tip:"Underline",css:EF},SubScript:{name:"subscript",tip:"Subscript",css:Cs},SuperScript:{name:"superscript",tip:"Superscript",css:Cq},Template:{name:"template",tip:"Template",css:Ez},RemoveFormate:{name:"removeformat",tip:"RemoveFormat",css:Bv},InsertBreak:{name:"insertbreak",tip:"Insert Break",css:Bu},InsertParagraph:{name:"insertparagraph",tip:"Insert Paragraph",css:BR},InsertPrint:{name:"insertprintpagebreak",tip:"Insert Print Page Break",css:BN},InsertHR:{name:"inserthorizontalrule",tip:"Insert Horizontal Line",css:EB},Table:{name:"tablebutton",tip:"Table",css:Ds},InsertTable:{name:"inserttable",tip:"Insert Table",css:DI},EditTable:{name:"edittable",tip:"Edit Table",css:DE},Wysiwyg:{name:"wysiwyg",tip:"Design View",css:EQ,grpname:"modes"},Split:{name:"split",tip:"Split View",css:EE,grpname:"modes"},Code:{name:"code",tip:"Source View",css:EU,grpname:"modes"},Wordwrap:{name:"wordwrap",tip:"Wordwrap",css:Eq},FullScreen:{name:"fullscreen",tip:"Fullscreen",css:ER},Undo:{name:"undo",tip:"Undo",css:Cv},Redo:{name:"redo",tip:"Redo",css:CE},Preview:{name:"preview",tip:"Preview",css:Ej},Cleanup:{name:"cleanup",tip:"Clean up",css:Ev},Cut:{name:"cut",tip:"Cut",css:Cr},Copy:{name:"copy",tip:"Copy",css:CD},Paste:{name:"paste",tip:"Paste",css:CN},SelectAll:{name:"selectall",tip:"Select All",css:EK},Media:{name:"media",tip:"Media",css:CJ},InsertSpecialChar:{name:"specialchar",tip:"Insert Special Character",css:EW},InsertDate:{name:"datetime",tip:"Insert Date Time",css:Ex},Find:{name:"find",tip:"Find And Replace",css:CB,text:"Find"},Inspect:{name:"inspect",tip:"Tag Inspect",css:Es,text:"Inspect"},Save:{name:"save",tip:"Form",css:CF,text:"Save"},Spelling:{name:"spelling",tip:"Form",css:""},InsertImage:{name:"imagebrowser",tip:"Image Browser",css:Bx},Link:{name:"link",tip:"Link",css:CG,text:"Link"},FontName:{name:"fontname",tip:"Font Name",css:AP},FontSize:{name:"fontsize",tip:"Font Size",css:AP},BlockQuote:{name:"blockquote",tip:"Block Quote",css:EZ},InsertCode:{name:"insertcode",tip:"Insert Code",css:EP}},D7=function(){var B=this,A=[];B.append=function(C){A.push(C)};B.toString=function(){return A.join("")};B.dispose=function(){A=null}},Co=function(A){this.text=A;this.render=function(){return this.text}},BT=function(E,D,A){var C=this,B={br:true,img:true,hr:true,input:true};C.tagName=E||"div";C.attributes=A||{};C.innerText=D||"";C.children=[];if(A5.isPlainObject(D)){C.innerText="";C.attributes=D}C._isShortTag=false;if(B[C.tagName]===true){C._isShortTag=true}C.render=function(){var G=new D7,F="";G.append(C._renderBeginTag(C.tagName,C.attributes));C.innerText!==""&&G.append(C.innerText);C.children.length>0&&A5.each(C.children,function(H,I){G.append(I.render())});G.append(C._renderEndTag(C.tagName));F=G.toString();G.dispose();return F};C.add=function(F){this.children.push(F)};C._renderBeginTag=function(G,F){var H=new D7,I="";H.append("<");H.append(G);A5.each(F,function(J,K){H.append(" ");H.append(J);H.append("=");H.append('"');H.append(K.toString());H.append('"')});if(this._isShortTag){H.append(" ")}else{H.append(">")}I=H.toString();H.dispose();return I};C._renderEndTag=function(G){var H=new D7,F="";if(this._isShortTag){H.append("/>")}else{H.append("</");H.append(G);H.append(">")}F=H.toString();H.dispose();return F}};A5.widget("wijmo.wijeditor",{options:{fullScreenContainerSelector:"",editorMode:"wysiwyg",fullScreenMode:false,showPathSelector:true,mode:"ribbon",commandButtonClick:null,simpleModeCommands:null,showFooter:true,customContextMenu:true},_create:function(){var A=this;if(A.element.is("input")){return}A._editorify();A._initElements();AZ.setTimeout(function(){A.options.disabled&&A._handleDisabledOption(true,A.editor)},40)},_createBigButton:function(F,B,D,A){var C=this,E=C._createElement("button",{title:F,name:D,"class":DH});E.add(C._createDiv(B));E.add(C._createSpan("",A));return E},_createTextButton:function(B,C,A){return this._createElement("button",A,{title:B,name:C})},_createButton:function(F,B,D,A){var C=this,E;if(!A){return C._createElement("button",{title:F,name:D,"class":B})}E=C._createElement("button",{title:F,name:D});E.add(C._createSpan(B));E.add(C._createSpan("",A));return E},_createTextRadioButton:function(A,E,D,C,G){var B=this,F=[];F.push(B._createElement("input",{id:E+D,type:"radio",name:C}));F.push(B._createElement("label",G,{"for":E+D,title:A,name:D}));return F},_createImageRadioButton:function(A,E,G,D,C){var B=this,F=[];F.push(B._createElement("input",{id:E+D,type:"radio",name:C}));F.push(B._createElement("label",{"for":E+D,title:A,name:D,"class":G}));return F},_createImageCheckButton:function(F,D,B,C){var A=this,E=[];E.push(A._createElement("input",{id:D+C,type:"checkbox"}));E.push(A._createElement("label",{"for":D+C,title:F,name:C,"class":B}));return E},_createRibbonList:function(){return this._createSpan(CH)},_createDropdownButton:function(F,A,C,B,G){var D=this,E=D._createElement("div",{title:F,"class":AP}),H=D._createElement("ul");E.add(D._createTextButton(F,A,C));E.add(H);A5.each(B,function(J,K){var L=D._createElement("li"),I=D._createTextRadioButton(K.tip,G,K.name,A,K.text);A5.each(I,function(M,N){L.add(N)});H.add(L)});return E},_createSplitButton:function(A,C,G,B,F){var D=this,E=D._createElement("div",{title:A,"class":EX}),H=D._createElement("ul");E.add(D._createBigButton(A,C,G,B));E.add(D._createElement("button",{"class":DH}));E.add(H);A5.each(F,function(I,K){var J=D._createElement("li");J.add(D._createButton(K.tip,K.css,K.name,K.text));H.add(J)});return E},_createButtonByCommand:function(B){var C=this,D,E=ED[B],A;if(!E){return}A=E.name;switch(A){case Dk:case BV:case Dq:case B4:case BX:case BY:case Cg:case B6:case Dl:case Dp:case B3:case Ck:case Ah:case D3:case Fh:case D2:case Ax:case Ai:case D1:case Ff:case Aa:case Dj:case DF:case DC:case Di:case AE:case CW:case DM:case DX:case DZ:case BU:case Au:case E6:case E4:case B9:case DV:case DU:case E9:case D4:case As:case Fi:case Cl:case Cn:D=C._createButton(E.tip,E.css,A);break;case DY:case DW:D=C._createButton(E.tip,E.css,A,E.text);break;case Ca:case AR:case AT:case A1:case AX:case A2:case AK:D=C._createImageCheckButton(E.tip,AF,E.css,A);break;case E8:case D6:case Fg:case A0:case Am:case An:case Fa:case B8:case B2:case Aj:case CR:D=C._createImageRadioButton(E.tip,AF,E.css,A,E.grpname);break;case D0:D=C._createSplitButton("Table",Ds,D0,"Table",[{tip:"Insert Table",css:DI,name:Ak,text:"Insert"},{tip:"Edit Table",css:DE,name:Cm,text:"Edit"}]);break;case DO:if(C.options.mode==="ribbon"){D=C._createBigButton(E.tip,E.css,A,E.text)}else{D=C._createButton(E.tip,Ea,A)}break;case DN:if(C.options.mode==="ribbon"){D=C._createBigButton(E.tip,E.css,A,E.text)}else{D=C._createButton(E.tip,D9,A)}break;case AS:D=C._createDropdownButton("Font Name",AS,"Font Name",[{tip:"Arial",name:"fn1",text:"Arial"},{tip:"Courier New",name:"fn2",text:"Courier New"},{tip:"Garamond",name:"fn3",text:"Garamond"},{tip:"Tahoma",name:"fn4",text:"Tahoma"},{tip:"Times New Roman",name:"fn5",text:"Times New Roman"},{tip:"Verdana",name:"fn6",text:"Verdana"},{tip:"Wingdings",name:"fn7",text:"Wingdings"}],AF);break;case AD:D=C._createDropdownButton("Font Size",AD,"Font Size",[{tip:"VerySmall",name:"xx-small",text:"VerySmall"},{tip:"Smaller",name:"x-small",text:"Smaller"},{tip:"Small",name:"small",text:"Small"},{tip:"Medium",name:"medium",text:"Medium"},{tip:"Large",name:"large",text:"Large"},{tip:"Larger",name:"x-large",text:"Larger"},{tip:"VeryLarge",name:"xx-large",text:"VeryLarge"}],AF)}return D},_createActionGroup:function(){var C=this,B=C._createElement("li"),A=C._createRibbonList();B.add(C._createButtonByCommand("Save"));B.add(A);A.add(C._createButtonByCommand("Undo"));A.add(C._createButtonByCommand("Redo"));A=C._createRibbonList();B.add(A);A.add(C._createButtonByCommand("Preview"));A.add(C._createButtonByCommand("Cleanup"));A=C._createRibbonList();B.add(A);A.add(C._createButtonByCommand("Cut"));A.add(C._createButtonByCommand("Copy"));A.add(C._createButtonByCommand("Paste"));A.add(C._createButtonByCommand("SelectAll"));B.add(C._createElement("div","Actions"));return B},_createFontGroup:function(){var B=this,A=B._createElement("li"),C=B._createRibbonList();A.add(B._createButtonByCommand("FontName"));A.add(B._createButtonByCommand("FontSize"));A.add(C);C.add(B._createButtonByCommand("BackColor"));C.add(B._createButtonByCommand("ForeColor"));C=B._createRibbonList();A.add(C);A5.each(B._createButtonByCommand("Bold"),function(D,E){C.add(E)});A5.each(B._createButtonByCommand("Italic"),function(D,E){C.add(E)});A5.each(B._createButtonByCommand("UnderLine"),function(D,E){C.add(E)});A5.each(B._createButtonByCommand("StrikeThrough"),function(D,E){C.add(E)});A5.each(B._createButtonByCommand("SubScript"),function(D,E){C.add(E)});A5.each(B._createButtonByCommand("SuperScript"),function(D,E){C.add(E)});C=B._createRibbonList();A.add(C);C.add(B._createButtonByCommand("Template"));C=B._createRibbonList();A.add(C);C.add(B._createButtonByCommand("RemoveFormate"));A.add(B._createElement("div","Font"));return A},_createParaGroup:function(){var C=this,A=C._createElement("li"),B=C._createRibbonList();A.add(B);A5.each(C._createButtonByCommand("JustifyLeft"),function(D,E){B.add(E)});A5.each(C._createButtonByCommand("JustifyCenter"),function(D,E){B.add(E)});A5.each(C._createButtonByCommand("JustifyRight"),function(D,E){B.add(E)});A5.each(C._createButtonByCommand("JustifyFull"),function(D,E){B.add(E)});B=C._createRibbonList();A.add(B);A5.each(C._createButtonByCommand("Border"),function(D,E){B.add(E)});B=C._createRibbonList();A.add(B);A5.each(C._createButtonByCommand("NumberedList"),function(D,E){B.add(E)});A5.each(C._createButtonByCommand("BulletedList"),function(D,E){B.add(E)});B=C._createRibbonList();A.add(B);A5.each(C._createButtonByCommand("Outdent"),function(D,E){B.add(E)});A5.each(C._createButtonByCommand("Indent"),function(D,E){B.add(E)});A.add(C._createElement("div","Paragraph"));return A},_createReviewGroup:function(){var A=this,B=A._createElement("li");B.add(A._createButtonByCommand("Inspect"));B.add(A._createButtonByCommand("Find"));B.add(A._createElement("div","Review"));return B},_createTablesGroup:function(){var C=this,B=C._createElement("li"),A=C._createRibbonList();B.add(C._createButtonByCommand("Table"));B.add(A);A.add(C._createButtonByCommand("InsertColumn"));A.add(C._createButtonByCommand("InsertRow"));A.add(C._createButtonByCommand("InsertCell"));A=C._createRibbonList();B.add(A);A.add(C._createButtonByCommand("SplitCell"));A.add(C._createButtonByCommand("MergeCell"));A=C._createRibbonList();B.add(A);A.add(C._createButtonByCommand("DeleteColumn"));A.add(C._createButtonByCommand("DeleteRow"));A.add(C._createButtonByCommand("DeleteCell"));B.add(C._createElement("div","Tables"));return B},_createBreaksGroup:function(){var A=this,B=A._createElement("li");B.add(A._createButtonByCommand("InsertBreak"));B.add(A._createButtonByCommand("InsertParagraph"));B.add(A._createButtonByCommand("InsertPrint"));B.add(A._createButtonByCommand("InsertHR"));B.add(A._createElement("div","Breaks"));return B},_createFormsGroup:function(){var A=this,B=A._createElement("li"),C=A._createRibbonList();B.add(C);C.add(A._createButtonByCommand("Form"));C=A._createRibbonList();B.add(C);C.add(A._createButtonByCommand("TextArea"));C.add(A._createButtonByCommand("TextBox"));C.add(A._createButtonByCommand("PasswordField"));C.add(A._createButtonByCommand("HiddenField"));C=A._createRibbonList();B.add(C);C.add(A._createButtonByCommand("Image"));C.add(A._createButtonByCommand("Button"));C=A._createRibbonList();B.add(C);C.add(A._createButtonByCommand("List"));C.add(A._createButtonByCommand("DropDownList"));C.add(A._createButtonByCommand("Radio"));C.add(A._createButtonByCommand("CheckBox"));B.add(A._createElement("div","Forms"));return B},_createSpecialGroup:function(){var A=this,B=A._createElement("li");B.add(A._createButtonByCommand("Link"));B.add(A._createButtonByCommand("InsertImage"));B.add(A._createButtonByCommand("Media"));B.add(A._createButtonByCommand("InsertSpecialChar"));B.add(A._createButtonByCommand("InsertDate"));B.add(A._createElement("div","Special"));return B},_getDefaultRibbonMarkup:function(){var F=this,I=F._createElement("div"),A=F._createElement("ul"),H=F._createElement("li"),C=F._createElement("li"),G=F._createElement("div",{id:AF+"format"}),B=F._createElement("div",{id:AF+"insert"}),D=F._createElement("ul"),E=F._createElement("ul");I.add(A);I.add(G);I.add(B);A.add(H);A.add(C);H.add(F._createElement("a","Format",{href:"#"+AF+"format"}));C.add(F._createElement("a","Insert",{href:"#"+AF+"insert"}));G.add(D);D.add(F._createActionGroup());D.add(F._createFontGroup());D.add(F._createParaGroup());D.add(F._createReviewGroup());B.add(E);E.add(F._createTablesGroup());E.add(F._createBreaksGroup());E.add(F._createFormsGroup());E.add(F._createSpecialGroup());return I.render()},_getRibbonModesMarkup:function(){var B=this,A=B._createDiv(Dr),C=B._createRibbonList();A.add(C);A5.each(B._createButtonByCommand("Wysiwyg"),function(D,E){C.add(E)});A5.each(B._createButtonByCommand("Code"),function(D,E){C.add(E)});A5.each(B._createButtonByCommand("Split"),function(D,E){C.add(E)});A.add(B._createButtonByCommand("Wordwrap"));A.add(B._createButtonByCommand("FullScreen"));return A.render()},_getSimpleToolBar:function(B){var A=this,C,D=A._createDiv("");A5.each(B,function(F,E){C=A._createButtonByCommand(E);if(C){if(A5.inArray(E,Cy)!==-1){A5.each(C,function(G,H){D.add(H)})}else{D.add(C)}}});return D.render()},_editorify:function(){var J=this,K=J.element,A=K.width(),G=K.height(),L=J.options,I=L.mode,M,B,H,C,E,D,F;J._oriStyle=K.attr("style");J._oriContent=K.html();if(K.is("textarea")){if(I==="ribbon"){A8=A5(J._getDefaultRibbonMarkup())}else{if(I==="bbcode"){A8=A5(J._getSimpleToolBar(BG))}else{if(L.simpleModeCommands&&L.simpleModeCommands.length!==0){H=A5.grep(L.simpleModeCommands,function(N){return N!=="Table"});A8=A5(J._getSimpleToolBar(H))}else{A8=A5(J._getSimpleToolBar(BD))}}}J.sourceView=K;J.editor=K.wrap("<div></div>").parent();J.editor.width(A).height(G)}else{J.editor=K;A8=K.children(":eq(0)");D=K.children(":eq(1)");if(D.is("textarea")){J.sourceView=D}else{F=D.html();D.remove();J.sourceView=A5("<textarea></textarea>").val(F)}}M=A5("<div class='"+ET+"'></div>");J.dialog=A5("<div class ='"+A9+"'></div>");J.subDialog=A5("<div class ='"+A9+"'></div>");J.editor.addClass(A9).append(M).append(J.dialog).append(J.subDialog);J._createMenuMarkUp(J,L);A8.wrap("<a href='#'></a>").parent().appendTo("<div class='"+Dy+" ui-widget-header ui-helper-clearfix ui-corner-top'></div>").parent().appendTo(M);B=A5("<div class='"+Dz+"'></div>").appendTo(M);J.designView=A5("<iframe frameborder='0'></iframe>");J.designView.wrap("<div></div>").parent().appendTo(B);J.sourceView.wrap("<div></div>").parent().appendTo(B);C=[A8];At=A5(J._getRibbonModesMarkup());if(L.showFooter){E=A5("<div class='"+Dx+" ui-widget ui-widget-content ui-state-default'></div>");M.append(E);E.append("<div class='"+DQ+"'></div>");At.appendTo(E);C.push(At)}A5.each(C,function(N,O){O.wijribbon({click:function(P,Q){J._ribbonCommand(Q.commandName,Q.name);J._trigger("commandButtonClick",P,Q)}})})},_createMenuMarkUp:function(A,B){if(B.customContextMenu&&!A5.browser.webkit){A.contextMenu=A5("<ul><li _c1buttoncmd='cut'><a>Cut</a></li><li _c1buttoncmd='copy'><a>Copy</a></li><li _c1buttoncmd='paste'><a>Paste</a></li></ul>");A5("<a href='#'></a>").append(A.contextMenu).appendTo(A.editor)}},_handleDisabledOption:function(A,B){var C=this;if(A){if(!C.disabledDiv){C.disabledDiv=C._createDisabledDiv(B)}C.disabledDiv.appendTo("body")}else{if(C.disabledDiv){C.disabledDiv.remove();C.disabledDiv=null}}},_createDisabledDiv:function(B){var A=this,D=B?B:A.element,E=D.offset(),F=D.outerWidth(),C=D.outerHeight();return A5("<div></div>").addClass("ui-state-disabled").css({"z-index":"99999",position:"absolute","background-color":"lightgray",width:F,height:C,left:E.left,top:E.top})},_initElements:function(){var D=this,B=D.options,A=D.element.height()-D._getHeader().outerHeight(true)-D._getFooter().outerHeight(true),C={};D._getContent().height(A).wijsplitter({showExpander:false,orientation:"horizontal",panel1:{scrollBars:"none",collapsed:false},panel2:{scrollBars:"none",collapsed:true}});D._addHandlerToDesignView();D._createWijMenu();(!B.showPathSelector||D.options.mode==="bbcode")&&D._getPathSelector().hide();D._ribbonCommand(B.editorMode);B.fullScreenMode&&D._setFullScreen(B.fullScreenMode);C[CW]=true;C[AE]=true;A8.wijribbon(Ao,C)},_setOption:function(A,D){var C=this,B=C.options,E=B.customContextMenu;A5.Widget.prototype._setOption.apply(C,arguments);if(A==="fullScreenMode"){B.fullScreenMode=D;C._setFullScreen(D)}else{if(A==="showPathSelector"){B.showPathSelector=D;if(D){C._getPathSelector().show()}else{C._getPathSelector().hide()}}else{if(A==="editorMode"){B.editorMode=D;C._ribbonCommand(D)}else{if(A==="fullScreenContainerSelector"){B.fullScreenContainerSelector=D;C.options.fullScreenMode&&C._setFullScreen(true)}else{if(A==="disabled"){C._handleDisabledOption(D,C.editor)}else{if(A==="commandButtonClick"){B.commandButtonClick=D}else{if(A==="customContextMenu"){if(E===D){return}if(D){!C.contextMenu&&C._createMenuMarkUp(C,B);C._createWijMenu()}else{C.contextMenu.wijmenu("destroy").remove();C.contextMenu=undefined}}}}}}}}},_getHeader:function(){return A5("."+Dy,this.editor)},_getContent:function(){return A5("."+Dz,this.editor)},_getFooter:function(){return A5("."+Dx,this.editor)},_getPathSelector:function(){return A5("."+DQ,this.editor)},_getModes:function(){return A5("."+Dr,this.editor)},_getDesignView:function(){return this.designView},_getDesignViewWindow:function(){var A=this.designView;return A&&A.length>0?A[0].contentWindow:null},_getDesignViewDocument:function(){var A=this._getDesignViewWindow();return A?A.document:null},_getDesignViewText:function(){var A=this._getDesignViewDocument();return A&&A.body&&A.body.innerHTML?A.body.innerHTML:""},_setDesignViewText:function(C){var B=this,A=this._getDesignViewDocument();if(this.options.mode==="bbcode"){C=B._convertBBCodeToHtml(C)}if(A&&A.body){A.body.innerHTML=C}},_getDialog:function(){return this.dialog},_getSubDialog:function(){return this.subDialog},_initContentDocument:function(){var B=this,C=B.sourceView.val(),A=B._getDesignViewDocument();if(B.options.mode==="bbcode"){C=B._convertBBCodeToHtml(A5.trim(C))}A.open();A.write('<html style="width:100%;height:100%;'+(B.options.enabled?"cursor:text;":"")+'"><head><title></title><style id="__wijStyle"  type="text/css" >table,td,tr{border: 1px #acacac dashed;}</style></head><body>'+C+"</body></html>");A.close();AI=[];AI.push(C);AW=0},_addHandlerToDesignView:function(){var B=this,A=B._getDesignViewWindow(),C=A.document;B._initContentDocument();if(A5.browser.mozilla){setTimeout(B._setDesignModeForFF,1000,B)}else{B._setContentEditable(C,true)}B.sourceView.bind("blur."+B.widgetName,function(){B._onSourceViewBlur()});B.sourceView.bind("keyup."+B.widgetName,function(){B._onSourceViewBlur()});if(!A5.browser.mozilla){A5(A).blur(function(){B._onDesignViewBlur()})}else{A5(C).bind("blur."+B.widgetName,function(){B._onDesignViewBlur()})}A5(C).bind("mouseup."+B.widgetName,function(D){B._onDesignViewMouseUp(D)}).bind("keydown."+B.widgetName,function(D){B._onDesignViewKeyDown(D)}).bind("keyup."+B.widgetName,function(D){B._onDesignViewKeyUp(D);B._onDesignViewBlur()})},_setDesignModeForFF:function(A){A._getDesignViewDocument().designMode="on"},destroy:function(){var A=this;A.element.html(A._oriContent);A.element.removeAttr("tabindex");if(A._oriStyle===undefined){A.element.removeAttr("style")}else{A.element.attr("style",A._oriStyle)}A.element.insertBefore(A.editor);A.element.unbind("."+A.widgetName);A.editor.remove();A5.Widget.prototype.destroy.call(A)},showEditorDialog:function(A){switch(A){case Ak:case D4:case As:case DW:case DY:case E9:case DU:case DV:case DN:case E6:case E4:case Fi:this._ribbonCommand(A);break;default:A4("Cannot find the dialog with command name '"+A+"'!")}},executeEditorAction:function(A,B){this._ribbonCommand(A,B)},_isFontSizeCustomized:function(){if(Aq!==null){return Aq}var A=A8.wijribbon("getDropdownList",AD),B=[AY,Bi,AQ,AN,AL,AM,A7];Aq=false;A5.each(A,function(C){if(A5.inArray(C,B)===-1){Aq=true;return false}});return Aq},_fontSizeCommand:function(C){var E=this,B=E._getDesignViewDocument(),D=4,F="font-size",A=[];switch(C){case AY:D=1;break;case Bi:D=2;break;case AQ:D=3;break;case AN:D=4;break;case AL:D=5;break;case AM:D=6;break;case A7:D=7}if(!E._isFontSizeCustomized()){B.execCommand("FontSize",false,D)}else{if(A5.browser.msie){E._formatFontSpan(B,F,C)}else{B.execCommand("FontSize",false,D);A5.each(A5("font[size]",B),function(G,H){A.push(E._replaceFontWithSpan(A5(H),"size",F,C))});E._setSelection(A)}}E.options.mode==="bbcode"&&!A5.browser.msie&&E._convertFontStyleToStandTag();E._addtoUndoBuffer()},_fontNameCommand:function(A){var C=this,B=C._getDesignViewDocument(),E=A8.wijribbon("getDropdownList",AS),D;A5.each(E,function(F,G){if(A===F){D=G;return false}});B.execCommand("FontName",false,D);C._isFontSizeCustomized()&&A5.browser.msie&&C._formatFontSpan(B,"font-family",D);C._addtoUndoBuffer()},_formatFontSpan:function(A,E,G){var F=this,C=G,B="fontFamily",D=[];if(E!=="font-family"){C="c1-temp";B="fontSize"}A.execCommand("FontName",false,C);A5.each(A5("font[face='"+C+"']",A),function(L,K){var I=F._replaceFontWithSpan(A5(K),"face",E,G),H,J;D.push(I);H=A5("span."+C4,I);for(J=H.length-1;J>=0;J--){F._removeSpecifiedStyleSpan(A5(H[J]),B,E)}A5.each(I,function(N,M){A5.each(A5(M).parents("span."+C4),function(O,P){var Q=A5(P);if(Q.children().length>1){return false}Q.text()===A5(M).text()&&F._removeSpecifiedStyleSpan(Q,B,E)})})});F._setSelection(D)},_setSelection:function(H,C,B){var E=this._getDesignViewWindow(),J=E.document,G,I,A,K,D=0;try{if(A5.browser.msie){G=J.selection.createRange();if(H){A5.each(H,function(L,M){D+=M.text().length});G.moveToElementText(H[0][0]);G.collapse(true);G.moveEnd("character",D)}else{G.moveStart("textedit",-1);G.collapse(true);G.moveStart("character",C);G.moveEnd("character",B)}G.select()}else{K=E.getSelection();G=J.createRange();I=H[0][0];A=H[H.length-1][0];G.setStart(I,0);G.setEnd(A,A.childNodes.length);K.removeAllRanges();K.addRange(G)}}catch(F){}},_replaceFontWithSpan:function(E,D,B,A){E.wrap("<span class = '"+C4+"' style='"+B+":"+A+"'></span>");var C=E.parent();E.removeAttr(D);if(/<font\s*>/ig.test(C.html())){C.html(E.html());E.remove()}return C},_removeSpecifiedStyleSpan:function(C,E,B){var D,A=true;C[0].style[E]!==""&&C.css(B,"");D=C.attr("style");D&&A5.each(D.split(";"),function(H,G){var F=A5.trim(G).toLowerCase();if(F!==""&&F.indexOf(B)!==-1){A=false;return false}});A&&C.replaceWith(C.html())},_removeFormat:function(){var C=this,A=C._getDesignViewDocument(),B={};A.execCommand(Aa,false,null);C._isFontSizeCustomized()&&A5.browser.msie&&C._removeFormatForIE(A);C._addtoUndoBuffer();B[A1]=false;B[AX]=false;B[AK]=false;B[A2]=false;B[AR]=false;B[AT]=false;B[Aj]=false;B[CR]=false;B[A0]=false;B[Am]=false;B[An]=false;B[Fa]=false;A8.wijribbon(Do,B)},_removeFormatForIE:function(P){var H=P.selection.createRange(),F=H.htmlText,B=H.text,C=0,A=A5(H.parentElement()),L=A5(P.body),J="",K="",G="__c1temp",E="c1-temp",D="<span class='"+E+"'>"+G+"</span>",M,O,R,Q,N,I;A.addClass("c1-app-parent");H.pasteHTML(D);C=L.text().indexOf(G);M=A5("span."+E,P);O=M;M.parentsUntil("body").each(function(){if(A5(this).is(".c1-app-parent")){return false}O=A5(this)});M.html(F);R=A5("span."+C4,M);for(N=R.length-1;N>=0;N--){Q=A5(R[N]);Q.replaceWith(Q.html())}!O.is("."+E)&&O.after(M);A5.each(O.parents("span."+C4),function(U,T){J+="</span>";K="<span class='"+C4+"' style = '"+A5(T).attr("style")+"'>"+K});F=M.html();M.replaceWith(G);I=L.html().split(G);L.html(I[0]+J+F+K+I[1]);R=A5("span."+C4,P);for(N=R.length-1;N>=0;N--){Q=A5(R[N]);Q.text()===""&&Q.replaceWith(Q.html())}A5(".c1-app-parent",P).removeClass("c1-app-parent");this._setSelection(null,C,B.length)},_toggleFullScreen:function(){var A=this,B=A.options;B.fullScreenMode=!B.fullScreenMode;A._setFullScreen(B.fullScreenMode)},_setFullScreen:function(E){var H=this,B=1,G=H._getHeader(),F=H._getFooter(),C=H._getContent(),A=H.options.fullScreenContainerSelector,I=A5(A),D,K,J;if(E){if(I.length===0){I=A5(AZ);A="body";H._oriDocOverFlow=A5(document.documentElement).css("overflow");A5(document.documentElement).css({overflow:"hidden"});!A5.browser.mozilla&&window.scrollTo(0,0);A5(AZ).bind("resize.wijeditor",function(){H._fullscreenOnWindowResize()})}D=I.width();K=I.height()-2*B;BS=H.editor.width();B0=H.editor.height();if(!BW){BW=H.editor.parent()}if(!H._replacedDiv){H._replacedDiv=A5("<div />")}H.editor.after(H._replacedDiv);A5(A).append(H.editor);H.editor.css({width:D,height:K,position:""}).addClass(DD);A8.wijribbon("updateRibbonSize")}else{H._replacedDiv.after(H.editor).remove();H.editor.css({width:BS,height:B0,position:"static"}).removeClass(DD);!H.options.fullScreenContainerSelector&&A5(document.documentElement).css({overflow:H._oriDocOverFlow});A5(AZ).unbind("resize.wijeditor");A8.wijribbon("updateRibbonSize")}J=H.editor.height()-G.height()-F.height();C.height(J).wijsplitter("refresh");H._addHandlerToDesignView();H._createWijMenu()},_createWijMenu:function(){var A=this;A.contextMenu&&A.contextMenu.wijmenu({orientation:"vertical",trigger:A.designView,triggerEvent:"rtclick",showing:function(C,G){G.show();var E=A.designView.offset(),D=A5(A5(A.designView)[0].contentWindow).scrollLeft(),H=A5(A5(A.designView)[0].contentWindow).scrollTop(),B=E.left+2-D,F=E.top-H;G.position({my:"left top",at:"right top",of:C,offset:B+" "+F,collision:"none none"});G.hide()},animation:{animated:"fade"},select:function(B,C){A._contextMenuItemClick(B,C)}})},_fullscreenOnWindowResize:function(){var E=this,A=E._getHeader(),G=E._getFooter(),B=E._getContent(),F,C=A5(window).width(),D=A5(window).height();E.editor.css({width:C,height:D});F=E.editor.height()-A.height()-G.height();B.height(F).wijsplitter("refresh")},_saveText:function(){},_doSpellCheck:function(){},_ribbonCommand:function(C,B){var G=this,A=G._getDesignViewDocument(),D=G._getContent(),H,J,I;if(B===AS){G._fontNameCommand(C);G._onDesignViewBlur();return}if(B===AD){G._fontSizeCommand(C);G._onDesignViewBlur();return}G._setIEFocus();switch(C){case Dk:if(A5.browser.msie){A.execCommand("FormatBlock",false,"<ADDRESS>");I=A.selection.createRange();I=A5(I.parentElement()).closest("address");if(I.length){I.replaceWith("<blockquote>"+I.html()+"</blockquote>");A.body.innerHTML=A.body.innerHTML.replace(/<BLOCKQUOTE>\s*?<BLOCKQUOTE>/gi,"<BLOCKQUOTE>");A.body.innerHTML=A.body.innerHTML.replace(/<\/BLOCKQUOTE>\s*?<\/BLOCKQUOTE>/gi,"</BLOCKQUOTE>");A.body.innerHTML=A.body.innerHTML.replace(/<BLOCKQUOTE>\s*?<\/BLOCKQUOTE>/gi,"")}}else{A.execCommand("FormatBlock",false,"<BLOCKQUOTE>")}break;case BV:H=G._generateUniqueName("form");G.insertHTML('<form id="'+H+'" name="'+H+'" method="post">'+H+"</form>");break;case Dq:H=G._generateUniqueName("image");G.insertHTML('<input id="'+H+'" name="'+H+'" type="image" value="'+H+'"/>');break;case B4:H=G._generateUniqueName("textarea");G.insertHTML('<textarea id="'+H+'" name="'+H+'" rows="4" cols="48"></textarea>');break;case BX:H=G._generateUniqueName("button");G.insertHTML('<input id="'+H+'" name="'+H+'" type="button" value="'+H+'"/>');break;case BY:H=G._generateUniqueName("textbox");G.insertHTML('<input id="'+H+'" name="'+H+'" type="text" value="'+H+'"/>');break;case Cg:H=G._generateUniqueName("list");G.insertHTML('<select id="'+H+'" name="'+H+'" style="width: 120px" size="8"></select>');break;case B6:H=G._generateUniqueName("password");G.insertHTML('<input id="'+H+'" name="'+H+'" type="password" value="'+H+'"/>');break;case Dl:H=G._generateUniqueName("dropdown");G.insertHTML('<select id="'+H+'" name="'+H+'"></select>');break;case Dp:H=G._generateUniqueName("hidden");G.insertHTML('<input id="'+H+'" name="'+H+'" type="hidden" value="'+H+'" />');break;case B3:H=G._generateUniqueName("radiobox");G.insertHTML('<input id="'+H+'" name="'+H+'" type="radio" value="'+H+'"><label for="'+H+'">'+H+"</label></input>");break;case Ck:H=G._generateUniqueName("checkbox");G.insertHTML('<input id="'+H+'" name="'+H+'" type="checkbox" value="'+H+'"><label for="'+H+'">'+H+"</label></input>");break;case Ah:case D3:case Fh:case D2:case Ax:case Ai:case D1:case Ff:G._tableAction(C);break;case Ca:G._toggleTableBorders();break;case AR:try{if(A.queryCommandState(AT)){A.execCommand(AT,false,null);A8.wijribbon(Az,AT,false)}}catch(F){}A.execCommand(AR,false,null);G._addtoUndoBuffer();break;case AT:try{if(A.queryCommandState(AR)){A.execCommand(AR,false,null);A8.wijribbon(Az,AR,false)}}catch(E){}A.execCommand(AT,false,null);G._addtoUndoBuffer();break;case Aa:G._removeFormat();break;case Dj:G.insertHTML("<br/>");break;case DF:J=G._getSelectedContent();if(!J||J===""){J="&nbsp;"}G.insertHTML("<p>"+J+"</p>");break;case DC:G.insertHTML('<div title="Print Page Break" style="font-size:1px;page-break-before:always;vertical-align:middle;height:1px;background-color:#c0c0c0">&nbsp;</div>');break;case Di:G._toggleFullScreen();break;case AE:G._undoAction();break;case CW:G._redoAction();break;case DM:G._execCut();break;case DX:G._execCopy();break;case DZ:G._execPaste();break;case BU:G.insertDateAndTime();break;case E8:At.wijribbon(Ay,Au,true).wijribbon(Az,E8,true);A8.wijribbon("option","disabled",false);D.wijsplitter("option","panel2",{collapsed:true});break;case D6:At.wijribbon(Ay,Au,true).wijribbon(Az,D6,true);A8.wijribbon("option","disabled",false);D.wijsplitter("option",{panel1:{collapsed:false},panel2:{collapsed:false}});break;case Fg:At.wijribbon(Ay,Au,false).wijribbon(Az,Fg,true);A8.wijribbon("option","disabled",true);D.wijsplitter("option","panel1",{collapsed:true});break;case Au:D.wijsplitter("option","panel1").collapsed&&G._toggleWordWrap();break;case E6:if(A5.browser.msie){AV=A.selection.createRange()}G._createDialog("Set BackColor",G._getDialogRes_BackColor(),G.initBackColorDialog);break;case E4:if(A5.browser.msie){AV=A.selection.createRange()}G._createDialog("Set ForeColor",G._getDialogRes_ForeColor(),G.initForeColorDialog);break;case Ak:if(A5.browser.msie){AV=A.selection.createRange()}G._createDialog("Insert Table",G._getDialogRes_Table(false),G.initInsertTableDialog);break;case Cm:G._getEditableTable()&&G._createDialog("Edit Table",G._getDialogRes_Table(true),G.initEditTableDialog);break;case B9:G._createDialog("Preview",G._getDialogRes_Preview(),G.initPreviewDialog);break;case DV:G._createDialog("Clearnup source HTML document",G._getDialogRes_CleanUp(),G.initCleanUpDialog);break;case DU:if(A5.browser.msie){AV=A.selection.createRange()}G._createDialog("Insert media",G._getDialogRes_Media(),G.initMediaDialog);break;case E9:if(A5.browser.msie){AV=A.selection.createRange()}G._createDialog("Insert special character",G._getDialogRes_SpecialCharacter(),G.initSpecialCharacterDialog);break;case DY:G._createDialog("Find and replace",G._getDialogRes_FindAndReplace(),G.initFindDialog);break;case DW:E5=G._getSelectedElement();G._createDialog("Tag Inspector",G._getDialogRes_TagInspector(),G.initTagInspectorDialog);break;case D4:if(A5.browser.msie){AV=A.selection.createRange()}G._createDialog("Apply Template",G._getDialogRes_Template(),G.initTemplateDialog);break;case As:if(A5.browser.msie){AV=A.selection.createRange()}G._createDialog("Image Browser",G._getDialogRes_ImageBrowser(),G.initImageBrowserDialog);break;case DN:if(A5.browser.msie){AV=A.selection.createRange()}G._createDialog("Insert hyperLink",G._getDialogRes_Link(),G.initHyperLinkDialog);break;case Fi:if(A5.browser.msie){AV=A.selection.createRange()}G._createDialog("Insert Code",G._getDialogRes_Code(),G.initInsertCodeDialog);break;case A0:case Am:case An:case Fa:case B8:case B2:case A1:case AX:case A2:case Aj:case CR:case AK:case Cl:case Cn:A.execCommand(C,false,null);G.options.mode==="bbcode"&&!A5.browser.msie&&G._convertStyleToStandTag();G._addtoUndoBuffer();break;case DO:G._saveText();break;case B7:G._doSpellCheck()}G._onDesignViewBlur()},_createDialog:function(A,B,D){var C=this,E=C.dialog;E.html("").undelegate(C.widgetName).append(B);if(!E.data("wijdialog")){E.wijdialog({width:"auto",height:"auto",modal:true,title:A,position:"center",resizable:false,captionButtons:{pin:{visible:false},refresh:{visible:false},toggle:{visible:false},minimize:{visible:false},maximize:{visible:false}}})}else{E.wijdialog("reset");E.wijdialog("option",{width:"auto",height:"auto",title:A})}C._adjustDialogLayoutForIE7();D&&D.call(C);E.wijdialog("open")},_adjustDialogLayoutForIE7:function(){var A=this.dialog;A5.browser.msie&&/^7\.[0-9]+/.test(A5.browser.version)&&A.wijdialog("option","width",A.parent().width())},_contextMenuItemClick:function(A,B){var D=this,C=B.item.attr("_c1buttoncmd");switch(C){case DM:D._execCut();break;case DX:D._execCopy();break;case DZ:D.focus();D._execPaste()}},_execCut:function(){var B=this,A=B._getDesignViewDocument();if(A5.browser.safari){A4("This function is not supported in current browser. Plesse use (Ctrl + X).")}else{if(A5.browser.msie){A.execCommand("Cut",false,null);B._addtoUndoBuffer()}else{B._execCopy();B._deleteSelectionContent();B._addtoUndoBuffer()}}},_execCopy:function(){var B=this,A=B._getDesignViewDocument();if(A5.browser.safari){A4("This function is not supported in current browser. Plesse use (Ctrl + C).")}else{if(A5.browser.msie){A.execCommand("Copy",false,null);B._addtoUndoBuffer()}else{B._copyToClipboard(B._getSelectedContent())}}},_execPaste:function(){var A=this,C,B=A._getDesignViewDocument();if(A5.browser.safari){A4("This function is not supported in current browser. Plesse use (Ctrl + V).")}else{if(A5.browser.msie){B.execCommand("Paste",false,null);A._addtoUndoBuffer()}else{try{C=A._copyFromClipboard();C&&C!==""&&A.insertHTML(C)}catch(D){}}}},_getFontSizeCollection:function(){return{"10px":AY,"13px":Bi,"16px":AQ,"18px":AN,"24px":AL,"32px":AM,"48px":A7,1:AY,2:Bi,3:AQ,4:AN,5:AL,6:AM,7:A7}},_updateButtonStates:function(F){var A=this,C=A._getDesignViewDocument(),H,G,D={},B=[A1,AX,AK,A2,AR,AT,Aj,CR,A0,Am,An,Fa],J,E=F.target,I=A5(E);A5.each(B,function(K,L){D[L]=C.queryCommandState(L)});A8.wijribbon(Do,D);H=A._queryCommandValue(AS)||"";A5.each(A8.wijribbon("getDropdownList",AS),function(K,L){if(L.toUpperCase()===H.toUpperCase()){G=K;return false}});A8.wijribbon(Az,G,true,AS);if(A._isFontSizeCustomized()){if(I.is("span")){G=E.style.fontSize}else{G=""}if(G===""){J=I.parents("span."+C4);A5.each(J,function(K,L){G=L.style.fontSize;if(G&&G!==""){return false}})}if(G===""){G=I.css("font-size")}}else{H=A._queryCommandValue(AD)||"";if(H===""){H=I.css("font-size")}A5.each(A._getFontSizeCollection(),function(K,L){if(K.toString()===H.toString()){G=L;return false}})}A8.wijribbon(Az,G,true,AD)},_queryCommandValue:function(D){var B=this._getDesignViewDocument();try{if(!B.queryCommandEnabled(D)){return null}}catch(C){return null}try{return B.queryCommandValue(D)}catch(A){}return null},_escActionAssociated:function(){var A=this,B=A._getDesignViewWindow();B.document.selection!==undefined&&B.document.selection.empty();B.getSelection!==undefined&&B.getSelection().removeAllRanges();A._hideAllDropdownsMenus()},_hideAllDropdownsMenus:function(){var A=this;A.contextMenu&&A.contextMenu.wijmenu("hideAllMenus");A8.wijribbon("hideDropdown",AS).wijribbon("hideDropdown",AD).wijribbon("hideDropdown",D0)},_onDesignViewKeyDown:function(B){var D=this,C;D._setSaveBtnEnabled();try{if(B.ctrlKey){C=String.fromCharCode(B.keyCode).toLowerCase()}else{switch(B.keyCode){case 27:D._escActionAssociated();break;case 13:case 46:D._addtoUndoBuffer()}}}catch(A){}},_onDesignViewKeyUp:function(C){var A=this,B;(C.keyCode===37||C.keyCode===38||C.keyCode===39||C.keyCode===40||C.keyCode===33||C.keyCode===34||C.keyCode===35||C.keyCode===36)&&A._updateButtonStates(C);if(C.ctrlKey){B=String.fromCharCode(C.keyCode).toLowerCase();switch(B){case"y":A._redoAction();C.preventDefault();C.stopPropagation();break;case"z":A._undoAction();C.preventDefault();C.stopPropagation();break;case"x":case"v":A._addtoUndoBuffer()}}},_onDesignViewMouseUp:function(D){var A=this,C;if(D.button===2){return}A._updateButtonStates(D);A._refreshPathSelector();A._hideAllDropdownsMenus();A5(document).mouseup();if(A5.browser.msie){C=A5(D.target).closest("a");if(D.ctrlKey&&C.length>0){try{C.focus();AZ.open(C[0].href,"_blank")}catch(B){}}}},_onDesignViewBlur:function(){var C=this,A=C.options,B;B=C._getDesignViewText();if(A.mode==="bbcode"){B=C._convertHtmlToBBCode(A5.trim(B))}C.sourceView.val(B)},_onSourceViewBlur:function(){var A=this,B;B=A.sourceView.val();A._setDesignViewText(B)},_convertBBCodeToHtml:function(A){A=A.replace(/</g,"&lt;");A=A.replace(/>/g,"&gt;");A=A.replace(/(?:\r\n|\n|\r)/g,"<br>");A=A.replace(/\[EMAIL\]([\s\S]*?)\[\/EMAIL\]/gim,'<a href="mailto:$1">$1</a>');A=A.replace(/\[EMAIL\=([^\]]+)]([\s\S]*?)\[\/EMAIL\]/gim,'<a href="mailto:$1">$2</a>');A=A.replace(/\[URL\]([\s\S]*?)\[\/URL\]/gim,'<a href="$1">$1</a>');A=A.replace(/\[URL\=([^\]]+)]([\s\S]*?)\[\/URL\]/gim,'<a href="$1">$2</a>');A=A.replace(/\[B\]/gim,"<b>");A=A.replace(/\[\/B\]/gim,"</b>");A=A.replace(/\[I\]/gim,"<i>");A=A.replace(/\[\/I\]/gim,"</i>");A=A.replace(/\[S\]/gim,"<strike>");A=A.replace(/\[\/S\]/gim,"</strike>");A=A.replace(/\[U\]/gim,"<u>");A=A.replace(/\[\/U\]/gim,"</u>");A=A.replace(/\[IMG height=(.*?) width=(.*?)](.+?)\[\/IMG\]/gim,'<img height="$1" width = "$2" src="$3"/>');A=A.replace(/\[BLOCK\]/gim,"<blockquote>");A=A.replace(/\[\/BLOCK\]/gim,"</blockquote>");A=A.replace(/\[LIST\=1\]\[\*\]([\s\S]*?)\[\/LIST\]/gim,"<ol><li>$1</li></ol>");A=A.replace(/\[LIST\]\[\*\]([\s\S]*?)\[\/LIST\]/gim,"<ul><li>$1</li></ul>");A=A.replace(/\[\*\]/gim,"</li><li>");A=A.replace(/\[size=([^\]]*?)\]/gi,'<font size="$1">');A=A.replace(/\[\/size\]/gim,"</font>");A=A.replace(/\[color=([^\]]*?)\]/gi,'<font color="$1">');A=A.replace(/\[\/color\]/gim,"</font>");return A},_replaceComplexHtml:function(A){var F,E,B,D,C=A5("<div/>").html(A);F=A5("img",C);A5.each(F,function(){B="[IMG height="+A5(this).height()+" width="+A5(this).width()+"]"+A5(this).attr("src").toString()+"[/IMG]";A5(this).replaceWith(B)});E=A5("font",C);for(D=E.length-1;D>=0;D--){if(A5(E[D]).attr("color")&&A5(A5(E[D])).attr("size")){B="[Color="+A5(A5(E[D])).attr("color")+"][Size="+A5(A5(E[D])).attr("size")+"]"+A5(A5(E[D])).html()+"[/Size][/Color]"}else{if(A5(A5(E[D])).attr("color")&&!A5(A5(E[D])).attr("size")){B="[Color="+A5(A5(E[D])).attr("color")+"] "+A5(A5(E[D])).html()+"[/Color]"}else{if(A5(A5(E[D])).attr("size")&&!A5(A5(E[D])).attr("color")){B="[Size="+A5(A5(E[D])).attr("size")+"]"+A5(A5(E[D])).html()+"[/Size]"}}}A5(A5(E[D])).replaceWith(B)}return C.html()},_convertHtmlToBBCode:function(B){var A=this;if(B===""){return}B=A._replaceComplexHtml(B);B=B.replace(/<br(?=[ \/>]).*?>/gim,"\r\n");B=B.replace(/<a .*?href=(["'])(.+?)\1.*?>(.+?)<\/a>/gi,"[URL=$2]$3[/URL]");B=B.replace(/<a .*?href=(["'])mailto:(.+?)\1.*?>(.+?)<\/a>/gi,"[EMAIL=$2]$3[/EMAIL]");B=B.replace(/<(?:b|strong)>/gim,"[B]");B=B.replace(/<\/(?:b|strong)>/gim,"[/B]");B=B.replace(/<(?:i|em)>/gim,"[I]");B=B.replace(/<\/(?:i|em)>/gim,"[/I]");B=B.replace(/<(?:strike|s)>/gim,"[S]");B=B.replace(/<\/(?:strike|s)>/gim,"[/S]");B=B.replace(/<u>/gim,"[U]");B=B.replace(/<\/u>/gim,"[/U]");B=B.replace(/<blockquote.*?\>/gim,"[BLOCK]");B=B.replace(/\s{0,}<\/blockquote>/gim,"[/BLOCK]");B=B.replace(/(?:\r\n|\r|\n){0,1}<(?:ol)>[\s]*/gim,"[LIST=1]");B=B.replace(/<\/(?:ol)>/gim,"[/LIST]");B=B.replace(/(?:\r\n|\r|\n){0,1}\<(?:ul)>[\s]*/gim,"[LIST]");B=B.replace(/<\/(?:ul)>/gim,"[/LIST]");B=B.replace(/\s{0,}<li\s{0,1}.*?>([\s\S]*?)\n{0,}\s{0,}<\/li>/gim,"[*]$1");B=B.replace(/&nbsp;/gi," ");B=B.replace(/(<[^>]+>)/gm,"");return B},_convertFontStyleToStandTag:function(){var C=this,A=C._getDesignViewDocument(),F=A5(A.body),D,E,B=A5("[style*='color: ']",F);if(B.length!==0){D=B;E="<font color='"+C._getWebColorFromRgb(B.css("color"))+"'></font>"}D&&A5.each(D,function(){if(A5(this).is("span")){A5(this).replaceWith(A5(E).html(A5(this).html()))}else{A5(this).is("font")&&A5(this).attr("size")&&A5(this).removeAttr("style").html(A5(E).html(A5(this).html()))}})},_convertStyleToStandTag:function(){var B=this,C=B._getDesignViewDocument(),J=A5(C.body),F,G,A,E=A5("[style*='font-weight: bold;']",J),I=A5("[style*='font-style: italic;']",J),D=A5("[style*='text-decoration: line-through;']",J),H=A5("[style*='text-decoration: underline;']",J);if(E.length!==0){F=E;G="<b></b>";A="font-weight"}else{if(I.length!==0){F=I;G="<i></i>";A="font-style"}else{if(D.length!==0){F=D;G="<strike></strikes>";A="text-decoration"}else{if(H.length!==0){F=H;G="<u></u>";A="text-decoration"}}}}F&&A5.each(F,function(){if(A5(this).is("span")&&this.style.fontSize===""){A5(this).replaceWith(A5(G).html(A5(this).html()))}else{A5(this).removeAttr("style").html(A5(G).html(A5(this).html()))}})},_getWebColorFromRgb:function(C){var B=this,A;if(C.indexOf("rgb(")===0){A=C.substring(4,C.length-1).split(",");C=B._convertToWebColor(A6(A[0]),A6(A[1]),A6(A[2]))}return C},_updateList:function(A,C){var B;A5("option",C).remove();for(B in A){A[B]&&C.append("<option>"+B+"</option>")}},_triggerEvent:function(C,A){var B=this,D=B.options[C];return D&&typeof D==="function"?D.call(B,A):D},_closeDialog:function(){this.dialog.wijdialog("close")},_onTemplateList:function(A){return this._triggerEvent("templateList",A)},updateTemplateList:function(D,B){var C=this,A=B||A5("select",C.dialog);C._updateList(D,A);C._templateList=D},initTemplateDialog:function(){var C=this,A=C.dialog,B=A5("select",A),D=C._onTemplateList();A.delegate("select","change."+C.widgetName,function(){C.templateListOnChanged()}).delegate("."+Ci,"click."+C.widgetName,function(){C.deleteTemplate()}).delegate("."+B5,"click."+C.widgetName,function(){C.saveTemplate()}).delegate(C6,"click."+C.widgetName,function(){C.applyTemplate()}).delegate(C8,"click."+C.widgetName,function(){C._closeDialog()});if(!D){D=C._templateList;if(!D){return}}C.updateTemplateList(D,B)},templateListOnChanged:function(){var A=this,E=A.dialog,B=A5("select",E).val(),C=A5("iframe",E),F=A._templateList,D;if(!F){return}D=F[B];D.src&&C.attr("src",D.src+"?d="+(new Date).getMilliseconds().toString());D.text&&C.length>0&&C[0].contentWindow.document.write(D.text);if(B){A5("."+Ar,E).html(B);A5("."+Aw,E).val(B)}if(D.desc){A5("."+E7,E).html(D.desc);A5("."+CU,E).val(D.desc)}},_onSaveTemplate:function(A){this._triggerEvent("saveTemplate",A)},saveTemplate:function(){var B=this,F=B.dialog,E=A5("."+Aw,F).val(),A=A5("."+CU,F).val(),C=B._templateList,D=this._getDesignViewText();if(A5.trim(E)===""){A4("Please input a template name!");return}if(!C){B._templateList=[];C=B._templateList}!C[E]&&A5("select",F).append("<option>"+E+"</option>");C[E]={desc:A,text:D};B._onSaveTemplate({name:E,desc:A,text:D})},_onDeleteTemplate:function(A){this._triggerEvent("deleteTemplate",A)},deleteTemplate:function(){var C=this,D=C.dialog,E=A5("select",D),B=E.val(),A=C._templateList;if(A5.trim(B)===""){A4("Please select a template file.");return}A5("option:selected",E).remove();A5("iframe",D).attr("src","about:blank");A5("."+Ar,D).empty();A5("."+Aw,D).val("");A5("."+E7,D).empty();A5("."+CU,D).val("");delete A[B];C._onDeleteTemplate(B)},applyTemplate:function(){var F=this,B=F.dialog,A=A5("select",B),C=A.val(),G=A5("iframe",B)[0],D=A5("."+Aw,B).val(),E=G.contentWindow.document.body.innerHTML;if(A5.trim(D)===""||A5.trim(C)===""){A4("Please select a valid template file.");return}F._setDesignViewText(E);F._addtoUndoBuffer();F._setSaveBtnEnabled();F._closeDialog()},_onImageList:function(){var A=this,B=A.options.imageList;return B&&typeof B==="function"?B.call(A):B},updateImageList:function(D,A){var E=this,C=E.dialog,F=A||A5("select",C),B=A5("."+Ag,C);E._updateList(D,F);E._imgList=D;if(!D){B.addClass(AJ);return}B.removeClass(AJ)},initImageBrowserDialog:function(){var B=this,A=B.dialog,C=B._onImageList();A5("img",A).hide();A.delegate("select","change."+B.widgetName,function(){B.imageListOnChanged(this)}).delegate("."+CQ+" input","change."+B.widgetName,function(){B.imageUrlChanged(this)}).delegate(C6,"click."+B.widgetName,function(){B.submitInsertImageDialog();B._onDesignViewBlur()}).delegate(C8,"click."+B.widgetName,function(){B._closeDialog()});if(!C){C=B._imgList;if(!C){A5("."+Ag,A).addClass(AJ);return}}B.updateImageList(C,A5("select",A))},imageUrlChanged:function(A){A5("img",this.dialog).attr("src",A5(A).val()).show()},imageListOnChanged:function(){var B=this,C=B.dialog,E=A5("select",C).val(),A=B._imgList,D;if(!A){return}D=A[E];A5("img",C).attr("src",D).show();A5("."+CQ+" input",C).attr("value",D);AZ.setTimeout(function(){A5("."+Al+" input",C).val(A5("img",C).width());A5("."+AA+" input",C).val(A5("img",C).height())},40)},submitInsertImageDialog:function(){var E=this,A,H=E.dialog,G=A5("."+CQ+" input",H).val(),D=A5("."+Cj+" input",H).val(),C=A5("."+Al+" input",H).val(),F=A5("."+AA+" input",H).val(),B=A5("."+Ch+" input",H).val();if(A5.trim(G)===""){A4("Please select a image.");return}if(!E._isNumeric(C)){A4("Please input a number for 'Image width' textbox.");return}if(!E._isNumeric(F)){A4("Please input a number for 'Image height' textbox.");return}E.focus();A='<img src="'+G+'" alt="'+D+'" width="'+C+'" height="'+F;if(E.options.mode!=="bbcode"){A+='" style="'+B}A+='"/>';E.insertHTML(A);E._closeDialog()},initHyperLinkDialog:function(){var C=this,D=C.dialog,A=C.getLinkHrefField(),B=A5("."+CV+" input",D);D.delegate(C6,"click."+C.widgetName,function(){C.submitHyperLinkDialog();C._onDesignViewBlur()}).delegate(C8,"click."+C.widgetName,function(){C._closeDialog()}).delegate("."+AB,"change."+C.widgetName,function(){C.anchorListOnChanged(this)}).delegate("."+DG+">div","click."+C.widgetName,function(){C.radioListOnChanged()});try{B.val(A);A5("."+Ba+" input",D).val(C._getLinkInnerHTML());A5("."+Bj+" input",D).val(C._getLinkCssField());A5("."+CT+" select",D).val(C._getLinkTarget())}catch(E){}if(A.length>4&&A.substring(0,4)==="http"){A5("#radUrl",D).attr("checked","checked")}else{if(A.length>6&&A.substring(0,6)==="mailto"){A5("#radMail",D).attr("checked","checked")}else{A5("#radAnchor",D).attr("checked","checked")}}},_getLinkInnerHTML:function(){var A=this,B;A.focus();B=A._getInspectElement();return B&&B.tagName==="A"?B.innerHTML||"":A.getSelectionHTMLContent()||""},getLinkHrefField:function(){var A=this,B;A.focus();B=A._getInspectElement();return B&&B.tagName==="A"?A.fixAbsoluteUrlsIfNeeded(B.href||""):""},_getLinkTarget:function(){var A=this,B;A.focus();B=A._getInspectElement();return B&&B.tagName==="A"?B.target||"":""},_getLinkCssField:function(){var A=this,B;A.focus();B=A._getInspectElement();return B&&B.tagName==="A"?B.style.cssText||"":""},submitHyperLinkDialog:function(){var K=this,H=K.dialog,D=A5("#radMail",H),J=A5("."+CV+" input",H),C=A5("."+Ba+" input",H),F=A5("."+Bj+" input",H),E=A5("."+CT+" select",H),A=J.val(),I=C.val(),B=E.val(),G=F.val();if(A===""){A4("Please input address!");return}if(I===""){A4("Please input display text!");return}if(D.attr("checked")&&!K._isEmail(A)){A4("Please input correct email!");return}K._editLink(I,A,G,B);K._closeDialog()},_editLink:function(A,G,B,C){var D=this,F,E="";D.focus();F=D._getInspectElement();if(F&&F.tagName==="A"){F.innerHTML=A;F.href=G;F.target=C;if(B!==F.style.cssText){F.style.cssText=B}D._addtoUndoBuffer();D._setSaveBtnEnabled();return}E='<a href="'+G+'" target="'+C+'"';if(B!==""){E+=' style="'+B+'"'}E+=">"+A+"</a>";D._setIESelection();D.insertHTML(E)},anchorListOnChanged:function(A){var B=this,C=B.dialog,D=A5(A).val();if(D!==""){A5("."+CV+" input",C).val(D);A5("#radAnchor",C).attr("checked","checked")}},radioListOnChanged:function(){var B=this,C=B.dialog,D=A5("."+AB,C),A=A5("."+CV+" input",C);A.val("");if(A5("#radUrl",C).is(":checked")){D.hide()}else{if(A5("#radAnchor",C).is(":checked")){D.show()}else{if(A5("#radMail",C).is(":checked")){D.hide();A.val("mailto:")}}}},_getDialogRes_Code:function(){var A=this,B=A._createDiv(AH);B.add(A._createElement("div","Enter source code",{"class":BH}));B.add(A._createElement("textarea","",{"class":Du}));B.add(A._createSeparator());B.add(A._createOKCancelButtons());return B.render()},initInsertCodeDialog:function(){var B=this,A=B.dialog;A.delegate(C6,"click."+B.widgetName,function(){B.submitCodeDialog();B._onDesignViewBlur()}).delegate(C8,"click."+B.widgetName,function(){B._closeDialog()})},submitCodeDialog:function(){var D=this,B=D.dialog,A=A5("."+Du,B),C=A.val();if(C===""){return}C=C.replace(/</g,"&lt;");C=C.replace(/>/g,"&gt;");C="<pre>"+C+"</pre>";D._setIESelection();D.insertHTML(C);D._closeDialog()},initTagInspectorDialog:function(){var B=this,C=B.dialog,A=A5("."+Bg);C.delegate(C6,"click."+B.widgetName,function(){B.submitTagInspectorDialog();B._onDesignViewBlur()}).delegate(C8,"click."+B.widgetName,function(){B._closeDialog()}).delegate("#displayNoEmpty","click."+B.widgetName,function(){B.tagInspectorDialogSwitchAttList(this)});B._laySelectedElementAttributes(A5("."+CS,C),A5("."+DB,C));A5("."+Av+" input",C).val(B._getSelectedElementStyle());if(B._selectedElementCanHaveChildren()){A.show();A5("textarea",A).val(B._getSelectedElementInnerHTML())}else{A.hide()}},submitTagInspectorDialog:function(){var E=this,A=E.dialog,F=E._getInspectElement(),C=A5("."+CS,A),B=A5("."+Av+" input").val(),G=A5("."+Bg+" textarea").val();try{A5.each(A5("input:checkbox",C),function(H,L){var K,J,I=A5(L);if(I.is(":checked")){K=I.siblings("span").text();K=K.substring(0,K.length-1);J=I.siblings("input:text").val();A5(F).attr(K,J)}});if(A5.trim(B)!==""){F.style.cssText=B}E._selectedElementCanHaveChildren()&&A5(F).html(G)}catch(D){}E._closeDialog();E._addtoUndoBuffer();E._setSaveBtnEnabled()},tagInspectorDialogSwitchAttList:function(C){var B=A5("."+CS,this.dialog),A=!C.checked;A5.each(A5("input:text",B),function(E,D){A5(D).val()===""&&A5(D).parent("li")[A?"show":"hide"]()})},_laySelectedElementAttributes:function(C,B){var F=this,E=F._getInspectElement(),G,H,A,D="";if(!E){return}B.html(E.tagName);G=F._getDictionaryDeclare();H=E.tagName.toLowerCase();A=G[H];switch(H){case"ul":case"u":case"textarea":case"tbody":case"tr":case"th":case"td":case"table":case"select":case"strong":case"span":case"p":case"option":case"ol":case"li":case"label":case"input":case"img":case"i":case"hr":case"form":case"font":case"em":case"div":case"code":case"button":case"body":case"b":case"a":D+="<ul class='ui-helper-reset'>";A5.each(A,function(I,K){var J=E.getAttribute(K)||"";D+="<li><span class='"+C5+"'>";D+=K+":</span>";D+="<input type='text' value='"+J+"'/>";D+="<input type='checkbox' id='save"+I+"'/>";D+="<label for='save"+I+"'>Save</label></li>"})}C.html(D)},_getSelectedElementStyle:function(){var A=this._getInspectElement();return A&&A.style?A.style.cssText||"":""},_getSelectedElementInnerHTML:function(){var A=this._getInspectElement();return A?A.innerHTML:""},_selectedElementCanHaveChildren:function(){return !A5(this._getInspectElement()).is("input,hr,br,img")},initBackColorDialog:function(){this._initColorDialog("BackColor")},initForeColorDialog:function(){this._initColorDialog("ForeColor")},_initColorDialog:function(D){var F=this,G=F.dialog,C=F._getDesignViewDocument(),B=C.queryCommandValue(D),A,H,E;G.delegate(C6,"click."+F.widgetName,function(){F.submitColorDialog(D);F._onDesignViewBlur()}).delegate(C8,"click."+F.widgetName,function(){F._closeDialog()});if(B){E=B.toString();if(A5.browser.msie){A=A6(E);E="rgb("+(A&255)+", "+((A&65280)>>8)+", "+((A&16711680)>>16)+")"}if(E.indexOf("rgb(")===0){H=E.substring(4,E.length-1).split(",");E=F._convertToWebColor(A6(H[0]),A6(H[1]),A6(H[2]))}else{if(E.indexOf("rgba(")===0){H=E.substring(5,E.length-1).split(",");E=F._convertToWebColor(A6(H[0]),A6(H[1]),A6(H[2]))}}A5("."+CY+" input",G).attr("value",E)}A5("."+AU,G).wijeditorcolorcanvas("."+CY+" input",E)},submitColorDialog:function(C){var B=this,A=A5("."+CY+" input",B.dialog);B.setColor(C,A.val());B._closeDialog()},setColor:function(B,C){var D=this,F=D._getDesignViewDocument(),A=D._getDesignViewWindow(),E;D._setIESelection();if(A5.browser.mozilla&&B==="BackColor"){E=A.getSelection();D.insertHTML('<span style="background-color:'+C+';">'+E+"</span>")}else{F.execCommand(B,false,C);D.options.mode==="bbcode"&&!A5.browser.msie&&D._convertFontStyleToStandTag()}D._addtoUndoBuffer();D._setSaveBtnEnabled()},initInsertTableDialog:function(){var B=this,A=B.dialog;A.delegate(C6,"click."+B.widgetName,function(){B.submitInsertTableDialog();B._onDesignViewBlur()}).delegate(C8,"click."+B.widgetName,function(){B._closeDialog()}).delegate("."+CZ+" input:button","click."+B.widgetName,function(){B.showTableColorDialog(this)})},submitInsertTableDialog:function(){var B=this,A=B._getValuesFromTableDialog();if(!A){return}B._insertTable(A);B._closeDialog()},_insertTable:function(E){var B=this,C="",D,A;if(!E){return false}B._setIEFocus();C+='<table width="'+E.width+'" height="'+E.height+'" cellspacing="'+E.cspacing+'" cellpadding="'+E.cpadding+'" border="'+E.border+'" bgcolor="'+E.bgcolor+'" style="'+E.css+'">';for(D=0;D<E.rows;D++){C+="<tr>";for(A=0;A<E.cols;A++){C+="<td>Cell "+(D+1)+"-"+(A+1)+"</td>"}C+="</tr>"}C+="</table>";B.insertHTML(C)},initEditTableDialog:function(){var E=this,D=E.dialog,B=E._getInspectElement(),C,F;D.delegate(C6,"click."+E.widgetName,function(){E.submitEditTableDialog();E._onDesignViewBlur()}).delegate(C8,"click."+E.widgetName,function(){E._closeDialog()}).delegate("."+CZ+" input:button","click."+E.widgetName,function(){E.showTableColorDialog(this)});if(!B){return}try{C=B.rows;if(C.length>0){F=C[0].cells.length}else{F=0}C=C.length}catch(A){}A5("."+Bm+" input",D).val(C);A5("."+AG+" input",D).val(F);A5("."+Bk+" input",D).val(B.getAttribute("width"));A5("."+Bn+" input",D).val(B.getAttribute("height"));A5("."+Bo+" input",D).val(B.getAttribute("border"));A5("."+Bq+" input",D).val(B.getAttribute("cellPadding"));A5("."+Bl+" input",D).val(B.getAttribute("cellSpacing"));A5("."+CZ+" input",D).val(B.getAttribute("bgcolor")||"#ffffff");A5("."+Br+" input",D).val(B.style.cssText)},submitEditTableDialog:function(){var B=this,F=B._getInspectElement(),H=A5(F),E=B._getValuesFromTableDialog(),C=E&&A6(E.rows),A=E&&A6(E.cols),D,G;if(!E){return}if(F){H.attr("width",E.width);H.attr("height",E.height);H.attr("bgcolor",E.bgcolor);H.attr("border",E.border);H.attr("cellSpacing",E.cspacing);H.attr("cellPadding",E.cpadding);F.style.cssText=E.css;if(!C||isNaN(C)){return}if(!A||isNaN(A)){return}while(F.rows.length>C){F.deleteRow(0)}while(F.rows.length<C){D=F.insertRow(0);while(D.cells.length<A){G=D.insertCell(0);G.innerHTML="&nbsp;"}}A5.each(F.rows,function(I,J){while(J.cells.length>A){J.deleteCell(0)}while(J.cells.length<A){G=J.insertCell(0);G.innerHTML="&nbsp;"}})}B._closeDialog()},_getValuesFromTableDialog:function(){var K=this,I=K.dialog,G=A5("."+Bm+" input",I).val(),C=A5("."+AG+" input",I).val(),B=A5("."+Bk+" input",I).val(),E=A5("."+Bn+" input",I).val(),D=A5("."+Bo+" input",I).val(),A=A5("."+Bq+" input",I).val(),J=A5("."+Bl+" input",I).val(),F=A5("."+Br+" input",I).val(),H=A5("."+CZ+" input",I).val();if(!K._isNumeric(G)){A4("Please input a number for 'Rows' textbox.");return false}if(!K._isNumeric(C)){A4("Please input a number for 'Columns' textbox.");return false}if(!K._isNumeric(B)){A4("Please input a number for 'Table Width ' textbox.");return false}if(!K._isNumeric(E)){A4("Please input a number for 'Table Height' textbox.");return false}if(!K._isNumeric(D)){A4("Please input a number for 'Border thickness' textbox.");return false}if(!K._isNumeric(A)){A4("Please input a number for 'Cell Padding' textbox.");return false}if(!K._isNumeric(J)){A4("Please input a number for 'Cell Spacing' textbox.");return false}return{rows:G,cols:C,width:A6(B),height:A6(E),border:D,cpadding:A,cspacing:J,css:F,bgcolor:H}},showTableColorDialog:function(E){var C=this,D=C.subDialog,A=A5(E).prev().val(),B=C._getDialogRes_Color();D.empty().append(B).wijdialog({width:"auto",height:"auto",modal:true,title:"Set Background Color",position:"center",resizable:false,captionButtons:{pin:{visible:false},refresh:{visible:false},toggle:{visible:false},minimize:{visible:false},maximize:{visible:false}}});D.delegate(C6,"click."+C.widgetName,function(){C.submitTableColorDialog()}).delegate(C8,"click."+C.widgetName,function(){C.closeSubDialog()});A!==""&&A5("."+CY+" input",D).val(A);A5("."+AU,D).wijeditorcolorcanvas("."+CY+" input",A);D.wijdialog("open")},submitTableColorDialog:function(){var C=this,D=C.subDialog,B=C.dialog,A=A5("."+CY+" input",D).val();A5("."+CZ+" input:text",B).val(A);C.closeSubDialog()},closeSubDialog:function(){this.subDialog.wijdialog("close")},_getEditableTable:function(){var B=this,C,A;C=B._getSelectedElement();if(!C){A4("Please select a table!");return false}A=A5(C);if(A.is("td,tr,tbody")){C=A.parents("table:first")[0]}else{A4("Please select a table!");return false}E5=C;return true},initPreviewDialog:function(){var B=this,A=B.dialog;B._setPreviewContent(0);A.delegate("#rad640_480","click."+B.widgetName,function(){B._setPreviewDialogSize(640,480)}).delegate("#rad800_600","click."+B.widgetName,function(){B._setPreviewDialogSize(800,600)}).delegate("#rad1024_768","click."+B.widgetName,function(){B._setPreviewDialogSize(1024,768)}).delegate("#chkSplit","click."+B.widgetName,function(){B._splitPreviewPages(this.checked)}).delegate("."+DJ,"click."+B.widgetName,function(){B._printPreviewPage(true)}).delegate("."+DK,"click."+B.widgetName,function(){B._printPreviewPage(false)}).delegate("."+Dn,"click."+B.widgetName,function(){B._closeDialog()}).delegate("."+Dt,"click."+B.widgetName,function(){B._navigatePreviewPage(false)}).delegate("."+Dw,"click."+B.widgetName,function(){B._navigatePreviewPage(true)})},_setPreviewContent:function(B){var D=this,F=D.dialog,A=A5("iframe",F),C=A5("."+Bh+" span",F),E=A[0].contentWindow.document;E.open();if(B===-1){E.write(D._getPreviewAllPageContent());C.html("1 / 1")}else{E.write(D._getPreviewPageContent(B));C.html(B+1+" / "+D._getPreviewPageCount())}E.close()},_setPreviewDialogSize:function(A,G){var B=this,E=B.dialog,F=A5("iframe",E),C=E.wijdialog("option","width"),D=E.wijdialog("option","height");if(C==="auto"){C=E.parent(".wijmo-wijdialog").width()-F.width()}else{C=C-F.width()}if(D==="auto"){D=E.parent(".wijmo-wijdialog").height()-F.height()}else{D=D-F.height()}F.css("width",A).css("height",G);E.wijdialog("option",{width:A+C,height:G+D})},_getPreviewPageCount:function(){return this._getPreviewPages().length},_getPreviewPageContent:function(B){var A=this._getPreviewPages();return A.length>B?A[B]:null},_getPreviewAllPageContent:function(){return this._getDesignViewText()},_getPreviewPages:function(){var A=this._getPreviewAllPageContent(),B=new RegExp("<(DIV|div)[^>]*(page-break-before|PAGE-BREAK-BEFORE)[ ]*:[ ]*always[^>]*>(.*?)<\\/(DIV|div)>","g"),C=A.replace(B,"!-~U^n#i@q,P|.a=g~e+br!");return C.split("!-~U^n#i@q,P|.a=g~e+br!")},_curPageIdx:0,_splitPreviewPages:function(E){var C=this,B=C.dialog,D=A5("."+DS,B),A=A5("."+Bh,B);if(E){C._setPreviewContent(0);A.show();D.hide()}else{C._setPreviewContent(-1);A.hide();D.show()}C._curPageIdx=0},_navigatePreviewPage:function(E){var D=this,B=A5("#chkSplit",D.dialog),C=D._curPageIdx,A=D._getPreviewPageCount();if(B.is(":checked")){if(E){C++;if(C<A){D._setPreviewContent(C)}else{C=A-1}}else{C--;if(C>=0){D._setPreviewContent(C)}else{C=0}}D._curPageIdx=C}},_printPreviewPage:function(E){var D=this,C=D.dialog,B=A5("#chkSplit",C),A=A5("iframe",C)[0].contentWindow;if(E){B.removeAttr("checked");D._setPreviewContent(-1)}A.focus();A.print()},initCleanUpDialog:function(){var A=this,B=A.dialog;A5("textarea",B).val(A.sourceView.val());B.delegate(C6,"click."+A.widgetName,function(){A.submitCleanUpDialog();A._onDesignViewBlur()}).delegate(C8,"click."+A.widgetName,function(){A._closeDialog()})},submitCleanUpDialog:function(){var B=this,A=B.dialog,E=B.sourceView,C=E.val(),D;if(A5("#replaceSpans",A).is(":checked")){D=new RegExp("<\\/?SPAN[^>]*>","g");C=C.replace(D,"")}if(A5("#replaceClass",A).is(":checked")){D=new RegExp("<(\\w[^>]*) class=([^ |>]*)([^>]*)","g");C=C.replace(D,"<$1$3")}if(A5("#replaceStyle",A).is(":checked")){D=new RegExp('<(\\w[^>]*) style="([^"]*)"([^>]*)',"g");C=C.replace(D,"<$1$3");D=new RegExp("<(\\w[^>]*) lang=([^ |>]*)([^>]*)","g");C=C.replace(D,"<$1$3");D=new RegExp("<\\\\?\\?xml[^>]*>","g");C=C.replace(D,"");D=new RegExp("<\\/?\\w+:[^>]*>","g");C=C.replace(D,"")}if(A5("#replaceNbsp",A).is(":checked")){D=new RegExp("&nbsp;","g");C=C.replace(D," ")}if(A5("#transformPtoDiv",A).is(":checked")){D=new RegExp("(<P)([^>]*>.*?)(<\\/P>)","g");C=C.replace(D,"<div$2</div>")}E.val(C);B._setDesignViewText(C);B._addtoUndoBuffer();B._closeDialog()},initFindDialog:function(){var B=this,A=B.dialog;A.delegate(C6,"click."+B.widgetName,function(){B.submitFindAction()}).delegate(C8,"click."+B.widgetName,function(){B.submitReplaceAction();B._onDesignViewBlur()})},submitFindAction:function(){var A=this,B=A5("textarea:first",A.dialog).val();if(A5.trim(B)===""){return}A._findAndReplaceString(B)},submitReplaceAction:function(){var D=this,B=D.dialog,C=A5("textarea:first",B).val(),A=A5("textarea:last",B).val();if(A5.trim(C)===""){return}if(A5.trim(A)===""){A4("please input replace string");return}D._findAndReplaceString(C,A)},tRange:null,txtFoundInIE:false,txtFoundInNoneIE:false,_findAndReplaceString:function(C,G){var F=this,A=F._getDesignViewWindow(),B=0,E=false,D=G&&G!==C;if(!G){G=C}if(A5.browser.msie){if(F.tRange){if(F.txtFoundInIE&&D){F.tRange.pasteHTML(G);F.tRange=null;E=true;F.txtFoundInIE=false}else{F.tRange.collapse(false);B=F.tRange.findText(C);B&&F.tRange.select()}}if(!E&&(!F.tRange||!B)){F.tRange=A.document.body.createTextRange();B=F.tRange.findText(C);if(B){F.tRange.select();if(D){F.tRange.pasteHTML(G);F.tRange=null;E=true}}}}else{if(F.txtFoundInNoneIE&&D){F._replaceSelectionForNoneIE(G);E=true;F.txtFoundInNoneIE=false}else{B=A.find(C);if(!B){B=A.find(C,0,1);while(A.find(C,0,1)){continue}}}F.txtFoundInNoneIE=F.txtFoundInNoneIE||B;if(F.txtFoundInNoneIE&&D){F._replaceSelectionForNoneIE(G);E=true;F.txtFoundInNoneIE=false}}if(!B&&!E){A4('"'+C+'" String Not Found');F.tRange=null;F.txtFoundInNoneIE=false;F.txtFoundInIE=false}else{F.txtFoundInIE=true}},_replaceSelectionForNoneIE:function(A){var D=this._getDesignViewDocument(),B="insert_html_"+Math.round(Math.random()*100000000),C=new RegExp("<[^<]*"+B+"[^>]*>");D.execCommand("insertimage",false,B);D.body.innerHTML=D.body.innerHTML.replace(C,A)},initMediaDialog:function(){var B=this,A=B.dialog;A.delegate(C6,"click."+B.widgetName,function(){B.submitMediaDialog();B._onDesignViewBlur()}).delegate(C8,"click."+B.widgetName,function(){B._closeDialog()})},submitMediaDialog:function(){var E=this,B=E.dialog,A=A5("select",B).val(),C=A5("."+Dm+" input",B).val(),D=A5("."+DA+" input",B).val(),F=A5("."+Dv+" input",B).val();if(C===""){A4("URL is empty!");return}if(!E._isUrl(C)){A4("please input correct URL!");return}if(!E._isNumeric(D)){A4("please input width of the media!");return}if(!E._isNumeric(F)){A4("please input height of the media!");return}E._insertMedia(A,C,D,F);E._closeDialog()},_insertMedia:function(F,A,D,C){var B=this,E="";B._setIESelection();switch(F){case"video":E+='<embed src="'+A+'" width="'+D+'" height="'+C+'" type=audio/x-pn-realaudio-plugin console="Clip1" controls="IMAGEWINDOW,ControlPanel,StatusBar" autostart="true"></embed>';break;case"flash":E+='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,29,0" width="'+D+'" height="'+C+'">';E+='<param name="movie" value="'+A+'">';E+='<param name="quality" value="high">';E+='<embed src="'+A+'" quality="high" pluginspage="http://www.macromedia.com/go/getflashplayer" type="application/x-shockwave-flash" width="'+D+'" height="'+C+'"></embed>';E+="</object>";break;case"applet":E+='<applet code="'+A+'" width="'+D+'" height="'+C+'"></applet>';break;case"other":E+='<embed src="'+A+'" width="'+D+'" height="'+C+'"></embed>'}B.insertHTML(E)},initSpecialCharacterDialog:function(){var B=this,A=B.dialog,C=A5("."+DP+" span",A);A.delegate("label","click."+B.widgetName,function(){B.submitSpecialCharacterDialog(this);B._onDesignViewBlur()}).delegate(C6,"click."+B.widgetName,function(){B._closeDialog()}).delegate("label","mouseover."+B.widgetName,function(){C.html(A5(this).html())}).delegate("label","mouseout."+B.widgetName,function(){C.empty()})},submitSpecialCharacterDialog:function(B){var A=this;A._setIESelection();A.insertHTML(A5(B).html());A._closeDialog()},_setSaveBtnEnabled:function(){A8.wijribbon(Ay,DO,false)},_undoAction:function(){var A=this._getDesignViewDocument().body,B={};AW--;if(AW<=0){AW=0}A.innerHTML=AI[AW];if(!AW){B[AE]=true;B[CW]=false;A8.wijribbon(Ao,B)}else{A8.wijribbon(Ay,CW,false)}},_redoAction:function(){var B=this._getDesignViewDocument().body,A=AI.length,C={};AW++;if(AW>=A-1){AW=A-1}B.innerHTML=AI[AW];if(AW===A-1){C[AE]=false;C[CW]=true;A8.wijribbon(Ao,C)}else{A8.wijribbon(Ay,AE,false)}},_addtoUndoBuffer:function(){for(var A=AI.length-1-AW,B=0;B<A;B++){AI.pop()}AW++;AI.push(this._getDesignViewText());A8.wijribbon(Ay,AE,false)},_deleteSelectionContent:function(){var B=this._getDesignViewWindow(),C,D,A,E="rangeCount";if(A5.browser.msie){C=B.document.selection;C.type.toLowerCase()!=="none"&&C.clear()}else{C=B.getSelection();for(D=0;D<C[E];D++){A=C.getRangeAt(D);A.deleteContents()}}},_refreshPathSelector:function(){var C=this,B=C._getParentElement(C._getDesignViewWindow()),F=C._getPathSelector(),G=A5(B).parents(),A=G.length,D="wijmo-wijeditor-label ui-state-default ui-corner-all",E;if(!B){return}F.empty();for(E=A-1;E>=0;E--){F.append("<label class='"+D+"'>&lt;"+G[E].tagName.toLowerCase()+"&gt;</label>")}F.append("<label class='"+D+" wijmo-wijeditor-selectlabel ui-state-highlight ui-corner-all'>&lt;"+B.tagName.toLowerCase()+"&gt;</label>")},_toggleTableBorders:function(){var B=this._getDesignViewDocument(),A=A5("#__wijStyle",B);Ap=!Ap;if(A5.browser.safari){if(Ap){A.html("table,td,tr{border: 1px #acacac dashed;}")}else{A.empty()}}else{A.attr("disabled",!Ap)}},_tableAction:function(E){var M=this,J=M._getParentElement(M._getDesignViewWindow()),F=A5(J).closest("td"),K,I,C,N,P,G,O,H,L,B,A=0;M._setSaveBtnEnabled();if(F.length===0&&E!==Ax){return false}else{if(E!==Ax){K=F.parent();I=K.closest("table");C=F[0];N=K[0];P=I[0];G=N.rowIndex;O=C.cellIndex}}try{switch(E){case D3:H=N.cells.length;B=P.insertRow(G);for(A=0;A<H;A++){M._insertCell(B,A)}break;case D1:P.deleteRow(G);break;case Ah:L=P.rows.length;for(A=0;A<L;A++){M._insertCell(P.rows[A],O)}break;case Ai:M._removeColumn(P,O);break;case Fh:M._insertCell(N,O+1);break;case Ff:H=N.cells.length;if(H===1){P.deleteRow(G)}else{N.deleteCell(O)}break;case D2:M._splitCell(P,N,G,O);break;case Ax:M._mergeCell(M._getSelectedCells(J))}this._addtoUndoBuffer()}catch(D){A4(D.message);return false}return true},_removeColumn:function(A,B){var C=A.rows.length,G=0,H,E,F,D,I;while(G<C){H=A.rows[G];E=H.cells;F=E.length;D=B>F-1?F-1:B;I=E[D].colSpan;if(I>1&&F>1){if(D+1<F){E[D+1].colSpan+=I-1}else{E[D-1].colSpan+=I+1}}if(F===1){A.deleteRow(G);C=A.rows.length}else{H.deleteCell(D);G++}}},_splitCell:function(B,D,F,A){var C=B.rows.length,I=0,E=0,J,L,G,K,H;while(I<=A){if(D.cells[I].colSpan>1){E+=D.cells[I].colSpan-1}I++}this._insertCell(D,A+1);for(G=0;G<C;G++){J=B.rows[G];if(G!==F){K=A;I=0;L=0;while(I<=K){if(J.cells[I].colSpan>1){L+=J.cells[I].colSpan-1;K-=L}I++}H=A+E-L;if(H<0){H=0}J.cells[H].colSpan++}}},_mergeCell:function(C){var B=C.length,D,E,F,A;if(B<2||C[0].parentNode!==C[B-1].parentNode){return false}D=C[0].parentNode;E=C[0].cellIndex;F=E+B;for(A=E+1;A<F;A++){D.cells[E].innerHTML+=D.cells[E+1].innerHTML;D.cells[E].colSpan++;D.deleteCell(E+1)}},_getSelectedCells:function(C){var B=this._getDesignViewWindow(),G=B.document,A=[],H,L,D,I,J,K,E,F;if(A5.browser.msie){H=G.selection.createRange();L=A5(C).closest("tr")[0];L&&A5.each(L.cells,function(P,M){var O=G.selection.createRange(),N="compareEndPoints";O.moveToElementText(M);(H.inRange(O)||H[N]("StartToStart",O)>=0&&H[N]("StartToEnd",O)<=0||H[N]("EndToStart",O)>=0&&H[N]("EndToEnd",O)<=0)&&A.push(M)})}else{if(A5.browser.mozilla){D=B.getSelection();J=D.rangeCount;for(I=0;I<J;I++){H=D.getRangeAt(I);K=H.startContainer;E=K.nodeName.toLowerCase();if(E==="td"||E==="th"){A.push(K)}else{if(E==="tr"){F=H.startOffset;A.push(K.cells[F])}}}}else{D=B.getSelection();L=A5(C).closest("tr")[0];J=L.cells.length;if(L){for(I=0;I<J;I++){A.push(L.cells[I])}}}}return A},insertDateAndTime:function(){this.insertHTML((new Date).toDateString()+" "+(new Date).toTimeString())},_toggleWordWrap:function(){var A=this,C=A.sourceView,B="wrap",D;DL=!DL;D=DL?"soft":"off";C.attr(B,D);C[0].focus();if(A5.browser.mozilla){C.hide();AZ.setTimeout(function(){C.show()},40)}},insertHTML:function(A){var D=this,B=D._getDesignViewDocument(),C;try{if(A5.browser.msie){C=B.selection.createRange();C.pasteHTML(A);C.collapse(false);C.select()}else{B.execCommand("insertHTML",false,A)}}catch(E){}D._addtoUndoBuffer();D._setSaveBtnEnabled()},_getSelectedContent:function(){var A=this._getDesignViewWindow(),G=A.document,E="",B="cloneContents",F,C,D;if(!G.selection){F=A.getSelection().getRangeAt(0);if(F){if(F[B]){C=F[B]();D=document.createElement("div");D.appendChild(C);E=D.innerHTML;D=null}}}else{F=G.selection.createRange();return F.htmlText}return E||""},_setIESelection:function(){A5.browser.msie&&AV&&AV.select()},_setIEFocus:function(){var A=this._getDesignViewDocument();if(A5.browser.msie){try{A.body.focus()}catch(B){}}},focus:function(){var A=this._getDesignViewWindow(),B=A.document;if(A5.browser.msie){if(!AV){B.body.focus()}else{AV.select()}}else{A.focus()}},_getInspectElement:function(){return E5||this._getSelectedElement()},_getSelectedElement:function(){return this._getParentElement(this._getDesignViewWindow())},_createElement:function(B,C,A){return new BT(B,C,A)},_createDiv:function(A){return this._createElement("div",{"class":A})},_createSpan:function(C,A){var B=this;return !A?B._createElement("span",{"class":C}):C.length===0?B._createElement("span",A):this._createElement("span",A,{"class":C})},_createTextBox:function(B,A){var C={"class":B,type:"text"};if(A){C.value=A}return this._createElement("input",C)},_createLabel:function(A,B){return B?new BT("label",A,{"for":B}):new BT("label",A)},_createRadio:function(A,C,B){var D={name:C,id:A,value:B,type:"radio"};return this._createElement("input",D)},_createCheckbox:function(A){var B={type:"checkbox",id:A};return this._createElement("input","",B)},_createSelect:function(A,B){var D=this,E={"class":A},C=D._createElement("select",E);if(A===""){C=D._createElement("select")}A5.each(B,function(G,F){if(A5.isPlainObject(F)&&F.selected){C.add(D._createElement("option",F.text,{selected:"selected"}))}else{C.add(D._createElement("option",F))}});return C},_createInputButton:function(B,A){var C={"class":B,type:"button"};if(A){C.value=A}return this._createElement("input",C)},_createTextField:function(A,G,C,E){var D=this,F=D._createDiv(G),B={type:"text"};if(E){B.value=E}F.add(D._createSpan(C5,A));F.add(D._createElement("input",B));C&&F.add(new Co(C));return F},_createSeparator:function(){var A=this,B=A._createDiv(Cp);B.add(A._createElement("hr"));return B},_createOKCancelButtons:function(){var A=this,B=A._createDiv(AC);B.add(A._createElement("input",{type:"button","class":C7,value:"OK"}));B.add(A._createElement("input",{type:"button","class":C7,value:"Cancel"}));return B},_getDialogRes_Template:function(){var I=this,G=I._createDiv(Da),A=I._createDiv(BZ),J=I._createDiv(Ct),F=I._createDiv(BO),E=I._createDiv(Cu),D=I._createDiv(CA),B=I._createElement("div","Name :"),C=I._createElement("div","Description :"),H=I._createDiv(BQ),K=I._createDiv(Cw);A.add(I._createElement("div","Select Template:",{"class":Cz}));A.add(I._createElement("div","Template Preview:",{"class":Cx}));G.add(A);F.add(I._createElement("select",{size:8}));E.add(I._createElement("iframe",{frameborder:0}));J.add(F);J.add(E);G.add(J);B.add(I._createSpan(Ar));C.add(I._createSpan(E7));D.add(B);D.add(C);G.add(D);H.add(I._createSpan(C5,"Name :"));H.add(I._createTextBox(Aw));H.add(I._createSpan(C5,"Description :"));H.add(I._createTextBox(CU));G.add(H);K.add(I._createInputButton(C7+" "+Ci,"Delete selected"));K.add(I._createInputButton(C7+" "+B5,"Save current page as template"));G.add(K);G.add(I._createSeparator());G.add(I._createOKCancelButtons());return G.render()},_getDialogRes_ImageBrowser:function(){var F=this,A=F._createDiv(C9),E=F._createDiv(Er),D=F._createDiv(Eh),B=F._createDiv(Ag),G=F._createDiv(CL),C=F._createDiv(Eo);D.add(F._createTextField("Image src:",CQ));D.add(F._createTextField("Image alt text:",Cj));D.add(F._createTextField("Image width:",Al,"px"));D.add(F._createTextField("Image height:",AA,"px"));D.add(F._createTextField("Css text:",Ch));E.add(D);B.add(G);G.add(F._createElement("select",{size:8}));B.add(C);C.add(F._createElement("img",{src:"",alt:""}));E.add(B);E.add(F._createSeparator());E.add(F._createOKCancelButtons());A.add(E);return A.render()},_getDialogRes_Link:function(){var J=this,K=J._createDiv(AH),F=J._createTextField("Address :",CV),L=J._createDiv(DG),A=J._createElement("div"),I=[{id:"radUrl",value:"url"},{id:"radAnchor",value:"anchor",checked:true},{id:"radMail",value:"email"}],E=[],G=J._createTextField("Text to display :",Ba),M=J._createDiv(CT),H=J._createSpan(C5,"Target :"),C=[{text:"_blank",selected:true},"_parent","_self","_top"],D=J._createSelect(CT,C),B=J._createTextField("Css :",Bj),N;K.add(F);K.add(L);L.add(A);A5.each(I,function(O,P){A.add(J._createRadio(P.id,"radioList",P.value));A.add(J._createLabel(P.value,P.id))});for(N=1;N<8;N++){E.push("#anchor"+N.toString())}L.add(J._createSelect(AB,E));K.add(J._createSeparator());K.add(G);K.add(M);M.add(H);M.add(D);K.add(B);K.add(J._createSeparator());K.add(J._createOKCancelButtons());return K.render()},_getDialogRes_TagInspector:function(){var E=this,C=E._createDiv(C1),F=E._createDiv(ES),D=E._createDiv(BF),B=E._createDiv(EV),A=E._createDiv(Bg);C.add(F);F.add(E._createSpan(E2,"Selected tag:"));F.add(E._createSpan(DB,""));C.add(D);D.add(E._createCheckbox("displayNoEmpty"));D.add(E._createLabel("Display not empty attributes only","displayNoEmpty"));C.add(B);B.add(E._createSpan(C5,"Attributes:"));B.add(E._createDiv(CS));C.add(A);A.add(E._createSpan(C5,"Inner HTML:"));A.add(E._createElement("textarea"));C.add(E._createTextField("Css Text:",Av));C.add(E._createSeparator());C.add(E._createOKCancelButtons());return C.render()},_getDialogRes_Color:function(){return this._getDialogRes_CommonColor("#FFFFFF")},_getDialogRes_ForeColor:function(){return this._getDialogRes_CommonColor("#000000")},_getDialogRes_BackColor:function(){return this._getDialogRes_CommonColor("#FFFFFF")},_getDialogRes_CommonColor:function(A){var D=this,B=D._createDiv(D5),C=D._createDiv(CY);B.add(D._createDiv(AU));B.add(C);C.add(D._createSpan(C5,"Selected Color:"));C.add(D._createElement("input",{type:"text",value:A}));B.add(D._createSeparator());B.add(D._createOKCancelButtons());return B.render()},_getDialogRes_Table:function(){var C=this,A=C._createDiv(C3),B=C._createDiv(CZ);A.add(C._createTextField("Rows :",Bm,"",3));A.add(C._createTextField("Columns :",AG,"",3));A.add(C._createTextField("Table Width :",Bk,"&nbsp;pixels",200));A.add(C._createTextField("Table Height :",Bn,"&nbsp;pixels",200));A.add(C._createTextField("Border thickness :",Bo));A.add(C._createTextField("Cell Padding :",Bq));A.add(C._createTextField("Cell Spacing :",Bl));A.add(C._createTextField("Css Text :",Br));A.add(B);B.add(C._createSpan(C5,"Background Color :"));B.add(C._createElement("input",{type:"text"}));B.add(C._createElement("input",{type:"button",value:"..."}));A.add(C._createSeparator());A.add(C._createOKCancelButtons());return A.render()},_getDialogRes_Preview:function(){var E=this,D=E._createDiv(C2),C=E._createDiv(Bz),B=E._createDiv(AC),A=E._createDiv(Bh),F=E._createDiv(Dh);D.add(C);C.add(E._createSpan(C5,"Preview Size:"));C.add(E._createElement("input",{id:"rad640_480",name:"preview",type:"radio",checked:"checked"}));C.add(E._createLabel("640x480","rad640_480"));C.add(E._createElement("input",{id:"rad800_600",name:"preview",type:"radio"}));C.add(E._createLabel("800x600","rad800_600"));C.add(E._createElement("input",{id:"rad1024_768",name:"preview",type:"radio"}));C.add(E._createLabel("1024x768","rad1024_768"));C.add(E._createElement("input",{id:"chkSplit",type:"checkbox",checked:"checked"}));C.add(E._createLabel("Split pages","chkSplit"));D.add(E._createSeparator());D.add(B);B.add(E._createInputButton(C7+" "+DJ,"Print All"));B.add(E._createInputButton(C7+" "+DK,"Print Page"));B.add(E._createInputButton(C7+" "+Dn,"OK"));D.add(E._createSeparator());D.add(A);A.add(E._createElement("a","Prev page",{"class":Dt,href:"#"}));A.add(E._createElement("span","1 / 1"));A.add(E._createElement("a","Next page",{"class":Dw,href:"#"}));D.add(E._createDiv(DS));D.add(F);F.add(E._createElement("iframe",{src:"about:blank"}));return D.render()},_getDialogRes_CleanUp:function(){var D=this,E=D._createDiv(CP),C=D._createDiv(BC),F=D._createDiv(BK),B=D._createDiv(BB),A=[{id:"replaceSpans",label:"Strip SPAN tag"},{id:"replaceClass",label:"Strip CLASS tag"},{id:"replaceStyle",label:"Strip STYLE attribute"},{id:"replaceNbsp",label:"Replace &amp;nbsp; symbol"},{id:"transformPtoDiv",label:"Transform Paragraph to DIV"}];E.add(C);C.add(D._createSpan(C5,"Document source :"));E.add(F);F.add(D._createElement("textarea",{readonly:"readonly"}));E.add(B);A5.each(A,function(G,H){B.add(D._createCheckbox(H.id));B.add(D._createLabel(H.label,H.id))});E.add(D._createSeparator());E.add(D._createOKCancelButtons());return E.render()},_getDialogRes_FindAndReplace:function(){var E=this,C=E._createDiv(DT),B=E._createDiv(CK),A=E._createDiv(Ey),D=E._createDiv(AC);C.add(B);B.add(E._createSpan(C5,"Find:"));B.add(E._createElement("textarea","text"));C.add(A);A.add(E._createSpan(C5,"Replace:"));A.add(E._createElement("textarea"));C.add(E._createSeparator());C.add(D);D.add(E._createInputButton(C7,"Find"));D.add(E._createInputButton(C7,"Replace"));return C.render()},_getDialogRes_Media:function(){var C=this,A=C._createDiv(CX),B=C._createDiv(Em);A.add(B);B.add(C._createSpan(C5,"Media Type :"));B.add(C._createSelect("",["flash","video","applet","other"]));A.add(C._createTextField("Media Url :",Dm));A.add(C._createTextField("Width :",DA,"px",200));A.add(C._createTextField("Height :",Dv,"px",200));A.add(C._createSeparator());A.add(C._createOKCancelButtons());return A.render()},_getDialogRes_SpecialCharacter:function(){var L=this,M=L._createDiv(C0),A=L._createDiv(BJ),K=L._createDiv(Dg),J=L._createDiv(DP),P=L._createDiv(Bw),N=L._createDiv(Bp,"Punctuation"),H=L._createDiv(BL),C=["&#8211;","&#8212;","&iexcl;","&iquest;","&quot;","&laquo;","&raquo;","&nbsp;"],G=L._createDiv(Bp,"Symbols"),I=L._createDiv(BP),B=["&amp;","&cent;","&copy;","&divide;","&gt;","&lt;","&micro;","&#8226;","&para;","&plusmn;","&#8364;","&pound;","&reg;","&sect;","&yen;"],O=L._createDiv(Bp,"Diacritics"),E=L._createDiv(BM),D=["&aacute;","&Aacute;","&agrave;","&Agrave;","&acirc;","&Acirc;","&aring;","&Aring;","&atilde;","&Atilde;","&auml;","&Auml;","&aelig;","&AElig;","&ccedil;","&Ccedil;","&eacute;","&Eacute;","&egrave;","&Egrave;","&ecirc;","&Ecirc;","&euml;","&Euml;","&iacute;","&Iacute;","&igrave;","&Igrave;","&icirc;","&Icirc;","&iuml;","&Iuml;","&ntilde;","&Ntilde;","&oacute;","&Oacute;","&ograve;","&Ograve;","&ocirc;","&Ocirc;","&oslash;","&Oslash;","&otilde;","&Otilde;","&ouml;","&Ouml;","&uacute;","&Uacute;","&ugrave;","&Ugrave;","&ucirc;","&Ucirc;","&uuml;","&Uuml;","&szlig;","&yuml;","&#8216;","&#8217;"],F=L._createDiv(AC);M.add(A);A.add(K);K.add(J);J.add(new BT("span"));A.add(P);P.add(N);N.add(H);A5.each(C,function(Q,R){H.add(L._createLabel(R))});P.add(G);G.add(I);A5.each(B,function(Q,R){I.add(L._createLabel(R))});P.add(O);O.add(E);A5.each(D,function(Q,R){E.add(L._createLabel(R))});M.add(L._createSeparator());F.add(L._createInputButton(C7,"Cancel"));M.add(F);return M.render()},_copyFromClipboard:function(){var A,D,C={},B={};if(AZ.clipboardData){return AZ.clipboardData.getData("Text")}else{if(A5.browser.mozilla){try{netscape.security.PrivilegeManager.enablePrivilege&&netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")}catch(E){}A=Components.classes["@mozilla.org/widget/clipboard;1"].getService(Components.interfaces.nsIClipboard);if(!A){return false}D=Components.classes["@mozilla.org/widget/transferable;1"].createInstance(Components.interfaces.nsITransferable);if(!D){return false}D.addDataFlavor("text/unicode");A.getData(D,A.kGlobalClipboard);D.getTransferData("text/unicode",C,B);if(C){C=C.value.QueryInterface(Components.interfaces.nsISupportsString)}return C?C.data.substring(0,B.value/2):""}}},_copyToClipboard:function(C){var G,B,A,F={},D={};if(AZ.clipboardData&&C){AZ.clipboardData.setData("Text",C)}else{if(A5.browser.mozilla){try{netscape.security.PrivilegeManager.enablePrivilege&&netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");G=Components.classes["@mozilla.org/widget/clipboard;1"].createInstance(Components.interfaces.nsIClipboard);if(!G){return}B=Components.classes["@mozilla.org/widget/transferable;1"].createInstance(Components.interfaces.nsITransferable);if(!B){return}B.addDataFlavor("text/unicode");F={};D={};F=Components.classes["@mozilla.org/supports-string;1"].createInstance(Components.interfaces.nsISupportsString);F.data=C;B.setTransferData("text/unicode",F,C.length*2);A=Components.interfaces.nsIClipboard;if(!G){return false}G.setData(B,null,A.kGlobalClipboard)}catch(E){F="Copy text to Clipboard \n";F+="If you are using firefox please do the following :\n ";F+="1. Write in your url box : 'about:config'\n";F+="2. Change signed.applets.codebase_principal_support = true\n";A4(F)}}}},fixAbsoluteUrlsIfNeeded:function(H){for(var O=this,G=DR.URL,K=DR.URL,N=DR.URL,F=false,B=K.length,M=H,P,C,D,L,I,J,E,A=B-1;A>0;A--){P=K.charAt(A);C=K.charAt(A-1);if(P==="/"||P==="\\"){if(P===C){break}N=K.substring(0,A)+P;if(!F){K=N;F=true}}}D=O._prepareLiteralRegexText(G+"?");L=new RegExp(D,"g");M=M.replace(L,"?");I=O._prepareLiteralRegexText(K);L=new RegExp(I,"g");M=M.replace(L,"");J=O._prepareLiteralRegexText(N);L=new RegExp(J,"g");M=M.replace(L,"/");E=M.indexOf("#");if(E>-1){M=M.substr(E)}return M},_insertCell:function(B,A){var C=B.insertCell(A);C.innerHTML="&nbsp;";return C},_getDictionaryDeclare:function(){var A={};A.a=["accesskey","charset","class","coords","dir","href","hreflang","id","lang","name","rel","rev","shape","tabindex","target","title"];A.b=["class","dir","id","lang","title"];A.body=["alink","background","bgColor","bgproperties","bottommargin","class","dir","id","lang","leftmargin","link","marginheight","marginwidth","rightmargin","text","title","topmargin","vlink"];A.button=["accesskey","class","dir","disabled","id","lang","name","tabindex","title","type","value"];A.code=["class","dir","id","lang","title"];A.div=["align","class","dir","id","lang","title"];A.em=["class","dir","id","lang","title"];A.font=["class","color","dir","face","id","lang","pointsize","size","title"];A.form=["action","class","dir","enctype","id","lang","method","name","runat","target","title"];A.hr=["align","class","color","id","noshade","size","title","width"];A.i=["class","dir","id","lang","title"];A.img=["align","alt","border","class","controls","dir","dynsrc","height","hspace","id","ismap","lang","longdesc","loop","lowsrc","name","src","start","title","usemap","vspace","width"];A.input=["accept","accesskey","align","alt","border","checked","class","dir","disabled","height","hspace","id","lang","maxlength","name","readonly","size","src","tabindex","title","type","usemap","value","vspace","width"];A.label=["accesskey","class","dir","for","id","lang","title"];A.li=["class","dir","id","lang","title","type","value"];A.ol=["class","compact","dir","id","lang","start","title","type"];A.option=["class","dir","disabled","id","label","lang","selected","title","value"];A.p=["align","class","dir","id","lang","title"];A.span=["class","dir","id","lang","title"];A.strong=["class","dir","id","lang","title"];A.select=["accesskey","class","dir","disabled","id","lang","multiple","name","size","tabindex","title"];A.table=["align","background","bgColor","border","bordercolor","bordercolordark","bordercolorlight","cellpadding","cellspacing","class","cols","datapagesize","dir","frame","height","hspace","id","lang","rules","summary","title","vspace","width"];A.td=["abbr","align","axis","background","bgColor","bordercolor","bordercolordark","bordercolorlight","class","colspan","dir","headers","height","id","lang","nowrap","rowspan","scope","title","valign","width"];A.th=["abbr","align","axis","background","bgColor","bordercolor","bordercolordark","bordercolorlight","class","colspan","dir","headers","height","id","lang","nowrap","rowspan","scope","title","valign","width"];A.tr=["align","bgColor","bordercolor","bordercolordark","bordercolorlight","class","dir","height","id","lang","nowrap","title","valign"];A.tbody=["align","bgColor","class","dir","id","lang","title","valign"];A.textarea=["accesskey","class","cols","dir","disabled","id","label","lang","name","readonly","rows","tabindex","title","wrap"];A.u=["class","id","xml:lang"];A.ul=["class","compact","dir","id","lang","title","type"];return A},_getParentElement:function(A){var B=this,E=B._getRange(A),C,F,G,D,H;if(!E){return null}if(E.commonAncestorContainer){C=A.getSelection();F=E.startContainer||C.baseNode;G=E.endContainer||C.extentNode;D=E.startOffset;if(D===null){D=C.baseOffset}H=E.endOffset;if(H===null){H=C.extentOffset}return F===G&&H-D===1?C.anchorNode.childNodes[C.anchorOffset]:!E.commonAncestorContainer.tagName?A.document===E.commonAncestorContainer&&C.baseNode?C.baseNode.parentNode:E.commonAncestorContainer.parentNode:E.commonAncestorContainer}return E.length?E.item(0):E.parentElement?E.parentElement():null},_getRange:function(C){var A,B;if(C.document.selection&&!AZ.opera){return C.document.selection.createRange()}if(C.getSelection){A=C.getSelection();if(!A||A.rangeCount<1){return null}if(A.getRangeAt){B=A.getRangeAt(0)}else{B=C.document.createRange()}return B}},_generateUniqueName:function(A){var B=B1[A];if(!B){B=0}B1[A]=++B;return A+B},_setContentEditable:function(C,A){var D="designMode",B="contentEditable";try{if(C.body[B]){C.body[B]=A.toString()}if(C[D]){if(!A&&C[D]!=="off"){C[D]="off"}else{if(A&&C[D]!=="on"){C[D]="on"}}}A&&!A5.browser.msie&&C.execCommand("useCSS",false,true)}catch(E){}},_formatString:function(D,A){for(var C=D.length,B=0;B<A-C;B++){D="0"+D}return D},_convertToWebColor:function(E,D,F){var H=this,C,B,G,A;if(isNaN(E)||255-E<0){E=0}if(isNaN(D)||255-D<0){D=0}if(isNaN(F)||255-F<0){F=0}C=H._formatString(A6(E).toString(16),2);B=H._formatString(A6(D).toString(16),2);G=H._formatString(A6(F).toString(16),2);A="#"+C+B+G;return A},_prepareLiteralRegexText:function(A){var B=A;B=B.replace("\\","\\\\");B=B.replace(".","\\.");B=B.replace("?","\\?");return B},_isNumeric:function(A){return new RegExp("^\\d+$").test(A)},_isEmail:function(A){return new RegExp("mailto:(\\S)+[@]{1}(\\S)+[.]{1}(\\w)+").test(A)},_isUrl:function(A){return new RegExp("[a-zA-z]+://[^s]+").test(A)}})})(jQuery);(function(F){var I=document,D=parseInt,E="wijmo-wijeditor",A=E+"-colorcanvas",H=E+"-color",B=E+"-wheel",C=E+"-overlay",G=E+"-marker";F.fn.wijeditorcolorcanvas=function(K,J){F.wijeditorcolorcanvas(this,K,J);return this};F.wijeditorcolorcanvas=function(M,K,J){var L=F(M).get(0);return L.wijeditorcolorcanvas||(L.wijeditorcolorcanvas=new F._wijeditorcolorcanvas(L,K,J))};F._wijeditorcolorcanvas=function(L,J,K){var N=this,O="",P,M;M="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=crop, ";O+="<div class='"+A+"'>";O+="<div class='"+H+"'></div>";O+="<div class='"+B+"'></div>";O+="<div class='"+C+"'></div>";O+="<div class='h-marker "+G+"'></div>";O+="<div class='sl-marker "+G+"'></div></div>";F(L).html(O);P=F("."+A,L);N.wheel=F("."+B,L).get(0);N.radius=84;N.square=100;N.width=194;F.browser.msie&&F.browser.version<7&&F("*",P).each(function(){var R=this,Q=R.currentStyle.backgroundImage;if(Q!=="none"){Q=Q.substring(5,Q.length-2);F(R).css({backgroundImage:"none",filter:M+"src='"+Q+"')"})}});N.linkTo=function(Q){typeof N.callback==="object"&&F(N.callback).unbind("keyup",N.updateValue);N.color=null;if(typeof Q==="function"){N.callback=Q}else{if(typeof Q==="object"||typeof Q==="string"){N.callback=F(Q);N.callback.bind("keyup",N.updateValue);N.callback.get(0).value&&N.setColor(N.callback.get(0).value)}}return this};N.updateValue=function(){var Q=this;Q.value&&Q.value!==N.color&&N.setColor(Q.value)};N.setColor=function(R){var Q=N.unpack(R);if(N.color!==R&&Q){N.color=R;N.rgb=Q;N.hsl=N.RGBToHSL(N.rgb);N.updateDisplay()}return this};N.setHSL=function(Q){N.hsl=Q;N.rgb=N.HSLToRGB(Q);N.color=N.pack(N.rgb);N.updateDisplay();return this};N.widgetCoords=function(V){var W,Q,R,T,U;R=V.target||V.srcElement;T=N.wheel;U=N.absolutePosition(T);W=(V.pageX||0*(V.clientX+F("html").get(0).scrollLeft))-U.x;Q=(V.pageY||0*(V.clientY+F("html").get(0).scrollTop))-U.y;return{x:W-N.width/2,y:Q-N.width/2}};N.mousedown=function(R){if(!I.dragging){F(I).bind("mousemove",N.mousemove).bind("mouseup",N.mouseup);I.dragging=true}var Q=N.widgetCoords(R);N.circleDrag=Math.max(Math.abs(Q.x),Math.abs(Q.y))*2>N.square;N.mousemove(R);return false};N.mousemove=function(V){var T=N.widgetCoords(V),U,R,Q;if(N.circleDrag){U=Math.atan2(T.x,-T.y)/6.28;if(U<0){U+=1}N.setHSL([U,N.hsl[1],N.hsl[2]])}else{R=Math.max(0,Math.min(1,-(T.x/N.square)+0.5));Q=Math.max(0,Math.min(1,-(T.y/N.square)+0.5));N.setHSL([N.hsl[0],R,Q])}return false};N.mouseup=function(){F(I).unbind("mousemove",N.mousemove).unbind("mouseup",N.mouseup);I.dragging=false};N.updateDisplay=function(){var Q=N.hsl[0]*6.28,R;F(".h-marker",P).css({left:Math.round(Math.sin(Q)*N.radius+N.width/2)+"px",top:Math.round(-Math.cos(Q)*N.radius+N.width/2)+"px"});F(".sl-marker",P).css({left:Math.round(N.square*(0.5-N.hsl[1])+N.width/2)+"px",top:Math.round(N.square*(0.5-N.hsl[2])+N.width/2)+"px"});F("."+H,P).css("backgroundColor",N.pack(N.HSLToRGB([N.hsl[0],1,0.5])));if(typeof N.callback==="object"){F(N.callback).css({backgroundColor:N.color,color:N.hsl[2]>0.5?"#000":"#fff"});F(N.callback).each(function(){R=this;if(R.value&&R.value!==N.color){R.value=N.color}})}else{typeof N.callback==="function"&&N.callback.call(N,N.color)}};N.absolutePosition=function(T){var Q={x:T.offsetLeft,y:T.offsetTop},R;if(T.offsetParent){R=N.absolutePosition(T.offsetParent);Q.x+=R.x;Q.y+=R.y}return Q};N.pack=function(U){var Q=Math.round(U[0]*255),T,R;T=Math.round(U[1]*255);R=Math.round(U[2]*255);return"#"+(Q<16?"0":"")+Q.toString(16)+(T<16?"0":"")+T.toString(16)+(R<16?"0":"")+R.toString(16)};N.unpack=function(Q){return Q.length===7?[D("0x"+Q.substring(1,3))/255,D("0x"+Q.substring(3,5))/255,D("0x"+Q.substring(5,7))/255]:Q.length===4?[D("0x"+Q.substring(1,2))/15,D("0x"+Q.substring(2,3))/15,D("0x"+Q.substring(3,4))/15]:void 0};N.HSLToRGB=function(Q){var V,U,R,T,W,X=this;R=Q[0];T=Q[1];W=Q[2];U=W<=0.5?W*(T+1):W+T-W*T;V=W*2-U;return[X.hueToRGB(V,U,R+0.33333),X.hueToRGB(V,U,R),X.hueToRGB(V,U,R-0.33333)]};N.hueToRGB=function(Q,R,T){T=T<0?T+1:T>1?T-1:T;return T*6<1?Q+(R-Q)*T*6:T*2<1?R:T*3<2?Q+(R-Q)*(0.66666-T)*6:Q};N.RGBToHSL=function(U){var T,X,Y,Z,R,l,Q,W,V;Q=U[0];W=U[1];V=U[2];T=Math.min(Q,Math.min(W,V));X=Math.max(Q,Math.max(W,V));Y=X-T;l=(T+X)/2;R=0;if(l>0&&l<1){R=Y/(l<0.5?2*l:2-2*l)}Z=0;if(Y>0){if(X===Q&&X!==W){Z+=(W-V)/Y}if(X===W&&X!==V){Z+=2+(V-Q)/Y}if(X===V&&X!==Q){Z+=4+(Q-W)/Y}Z/=6}return[Z,R,l]};F("*",P).mousedown(N.mousedown);N.setColor(K||"#000000");J&&N.linkTo(J)}})(jQuery);(function(J){var B="wijmo-wijrating",D="wijmo-wijrating-starcontainer",I="wijmo-wijrating-reset",F="ui-corner-all",C="ui-state-default",E="ui-state-hover",L="wijmo-wijrating-resethover",G="wijmo-wijrating-star",H="wijmo-wijrating-normal",M="wijmo-wijrating-hover",A="wijmo-wijrating-rated",K="wijmo-wijrating-vertical";J.widget("wijmo.wijrating",{options:{disabled:false,count:5,split:1,totalValue:5,value:0,min:null,max:null,resetButton:{disabled:false,hint:"cancel this rating!",position:"leftOrTop",customizedClass:"",customizedHoverClass:""},hint:{disabled:false,content:null},orientation:"horizontal",direction:"normal",ratingMode:"continuous",icons:{iconsClass:null,hoverIconsClass:null,ratedIconsClass:null},iconWidth:16,iconHeight:16,animation:null,rating:null,rated:null,reset:null,hover:null},_setOption:function(N,P){var O=this,Q=O.options,T=J("."+I,O.ratingElement[0]),U=J("."+D,O.ratingElement[0]),R=J("."+H,O.ratingElement[0]);if(J.isPlainObject(Q[N])){switch(N){case"resetButton":if(typeof P.disabled!=="undefined"){if(P.disabled!==Q[N].disabled){if(P.disabled){T.hide();T.attr("aria-hidden",true)}else{if(!Q.disabled){T.show();T.attr("aria-hidden",false)}}}}if(typeof P.hint!=="undefined"){if(P.hint!==Q[N].hint){if(P.hint===null){T.attr("title","")}else{T.attr("title",P.hint)}}}if(P.position&&P.position.length){if(P.position!==Q[N].position){if(P.position==="rightOrBottom"){T.parent().append(T)}else{T.parent().prepend(T)}}}if(typeof P.customizedClass!=="undefined"){if(P.customizedClass!==Q[N].customizedClass){Q[N].customizedClass.length&&T.removeClass(Q[N].customizedClass);P.customizedClass.length&&T.addClass(P.customizedClass)}}break;case"hint":if(typeof P.disabled!=="undefined"){if(P.disabled!==Q[N].disabled){if(P.disabled){R.removeAttr("title")}else{O._resetHint(Q.hint.content)}}}if(typeof P.content!=="undefined"){if(P.content!==Q[N].content){!Q[N].disabled&&O._resetHint(P.content)}}break;case"icons":if(typeof P.iconsClass!=="undefined"){Q[N].iconsClass&&Q[N].iconsClass.length&&O._removeCustomizedIconsClass(Q[N].iconsClass);O._addCustomizedIconsClass(P.iconsClass,Q.split)}if(typeof P.hoverIconsClass!=="undefined"){Q[N].hoverIconsClass&&Q[N].hoverIconsClass.length&&O._removeCustomizedIconsClass(Q[N].hoverIconsClass)}if(typeof P.ratedIconsClass!=="undefined"){Q[N].ratedIconsClass&&Q[N].ratedIconsClass.length&&O._removeCustomizedIconsClass(Q[N].ratedIconsClass);O._resetValue(Q.value,Q.ratingMode,P.ratedIconsClass)}}J.extend(true,Q[N],P)}else{if(P===Q[N]){return}switch(N){case"disabled":if(P){O._unbindLiveEvents();T.hide();T.attr("aria-hidden",true)}else{O._bindLiveEvents();if(!Q.resetButton.disabled){T.show();T.attr("aria-hidden",false)}}break;case"count":O._createStars(Q.split,P,U);break;case"split":O._createStars(P,Q.count,U);break;case"totalValue":O._resetTotalValue(P);break;case"orientation":if(P==="vertical"){O.ratingElement.addClass(K)}else{O.ratingElement.removeClass(K)}if(Q.split>1){Q[N]=P;O._createStars(Q.split,Q.count,U)}break;case"direction":Q[N]=P;O._createStars(Q.split,Q.count,U);break;case"ratingMode":O._resetValue(Q.value,P,Q.icons.ratedIconsClass);break;case"value":if(Q.min&&P<Q.min){return}if(Q.max&&P>Q.max){return}O._resetValue(P,Q.ratingMode,Q.icons.ratedIconsClass);break;case"iconWidth":Q[N]=P;O._createStars(Q.split,Q.count,U);break;case"iconHeight":Q[N]=P;O._createStars(Q.split,Q.count,U)}J.Widget.prototype._setOption.apply(O,arguments)}},_create:function(){var O=this,N=O.options,P;if(O.element.is("select")){O._parseSelect();O.element.hide();P=J("<div></div>");O.element.after(P)}else{if(O.element.is("div")){if(O.element.children("input:[type='radio']").length>0){O._parseRadio();O.element.hide();P=J("<div></div>");O.element.after(P)}else{P=O.element}}else{return}}O.ratingElement=P;O._createRating();!N.disabled&&O._bindLiveEvents()},destroy:function(){var N=this;N._unbindLiveEvents();if(N.element!==N.ratingElement){N.ratingElement.remove();N.element.show()}else{N.element.removeClass("ui-widget");N.element.removeClass(B);N.element.removeClass(K);N.element.empty()}J.Widget.prototype.destroy.apply(N,arguments)},_unbindLiveEvents:function(){J("."+H,this.ratingElement[0]).die("wijrating");J("."+I,this.ratingElement[0]).die("wijrating")},_bindLiveEvents:function(){var U=this,P=U.options,T="."+H,R="."+I,N,Q={element:U.ratingElement,mouseover:function(X){var W=J(X.target),V=J(T,U.ratingElement[0]);if(W.is(T)){V.removeClass(M);W.addClass(M);if(P.ratingMode==="continuous"){if(P.direction==="reversed"){W.parent().nextAll().children().addClass(M)}else{W.parent().prevAll().children().addClass(M)}}U._addCustomizedHoverIconsClass(P.icons.hoverIconsClass,P.split,W);N={value:parseFloat(W.html()),target:W};U._trigger("hover",X,N)}},mouseout:function(V){var X=J(V.target),W=J(T,U.ratingElement[0]);if(X.is(T)){W.removeClass(M);U._removeCustomizedIconsClass(P.icons.hoverIconsClass)}},click:function(a){var d=J(a.target),Z=parseFloat(d.html()),V=J(T,U.ratingElement[0]),Y=J.extend({duration:500,easing:null,delay:250},P.animation),X=J.wijmo.wijrating.animations,W=Y.animated;if(!d.is(T)){return}if(P.max&&Z>P.max){return}if(P.min&&Z<P.min){return}N={oldValue:P.value,newValue:Z,target:d};if(U._trigger("rating",a,N)===false){return false}P.value=Z;U._resetValue(Z,P.ratingMode,P.icons.ratedIconsClass);V.removeClass(M);U._removeCustomizedIconsClass(P.icons.hoverIconsClass);N={value:Z,target:d};if(W){if(X&&X[W]){X[W](P,V,function(){U._trigger("rated",a,N)})}else{if(J.effects&&J.effects[W]){U._playJqueryAnimation(Y,V,function(){J.browser.msie&&J.browser.version<9&&V.css("filter","");U._trigger("rated",a,N)})}else{U._trigger("rated",a,N)}}}else{U._trigger("rated",a,N)}}},O={element:U.ratingElement,mouseover:function(V){var W=J(V.target);W=W.closest("."+I);W.addClass(L);W.addClass(E);P.resetButton.customizedHoverClass&&P.resetButton.customizedHoverClass.length&&W.addClass(P.resetButton.customizedHoverClass)},mouseout:function(V){var W=J(V.target);W=W.closest("."+I);W.removeClass(L);W.removeClass(E);P.resetButton.customizedHoverClass&&P.resetButton.customizedHoverClass.length&&W.removeClass(P.resetButton.customizedHoverClass)},click:function(V){var W=J(V.target);U._setOption("value",0);N={target:W};U._trigger("reset",V,N)}};J(T,this.ratingElement[0]).live("mouseover.wijrating",J.proxy(Q.mouseover,Q)).live("mouseout.wijrating",J.proxy(Q.mouseout,Q)).live("click.wijrating",J.proxy(Q.click,Q));J(R,this.ratingElement[0]).live("mouseover.wijrating",J.proxy(O.mouseover,O)).live("mouseout.wijrating",J.proxy(O.mouseout,O)).live("click.wijrating",J.proxy(O.click,O))},_clearIntentTimer:function(){var N=this;N.intentTimers&&N.intentTimers.length&&J.each(N.intentTimers,function(O,P){if(P){window.clearTimeout(P);P=null}});N.intentTimers=[]},_playJqueryAnimation:function(R,T,P){var O=this,N=O.options,U={easing:R.easing},Q=R.animated;O._clearIntentTimer();T.each(function(X,W){var Y=Math.floor(X/N.split)*R.delay,V;V=window.setTimeout(function(){J(W).hide(Q,U,R.duration,function(){if(X!==T.length-1){return}T.each(function(b,a){var c=Math.floor(b/N.split)*R.delay,Z;Z=window.setTimeout(function(){J(a).show(Q,U,R.duration,function(){if(b===T.length-1){P&&J.isFunction(P)&&P.call(this)}})},c);O.intentTimers.push(Z)})})},Y);O.intentTimers.push(V)})},_addCustomizedIconsClass:function(R,N){var O=this,T,P=0,Q=0;if(R&&R.length){T=J("."+H,O.ratingElement[0]);T.each(function(V,U){if(P===N){P=0;Q++}if(typeof R==="string"){J(U).addClass(R)}else{if(J.isArray(R)){Q<R.length&&J(U).addClass(R[Q])}}P++})}},_addCustomizedHoverIconsClass:function(V,O,X){var T=this,U=T.options,R=U.direction,P=U.ratingMode,W=J("."+H,T.ratingElement[0]),Q=W.index(X),N=0,Y;if(V&&V.length){if(typeof V==="string"){X.addClass(V);if(P!=="single"){if(R==="reversed"){X.parent().nextAll().children().addClass(V)}else{X.parent().prevAll().children().addClass(V)}}}else{if(J.isArray(V)){if(P==="single"){if(R==="reversed"){Y=W.length-1-Q}else{Y=Q}N=Math.floor(Y/O);V.length>N&&X.addClass(V[N])}else{if(R==="reversed"){for(Y=W.length-1;Y>=Q;Y--){N=Math.floor((W.length-1-Y)/O);V.length>N&&J(W[Y]).addClass(V[N])}}else{for(Y=0;Y<=Q;Y++){N=Math.floor(Y/O);V.length>N&&J(W[Y]).addClass(V[N])}}}}}}},_removeCustomizedIconsClass:function(P){var O=this,N=J("."+H,O.ratingElement[0]);if(P&&P.length){if(typeof P==="string"){N.removeClass(P)}else{J.isArray(P)&&J.each(P,function(Q,R){N.removeClass(R)})}}},_resetValue:function(N,R,U){var O=this,W=O.options,Q=J("."+H,O.ratingElement[0]),T=R||W.ratingMode,P=U&&U.length,V=0,X;Q.each(function(c,Y){var a=J(Y),Z=parseFloat(a.html());a.removeClass(A);a.parent().attr("aria-checked",false);if(P){if(typeof U==="string"){a.removeClass(U);X=U}else{if(J.isArray(U)){J.each(U,function(b,d){a.removeClass(d)});if(W.direction==="reversed"){V=Math.floor((Q.length-1-c)/W.split)}else{V=Math.floor(c/W.split)}if(U.length>V){X=U[V]}}}}if(Z===N){a.addClass(A);P&&a.addClass(X);a.parent().attr("aria-checked",true)}else{if(T==="continuous"){if(Z<N){a.addClass(A);P&&a.addClass(X)}}}})},_resetTotalValue:function(T){var O=this,W=O.options,X=W.hint,R=J("."+H,O.ratingElement[0]),Q=R.length,N,P,V,U=0;for(U;U<Q;U++){V=Math.round((U+1)*T*100/Q)/100;N=J(R[U]);P=parseFloat(N.html());if(P===W.value){W.value=V}N.html(V);if(X&&X.length&&X.length>=U&&X[U]&&X[U].length){N.attr("title",X[U])}else{N.attr("title",V)}}},_resetHint:function(O){var N=this,T=J("."+H,N.ratingElement[0]),P,Q,R=0;for(R;R<T.length;R++){P=J(T[R]);Q=parseFloat(P.html());if(O&&O.length&&O.length>=R&&O[R]&&O[R].length){P.attr("title",O[R])}else{P.attr("title",Q)}}},_createRating:function(){var R=this,N=R.ratingElement,O=R.options,T,P,Q;N.addClass(B+" ui-widget");O.orientation==="vertical"&&N.addClass(K);T=J("<div></div>");T.addClass(I);T.addClass(F);T.addClass(C);O.resetButton.customizedClass&&O.resetButton.customizedClass.length&&T.addClass(O.resetButton.customizedClass);T.appendTo(N);T.attr("role","button");T.attr("aria-label","reset");T.attr("aria-hidden",false);O.resetButton.hint&&O.resetButton.hint.length&&T.attr("title",O.resetButton.hint);if(O.resetButton.disabled||O.disabled){T.hide();T.attr("aria-hidden",true)}P=J("<span></span>");P.addClass("ui-icon ui-icon-close");T.append(P);Q=J("<div></div>");Q.attr("role","radiogroup");Q.addClass(D);if(O.resetButton.position==="leftOrTop"){Q.appendTo(N)}else{Q.prependTo(N)}R._createStars(O.split,O.count,Q)},_createStars:function(m,O,Q){var T=this,b=T.options,V=b.hint,v,e,a,X=0,W=0,R=Math.ceil(b.iconWidth/m),N=Math.ceil(b.iconHeight/m),U=b.icons.ratedIconsClass,Z,Y,P=U&&U.length;Q.empty();for(X;X<O*m;X++,W++){a=Math.round((X+1)*b.totalValue*100/O/m)/100;if(W===m){W=0}e=J("<div></div>");e.attr("role","radio");e.attr("aria-checked",false);if(b.orientation==="vertical"){e.width(b.iconWidth);e.height(N)}else{e.width(R);e.height(b.iconHeight)}e.addClass(G);v=J("<div>"+a+"</div>");v.addClass(H);v.width(b.iconWidth);v.height(b.iconHeight);e.attr("aria-label",a);if(W>0&&b.direction==="normal"){if(b.orientation==="vertical"){v.css({"margin-top":"-"+W*N+"px"})}else{v.css({"margin-left":"-"+W*R+"px"})}}else{if(W<m-1&&b.direction==="reversed"){if(b.orientation==="vertical"){v.css({"margin-top":"-"+(m-1-W)*N+"px"})}else{v.css({"margin-left":"-"+(m-1-W)*R+"px"})}}}if(!V.disabled){if(V.content&&V.content.length){if(X<=V.content.length){v.attr("title",V.content[X]);e.attr("aria-label",V.content[X])}}else{v.attr("title",a)}}if(P){if(typeof U==="string"){Y=U}else{if(J.isArray(U)){if(b.direction==="reversed"){Z=Math.floor((O*m-1-X)/m)}else{Z=Math.floor(X/m)}if(U.length>Z){Y=U[Z]}}}}if(a===b.value){v.addClass(A);P&&v.addClass(Y);e.attr("aria-checked",true)}else{if(a<b.value&&b.ratingMode==="continuous"){v.addClass(A);P&&v.addClass(Y)}}v.appendTo(e);if(b.direction==="reversed"){e.prependTo(Q)}else{e.appendTo(Q)}}T._addCustomizedIconsClass(b.icons.iconsClass,m)},_parseRadio:function(){var O=this,N=O.options,P=[],Q=J("input:[type='radio']",O.element);if(Q.length){N.count=Q.length;N.totalValue=Q.length;Q.each(function(T,R){var U=J(R),V=U.attr("id"),W;if(V&&V.length>0){W=J("label:[for='"+V+"']",O.element);if(W.length){P.push(W.html())}else{P.push("")}}else{P.push("")}if(U.is(":checked")){N.value=T+1}});N.hint.content=P}},_parseSelect:function(){var O=this,Q=O.options,N=[],P=J("option",O.element);if(P.length){Q.count=P.length;Q.totalValue=P.length;P.each(function(R,U){var T=J(U);N.push(T.html());if(T.is(":selected")){Q.value=R+1}});Q.hint.content=N}}});J.extend(J.wijmo.wijrating,{animations:{scroll:function(Q,T,R){var N=Q,W=R,V=250,O=500,U=250,P=jQuery.makeArray(T);P.reverse();J.each(P,function(Y,a){var Z=Math.floor(Y/N.split)*U,d={width:0},c,X;c=window.setTimeout(function(){J(a).animate(d,V,function(){window.clearTimeout(c);if(Y!==T.length-1){return}X=window.setTimeout(function(){T.each(function(e,m){var l=Math.floor(e/N.split)*U,f={width:N.iconWidth},g;g=window.setTimeout(function(){J(m).animate(f,V,function(){window.clearTimeout(g);if(e===T.length-1){W&&J.isFunction(W)&&W.call(this)}})},l)});window.clearTimeout(X)},O)})},Z)});R&&J.isFunction(R)&&R.call(this)}}})})(jQuery);(function(A){if(!window.Raphael){return}A.widget("wijmo.wijscatterchart",A.wijmo.wijchartcore,{options:{animation:{enabled:false,duration:2000,easing:">"},seriesTransition:{enabled:true,duration:2000,easing:">"},zoomOnHover:true,mouseDown:null,mouseUp:null,mouseOver:null,mouseOut:null,mouseMove:null,click:null},_create:function(){var B=this;A.wijmo.wijchartcore.prototype._create.apply(B,arguments);B.chartElement.addClass("wijmo-wijscatterchart")},destroy:function(){var B=this;B.chartElement.removeClass("wijmo-wijscatterchart");A.wijmo.wijchartcore.prototype.destroy.apply(B,arguments)},getScatter:function(B,I){var C=this,G=C.chartElement.data("fields"),H,E,F,D;if(G&&G.chartElements){F=G.chartElements.scatters;if(F&&F.length){E=F.length;if(B<0||B>=E){return H}D=F[B];if(typeof I==="undefined"){return D}E=D.length;if(D&&E){return I<0||I>=E?H:D[I]}}return H}},_paintLegend:function(){var D=this,E=D.options,B=[].concat(E.seriesList),C=E.seriesStyles,F=0;A.extend(true,E,{legend:{size:{width:20,height:10}}});A.wijmo.wijchartcore.prototype._paintLegend.apply(D,arguments);if(E.legend.visible){D.legends.length&&D.legendIcons.length&&A.each(D.legendIcons,function(G,H){H.hide()});E.legend.reversed&&B.reverse();A.each(B,function(O,H){var I=H.markerType,N,J,L,M,G=E.legend.reversed?C[B.length-1-O]:C[O],P=A.extend(true,{},G),K;if(P.stroke&&!P.fill){P.fill=P.stroke}if(H.legendEntry&&H.display!=="exclude"){N=D.legendIcons[F];J=N.wijGetBBox();L=J.x+J.width/2;M=J.y+J.height/2;if(!I){I="circle"}K=D.canvas.paintMarker(I,L,M,3);A.wijraphael.addClass(A(K.node),"wijchart-legend-dot wijchart-canvas-object wijchart-legend");K.attr(P);D.legendDots.push(K);D.legendEles.push(K);F++}})}},_showSerieEles:function(B){A.each(B,function(C,D){D.show()})},_hideSerieEles:function(B){A.each(B,function(C,D){D.hide()})},_paintTooltip:function(){var D=this,B=D.chartElement,C=B.data("fields");A.wijmo.wijchartcore.prototype._paintTooltip.apply(this,arguments);if(D.tooltip){if(C&&C.chartElements&&C.chartElements.tooltipTars){D.tooltip.setTargets(C.chartElements.tooltipTars);D.tooltip.setOptions({mouseTrailing:false})}}},_getTooltipText:function(B,E){var D=A(E).data("wijchartDataObj"),C={data:D,label:D.label,x:D.x,y:D.y,type:D.markerType,target:E,fmt:B};return A.proxy(B,C)()},_onBeforeTooltipShowing:function(E){var C=this,B=E.options,D=E.target;if(D){B.style.stroke=D.getAttribute("stroke")||D.getAttribute("fill")||"#ffffff";D.attrs={stroke:B.style.stroke}}A.wijmo.wijchartcore.prototype._onBeforeTooltipShowing.apply(C,arguments)},_paintPlotArea:function(){var B=this,C=B.options;B.chartElement.wijscatter({bounds:B.canvasBounds,widgetName:B.widgetName,canvas:B.canvas,tooltip:B.tooltip,axis:C.axis,animation:C.animation,seriesTransition:C.seriesTransition,seriesList:C.seriesList,seriesStyles:C.seriesStyles,seriesHoverStyles:C.seriesHoverStyles,hint:C.hint,isXTime:B.axisInfo.x.isTime,isYTime:B.axisInfo.y.isTime,zoomOnHover:C.zoomOnHover,mouseDown:A.proxy(B._mouseDown,B),mouseUp:A.proxy(B._mouseUp,B),mouseOver:A.proxy(B._mouseOver,B),mouseOut:A.proxy(B._mouseOut,B),mouseMove:A.proxy(B._mouseMove,B),click:A.proxy(B._click,B)})}})})(jQuery);(function(A){if(!window.Raphael){return}A.fn.extend({wijscatter:function(Av){var Au=this,Aw=Av.bounds,Ab=Aw.endX-Aw.startX,Ac=Aw.endY-Aw.startY,W=Av.axis.x.min,a=Av.axis.y.min,X=Av.axis.x.max,V=Av.axis.y.max,Ap={minX:W,minY:a,maxX:X,maxY:V,width:Ab,height:Ac,kx:Ab/(X-W),ky:Ac/(V-a)},N=Av.widgetName,U=Av.canvas,Am=Av.animation,T=Av.seriesTransition,R=Av.seriesList,An=Av.seriesStyles,O=Av.isXTime,P=Av.isYTime,At=Av.zoomOnHover,Ag=Av.mouseDown,Aj=Av.mouseUp,Ae=Av.mouseOver,Af=Av.mouseOut,Ah=Av.mouseMove,Ad=Av.click,Q=U.set(),Ak=[],As=[],Ar,Ax=Au.data("fields")||{},Ai=Au.css("background-color"),Aq=[],Al=A.toOADate,Ao,Ay,Aa;if(Au.find("svg").length>0){Ao=new A.chartRender(Au.find("svg").get(0),Au.width(),Au.height())}else{Ao=new A.chartRender(Au.children(":first").addClass("vmlcontainer").get(0),Au.width(),Au.height())}Ay=Ao.clipRect(0,0,0,Au.height());Aa=Ao.g().clip(Ay).add();function Z(){var B=A.isFunction;A(".wijscatterchart",Au[0]).live("mousedown."+N,function(D){if(B(Ag)){var C=A(D.target).data("wijchartDataObj");if(!C){C=A(D.target.parentNode).data("wijchartDataObj")}Ag.call(Au,D,C)}}).live("mouseup."+N,function(D){if(B(Aj)){var C=A(D.target).data("wijchartDataObj");if(!C){C=A(D.target.parentNode).data("wijchartDataObj")}Aj.call(Au,D,C)}}).live("mouseover."+N,function(G){var D=A(G.target).data("wijchartDataObj"),C,E,F;if(!D){D=A(G.target.parentNode).data("wijchartDataObj")}F=D.dot;if(At){C=D.seriesIndex;F.attr&&F.attr(E);if(document.createElementNS){F.scale(1.5,1.5)}else{F.attr("stroke-width",5)}}B(Ae)&&Ae.call(Au,G,D)}).live("mouseout."+N,function(F){var D=A(F.target).data("wijchartDataObj"),C,E;if(!D){D=A(F.target.parentNode).data("wijchartDataObj")}E=D.dot;if(At){C=D.seriesIndex;E.attr&&E.attr(An[C])}document.createElementNS&&E.scale(1,1);B(Af)&&Af.call(Au,F,D)}).live("mousemove."+N,function(D){if(B(Ah)){var C=A(D.target).data("wijchartDataObj");if(!C){C=A(D.target.parentNode).data("wijchartDataObj")}Ah.call(Au,D,C)}}).live("click."+N,function(D){if(B(Ad)){var C=A(D.target).data("wijchartDataObj");if(!C){C=A(D.target.parentNode).data("wijchartDataObj")}Ad.call(Au,D,C)}})}function Y(){A(".wijscatterchart",Au).die(N)}A.each(R,function(C,I){var F=I.data,K,D=I.markerWidth||5,H=An[C],E=F.x,G=F.y,J=[],B=[];I=A.extend(true,{visible:true,markerType:"circle"},I);K=I.markerType;if(I.display==="exclude"){return true}if(!H.fill&&H.stroke){H.fill=H.stroke}A.each(G,function(L,M){var g=E[L],b=0,c=0,d,f,e={};if(O){g=Al(g)}if(P){M=Al(M)}if(typeof g==="undefined"){return false}if(isNaN(g)||typeof g==="string"){d=L}else{d=g}b=Aw.startX+(d-Ap.minX)*Ap.kx;c=Aw.endY-(M-Ap.minY)*Ap.ky;if(H.opacity){H["fill-opacity"]=H.opacity;H["stroke-opacity"]=H.opacity;delete H.opacity}if(K==="cross"&&H["stroke-width"]!==undefined&&H["stroke-width"]===0){H["stroke-width"]=1}f=Ao.symbol(K,b,c,D).attr(H).add(Aa);f.attr({"class":"wijchart-canvas-object wijscatterchart"});e.dot=f;e.x=E[L];e.y=G[L];e.seriesIndex=C;e.index=L;e.markerType=K;e.label=I.label;e.series=I;e.type="scatter";A(f.element).data("wijchartDataObj",e);J.push(f);As.push(A.extend({},f,{node:f.element}));B.push(f)});Ak.push(J);Aq.push(B)});if(Am.enabled||T.enabled){if(Ai==="transparent"){Ai="white"}if(Ay.getCSS){A(Ay.members[0].element).animate({width:Au.width()},{duration:Am.duration,step:function(C){Ay.width=C;var B=Ay.getCSS();A(this).css(B)}})}else{A(Ay.element).animate({width:Au.width()},{duration:Am.duration,step:function(B){Ay.attr("width",B)}})}}else{if(Ay.getCSS){A(Ay.members[0].element).css({width:Au.width()});Ay.width=Au.width();A(Ay.members[0].element).css(Ay.getCSS())}else{A(Ay.element).css({width:Au.width()});Ay.attr("width",Au.width())}}Y();Z();Ar={animationSet:Q,tooltipTars:As,scatters:Ak};if(!Ax.chartElements){Ax.chartElements={}}Ax.seriesEles=Aq;A.extend(true,Ax.chartElements,Ar);Au.data("fields",Ax)}})})(jQuery);(function(V){var U=document,Ac=V.each,I=V.browser.msie,X=U.documentMode===8,D="http://www.w3.org/2000/svg",Ae=!!U.createElementNS&&!!U.createElementNS(D,"svg").createSVGRect,Aa=0,W="div",H="absolute",R="hidden",O="scatterchart-",C="visible",E="visibility",G="px",J="none",Z="M",T="L",L,P,F;function M(A){return typeof A==="string"}function Ad(A){return typeof A==="number"}function Y(A){return A!==undefined&&A!==null}function N(d,a,h){var B="setAttribute",A;if(M(a)){if(Y(h)){d[B](a,h)}else{if(d&&d.getAttribute){A=d.getAttribute(a)}}}else{Y(a)&&V.isPlainObject(a)&&V.each(a,function(e,c){d[B](e,c)})}return A}function K(B,A){if(I){if(A&&A.opacity!==undefined){A.filter="alpha(opacity="+A.opacity*100+")"}}V.extend(B.style,A)}function Ab(c,A,B){var a=U.createElement(c);A&&V.extend(a,A);B&&K(a,B);return a}function Q(){}Q.prototype={init:function(A,B){this.element=U.createElementNS(D,B);this.renderer=A},attr:function(i,d){var A,h,n=this.element,B=n.nodeName,a,m=this;if(i===undefined){return}if(M(i)&&Y(d)){A=i;i={};i[A]=d}if(M(i)){A=i;if(B==="circle"){A=({x:"cx",y:"cy"})[A]||A}m=N(n,A)||this[A]||0;if(A!=="d"&&A!==E){m=parseFloat(m)}}else{i&&V.each(i,function(b){a=false;h=i[b];if(b==="d"){if(h&&h.join){h=h.join(" ")}if(/(NaN| {2}|^$)/.test(h)){h="M 0 0"}this.d=h}else{if(B==="circle"&&(b==="x"||b==="y")){b=({x:"cx",y:"cy"})[b]||b}}if(jQuery.browser.safari&&b==="stroke-width"&&h===0){h=1e-06}!a&&N(n,b,h)})}return m},scale:function(B,j){var g=this,i=g.getBBox(),h=-(i.x+i.width/2)/2,A=-(i.y+i.height/2)/2;if(B===1){h=0}if(j===1){A=0}g.attr("transform","matrix("+B+",0,0, "+j+","+h+","+A+")")},symbolAttr:function(A){var B=this;Ac(["x","y","r","start","end","width","height","innerR"],function(a,b){if(A[b]){B[b]=A[b]}else{B[b]=B[b]}});B.attr({d:B.renderer.symbols[B.symbolName](Math.round(B.x*2)/2,Math.round(B.y*2)/2,B.r,{start:B.start,end:B.end,width:B.width,height:B.height,innerR:B.innerR})})},clip:function(A){return this.attr("clip-path","url("+this.renderer.url+"#"+A.id+")")},crisp:function(A,m,B,l,r){var n=this,o,q={},p={},s;A=A||n.strokeWidth||0;s=A%2/2;p.x=Math.floor(m||n.x||0)+s;p.y=Math.floor(B||n.y||0)+s;p.width=Math.floor((l||n.width||0)-2*s);p.height=Math.floor((r||n.height||0)-2*s);p.strokeWidth=A;for(o in p){if(n[o]!==p[o]){n[o]=q[o]=p[o]}}return q},css:function(h){var i=this,A=i.element,j=h&&h.width&&A.nodeName==="text",B="",a=function(c,d){return"-"+d.toLowerCase()};if(h&&h.color){h.fill=h.color}h=V.extend(i.styles,h);i.styles=h;if(I&&!Ae){if(j){delete h.width}K(i.element,h)}else{V.each(h,function(b,d){B+=d.replace(/([A-Z])/g,a)+":"+h[d]+";"});i.attr({style:B})}return i},getBBox:function(){var h,a,B,j=this.rotation,i=j*Math.PI/180;try{h=V.extend({},this.element.getBBox())}catch(A){h={width:0,height:0}}a=h.width;B=h.height;if(j){h.width=Math.abs(B*Math.sin(i))+Math.abs(a*Math.cos(i));h.height=Math.abs(B*Math.cos(i))+Math.abs(a*Math.sin(i))}return h},show:function(){return this.attr({visibility:C})},hide:function(){return this.attr({visibility:R})},add:function(p){var r=this,o=r.renderer,i=p||o,d=i.element||o.box,n=d.childNodes,s=r.element,q=N(s,"zIndex"),A,B,t;if(p&&r.htmlNode){if(!p.htmlNode){p.htmlNode=[]}p.htmlNode.push(r)}if(q){i.handleZ=true;q=parseInt(q,10)}if(i.handleZ){for(t=0;t<n.length;t++){A=n[t];B=N(A,"zIndex");if(A!==s&&(parseInt(B,10)>q||!Y(q)&&Y(B))){d.insertBefore(s,A);return r}}}d.appendChild(s);r.added=true;return r},empty:function(){var A=this.element,d=A.childNodes,B=d.length;while(B--){A.removeChild(d[B])}}};L=function(){this.init.apply(this,arguments)};L.prototype={Element:Q,init:function(a,A,j){var i=this,B=U.location,c;if(V(a).is("svg")){i.box=a;c=new i.Element;c.element=a;c.render=i;i.defs=V("defs",a).get(0)}else{c=i.createElement("svg").attr({xmlns:D,version:"1.1"});a.appendChild(c.element);i.box=c.element;i.boxWrapper=c;i.defs=this.createElement("defs").add();i.setSize(A,j)}i.url=I?"":B.href.replace(/#.*?$/,"")},destroy:function(){var A=this;A.box=null;A.boxWrapper=A.boxWrapper.destroy();return null},createElement:function(A){var B=new this.Element;B.init(this,A);return B},path:function(A){return this.createElement("path").attr({d:A,fill:J})},circle:function(a,B,A){var f=V.isPlainObject(a)?a:{x:a,y:B,r:A};return this.createElement("circle").attr(f)},rect:function(j,A,a,m,l,B){if(V.isPlainObject(j)){A=j.y;a=j.width;m=j.height;l=j.r;B=j.strokeWidth;j=j.x}var i=this.createElement("rect").attr({rx:l,ry:l,fill:J});return i.attr(i.crisp(B,j,A,Math.max(a,0),Math.max(m,0)))},setSize:function(B,A){var d=this;d.width=B;d.height=A;d.boxWrapper.attr({width:B,height:A})},g:function(A){var B=this.createElement("g");return Y(A)?B.attr({"class":O+A}):B},symbol:function(l,o,p,q,n){var m,A=this,a=A.symbols[l],B=a&&a(Math.round(o),Math.round(p),q,n);if(B){m=A.path(B);V.extend(m,{symbolName:l,x:o,y:p,r:q});n&&V.extend(m,n)}else{m=A.circle(o,p,q)}return m},symbols:{box:function(B,A,e){var b=0.707*e;return[Z,B-b,A-b,T,B+b,A-b,B+b,A+b,B-b,A+b,"Z"]},tri:function(B,A,b){return[Z,B,A-1.33*b,T,B+b,A+0.67*b,B-b,A+0.67*b,"Z"]},invertedTri:function(B,A,b){return[Z,B,A+1.33*b,T,B-b,A-0.67*b,B+b,A-0.67*b,"Z"]},diamond:function(B,A,b){return[Z,B,A-b,T,B+b,A,B,A+b,B-b,A,"Z"]},cross:function(B,A,e){var b=0.707*e;return[Z,B-b,A-b,T,B+b,A+b,Z,B-b,A+b,T,B+b,A-b]},arc:function(t,u,r,v){var b=v.start,o=v.end-1e-06,s=v.innerR,e=Math.cos(b),A=Math.sin(b),p=Math.cos(o),q=Math.sin(o),B=v.end-b<Math.PI?0:1;return[Z,t+r*e,u+r*A,"A",r,r,0,B,1,t+r*p,u+r*q,T,t+s*p,u+s*q,"A",s,s,0,B,0,t+s*e,u+s*A,"Z"]}},clipRect:function(A,B,m,a){var j,i=O+Aa++,l=this.createElement("clipPath").attr({id:i});V(this.defs).append(l.element);j=this.rect(A,B,m,a,0).add(l);j.id=i;j.clipPath=l;return j}};V.chartRender=L;if(!Ae){F=function(){};F.prototype=V.extend(true,{},Q.prototype,{init:function(A,f){var B=["<",f,' filled="f" stroked="f"'],e=["position: ",H,";"];(f==="shape"||f===W)&&e.push("left:0;top:0;width:10px;height:10px;");X&&e.push("visibility: ",f===W?R:C);B.push(' style="',e.join(""),'"/>');if(f){B=f===W||f==="span"||f==="img"?B.join(""):A.prepVML(B);this.element=Ab(B)}this.renderer=A},add:function(l){var i=this,g=i.renderer,B=i.element,A=g.box,m=l&&l.inverted,j=l?l.element||l:A;m&&g.invertChild(B,j);X&&j.gVis===R&&K(B,{visibility:R});j.appendChild(B);i.added=true;return i},attr:function(j,p){var x,Af,Ag,v=this,a=v.element||{},Ah=a.style,Ai=a.nodeName,i=v.symbolName,d,g,h=v.shadows,u,r,f=v;if(j===undefined){return f}if(M(j)&&Y(p)){x=j;j={};j[x]=p}if(M(j)){x=j;if(x==="strokeWidth"||x==="stroke-width"){f=v.strokeweight}else{f=v[x]}}else{j&&V.each(j,function(B,A){Af=A;u=false;if(i&&/^(x|y|r|start|end|width|height|innerR)/.test(B)){if(!g){v.symbolAttr(j);g=true}u=true}else{if(B==="d"){Af=Af||[];v.d=Af.join(" ");Ag=Af.length;r=[];while(Ag--){if(Ad(Af[Ag])){r[Ag]=Math.round(Af[Ag]*10)-5}else{if(Af[Ag]==="Z"){r[Ag]="x"}else{r[Ag]=Af[Ag]}}}Af=r.join(" ")||"x";a.path=Af;if(h){Ag=h.length;while(Ag--){h[Ag].path=Af}}u=true}else{if(B==="zIndex"||B===E){if(X&&B===E&&Ai===W){a.gVis=Af;d=a.childNodes;Ag=d.length;while(Ag--){K(d[Ag],{visibility:Af})}if(Af===C){Af=null}}if(Af){Ah[B]=Af}u=true}else{if(B==="class"){a.className=Af}else{if(B==="stroke"){B="strokecolor"}else{if(B==="stroke-width"||B==="strokeWidth"){a.stroked=Af?true:false;B="strokeweight";v[B]=Af;if(Ad(Af)){Af+=G}}else{if(B==="fill"){if(Ai==="SPAN"){Ah.color=Af}else{a.filled=Af!==J?true:false;B="fillcolor"}}}}}}}}if(!u){if(X){a[B]=Af}else{N(a,B,Af)}}})}return f},scale:function(e,A){var f=this,B=f.attr("stroke-width")||0;f.css({filter:"progid:DXImageTransform.Microsoft.Matrix(M11="+e+",, M12=0, M21=0, M22="+A+", Dx=0, Dy=0, sizingmethod='auto expand')"}).attr("stroke-width",B)},clip:function(A){var d=this,B=A.members;B.push(d);return d.css(A.getCSS(d.inverted))},css:function(f){var a=this,B=a.element,A=f&&B.tagName==="SPAN"&&f.width;if(A){delete f.width;a.textWidth=A}a.styles=V.extend(a.styles,f);K(a.element,f);return a},destroy:function(){var A=this;A.destroyClip&&A.destroyClip();return Q.prototype.destroy.apply(A)},empty:function(){var A=this.element,B=A.childNodes,e=B.length,f;while(e--){f=B[e];f.parentNode.removeChild(f)}},getBBox:function(){var B=this,d=B.element,A=B.bBox;if(!A){if(d.nodeName==="text"){d.style.position=H}A=B.bBox={x:d.offsetLeft,y:d.offsetTop,width:d.offsetWidth,height:d.offsetHeight}}return A}});P=function(){this.init.apply(this,arguments)};P.prototype=V.extend(true,{},L.prototype,{Element:F,isIE8:V.browser.msie&&V.browser.version===8,init:function(a,A,c){var B=this,f;if(V(a).hasClass("vmlcontainer")){B.box=a;f=new this.Element;f.element=a;f.render=this;B.boxWrapper=f}else{f=B.createElement(W);a.appendChild(f.element);B.box=f.element;B.boxWrapper=f;B.setSize(A,c)}if(!U.namespaces.v){U.namespaces.add("v","urn:schemas-microsoft-com:vml");U.createStyleSheet().cssText="v\\:fill, v\\:path, v\\:shape, v\\:stroke{ behavior:url(#default#VML); display: inline-block; } "}},clipRect:function(B,h,A,g){var a=this.createElement();return V.extend(a,{members:[],left:B,top:h,width:A,height:g,getCSS:function(o){var p=this,j=p.top,q=p.left,m=q+p.width,l=j+p.height,n={clip:"rect("+Math.round(o?q:j)+"px,"+Math.round(o?l:m)+"px,"+Math.round(o?m:l)+"px,"+Math.round(o?j:q)+"px)"};!o&&X&&V.extend(n,{width:m+G,height:l+G});return n},updateClipping:function(){Ac(a.members,function(b,d){d.css(a.getCSS(d.inverted))})}})},prepVML:function(d){var A="display:inline-block;behavior:url(#default#VML);",B=this.isIE8;d=d.join("");if(B){d=d.replace("/>",' xmlns="urn:schemas-microsoft-com:vml" />');if(d.indexOf('style="')===-1){d=d.replace("/>",' style="'+A+'" />')}else{d=d.replace('style="','style="'+A)}}else{d=d.replace("<","<v:")}return d},path:function(A){return this.createElement("shape").attr({coordsize:"100 100",d:A})},g:function(d){var B,A;if(d){A={className:O+d,"class":O+d}}B=this.createElement(W).attr(A);return B},symbols:{arc:function(t,x,s,o){var A=o.start,v=o.end,n=Math.cos(A),q=Math.sin(A),w=Math.cos(v),r=Math.sin(v),u=o.innerR,p=0.07/s,B=u&&0.1/u||0;if(v-A===0){return["x"]}else{if(2*Math.PI-v+A<p){w=-p}else{if(v-A<B){w=Math.cos(A+B)}}}return["wa",t-s,x-s,t+s,x+s,t+s*n,x+s*q,t+s*w,x+s*r,"at",t-u,x-u,t+u,x+u,t+u*w,x+u*r,t+u*n,x+u*q,"x","e"]},circle:function(A,B,d){return["wa",A-d,B-d,A+d,B+d,A+d,B,A+d,B,"e"]},rect:function(e,m,l,d){if(!Y(d)){return[]}var B=d.width,A=d.height,b=e+B,n=m+A;l=Math.min(l,B,A);return[Z,e+l,m,T,b-l,m,"wa",b-2*l,m,b,m+2*l,b-l,m,b,m+l,T,b,n-l,"wa",b-2*l,n-2*l,b,n,b,n-l,b-l,n,T,e+l,n,"wa",e,n-2*l,e+2*l,n,e+l,n,e,n-l,T,e,m+l,"wa",e,m,e+2*l,m+2*l,e,m+l,e+l,m,"x","e"]}}});V.chartRender=P}})(jQuery);(function(E){var A=10000,B=0,D=0,C=0;E.widget("wijmo.wijbubblechart",E.wijmo.wijchartcore,{options:{minimumSize:5,maximumSize:20,sizingMethod:"diameter",animation:{enabled:true,duration:1000,easing:">"},seriesTransition:{enabled:true,duration:400,easing:">"},seriesHoverStyles:[{opacity:1,"stroke-width":5},{opacity:1,"stroke-width":5},{opacity:1,"stroke-width":5},{opacity:1,"stroke-width":5},{opacity:1,"stroke-width":5},{opacity:1,"stroke-width":5},{opacity:1,"stroke-width":5},{opacity:1,"stroke-width":5},{opacity:1,"stroke-width":5},{opacity:1,"stroke-width":5},{opacity:1,"stroke-width":5},{opacity:1,"stroke-width":5}],chartLabel:{position:"inside",compass:"north",visible:true,style:{},chartLabelFormatString:""},mouseDown:null,mouseUp:null,mouseOver:null,mouseOut:null,mouseMove:null,click:null},_setOption:function(F,G){var H=this,I=H.options;if(F==="minimumSize"||F==="minimumSize"){if(isNaN(G)||G<0){G=0}else{if(G>A){G=A}}I[F]=G;H.redraw()}else{if(F==="chartLabel"){E.extend(I.chartLabel,G);H.redraw()}else{E.wijmo.wijchartcore.prototype._setOption.apply(H,arguments)}}if(F==="seriesList"){H.indexs=null;H.bubbleRadius=null}},_create:function(){var G=this,F=G.options,H=G._getDefFill();E.each(F.seriesStyles,function(I,J){if(!J.fill){J.fill=H[I]}});G._setLabelOption();E.wijmo.wijchartcore.prototype._create.apply(G,arguments);G.chartElement.addClass("wijmo-wijbubblechart")},_setLabelOption:function(){var F=this.options;if(F.showChartLabels!==true&&F.chartLabel.visible===true){F.chartLabel.visible=false}if(!E.isPlainObject(F.chartLabel.style)&&E.isPlainObject(F.chartLabelStyle)){F.chartLabel.style=F.chartLabelStyle}},destroy:function(){var F=this;F.chartElement.removeClass("wijmo-wijbubblechart ui-helper-reset");F._destroyEles();E.wijmo.wijchartcore.prototype.destroy.apply(F,arguments)},_destroyEles:function(){var G=this,F=G.element,H=F.data("fields");H.bubbleInfos&&E.each(H.bubbleInfos,function(I,J){G._removeEle(J.bubble);G._removeEle(J.dcl);G._removeEle(J.symbol);J=null});F.removeData("fields");G.bubbleRadius=[]},_removeEle:function(F){if(F){F.node&&E(F.node).removeData();F.wijRemove();F=null}},_paintPlotArea:function(){var K=this,M=this.element,L=K.options,F=L.seriesList,O=F.length,J=[].concat(L.seriesStyles.slice(0,O)),N=[].concat(L.seriesHoverStyles.slice(0,O)),I=K.canvasBounds,G=L.axis.x,H=L.axis.y;if(O===0){return}K._prepBubbleData();M.wijbubble({seriesList:F,seriesStyles:J,seriesHoverStyles:N,canvas:K.canvas,bounds:I,xAxisInfo:G,yAxisInfo:H,chartLabel:L.chartLabel,textStyle:L.textStyle,chartLabelStyle:L.chartLabelStyle,chartLabelFormatString:L.chartLabelFormatString,bubbleRadius:K.bubbleRadius,animation:L.animation,seriesTransition:L.seriesTransition,sizingMethod:L.sizingMethod,minimumSize:L.minimumSize,maximumSize:L.maximumSize,mouseDown:E.proxy(K._mouseDown,K),mouseUp:E.proxy(K._mouseUp,K),mouseOver:E.proxy(K._mouseOver,K),mouseOut:E.proxy(K._mouseOut,K),mouseMove:E.proxy(K._mouseMove,K),click:E.proxy(K._click,K),disabled:L.disabled});K.tooltipbubbles=[];E.each(M.data("fields").bubbleInfos,function(P,Q){K.tooltipbubbles.push(Q.bubble);Q.dcl&&K.tooltipbubbles.push(Q.dcl);Q.symbol&&K.tooltipbubbles.push(Q.symbol)});K.tooltip&&K.tooltip.setTargets(K.tooltipbubbles)},_paintLegend:function(){var R=this,O=R.options,Q=0,P=0,H=0,T=null,J=O.seriesList,G=O.seriesStyles,V=null,I=null,F=null,M=0,N=0,K=null,L=null,U=null;E.extend(true,O,{legend:{size:{width:30,height:3}}});E.wijmo.wijchartcore.prototype._paintLegend.apply(R,arguments);if(O.legend.visible){if(R.legends.length&&R.legendIcons.length){for(Q=0,P=R.legendIcons.length;Q<P;Q++){T=R.legendIcons[Q];T.attr({fill:T.attr("stroke")})}}if(!O.legend.reversed){for(Q=0,P=J.length;Q<P;Q++){V=J[Q];I=G[Q];if(V.legendEntry){if(V.markers){L=V.markers.type}T=R.legendIcons[Q];F=T.wijGetBBox();M=F.x+F.width/2;N=F.y+F.height/2;K=V.markerStyle;K=E.extend({fill:I.stroke,stroke:I.stroke,opacity:1},K);if(!L){L="circle"}U=R.canvas.paintMarker(L,M,N,7);E.wijraphael.addClass(E(U.node),"chart-legend-dot wijchart-canvas-object wijchart-legend");U.attr(K);E(U.node).data("index",Q);T.remove();R.legendIcons[Q]=U;H++}}}else{for(Q=J.length-1;Q>=0;Q--){V=J[Q];I=G[J.length-1-Q];if(V.legendEntry){if(V.markers){L=V.markers.type}T=R.legendIcons[Q];F=T.wijGetBBox();M=F.x+F.width/2;N=F.y+F.height/2;K=V.markerStyle;K=E.extend({fill:I.stroke,stroke:I.stroke,opacity:1},K);if(!L){L="circle"}U=R.canvas.paintMarker(L,M,N,7);E.wijraphael.addClass(E(U.node),"chart-legend-dot");U.attr(K);T.remove();R.legendIcons[Q]=U;H++}}}}},_getbubbleIndexs:function(T,R){var W=this,X=W.options,Q=X.axis.x.max,H=X.axis.x.min,J=X.axis.y.min,G=X.axis.y.max,I=[],K=[],P=[],F=[],U=[],V=[],O=-1,M=-1,N=-1,L=-1;W.bubbleRadius=[];W._prepBubbleData();E.each(X.seriesList,function(a,Z){var Y=Z.data,c=Z.markers||{},b=c.type||"circle";E.each(Y.y1,function(h,f){var g=E.wijbubble.transform(f,X.maximumSize,X.minimumSize,W.canvasBounds,D,C,X.sizingMethod,b),e,d;if(W._isDate(Y.x[h])){e=E.toOADate(Y.x[h])}else{if(isNaN(Y.x[h])){e=h}else{e=Y.x[h]}}d=Y.y[h];if(W._isDate(d)){d=E.toOADate(d)}I.push(e-g*(Q-H)/T);K.push(d-g*(G-J)/R);P.push(e+g*(Q-H)/T);F.push(d+g*(G-J)/R);U.push(e);V.push(d);W.bubbleRadius.push(g)})});O=W._getMinIndex(I);M=W._getMinIndex(K);N=W._getMaxIndex(P);L=W._getMaxIndex(F);W.indexs={xMin:{x:U[O],y:V[O],r:W.bubbleRadius[O]},xMax:{x:U[N],y:V[N],r:W.bubbleRadius[N]},yMin:{x:U[M],y:V[M],r:W.bubbleRadius[M]},yMax:{x:U[L],y:V[L],r:W.bubbleRadius[L]}}},_calculateParameters:function(H,G){E.wijmo.wijchartcore.prototype._calculateParameters.apply(this,arguments);var F=this;if(!G.autoMax&&!G.autoMin){return}F._adjust(G,H)},_adjust:function(F,L){var P=F.unitMinor,N=this,K=F.autoMin,H=F.autoMax,O=N.canvasBounds,G={x:O.startX,y:O.startY},J=O.endX-G.x,I=O.endY-G.y,M=L.max,Q=L.min;!N.indexs&&N._getbubbleIndexs(J,I);if(L.id==="x"){if(K){Q=N._getMinTick(N.indexs.xMin.x,N.indexs.xMin.r,Q,M,J,P)}if(H){M=N._getMaxTick(N.indexs.xMax.x,N.indexs.xMax.r,Q,M,J,P)}}else{if(K){Q=N._getMinTick(N.indexs.yMin.y,N.indexs.yMin.r,Q,M,I,P)}if(H){M=N._getMaxTick(N.indexs.yMax.y,N.indexs.yMax.r,Q,M,I,P)}}if(M!==L.max||Q!==L.min){L.min=Q;L.max=M;this._calculateMajorMinor(F,L);N._adjust(F,L)}},_getMinTick:function(G,K,J,F,I,H){return(G-J)*I/(F-J)<K?J-H:J},_getMaxTick:function(G,K,I,J,H,F){return(G-I)*H/(J-I)+K>H?J+F:J},_getMinIndex:function(F){var H=-1,G=0;E.each(F,function(I,J){if(I===0){G=J}else{if(J<G){G=J}}});E.each(F,function(J,I){if(I===G){H=J;return false}});return H},_getMaxIndex:function(F){var H=-1,G=0;E.each(F,function(I,J){if(I===0){G=J}else{if(J>G){G=J}}});E.each(F,function(J,I){if(I===G){H=J;return false}});return H},_showSerieEles:function(F){E.each(F,function(G,H){if(H.bubble){H.bubble.show();H.bubble.tracker&&H.bubble.tracker.show()}H.dcl&&H.dcl.show();H.symbol&&H.symbol.show()})},_hideSerieEles:function(F){E.each(F,function(G,H){if(H.bubble){H.bubble.hide();H.bubble.tracker&&H.bubble.tracker.hide()}H.dcl&&H.dcl.hide();H.symbol&&H.symbol.hide()})},_parseTable:function(){if(!this.element.is("table")){return}var F=this,P=F.element,N=F.options,O=E("caption",P),M=E("thead th",P),Q=[],K=E("tbody tr",P),L=null,H=null,J=[],G=[],I=[],R=function(T){var U=E.trim(T);if(!isNaN(T)){U=parseFloat(T)}return U};if(O.length){N.header=E.extend({visible:true,text:E.trim(E(O[0]).text())},N.header);if(O.length>1){N.footer=E.extend({visibel:true,text:E.trim(E(O[1]).text())},N.footer)}}N.legend=E.extend({visible:true},N.legend);L=E.trim(M.eq(1).text());K.each(function(T,V){var U=E("td",V);if(U.length>=3){J.push(R(U.eq(0).text()));G.push(R(U.eq(1).text()));I.push(R(U.eq(2).text()))}});H={label:L,legendEntry:true,data:{x:J,y:G,y1:I}};Q.push(H);F.options.seriesList=Q},_unbindLiveEvents:function(){var F=this;E(".wijbubblechart-bubble",F.chartElement[0]).die(".wijbubblechart");if(F.tooltip){F.tooltip.destroy();F.tooltip=null}},_paintTooltip:function(){var G=this,F=G.element.data("fields");E.wijmo.wijchartcore.prototype._paintTooltip.apply(this,arguments);if(G.tooltip){if(F&&F.trackers&&F.trackers.length){G.tooltip.setTargets(F.trackers);G.tooltip.setOptions({relatedElement:F.trackers[0]})}}},_getTooltipText:function(G,F){var I=E(F.node),H,J;if(I.data("owner")){I=I.data("owner")}H=I.data("wijchartDataObj");J={data:H,value:H.value,label:H.label,total:H.total,target:F,fmt:G,x:H.x,y:H.y,y1:H.y1};return E.proxy(G,J)()},_prepBubbleData:function(){var G=this,F=G.options.seriesList,J=-999999999999,H=9999999999999,I;E.each(F,function(L,K){I=K.data;I&&I.y1&&E.each(I.y1,function(M,N){J=Math.max(J,N);H=Math.min(H,N)})});B=J;D=H;C=J-H},getBubble:function(F){return this.element.data("fields").bubbles[F]}});E.fn.extend({wijbubble:function(P){var Au=this,Ay=P,Aw=Au.data("fields")||{},As=0,Ax=Ay.bounds,Aq=Ay.canvas,a=Ay.seriesList,Af=Ay.seriesStyles,Am=Ay.seriesHoverStyles,T=Ay.xAxisInfo,U=Ay.yAxisInfo,Ao={x:Ax.startX,y:Ax.startY},W=Ax.endX-Ao.x,Y=Ax.endY-Ao.y,Ar=Ay.chartLabel,Ai=[],Aj=[],Ac=Ay.mouseDown,X=Ay.mouseUp,Aa=Ay.mouseOver,R=Ay.mouseOut,c=Ay.mouseMove,V=Ay.click,At=[],Q=Ay.disabled,Ap=Aq.set();function Av(F,H){var J=F.bubble,G=F.symbol,I;if(J.type==="circle"){J.attr({r:0.0001,cx:H.startX,cy:H.endY})}else{J.transform("s0.01");I=J.wijGetBBox();J.transform("t"+(H.startX-I.x)+","+(H.endY-I.y)+"s0.001")}G&&G.hide()}function Al(){var L=Ay.animation,H=Ay.bounds,I=Aw.bubblesAnimationInfos,J=[],G=Aw.bubbleInfos,M=Ay.seriesTransition,F,N,K;if(L&&L.enabled){F=L.duration||400;N=L.easing;E.each(G,function(g,l){var i=l.bubble,O,h,e=i.wijGetBBox();if(i.type==="circle"){O={r:i.attr("r"),cx:i.attr("cx"),cy:i.attr("cy")}}else{O={transform:"S1T0,0","stroke-width":i.attr("stroke-width"),width:e.width,x:e.x,y:e.y}}if(I&&M.enabled){h=I[g];if(h){if(i.type==="circle"){i.attr({cx:h.cx,cy:h.cy,r:h.r})}else{e=i.wijGetBBox();K=h.width/e.width;i.transform("s"+K);e=i.wijGetBBox();i.transform("t"+(h.x-e.x)+","+(h.y-e.y)+"")}F=M.duration;N=M.easing}else{Av(l,H)}}else{Av(l,H)}J.push(O);i.wijAnimate(O,F,N,function(){l.dcl&&l.dcl.attr("opacity",1);l.symbol&&l.symbol.show()})});Aw.bubblesAnimationInfos=J}else{E.each(G,function(O,d){d.dcl&&d.dcl.attr("opacity",1)})}}function Ab(H,F){var G;E.each(H,function(J,I){if(J===F){G=I;return false}});return G}function An(H,F){var G=true;E.each(H,function(I){if(F===I){G=false;return false}});return G}function Z(H,F,G,I){var J;if(Aq[H]){J=Aq[H](F,G,I)}return J}function Ad(F){var G=Aq.text(0,0,F),I=G.wijGetBBox(),H;H={width:I.width,height:I.height};G.remove();return H}function Ah(I,J){var F=P.chartLabel.compass||"north",G=Ad(J),H=I.r;switch(F){case"north":I.y-=H+G.height/2;break;case"south":I.y+=H+G.height/2;break;case"east":I.x+=H+G.width/2;break;case"west":I.x-=H+G.width/2}}function Ag(K,J){var F=E.extend(true,{},P.textStyle,P.chartLabelStyle,Ar.style),I=E.round(J,2),H=Ar.chartLabelFormatString===""?P.chartLabelFormatString:Ar.chartLabelFormatString,G;if(H&&H.length){I=Globalize.format(I,H)}G=Aq.text(K.x,K.y,I).attr(F);return G}function b(O,AA,L,e,f,s,r){var N=O.data,u=e.min,o=f.min,n=e.max,p=f.max,h=s/(n-u),i=r/(p-o),Az=[],M=P.bubbleRadius,g,q,AB;E.each(N.y1,function(z,m){var AE=N.x[z],d=N.y[z],t=O.markers||{},x=t.type||"circle",v=t.symbol,K=O.invisibleMarkLabels||[],w,j,y,J,AD,l,AH,AF,AG,AC;if(M){AG=M[As];As++}else{AG=E.wijbubble.transform(m,P.maximumSize,P.minimumSize,P.bounds,D,C,P.sizingMethod,x)}if(e.isTime){AE=E.toOADate(AE)}else{if(isNaN(AE)){AE=z}}if(f.isTime){d=E.toOADate(d)}AD=Ax.startX+(AE-u)*h;l=Ax.startY+(p-d)*i;if(v){AH=Ab(v,z)}J=Z(x,AD,l,AG);J.attr(AA);if(AH){q=AH.width||AG*2;AB=AH.height||AG*2;AF=Aq.image(AH.url,AD-AG,l-AG,q,AB)}E.wijraphael.addClass(E(J.node),"wijchart-canvas-object wijbubblechart-bubble");AH&&J.attr("opacity",0.1);y=E.extend(true,{index:z,bubble:J,style:AA,y1:m,x:AE,y:d,type:"bubble",hoverStyle:L},O);if(AH){y.symbol=true;y.hoverStyle=E.extend({},L,{opacity:0.1});E(AF.node).data("wijchartDataObj",y);E.wijraphael.addClass(E(AF.node),"wijbubblechart-symbol")}E(J.node).data("wijchartDataObj",y);AC=J.clone().attr({opacity:0.01,fill:"white","fill-opacity":0.01});E(AC.node).data("owner",E(J.node));E.wijraphael.addClass(E(J.node),"wijchart-canvas-object wijbubblechart-bubble bubbletracker");J.tracker=AC;Ap.push(AC);Aj.push(J);Aw.bubbles=Aj;w={x:AD,y:l,r:AG};if(Ar.visible&&An(K,z)){Ar.position==="outside"&&Ah(w,m);g=Ag(w,m);g.attr("opacity",0);E(g.node).data("wijchartDataObj",y);E.wijraphael.addClass(E(g.node),"wijbubblechart-label")}j={bubble:J,dcl:g,symbol:AF};At.push(j);Az.push(j)});Aw.bubbleInfos=At;Ai.push(Az)}function Ae(){E.each(a,function(I,F){var H=Af[I],G=Am[I];b(F,H,G,T,U,W,Y,Ao)})}function Ak(J,N,I,L,M,F,G,K){var H={mousedown:function(O){if(K){return}var d=E(O.target),h;if(d.data("owner")){d=d.data("owner")}h=d.data("wijchartDataObj");N.call(J,O,h)},mouseup:function(h){if(K){return}var O=E(h.target),g;if(O.data("owner")){O=O.data("owner")}g=O.data("wijchartDataObj");I.call(J,h,g)},mouseenter:function(O){if(K){return}var f=E(O.target),h;if(f.data("owner")){f=f.data("owner")}h=f.data("wijchartDataObj");L.call(J,O,h)},mouseleave:function(O){if(K){return}var j=E(O.target),g,i;if(j.data("owner")){j=j.data("owner")}g=j.data("wijchartDataObj");i=g.bubble;M.call(J,O,g);if(g.symbol){return}if(!g.hoverStyle){i&&i.attr({opacity:"1"})}else{i.attr(g.style);g.style.opacity&&i.attr("opacity",g.style.opacity)}},mousemove:function(O){if(K){return}var i=E(O.target),e,j;if(i.data("owner")){i=i.data("owner")}e=i.data("wijchartDataObj");j=e.bubble;F.call(J,O,e);if(!e.hoverStyle){j&&j.attr({opacity:"0.8"})}else{j.attr(e.hoverStyle)}},click:function(h){if(K){return}var O=E(h.target),g;if(O.data("owner")){O=O.data("owner")}g=O.data("wijchartDataObj");G.call(J,h,g)}};E.each(["click","mouseenter","mouseleave","mousemove","mousedown","mouseup"],function(O,e){E(".wijbubblechart-bubble",J).live(e+".wijbubblechart",H[e])})}Ae();Aw.seriesEles=Ai;Al();Ap.toFront();Aw.trackers=Ap;Ak(Au,Ac,X,Aa,R,c,V,Q);Au.data("fields",Aw)}});E.wijbubble={transform:function(K,G,F,O,H,R,Q,J){var P,N=K,I=G-F,M=O.endX-O.startX,L=O.endY-O.startY;N-=H;if(R===0){N=1}else{N/=R}N=E.wijbubble.transformByArea(N,Q,J);N*=I;N+=F;P=Math.min(M,L);N*=P/200;return N},transformByArea:function(F,G,H){var I=F;if(G==="area"){switch(H){case"circle":I=Math.sqrt(I/Math.PI);break;case"tri":case"invertedTri":I=Math.sqrt(I/(3*Math.sin(Math.PI/6)*Math.cos(Math.PI/6)));break;case"box":I=Math.sqrt(I/2);break;case"diamond":case"cross":I=Math.sqrt(I/2);break;default:I=Math.sqrt(4*I/Math.PI)}}return I}}})(jQuery);(function(Ap){var Aj="ui-helper-clearfix",W="ui-widget-content",Al="ui-corner-",Ag=Al+"all",Ao="ui-state-disabled",As="ui-state-hover",An="wijmo-wijcarousel-",M="wijmo-wijcarousel",Ac=M+" ui-widget ",P=An+"list",Aa=An+"item ",R=An+"clip",Ar=An+"current",Ad=An+"horizontal-multi",Ab=An+"horizontal",X=An+"button",Ae=An+"vertical-multi",V=An+"vertical",Ak=An+"button-next",Z=An+"button-previous",U=An+"preview",J="ui-icon-triangle-1-",Q=J+"n",K=J+"s",T=J+"e",L=J+"w",Ah="ui-icon-play",Af="ui-icon-pause",N='<a class="ui-state-default"><span class="ui-icon"></span></a>',Aq=".wijmo-wijpager,."+X+",."+Ak+",."+Z,Am='<div class="ui-helper-clearfix"></div>',O='<li class="ui-state-default wijmo-wijcarousel-page"><a></a></li>',Y="li.wijmo-wijcarousel-page",Ai=1;Ap.widget("wijmo.wijcarousel",{options:{data:[],auto:false,interval:5000,showTimer:false,buttonPosition:"inside",showPager:false,prevBtnClass:{defaultClass:"",hoverClass:"",disableClass:""},nextBtnClass:{defaultClass:"",hoverClass:"",disableClass:""},pagerType:"numbers",thumbnails:{mouseover:null,mouseout:null,mousedown:null,mouseup:null,click:null,imageWidth:58,imageHeight:74,images:[]},pagerPosition:{},orientation:"horizontal",loop:true,animation:{queue:true,disable:false,duration:1000,easing:"easeOutCubic"},start:0,display:1,preview:false,step:1,showControls:false,control:"",controlPosition:{},showCaption:true,showControlsOnHover:false,itemClick:null,beforeScroll:null,afterScroll:null,loadCallback:null},_handleDisabledOption:function(A){var B=this;if(B.pager&&!B.pager.is(":hidden")){B.disabledEles=B.disabledEles.add(B.pager)}if(A){B.element.addClass(Ao);!B.disabledDiv.length&&B._createDisabledDiv();B.disabledDiv.appendTo("body")}else{if(B.disabledDiv){B.element.removeClass(Ao);B.disabledDiv.remove();B.disabledDiv=Ap()}}},_createDisabledDiv:function(){var A=this;A.disabledEles.each(function(){var C=Ap(this),D=C.offset(),B=C.outerWidth(),F=C.outerHeight(),E=Ap("<div></div>").addClass("ui-state-disabled").css({"z-index":"99999",position:"absolute",width:B,height:F,left:D.left,top:D.top});if(Ap.browser.msie){E.css("background-color","white");Ap.browser.version==="9.0"&&E.css("opacity","0.1")}A.disabledDiv=A.disabledDiv.add(E)})},_initStates:function(A,C){var B=this;B.count=0;B.currentIdx=A.start;B.timeout=null;B.isHorizontal=A.orientation==="horizontal";B.width=C.width()||640;B.height=C.height()||480;B.offset=0;B.disabledEles=C;B.disabledDiv=Ap()},_create:function(){var B=this,C=B.options,A=B.element;B._initStates(C,A);B._createDom(B.isHorizontal);B.list.bind("click."+B.widgetName,Ap.proxy(B._itemClick,B));if(C.showContorlsOnHover){B.container.bind("mouseenter."+B.widgetName,function(){B._showControls()}).bind("mouseleave."+B.widgetName,function(){B._hideControls()});B.container.find(Aq).hide()}C.loadCallback&&Ap.isFunction(C.loadCallback)&&B._trigger("loadCallback",null,B);if(C.disabled){B.disable()}else{C.auto&&B.play()}},_showControls:function(){this.container.find(Aq).stop(true,true).fadeIn(600,function(){Ap(this).css("opacity","")})},_hideControls:function(){this.container.find(Aq).stop(true,true).fadeOut(600)},_applyContainerStyle:function(m){var H=this,i=H.options,I={},F=H.list,D=0,A,C=0,E=m?"left":"top",G=0,B=m?"width":"height";A=H.itemBound[m?"w":"h"];H.count=H.list.children("li").length;D=H.count*A;H.list[B](D);H.clip[B](i.display*A);H.clip[m?"height":"width"](H.itemBound[m?"h":"w"]);if(!i.loop){I[E]=-A*H.currentIdx;F.css(I)}else{for(G;G<H.currentIdx;G++){F.find("li:first").appendTo(F)}if(i.preview){for(G=0;G<Ai;G++){F.find("li:last").prependTo(F)}C=-A*Ai}I[E]=C;F.css(I)}},_applyListStyle:function(){var E=this,F=E.options,C=F.orientation==="horizontal",D=0,A,B=C?"width":"height";E.itemBound=E._getItemBound();A=E.itemBound[C?"w":"h"];D=E.count*A;E.list[B](D)},_createButtons:function(A,F){var E=this,B=E.options,C,D=Ao;Ap.each(["prevBtn","nextBtn"],function(H,G){var b=B[G+"Class"],d=G==="nextBtn",a=d?"next":"previous",I=d?Ak:Z,e=d?F:A;if(b&&b.defaultClass){D=b.disableClass||D;C=b.hoverClass;E[G]=Ap('<a class="ui-state-default"></a>').addClass(b.defaultClass).mouseover(function(){!Ap(this).hasClass(D)&&Ap(this).addClass(C)}).mouseout(function(){!Ap(this).hasClass(D)&&Ap(this).removeClass(C)})}else{E[G]=Ap(E._createBtn(I,e))}E[G].bind("click."+E.widgetName,Ap.proxy(E[a],E)).appendTo(E.container)})},_applyBtnClass:function(){var B=this,A=B.options,C=Ao,D=As;Ap.each(["prevBtn","nextBtn"],function(F,G){var H=A[G+"Class"],E,I=B[G];if(H){C=H.disableClass||C;D=H.hoverClass||D}E=G==="prevBtn"?B.currentIdx<=0:B.currentIdx+A.display>=B.count;if(E&&!A.loop){I.removeClass(D).addClass(C)}else{I.hasClass(C)&&I.removeClass(C)}})},_applyBtnStyle:function(G){var H=this,E=0,l,C={collision:"none",of:H.container,my:G?"right center":"center bottom",at:G?"right center":"center bottom"},F={collision:"none",of:H.container,my:G?"left center":"center top",at:G?"left center":"center top"},a=H.options.buttonPosition==="inside",A,I,B=["bottom","top","right","left"],D=function(i,m,b,j,h){i.removeClass(m).addClass(b);!isNaN(j)&&j!==0&&Ap.extend(h,{offset:G?j+" 0":"0 "+j});i.position(h)};E=G?H.prevBtn.width():H.prevBtn.height();l=a?0:E;A=Al+B[G*2+a];I=Al+B[G*2+!a];D(H.nextBtn,I,A,l,C);D(H.prevBtn,A,I,-l,F);H._applyBtnClass()},_createDom:function(H){var D=this,E=D.options,A=D.element,F,G,B,C;if(A.is("div")){D.list=A.children("ul:eq(0)");D.container=D.element;if(!D.list.length){D.list=Ap("<ul></ul>").appendTo(D.container)}}else{if(A.is("ul")){D.list=A;D.container=A.parent()}else{return}}D.itemBound=D._getItemBound();if(H){F=E.display>1&&!E.preview?Ad:Ab;G=T;B=L}else{F=E.display>1&&!E.preview?Ae:V;G=K;B=Q}D.list.addClass(P).addClass(Aj);C=Ac+" "+F+" "+(E.preview?U+" ":"")+(E.display>1?W+" "+Ag:"");D.container.addClass(C);D._createItems(H);D._createClip(H);D._applyContainerStyle(H);D._createButtons(B,G);D._applyBtnStyle(H);E.preview&&D._createPreview();E.showTimer&&D._createTimer();E.showPager&&D._createPager();E.showControls&&D._createControls()},_createPreview:function(){var E=this,G=E.options,C,H,D=G.orientation==="horizontal",A=D?"left":"top",B=D?"right":"bottom",F;H=E.itemBound[D?"w":"h"];C=E.offset=Math.round(H/4);F=G.display*H+C*2;E.clip[D?"width":"height"](F);E.list.css(A,function(I,b){return parseFloat(b)+C});E.clip.css(A,function(){return -C});E.container.css("margin-"+A,C+"px").css("margin-"+B,C+"px")},_createItemsFromData:function(A){var B=this;if(!Ap.isArray(A)||!A.length||!Ap.isPlainObject(A[0])||Ap.isEmptyObject(A[0])){return}B.list.empty();Ap.each(A,function(D,E){var C;if(!Ap.isPlainObject(E)){return true}C=B._generateMarkup(E);B.list.append(C)})},_generateMarkup:function(B){var C,A;if(!Ap.isPlainObject(B)){return}C=Ap("<li></li>");if(typeof B.linkUrl==="string"&&B.linkUrl){A=Ap("<a>").attr("src",B.linkUrl);A.appendTo(C)}typeof B.imageUrl==="string"&&B.imageUrl&&Ap("<img>").attr("src",B.imageUrl).appendTo(A||C);typeof B.caption==="string"&&B.caption&&Ap("<span>").html(B.caption).appendTo(C);return C},_createItems:function(){var D=this,E,F,C=D.options,A,B;if(D.list){D._createItemsFromData(C.data);D.list.children("li").each(function(G){var H=Ap(this);D._createItem(H,G)});A=D.list.children("li").eq(D.currentIdx).addClass(Ar);if(C.preview&&C.display>1){E=B=A;for(F=0;F<C.display-1;F++){B=B.next();E=E.add(B)}E.find("div.wijmo-wijcarousel-mask").css({opacity:0})}}},_createItem:function(D,B){var E=this,C=E.options,G,F,A=E.itemBound.w,H=E.itemBound.h;G=D.addClass(Aa).addClass(Aj).find("img:eq(0)").attr("role","img").addClass("wijmo-wijcarousel-image");if(!E.itemWidth||!E.itemHeight){D.width(A).height(H);E.itemWidth=A-(D.outerWidth(true)-A);E.itemHeight=H-(D.outerHeight(true)-H)}D.width(E.itemWidth).height(E.itemHeight);F=D.children("span:eq(0)").hide();E._createCaption(D,G,F);C.preview&&Ap('<div class="wijmo-wijcarousel-mask">').appendTo(D);D.data("itemIndex",B);return D},_createCaption:function(I,B,E){var A=this,C=A.options,F,D,G,H,a;if(C.showCaption){F=E.html()||B.attr("title");if(F&&F.length){G=Ap("<span></span>").html(F);H=Ap(Am).addClass("wijmo-wijcarousel-caption").width(A.itemWidth).appendTo(I);D=Ap(Am).addClass("ui-widget-content wijmo-wijcarousel-text").append(G).width(A.itemWidth).appendTo(I);a=G.outerHeight(true);D.height(a);H.height(a)}}},_showCaption:function(C,D){var B=this,A=B._getItemByIndex(C),F=A.find(".wijmo-wijcarousel-text"),E=A.find(".wijmo-wijcarousel-caption");F.length&&F.fadeIn(300,function(){C<D&&B._showCaption(C+1,D)});if(E.length){E.show();E.animate({opacity:0.5},300)}},_hideCaption:function(){this.element.find(".wijmo-wijcarousel-text,.wijmo-wijcarousel-caption").hide()},_createClip:function(){this.clip=this.list.wrap("<div></div>").parent().addClass(R)},_createBtn:function(C,A){var B=Ap(N);B.addClass(C).attr("role","button").mouseover(function(){!Ap(this).hasClass(Ao)&&Ap(this).addClass(As)}).mouseout(function(){!Ap(this).hasClass(Ao)&&Ap(this).removeClass(As)}).children("span:eq(0)").addClass(A);return B},_createControls:function(){var B=this,C=B.options,A={collision:"none",of:B.container,my:"center bottom",at:"center bottom"};if(C.control){B.controls=Ap(C.control).css({position:"absolute"}).appendTo(B.container);Ap.extend(A,C.controlPosition);B.controls.position(A)}},_createTimer:function(){var A=this;A._createPausePlay();A.progressBar=Ap("<div></div>").addClass("wijmo-wijcarousel-timerbar-inner "+Ag).css({width:"0%"}).attr("role","progressbar");A.timer=Ap("<div></div>").addClass("wijmo-wijcarousel-timerbar "+Ag).appendTo(A.container).append(A.progressBar).append(A.playPauseBtn)},_createPausePlay:function(){var A=this,B=A.options;A.playPauseBtn=Ap(A._createBtn(X,B.auto?Af:Ah)).bind("click."+A.widgetName,function(){var C=Ap(this).children("span:eq(0)");A[C.hasClass(Ah)?"play":"pause"]()})},_createPagingItem:function(A,E,B,D){var F=Ap(O).attr({role:"tab","aria-label":D,title:D}),G,C;if(A){F.addClass("wijmo-wijcarousel-dot")}else{if(E&&E.images&&E.images[D]){G=E.imageWidth;C=E.imageHeight;G&&C&&F.width(G).height(C);F.children("a").append(Ap("<img>").attr("src",E.images[D]))}else{return}}B.append(F)},_createPaging:function(D){var E=this,B=E.options,G,C,H,F=B.thumbnails,A=D==="dots";E.container.append(E.pager=Ap('<div><ul class="wijmo-list ui-corner-all ui-helper-clearfix" role="tablist"></ul></div>'));!A&&E.pager.addClass("wijmo-wijcarousel-thumbnails");C=E.pager.children("ul.wijmo-list");for(G=0;G<E.count;G++){E._createPagingItem(A,F,C,G)}H=E.pager.find("li").eq(E.currentIdx);H.length&&E._activePagerItem(H);E.pager.bind("mouseover."+E.widgetName,function(I){E._pageingEvents(I,"mouseover",F,A,function(b){b.addClass(As)})}).bind("mouseout."+E.widgetName,function(I){E._pageingEvents(I,"mouseout",F,A,function(b){b.removeClass(As)})}).bind("click."+E.widgetName,function(I){E._pageingEvents(I,"click",F,A,function(b){E.scrollTo(b.index());E._activePagerItem(b)})});!A&&Ap.each(["mousedown","mouseup"],function(a,I){Ap.isFunction(F[I])&&E.pager.bind(I,function(d){var c=Ap(d.target).closest(Y);c.length&&F[I].call(c,d)})})},_pageingEvents:function(D,F,B,A,C){var E=Ap(D.target).closest(Y);if(E.length){Ap.isFunction(C)&&C.call(D,E);!A&&Ap.isFunction(B[F])&&B[F].call(E,D)}},_activePagerItem:function(A){A.addClass("ui-state-active").attr("aria-selected","true").siblings("li").removeClass("ui-state-active").removeAttr("aria-selected")},_createWijSlider:function(){var B=this,C={orientation:"horizontal",range:false,min:0,max:B.count-1,step:1,value:B.currentIdx,buttonClick:function(D,E){var F=E.value;B.scrollTo(F)},slide:function(D,E){var F=E.value;B.scrollTo(F)}},A=Ap("<div></div>").css({"margin-bottom":"10px",width:"200px"}).appendTo(B.container);B.pager=A.wijslider(C).parent().wrap("<div>").parent().addClass("wijmo-wijcarousel-slider-wrapper")},_createWijPager:function(){var B=this,C={pageCount:B.count,pageIndex:B.currentIdx,pageButtonCount:B.count,mode:"numeric",pageIndexChanged:function(D,E){var F=E.newPageIndex;B.scrollTo(F)}},A=Ap("<div></div>").appendTo(B.container);B.pager=A.wijpager(C).css({position:"absolute"})},_createPager:function(){var B=this,C=B.options,A={collision:"none",of:B.container,my:"right top",at:"right bottom"};if(C.pagerType==="numbers"){B._createWijPager()}else{if(C.pagerType==="dots"||C.pagerType==="thumbnails"){B._createPaging(C.pagerType);B.pager.css({position:"absolute"})}else{if(Ap.wijmo.wijslider&&C.pagerType==="slider"){B._createWijSlider()}else{return}}}B.pager.width(B.pager.width()+1);Ap.extend(A,C.pagerPosition);B.pager.addClass("wijmo-wijcarousel-pager").position(A)},_setOption:function(E,H){var D=this,G=D.options,A,C,F,B=G.orientation==="horizontal";if(E==="pagerPosition"||E==="animation"||E==="controlPosition"){Ap.extend(true,G[E],H)}else{F=G[E];Ap.Widget.prototype._setOption.apply(D,arguments);switch(E){case"showControls":case"showPager":case"showTimer":if(H===F){break}A=E.replace(/show/i,"").toLowerCase();C=E.replace(/show/i,"_create");if(H===true){if(!D[A]){D[C]()}else{D[A].jquery&&D[A].show()}}else{D[A].remove()}break;case"loop":case"orientation":case"display":if(H!==F){D.destroy();D._create()}break;case"data":D._createItems(B);D._applyContainerStyle(B);D._applyBtnClass();G.showPager&&D._createPager();break;case"buttonPosition":D._applyBtnStyle(B);break;case"pagerType":if(H!==F){if(D.pager&&D.pager.jquery){D.pager.remove();D.pager=null}D._createPager()}break;case"disabled":D._handleDisabledOption(H,D.element)}}},_getItemBound:function(){var A={},C=this,B=C.options;if(B.orientation==="horizontal"){A={w:Math.round(C.width/B.display),h:C.height}}else{A={w:C.width,h:Math.round(C.height/B.display)}}return A},_stopAnimation:function(){var A=this;A.isPlaying&&A.progressBar&&A.progressBar.stop().css({width:"0%"});A.list.stop(true,true)},_itemClick:function(H){var D=Ap(H.target),E=this,B=E.options,A=E.currentIdx,F=D.closest("li."+Aa,D),I=F.data("itemIndex"),C,G;if(F.length>0){if(B.preview&&I<A||I>A+B.display-1){C=E._getItemByIndex(A).index();G=F.index()>C?"next":"previous";E[G]()}E._trigger("itemClick",H,{index:I,el:F})}},destroy:function(){var A=this;A.container.removeClass("wijmo-wijcarousel ui-widget").removeClass("wijmo-wijcarousel-horizontal").removeClass("wijmo-wijcarousel-vertical");A.list.unwrap().removeClass("wijmo-wijcarousel-list ui-helper-clearfix").unbind("."+A.widgetName).removeAttr("style").children("li").each(function(){var B=Ap(this);B.removeClass("wijmo-wijcarousel-item ui-helper-clearfix").removeClass(Ar);B.children("img").removeClass("wijmo-wijcarousel-image");B.children(".wijmo-wijcarousel-caption,.wijmo-wijcarousel-text").remove();B.css({width:"",height:""});B.removeData("itemIndex")});A.element.find(Aq+",.wijmo-wijcarousel-timerbar").remove();A.pager&&A.pager.wijpager("destroy").remove();A.element.find("li>span").css("display","");if(A.disabledDiv.length){A.disabledDiv.remove();A.disabledDiv=Ap()}Ap.Widget.prototype.destroy.apply(this)},play:function(){var B=this,A=B.options;if(B.isPlaying){return}if(A.interval===0){return B.pause()}if(A.showTimer&&B.progressBar){B.progressBar.css({width:"0%"});B.playPauseBtn.children("span:eq(0)").removeClass(Ah).addClass(Af);B.progressBar.animate({width:"100%"},A.interval,function(){B._scroll("next",A.step)})}else{if(B.timeout){return}B.timeout=window.setTimeout(function(){B.next()},A.interval)}B.isPlaying=true},pause:function(){var B=this,A=B.options;if(A.showTimer&&B.progressBar){B.progressBar.stop().css({width:"0%"});B.playPauseBtn.children("span:eq(0)").removeClass(Af).addClass(Ah)}else{if(B.timeout===null){return}window.clearTimeout(B.timeout);B.timeout=null}B.isPlaying=false},next:function(){var B=this,A=B.options.step;if(typeof A!=="number"||A<1){return}B._stopAnimation();B._scroll("next",A)},previous:function(){var B=this,A=B.options.step;if(typeof A!=="number"||A<1){return}B._stopAnimation();B._scroll("previous",A)},scrollTo:function(B){var D=this,C,A;D._stopAnimation();C=B>D.currentIdx?"next":"previous";A=Math.abs(B-D.currentIdx);B!==D.currentIdx&&D._scroll(C,A)},_scroll:function(i,G){var u=this,x=u.options,C=u.list,v=0,I,H,E,A=x.orientation==="horizontal",F={},y=u.itemBound[A?"w":"h"],g=A?"left":"top",w=G,B={},D=0,a=u.currentIdx*y;if(!x.loop){if(i==="next"){if(u.currentIdx+x.display+G<=u.count){v=-a-y*w}else{if(u.currentIdx+x.display<u.count){w=u.count-u.currentIdx-x.display;v=-a-y*w}}}else{if(u.currentIdx-G>=0){v=-a+y*w}else{if(u.currentIdx>0){w=u.currentIdx;v=0}}}if(v!==undefined){F[g]=v+u.offset;u._doAnimation(i,F,w)}}else{if(x.preview){v=D=-y*Ai+u.offset}if(i==="next"){v+=-y*w;F[g]=v}else{for(H=0;H<G;H++){v-=y;C.find("li:last").prependTo(C)}B[g]=v;F[g]=D;C.css(B)}u._doAnimation(i,F,G,g,y)}if(x.preview){I=Ap();for(H=0;H<x.display;H++){I=I.add(u._getItemByIndex(u.currentIdx+H).find("div.wijmo-wijcarousel-mask:eq(0)"))}I.stop(true).animate({opacity:0.6},x.animation.duration/2,function(){u._getItemByIndex(u.currentIdx).removeClass(Ar)})}},_doAnimation:function(D,G,E,F,B){var a=this,A=a.list,s=a.options,H,C,r={},q,I={},i;if(D==="next"){i=a.currentIdx+E}else{i=a.currentIdx-E}if(!s.loop){q=function(){a.currentIdx=i;a._setCurrentState(a.currentIdx)}}else{i=i%a.count+(i<0?a.count:0);q=function(){var b=0;if(s.preview){b=a.offset-Ai*B}if(D==="next"){for(C=0;C<E;C++){A.find("li:first").appendTo(A)}if(F){I[F]=b;A.css(I)}}a.currentIdx=i;a._setCurrentState(a.currentIdx)}}r.complete=q;H={index:a.currentIdx,to:i,el:a._getItemByIndex(a.currentIdx)};if(!a._trigger("beforeScroll",null,H)){return}if(s.animation&&s.animation.complete){s.animation.complete=undefined}Ap.extend(r,s.animation);a._hideCaption();A.animate(G,r)},_setCurrentState:function(H){var G=this,a=G.options,E,F,C,D=H+a.display-1,B,A,I;if(!a.loop){C=H+a.display<G.count;if(G.isPlaying&&C){G.timeout=null;G.isPlaying=false;G.play()}else{G.progressBar&&G.pause()}G._applyBtnClass()}else{if(G.isPlaying){G.timeout=null;G.isPlaying=false;G.play()}}if(a.preview){A=Ap();B=G._getItemByIndex(H);for(I=0;I<a.display;I++){A=A.add(G._getItemByIndex(H+I).find("div.wijmo-wijcarousel-mask:eq(0)"))}A.animate({opacity:0},a.animation.duration/2,function(){B.addClass(Ar);G._showCaption(H,D)})}else{G._showCaption(H,D)}if(G.pager){if(Ap.wijmo.wijslider&&G.pager.find(":wijmo-wijslider").length){G.pager.find(":wijmo-wijslider:eq(0)").wijslider("value",H)}else{if(Ap.wijmo.wijpager&&G.pager.is(":wijmo-wijpager")){G.pager.wijpager("option","pageIndex",H)}else{if(G.pager.jquery){E=G.pager.find(">ul:eq(0)>li").eq(H);E.length&&G._activePagerItem(E)}}}}F={firstIndex:H,lastIndex:D};G._trigger("afterScroll",null,F)},_getItemByIndex:function(E){var C=this,B=C.list,A,D=E%C.count;if(!C.options.loop){return B.children("li").eq(D)}B.children("li").each(function(){var F=Ap(this);if(F.data("itemIndex")===D){A=F;return false}});return A},widget:function(){return this.container},_collectionChanged:function(A){var B=this;B.count=B.count+(A==="add"?1:-1);B._applyListStyle();if(B.pager&&B.pager.jquery){B.pager.remove();B.pager=null;B._createPager()}B._applyBtnClass()},add:function(B,A){var C=this,D,E;if(typeof B==="string"){D=Ap(B)}else{if(B.jquery){D=B}else{if(Ap.isPlainObject(B)){D=C._generateMarkup(B)}else{return}}}if(!D.is("li")){D=D.wrap("<li></li>").parent()}E=D;if(typeof A==="number"&&A>=0&&A<C.count){E.insertBefore(C._getItemByIndex(A));C.list.children("li").each(function(){var F=Ap(this);F.data("itemIndex")>=A&&F.data("itemIndex",F.data("itemIndex")+1)})}else{E.insertAfter(C._getItemByIndex(C.count-1))}C._createItem(D,A!==undefined?A:C.count);C._collectionChanged("add")},remove:function(C){var B=this,A;if(typeof C==="number"&&C>=0&&C<B.count){A=B._getItemByIndex(C);B.list.children("li").each(function(){var D=Ap(this);D.data("itemIndex")>C&&D.data("itemIndex",D.data("itemIndex")-1)})}else{A=B._getItemByIndex(B.count-1)}A&&A.remove();B._collectionChanged("remove")}})})(jQuery);(function(R){var J="ui-helper-clearfix",O="ui-widget-content",K="ui-corner-all",P="ui-state-disabled",Q="ui-state-hover",L="ui-state-default",H="wijmo-wijgallery-",I=H+"button-",E=H+"button",B="ui-icon-triangle-1-e",G="ui-icon-triangle-1-w",V="ui-icon-play",W="ui-icon-pause",M="ui-widget-content ui-state-default wijmo-wijgallery-thumbs-pointer-{0}",T="wijmo-wijgallery-flashwrapper",D='<div class="wijmo-wijgallery-frame  ui-widget-content '+J+'"><div class="wijmo-wijgallery-content"></div></div>',C='<div class="wijmo-wijgallery-thumbs"></div>',A='<a class="ui-state-default"><span class="ui-icon"></span></a>',F='<div class="wijmo-wijgallery-frame-{0}"><a href="#" class="wijmo-wijgallery-frame-link"></a></div>',U='<div class="ui-widget-content '+J+'"></div>',N="li.wijmo-wijcarousel-item";R.widget("wijmo.wijgallery",{options:{autoPlay:false,scrollWithSelection:false,showTimer:true,interval:5000,showCaption:true,data:[],showControls:false,control:"",controlPosition:{},captionOrientation:"horizontal",showCounter:true,counter:"[i] of [n]",showPager:false,pagingPosition:{},thumbnails:true,thumbnailOrientation:"horizontal",thumbnailDirection:"after",transitions:{animated:"slide",duration:1000,easing:null},showControlsOnHover:true,thumbsDisplay:5,thumbsLength:100,beforeTransition:null,afterTransition:null,loadCallback:null,showMovieControls:false,autoPlayMovies:true,flashParams:{bgcolor:"#000000",allowfullscreen:true,wmode:"transparent"},flashVars:{},flashVersion:"9.0.115",flvPlayer:"player\\player.swf",flashInstall:"player\\expressInstall.swf",mode:"img"},_setOption:function(j,Y){var i=this,X=i.options,Z,l,a;if(j==="framePosition"||j==="thumbnailPosition"||j==="transitions"||j==="pagingPosition"){R.extend(true,X[j],Y)}else{a=X[j];R.Widget.prototype._setOption.apply(i,arguments);switch(j){case"disabled":i._handleDisabledOption(Y,i.element);break;case"thumbnailOrientation":i.thumbs.wijgallery({orientation:Y});break;case"autoPlay":i.play();break;case"showPager":case"showCounter":case"showTimer":case"showControls":Z=j.replace(/show/i,"").toLowerCase();l=j.replace(/show/i,"_create");if(Y!==a){if(Y===true){if(!i[Z]){i[l]()}else{i[Z].jquery&&i[Z].show()}}else{i[Z].remove()}}}}},thumbWidgetName:"wijcarousel",_handleDisabledOption:function(Y){var X=this;if(X.pager&&!X.pager.is(":hidden")){X.disabledEles=X.disabledEles.add(X.pager)}if(Y){!X.disabledDiv.length&&X._createDisabledDiv();X.disabledDiv.appendTo("body")}else{if(X.disabledDiv){X.disabledDiv.remove();X.disabledDiv=R()}}},_createDisabledDiv:function(){var X=this;X.disabledEles.each(function(){var Z=R(this),a=Z.offset(),Y=Z.outerWidth(),h=Z.outerHeight(),b=R("<div></div>").addClass("ui-state-disabled").css({"z-index":"99999",position:"absolute",width:Y,height:h,left:a.left,top:a.top});if(R.browser.msie){b.css("background-color","white");R.browser.version==="9.0"&&b.css("opacity","0.1")}X.disabledDiv=X.disabledDiv.add(b)})},_initLi:function(Y){var X=Y.children("a:eq(0)"),a=Y.find("img:eq(0)"),g=Y.find("span:eq(0)"),Z={title:a.attr("alt"),caption:null};if(X.length&&X.attr("href")){Z.url=X.attr("href");if(!Z.title){Z.title=X.attr("title")}}else{if(a.length){Z.url=a.attr("src")}}if(g.length){Z.caption=g}else{if(a.attr("title")){Z.caption=R("<span>").html(a.attr("title"))}}Z.thumbUrl=a.attr("src");return Z},_initStatus:function(){var X=this,Y;X.images=[];X.ul=X.element.children("ul");Y=X.ul.children("li");X.count=Y.length;Y.each(function(){var Z=X._initLi(R(this));X.images.push(Z)})},_createMarkupFromData:function(){var Z=this,g=Z.options,X=g.data,Y=Z.element,a=Y.children("ul:eq(0)");Z.images=X;if(a.length){a.empty()}else{a=R("<ul>").appendTo(Y)}Z.ul=a;R.each(X,function(c,j){var i=R("<a>"),l=R("<li>"),h=R("<img>");j.url&&i.attr("href",j.url);j.thumbUrl&&h.attr("src",j.thumbUrl);j.title&&h.attr("alt");i.append(h).appendTo(l);l.appendTo(a)});Z.count=X.length},_create:function(){var X=this,Y=X.options;X.container=X.element;X.container.addClass("wijmo-wijgallery ui-widget");X.currentThumbIdx=0;X.currentIdx=-1;X.disabledEles=X.element;X.disabledDiv=R();if(Y.showPager){Y.pagingPosition=true;Y.thumbnails=false}if(Y.data&&Y.data.length){X._createMarkupFromData()}else{X._initStatus()}Y.loadCallback&&R.isFunction(Y.loadCallback)&&X._trigger("loadCallback",null,X);X._createDom();Y.autoPlay&&X.play();if(Y.showControlsOnHover){X.frame.find(".wijmo-wijpager,.wijmo-wijgallery-button-next,.wijmo-wijgallery-counter,.wijmo-wijgallery-button-previous").hide();!X.isPlaying&&X.timer&&X.timer.hide()}Y.disabled&&X.disable()},_createDom:function(){var Y=this,X=Y.options;if(X.thumbnails){Y._createThumbnails()}else{Y.ul.hide()}Y._createFrame();X.control&&Y._createControls();X.showCounter&&Y._createCounter();X.showTimer&&Y._createTimer();X.showPager&&Y._createPager()},_getFrameSize:function(){var e=this,X=e.options.thumbnailOrientation==="horizontal",Y=e.element.height()-(X?e.thumbs?e.thumbs.outerHeight(true):0:0),Z=e.element.width()-(X?0:e.thumbs?e.thumbs.outerWidth(true):0);return{w:Z<0||!Z?750:Z,h:Y<0||!Y?300:Y}},_createFrame:function(){var a=this,Y=a.options,i,Z,h=a._getFrameSize(),X=Y.thumbnailDirection==="after";a.frame=R(D)[X?"prependTo":"appendTo"](a.container).setOutWidth(h.w-1).setOutHeight(h.h).wrap('<div class="wijmo-wijgallery-framewrapper">');a.size=h;i=a.frame.width();Z=a.frame.height();a.frameWrapper=a.frame.parent();Y.thumbnailOrientation==="vertical"&&a.frameWrapper.addClass("wijmo-wijgallery-framewrapper-vertical");Y.showControlsOnHover&&a.frame.bind("mouseenter."+a.widgetName,function(){a._showControls("controls")}).bind("mouseleave."+a.widgetName,function(){a._hideControls("controls")});a.content=a.frame.children("div.wijmo-wijgallery-content");Y.mode==="img"&&a._createFrameMask();a._createPrevNextBtn();a._createCaption(h);a._createLoading();a.last=R('<div class="ui-widget-overlay wijmo-wijgallery-last"></div>').appendTo(a.content).width(i).height(Z).css({"line-height":h.h+"px"});a.current=R('<div class="ui-widget-overlay wijmo-wijgallery-current"></div>').appendTo(a.content).width(i).height(Z).css({"line-height":h.h+"px"});a._show(0)},_createControls:function(){var Y=this,Z=Y.options,X={collision:"none",of:Y.container,my:"center bottom",at:"center bottom"};if(Z.control){Y.controls=R(Z.control).css({position:"absolute"}).appendTo(Y.container);R.extend(X,Z.controlPosition);Y.controls.position(X)}},_createLoading:function(){var X=this;X.loading=R("<div></div>").addClass("wijmo-wijgallery-loading").appendTo(X.content);X.loading.css({left:(X.content.width()-X.loading.width())/2,top:(X.content.height()-X.loading.height())/2});X.loading.hide()},_createFrameMask:function(){var X=this,Y=X.options;R.each(["previous","next"],function(Z,a){var b=R(F.replace(/\{0\}/,a)).appendTo(X.frame),c=b.children("a");Y.showControlsOnHover&&b.bind("mouseenter."+X.widgetName,function(){X._showControls(a)}).bind("mouseleave."+X.widgetName,function(){X._hideControls(a)});c.bind("click."+X.widgetName,function(d){X[a]();d.preventDefault()})})},_createCounter:function(){var X=this,Y=X.options;if(!Y.showCounter){if(X.counter){X.counter.remove();X.counter=undefined}return}if(!X.counter){X.counter=R("<div></div>").addClass("wijmo-wijgallery-counter ui-state-default ui-corner-tl").appendTo(X.frame)}X._refreshCounter()},_refreshCounter:function(){var Y=this,X=Y.options,Z;if(!Y.counter){return}Y.counter.empty();if(X.counter){Z=X.counter.replace(/\[i\]/,Y.currentIdx+1);Z=Z.replace(/\[n\]/,Y.count);R("<span></span>").text(Z).appendTo(Y.counter)}},_createPrevNextBtn:function(){var X=this;R.each(["next","previous"],function(b,a){var Z=a==="next"?B:G,Y;Y=X.frame.find(".wijmo-wijgallery-frame-"+a);if(!Y.length||X.options.mode!=="img"){Y=X.frame}X[a+"Btn"]=R(X._createBtn(I+a,Z)).bind("click."+X.widgetName,R.proxy(X[a],X)).appendTo(Y);X._applyBtnStyle(a)})},_applyBtnStyle:function(X){var l=this,m=X==="next",o=l[X+"Btn"],n=m?"right center":"left center",Z=n,Y="ui-corner-"+(m?"left":"right"),c=X==="next"?l.currentIdx>=l.count:l.currentIdx<=0,b={collision:"none",of:l.frame,my:Z,at:n};o.addClass(Y).position(b);if(c){o.removeClass(Q).addClass(P)}else{o.hasClass(P)&&o.removeClass(P)}},_createCaption:function(Z){var Y=this,X=Y.options;if(X.showCaption){Y.overlay=R(U).addClass("wijmo-wijgallery-caption").width(Z.w).appendTo(Y.content);Y.caption=R(U).addClass("wijmo-wijgallery-text").width(Z.w).appendTo(Y.content)}},_loadCaption:function(X){var i=this,h=X.caption,Z,a=R("<span></span>"),Y=i.element.find(".wijmo-wijgallery-text,.wijmo-wijgallery-caption");if(h){Y.show();h.jquery&&h.show();a.html(h);i.caption.empty().append(a);Z=a.outerHeight(true);Y.height(Z);R.browser.msie&&Y.height(a.css("display","block").outerHeight(true))}Y.hide()},_showCaption:function(X){var Y=this;if(X&&X.caption){Y.caption.length&&Y.caption.fadeIn(500);Y.overlay.length&&Y.overlay.show().animate({opacity:0.5},500)}},_createTooltip:function(Z){var Y=this,X=Z||"bottom";Y.pointer=R("<div>").addClass(M.replace(/\{0\}/,X));Y.pointer.appendTo(Y.thumbsWrapper).hide()},_createThumbnails:function(){var c=this,Y=c.options,X=Y.thumbnailDirection==="after",Z="wijmo-wijgallery-thumbs-{0}",a=Y.thumbnailOrientation==="horizontal",i=X?a?"bottom":"right":a?"top":"left";c.thumbPosition=i;c.thumbs=R(C).appendTo(c.container).addClass(O).addClass(a?"wijmo-wijcarousel-horizontal-multi":"wijmo-wijcarousel-vertical-multi");if(a){c.thumbs.css({height:Y.thumbsLength+"px"}).setOutWidth(c.element.width())}else{c.thumbs.css({width:Y.thumbsLength+"px"}).setOutHeight(c.element.height())}c.ul.appendTo(c.thumbs);c.ul.children("li").each(function(j){var h=R(this).children("a"),b=c.images[j],g=b.thumbUrl;if(!h.length){h=R(this).wrapInner("<a>").children("a");h.attr("href",g)}});if(R[c.namespace][c.thumbWidgetName]){c.thumbs.addClass(Z.replace(/\{0\}/,i)).find("li").addClass(L).hover(function(){R(this).addClass(Q)},function(){R(this).removeClass(Q)});c.thumbsWrapper=c.thumbs[c.thumbWidgetName]({display:Y.thumbsDisplay,step:Y.thumbsDisplay-1,itemPadding:"0 10px",showCaption:false,orientation:Y.thumbnailOrientation,loop:false,itemClick:function(f,b){var e=b.index;c.show(e);f.preventDefault()},afterScroll:function(b,d){c.currentThumbIdx=d.firstIndex;c.activeLi&&c.activeLi.is("li")&&c.activeLi.index()>=d.firstIndex&&c.activeLi.index()<=d.lastIndex&&c._highlightThumb(c.activeLi);c.isScrolling=false},beforeScroll:function(){c.isScrolling=true;if(Y.mode==="swf"||Y.mode==="flv"){c.pointer.hide()}else{c.pointer.fadeOut(100)}}}).wrap('<div class="wijmo-wijgallery-thumbswrapper">').parent();!a&&c.thumbsWrapper.addClass("wijmo-wijgallery-thumbswrapper-vertical");c._createTooltip(i)}},_calculatePosition:function(j,X,l,Z,Y,h){var i=this;if(i.thumbPosition==="bottom"){j.left=j.left+(Z-X)/2+h;j.top=j.top-l}else{if(i.thumbPosition==="top"){j.left=j.left+(Z-X)/2+h;j.top=j.top+Y+2*h}else{if(i.thumbPosition==="left"){j.left=j.left+Z+2*h;j.top=j.top+(Y-l)/2+h}else{if(i.thumbPosition==="right"){j.left=j.left-X;j.top=j.top+(Y-l)/2+h}}}}},_highlightThumb:function(j){var Z=this,Y,m,X,n,i,l;if(j&&j.length){j.siblings("li.wijmo-wijgallery-selected").removeClass("wijmo-wijgallery-selected ui-state-active");j.addClass("wijmo-wijgallery-selected ui-state-active");Y=Z.pointer.outerWidth(true);m=Z.pointer.outerHeight(true);X=j.width();n=j.height();i=j.offset();l=5;Z._calculatePosition(i,Y,m,X,n,l);Z.pointer.fadeIn(100);Z.pointer.offset(i)}},_getSelector:function(Z,Y){var g,f=".wijmo-wijgallery-button-",X=".wijmo-wijpager,.wijmo-wijgallery-counter";if(Y){X+=",.wijmo-wijgallery-timerbar"}if(Z==="next"||Z==="previous"){g=f+Z}else{if(Z==="controls"){g=X}else{g=X+","+f+"next,"+f+"previous"}}return g},_showControls:function(X){var Y=this,Z;Z=Y._getSelector(X,!Y.isPlaying&&Y.timer);Y.frame.find(Z).stop(true,true).fadeIn(400,function(){R(this).css("opacity","")})},_hideControls:function(Y){var Z=this,X;X=Z._getSelector(Y,!Z.isPlaying&&Z.timer);this.frame.find(X).stop(true,true).fadeOut(600)},_createPager:function(){var a=this,l=a.options,n,j=l.thumbsDisplay,X=1,Y=a.currentIdx,m=a.currentIdx,Z={collision:"none",of:a.container,my:"right top",at:"right bottom"};if(l.thumbnails){n=R("<div></div>").appendTo(a.thumbs);if(j!==0){X=Math.ceil(a.count/j);Y=Math.ceil(a.currentIdx/j)}a.pager=n.wijpager({pageCount:X,pageIndex:Y,pageButtonCount:X,mode:"numeric",pageIndexChanged:function(b,c){var f=c.newPageIndex;(m<f*j||m>=(f+1)*j)&&a.thumbs[a.thumbWidgetName]("scrollTo",f*j);b.preventDefault()}}).css({position:"absolute"})}else{n=R("<div></div>").appendTo(a.container);a.pager=n.wijpager({pageCount:a.count,pageIndex:a.currentIdx,pageButtonCount:a.count,mode:"numeric",pageIndexChanged:function(b,e){var f=e.newPageIndex;a._show(f)}}).css({position:"absolute"});R.extend(Z,l.pagingPosition);a.pager.addClass("wijmo-wijgallery-pager").position(Z)}},_createBtn:function(Z,Y){var X=R(A);X.addClass(Z).attr("role","button").bind("mouseover"+this.widgetName,function(){if(R(this).hasClass(P)){return}R(this).addClass(Q)}).bind("mouseout"+this.widgetName,function(){if(R(this).hasClass(P)){return}R(this).removeClass(Q)});X.children("span:eq(0)").addClass(Y);return X},_createTimer:function(){var X=this;X._createPausePlay();X.progressBar=R("<div></div>").addClass("wijmo-wijgallery-timerbar-inner "+K).css({width:"0%"}).attr("role","progressbar");X.timer=R("<div></div>").addClass("wijmo-wijgallery-timerbar "+K).appendTo(X.frame).append(X.progressBar).append(X.playPauseBtn)},_createPausePlay:function(){var X=this,Y=X.options;X.playPauseBtn=R(X._createBtn(E,Y.autoPlay?W:V)).bind("click."+X.widgetName,function(){if(!R(this).hasClass(P)){var Z=R(this).children("span:eq(0)");X[Z.hasClass(V)?"play":"pause"]()}})},_show:function(m){var l=this,o=l.images[m],n,a,f,Y=l._getFrameSize(),Z=l.options,X=Z.mode;if(l.currentIdx===m){return}if(o&&R.isPlainObject(o)){l.loading.delay(500).fadeIn(100);f=l.last.children("img,div."+T);f.length&&f.remove();if(X==="swf"||X==="flv"){l.last.hide();l.current.empty();l._wrapFlash(l.current,X,o.url);l.picture=l.current.children("div."+T);l._setCurrentStates(m);l.loading.stop().hide();l._thumbsScroll(m)}else{if(X==="img"){l.picture&&l.picture.length&&l.last.append(l.picture.unbind("load"));l.current.hide();l.last.show();l.picture=R("<img>").attr({src:o.url,alt:o.title}).appendTo(l.current).data("itemIndex",m);if(l.picture[0].complete&&R.browser.msie){l._imageLoaded(l,Y)}else{l.picture.bind("load",function(){l._imageLoaded(l,Y)})}}else{if(X==="iframe"){if(l.current.is(":hidden")){n=l.current;a=l.last}else{n=l.last;a=l.current}l.picture=R("<iframe></iframe>").addClass("wijmo-wijgallery-iframe").attr({frameborder:"0",marginwidth:"0",marginheight:"0",scrolling:"auto",allowtransparency:"true",src:o.url}).hide().appendTo(n).data("itemIndex",m).bind("load",function(){var b=R(this),e=b.data("itemIndex");l.loading.stop().hide();l.pointer&&l.pointer.fadeOut(100);l._setCurrentStates(e);if(e!==undefined){b.show();a.fadeOut(function(){a.empty()});n.fadeIn()}})}}}}},_imageLoaded:function(j,i){var h=j.picture.attr("role","img"),Y=h.data("itemIndex"),l=h[0].naturalWidth||h.width(),Z=h[0].naturalHeight||h.height(),X=j.images[Y];j.loading.stop().hide();j.pointer&&j.pointer.fadeOut(100);if(l>i.w||Z>i.h){if(l/Z>i.w/i.h){h.css({width:"100%"})}else{h.css({height:"100%"})}}else{l<i.w&&Z<i.h&&h.addClass("ui-state-default wijmo-wijgallery-small-image")}if(Y!==undefined){j.options.showCaption&&j.caption&&j._loadCaption(X);j._animate(Y)}},_animate:function(y){var u=this,q=u.options,s=q.transitions,w=q.thumbnailOrientation==="horizontal",a,x,Y,Z,t,X,r,v=s.animated,p=s.duration;if(!u.last.children().length){u._setCurrentStates(y);u.last.hide();u.current.show();return}t={index:u.currentIdx,to:y,toImg:u.images[y]};if(!u._trigger("beforeTransition",null,t)){return}if(v){if(v==="slide"){a=u.size.w;x=u.size.h;u.current.show();X=u.currentIdx>y?true:false;Y=R.effects.createWrapper(u.last).css({overflow:"hidden",width:w?a*2:a,height:w?x:x*2,left:w?X?-a:0:0,top:w?0:X?-x:0});Y[X?"prepend":"append"](u.current);Y.animate({left:w?X?0:-a:0,top:w?0:X?0:-x},p,function(){u.last.parent().is(".ui-effects-wrapper")&&u.last.unwrap();u.last.hide();u._setCurrentStates(y)})}else{if(v==="explode"||v==="scale"||v==="blind"||v==="fold"){u.current.css({position:"absolute"});u.current.stop(true,true).show(v,p,function(){u.last.hide();u._setCurrentStates(y)})}else{if(v==="size"){u.last.hide();u.current.stop(true,true).show(v,p,function(){u.last.hide();u._setCurrentStates(y)})}else{Z=p/2;u.last.hide(v,Z,function(){u.last.hide();u.current.stop(true,true).show(v,Z,function(){u._setCurrentStates(y)})})}}}}else{u.last.hide();u.current.show();u._setCurrentStates(y)}u._thumbsScroll(y)},_thumbsScroll:function(Y){var X,e=this,Z=e.options;if(e.thumbs&&e.thumbs[e.thumbWidgetName]){if(Z.scrollWithSelection){X=Y-Math.ceil(Z.thumbsDisplay/2)+1;e.thumbs[e.thumbWidgetName]("scrollTo",X)}else{if(Y>Z.thumbsDisplay+e.currentThumbIdx-1){e.thumbs[e.thumbWidgetName]("scrollTo",Y-Z.thumbsDisplay+1)}else{Y<e.currentThumbIdx&&e.thumbs[e.thumbWidgetName]("scrollTo",Y)}}}},_setCurrentStates:function(Y){var c=this,X=c.options,Z,i,b;b=c.currentIdx;c.currentIdx=Y;Z=Y+1<c.count;if(c.isPlaying&&Z){c.timeout=null;c.isPlaying=false;c.play()}else{c.progressBar&&c.pause()}if(Y+1>=c.count){c.nextBtn.add(c.playPauseBtn).removeClass(Q).addClass(P)}else{c.nextBtn.add(c.playPauseBtn).removeClass(P)}if(Y<=0){c.previousBtn.removeClass(Q).addClass(P)}else{c.previousBtn.removeClass(P)}X.showCaption&&c._showCaption(c.images[Y]);if(c.thumbs&&c.thumbs[c.thumbWidgetName]){c.activeLi=c.thumbs.find(N).eq(Y);!c.isScrolling&&c._highlightThumb(c.activeLi)}else{if(c.pager){c.pager.is(":wijmo-wijpager")&&c.pager.wijpager("option","pageIndex",Y)}}c._refreshCounter();c._clearCss();i={last:b,index:c.currentIdx,toImg:c.images[c.currentIdx]};c._trigger("afterTransition",null,i)},_clearCss:function(){this.current.css({position:"",visibility:""})},_resetState:function(){var X=this;X._stopAnimation();if(X.isPlaying&&X.progressBar){X.progressBar.stop();X.progressBar.css({width:"0%"})}},_stopAnimation:function(){var X=this,Y;Y=X.content.find(".ui-effects-wrapper");Y.length&&Y.stop(true,true);X.current.stop(true,true);X.last.stop(true,true)},widget:function(){return this.element},count:function(){return this.count},destroy:function(){var X=this;X.frame.unwrap().remove();if(X.options.thumbnails){if(R[X.namespace][X.thumbWidgetName]){X.thumbs[X.thumbWidgetName]("destroy");X.element.find("li").unbind().removeClass("ui-state-active").filter(".wijmo-wijgallery-selected").removeClass("wijmo-wijgallery-selected");X.thumbs.children("ul").unwrap().unwrap()}}else{X.pager&&X.pager.length&&X.pager.remove();X.element.find("ul").css({display:""})}X.pointer&&X.pointer.remove();X.element.removeClass("wijmo-wijgallery ui-widget ui-widget-content ui-corner-all");if(X.disabledDiv){X.disabledDiv.remove();X.disabledDiv=null}R.Widget.prototype.destroy.apply(this)},show:function(X){var Y=this;Y._resetState();Y._show(X)},next:function(){var Y=this,X;Y._resetState();X=Y.currentIdx+1;X<Y.count&&Y._show(X)},previous:function(){var Y=this,X;Y._resetState();X=Y.currentIdx-1;X>=0&&Y._show(X)},play:function(){var Y=this,X=Y.options;if(Y.isPlaying){return}if(X.interval===0){return Y.pause()}if(X.showTimer&&Y.progressBar){Y.progressBar.css({width:"0%"});Y.playPauseBtn.children("span:eq(0)").removeClass(V).addClass(W);Y.progressBar.animate({width:"100%"},X.interval,function(){Y._show(Y.currentIdx+1)})}else{if(Y.timeout){return}Y.timeout=window.setTimeout(function(){Y.next()},X.interval)}Y.isPlaying=true},pause:function(){var Y=this,X=Y.options;if(X.showTimer&&Y.progressBar){Y.progressBar.stop();Y.progressBar.css({width:"0%"});Y.playPauseBtn.children("span:eq(0)").removeClass(W).addClass(V)}else{if(Y.timeout===null){return}window.clearTimeout(Y.timeout);Y.timeout=null}Y.isPlaying=false},add:function(h,Y){var a=this,Z,X,i;if(typeof h==="string"){Z=R(h);i=a._initLi(Z)}else{if(h.jquery){Z=h;i=a._initLi(Z)}else{if(R.isPlainObject(h)){i=h}else{return}}}if(!Y||Y>a.count){X=a.count}else{if(Y<0){X=0}else{X=Y}}a.images.splice(X,0,i);a.count++;a.thumbs&&a.thumbs[a.thumbWidgetName]&&a.thumbs[a.thumbWidgetName]("add",Z,Y)},remove:function(X){var Z=this,Y;if(!X||X>Z.count){Y=Z.count}else{if(X<0){Y=0}else{Y=X}}Z.images.splice(Y,1);Z.count--;Z.thumbs&&Z.thumbs[Z.thumbWidgetName]&&Z.thumbs[Z.thumbWidgetName]("remove",X)},_getExt:function(g){var f,Z,Y=/[0-9a-z]+$/i,X=g.indexOf("?");if(X>-1){g=g.substring(0,X)}Z=g.match(Y);if(Z){f=Z[0].toLowerCase()}return f},_getPlayerName:function(j){if(j.indexOf("#")===0||j.indexOf("#")>0&&j.indexOf(document.location.href)===0){return"inline"}var Z=["bmp","gif","jpg","jpeg","png"],l=["swf"],Y=["flv","m4v"],X=["dv","mov","moov","movie","mp4","avi","mpg","mpeg"],a=["asf","avi","mpg","mpeg","wm","wmv"],i=this._getExt(j);if(i){if(R.inArray(i,Z)>=0){return"img"}if(R.inArray(i,l)>=0){return"swf"}if(R.inArray(i,Y)>=0){return"flv"}if(R.inArray(i,a)>=0){return"wmp"}if(R.inArray(i,X)>=0){return"qt"}}return"unknown"},_wrapFlash:function(u,Y,a){var q=this,v=q.options,Z=a,y,f="100%",X="100%",r=v.flashInstall,s=v.flashVersion,w=v.flashVars,x=v.flashParams,t=q._newId();if(Y==="flv"){Z=v.flvPlayer;w=R.extend({file:a,width:f,height:X,autostart:v.autoPlayMovies?"true":"false",controlbar:v.showMovieControls?"bottom":"none",backcolor:"0x000000",frontcolor:"0xCCCCCC",lightcolor:"0x557722"},v.flashVars);x=R.extend({autostart:v.autoPlayMovies?"true":"false",allowscriptaccess:"always"},v.flashParams)}y=R("<div/>").addClass(T).appendTo(u);R("<div/>").css({width:"100%",height:"100%",overflow:"hidden"}).attr("id",t).appendTo(y);S.flash.embedSWF(Z,t,f,X,s,r,w,x)},_newId:function(){var X="a|b|c|d|e|f|g|h|i|j|k|l|m|n|o|p|q|r|s|t|u|v|w|x|y|z",e=[],Y="";e=X.split("|");for(var Z=0;Z<16;Z++){Y+=e[Math.round(Math.random()*25)]}return Y}})})(jQuery);(function(A){Raphael.fn.isoTri=function(J,H,M,I,G){var K=J,F=H+I/2,L=J+M,C=H,E=J+M,D=H+I,B;if(G==="north"){K=J;F=H;L=J-M/2;C=H+I;E=J+M/2;D=H+I}B=["M",K,F,"L",L,C,"L",E,D,"z"];return this.path(B.concat(" "))};A.wijgauge={math:{mod360:function(B){var C=B%360;if(B<0){C+=360}return C},getAngle:function(B,L,J){var I=this,G=I.distance(L,J),H=I.distance(L,B),K=I.distance(J,B),F=G*G,C=H*H,D=K*K,E=Math.acos((D-C-F)/(-2*H*G));return Math.round(180/Math.PI*E)},distance:function(C,B){return Math.sqrt(Math.pow(B.x-C.x,2)+Math.pow(B.y-C.y,2))},log:function(B,C){return B<=0?NaN:C===1||C<0?NaN:Math.log(B)/Math.log(C)}},decoratorUtils:{generateValues:function(D,G,F){var B=[],C,E;if(G>D&&F>0){C=parseInt((G-D)/F+1,10);for(E=0;E<C;E++){B.push(D+E*F)}}else{F===0&&B.push(D)}return B},isInRange:function(D,C,B){return D>=C&&D<=B||D<=C&&D>=B}},paintMarker:function(D,E,C,G,F,B){return E==="rect"?D.rect(C-F/2,G-B/2,F,B):D.paintMarker(E,C,G,F)},formatString:function(C,B){return A.isFunction(B)?B.call(this,C):B!==""?B.replace(/\{0\}/g,C):C}}})(jQuery);(function(A){A.widget("wijmo.wijgauge",{options:{value:0,max:100,min:0,width:600,height:400,tickMajor:{position:"inside",style:{fill:"#1E395B",stroke:"none"},factor:2,visible:true,marker:"rect",offset:0,interval:10},tickMinor:{position:"inside",style:{fill:"#1E395B",stroke:"none"},factor:1,visible:false,marker:"rect",offset:0,interval:5},pointer:{length:1,style:{fill:"#1E395B",stroke:"#1E395B"},width:8,offset:0,shape:"tri",visible:true,template:null},islogarithmic:false,logarithmicBase:10,labels:{format:"",style:{fill:"#1E395B","font-size":"12pt","font-weight":"800"},visible:true,offset:0},animation:{enabled:true,duration:2000,easing:">"},face:{style:{fill:"270-#FFFFFF-#D9E3F0",stroke:"#7BA0CC","stroke-width":"4"},template:null},marginTop:0,marginRight:0,marginBottom:0,marginLeft:0,ranges:[]},_create:function(){var C=this,B=C.options;isNaN(B.width)&&C._setDefaultWidth();isNaN(B.height)&&C._setDefaultHeight();B.disabled&&C.disable();C.element.addClass("ui-widget").toggleClass("ui-state-disabled",B.disabled);C.canvas=new Raphael(C.element[0],B.width,B.height);C._autoCalculate();C._draw()},_autoCalculate:function(){},_setDefaultWidth:function(){},_setDefaultHeight:function(){},_setOption:function(B,E){var D=this,F=D.options,C=F[B];if(B==="disabled"){D._handleDisabledOption(E,D.element)}else{if(B==="value"){if(F.disabled){return}if(D._trigger("beforeValueChanged",null,{newValue:E,oldValue:C})){A.Widget.prototype._setOption.apply(D,arguments);D._set_value(E,C)}D._trigger("valueChanged",null,{newValue:E,oldValue:C})}else{if(F.disabled){return}A.Widget.prototype._setOption.apply(D,arguments);if(A.isPlainObject(E)){F[B]=A.extend({},C,E)}if(F.radius==="auto"){D._autoCalculate();D.redraw();return}D["_set_"+B]&&D["_set_"+B](E,C)}}},_set_value:function(){this._setPointer()},_set_max:function(){this._redrawMarksAndLabels();this._setPointer()},_set_min:function(){this._redrawMarksAndLabels();this._setPointer()},_set_width:function(){this.redraw()},_set_height:function(){this.redraw()},_set_tickMajor:function(){this._redrawMarksAndLabels()},_set_tickMinor:function(){this._redrawMarksAndLabels()},_set_pointer:function(){var B=this;B.pointer&&B.pointer.remove();B._paintPointer();B._setPointer()},_set_islogarithmic:function(){var B=this;B._redrawMarksAndLabels();B._setPointer()},_set_logarithmicBase:function(){var B=this;B._redrawMarksAndLabels();B._setPointer()},_set_labels:function(){this._redrawMarksAndLabels()},_set_margin:function(B,C){B!==C&&this.redraw()},_set_marginTop:function(B,C){this._set_margin(B,C)},_set_marginBottom:function(B,C){this._set_margin(B,C)},_set_marginLeft:function(B,C){this._set_margin(B,C)},_set_marginRight:function(B,C){this._set_margin(B,C)},_redrawMarksAndLabels:function(){var B=this;B._removeMarksAndLabels();B._drawMarksAndLabels()},_removeMarksAndLabels:function(){var B=this;A.each(B.labels,function(C,D){D.remove()});A.each(B.majorMarks,function(C,D){D.remove()});A.each(B.minorMarks,function(C,D){D.remove()})},_drawMarksAndLabels:function(){var B=this;B.labels=[];B.majorMarks=[];B.minorMarks=[];B._paintMarks()},_triggerPainted:function(){return this._trigger("painted")},_draw:function(){var C=this,B=C.options;C.pointer=null;C._innerBbox={width:B.width-B.marginLeft-B.marginRight,height:B.height-B.marginTop-B.marginBottom,left:B.marginLeft,top:B.marginTop};C._paintFace();C.ranges&&C._removeRanges();C._paintRanges();C._drawMarksAndLabels();C._paintPointer();if(C.pointer){C._setOffPointerValue();C._setPointer()}C._triggerPainted()},redraw:function(){var C=this,B=C.options;C.element.empty();C.canvas=new Raphael(C.element[0],B.width,B.height);C._draw()},destroy:function(){var B=this;B._unbindEvents(B.majorMarks);B._unbindEvents(B.minorMarks);B._unbindEvents(B.labels);B.element.removeClass("ui-widget").empty();if(B.disabledDiv){B.disabledDiv.remove();B.disabledDiv=null}A.Widget.prototype.destroy.apply(B,arguments)},getCanvas:function(){return this.canvas},_percentage:function(){var C=this,D=C.options,B=D.max,F=D.min,E=D.value;return isNaN(E)?0:B===F?1:(E-F)/(B-F)},_valueToLogical:function(B){var D=this,E=D.options,G=E.min,H=E.max,C=E.logarithmicBase,F,I;if(B<G){return 0}if(H<B){return 1}F=(B-G)/(H-G);if(!E.islogarithmic){I=F}else{I=A.wijgauge.math.log(1+(C-1)*F,E.logarithmicBase)}return I},_logicalToValue:function(D){var G=this,F=G.options,C=F.max,B=F.min,E;if(D<0){return B}if(1<=D){return C}if(!F.islogarithmic){E=D}else{if(F.logarithmicBase<=1){return F.min}E=(Math.pow(F.logarithmicBase,D)-1)/(F.logarithmicBase-1)}return B+(C-B)*E},_paintFace:function(){},_paintRanges:function(){var C=this,B=C.options,D=B.ranges||[];C.ranges=[];A.each(D,function(E,F){C._paintRange(F)})},_removeRanges:function(){A.each(this.ranges,function(B,C){C.remove()})},_paintMarks:function(){var F=this,G=F.options,C=A.wijgauge.decoratorUtils.generateValues,D=C(G.min,G.max,G.tickMajor.interval),B=C(G.min,G.max,G.tickMinor.interval),H=G.labels,E=H.visible;G.tickMajor.visible&&A.each(D,function(I,J){F.majorMarks.push(F._paintMark(J,G.tickMajor,true));E&&F.labels.push(F._paintLabel(J,H))});G.tickMinor.visible&&A.each(B,function(I,K){var J=false;A.each(D,function(L,M){if(K===M){J=true;return false}});!J&&F.minorMarks.push(F._paintMark(K,G.tickMinor,false))});F._bindClickEvents(F.majorMarks);F._bindClickEvents(F.minorMarks);F._bindClickEvents(F.labels)},_bindClickEvents:function(C){var B=this;A.each(C,function(D,E){A(E.node).bind("click."+B.widgetName,function(F){B._trigger("click",F,{ele:E})})})},_unbindEvents:function(B){var C=this;A.each(B,function(D,E){A(E.node).unbind("."+C.widgetName)})},_paintLabel:function(){},_paintMark:function(){},_paintPointer:function(){},_setPointer:function(){},_setOffPointerValue:function(){},_handleDisabledOption:function(B,C){var D=this;if(B){if(!D.disabledDiv){D.disabledDiv=D._createDisabledDiv(C)}D.disabledDiv.appendTo("body")}else{if(D.disabledDiv){D.disabledDiv.remove();D.disabledDiv=null}}},_createDisabledDiv:function(B){var C=this,D=C.options,F=B||C.element,G=F.offset(),E=D.width||F.outerWidth(),H=D.height||F.outerHeight();return A("<div></div>").addClass("ui-disabled").css({"z-index":"99999",position:"absolute",width:E,height:H,left:G.left,top:G.top})}})})(jQuery);(function(A){A.widget("wijmo.wijlineargauge",A.wijmo.wijgauge,{options:{orientation:"horizontal",xAxisLocation:0.1,xAxisLength:0.8,yAxisLocation:0.5,width:"auto",height:"auto",pointer:{length:0.5,width:4,offset:0,visible:true,template:null},marginLeft:5,marginTop:5,marginRight:5,marginBottom:5},_setDefaultWidth:function(){var B=this.options;B.width=B.orientation==="horizontal"?310:70},_setDefaultHeight:function(){var B=this.options;B.height=B.orientation==="horizontal"?70:310},_set_orientation:function(){var B=this;B._setDefaultWidth();B._setDefaultHeight();B.markBbox=null;B.redraw()},_set_xAxisLocation:function(){this.redraw()},_set_xAxisLength:function(){this.redraw()},_set_yAxisLocation:function(){this.redraw()},_create:function(){A.wijmo.wijgauge.prototype._create.apply(this,arguments);this.element.addClass("wijmo-wijlineargauge")},_paintLabel:function(M,F){var N=this,G=N.options,D=F.format,I=F.style,E=M,H=N.options.tickMajor,C=H.position||"inside",K,L,J,B;if(D!==""){E=A.wijgauge.formatString(M,D)}J=N._getMarkerBbox();B=N._getLabelBBox(E);K=N._valueToPoint(M,0);if(G.orientation==="horizontal"){if(C==="inside"){K.y=J.y-B.height}else{K.y=J.y+J.width}}else{if(C==="inside"){K.x=J.x-B.width/2}else{K.x=J.x+J.width+B.width/2}}L=N.canvas.text(K.x,K.y,E);L.attr(I);A.wijraphael.addClass(A(L.node),"wijmo-wijlineargauge-label");return L},_getLabelBBox:function(B){var E=this,C=E.options,F,D;F=E.canvas.text(0,0,B);F.attr(C.gaugeLableStyle);D=F.wijGetBBox();F.remove();return D},_getMarkerBbox:function(){var E=this,B=E.options,D=B.tickMajor,C;if(!E.markBbox){C=E._paintMark(0,D);E.markBbox=C.wijGetBBox();C.remove()}return E.markBbox},_paintMark:function(E,L,I){var J=this,C=J.options,N=L.marker||"rect",D=N==="rect"?5:2,B=J._valueToPoint(E,0),H=L.position||"inside",G=L.offset||0,F=I?2:1,M,K;M=D*L.factor;if(A.isFunction(N)){return N.call(J,J.canvas,B,C)}else{if(C.orientation==="horizontal"){K=A.wijgauge.paintMarker(J.canvas,N,B.x,B.y,F,M)}else{K=A.wijgauge.paintMarker(J.canvas,N,B.x,B.y,M,F)}}K.attr(L.style);A.wijraphael.addClass(A(K.node),"wijmo-wijlineargauge-mark");J._applyPosition(K,H,G,E);return K},_applyPosition:function(G,H,F){var E=0,I=0,C=this,B=C.options.orientation==="horizontal",D=G.wijGetBBox();switch(H){case"inside":if(B){I-=D.width/2+F}else{E-=D.width/2+F}break;case"outside":if(B){I+=D.width/2+F}else{E+=D.width/2+F}break;case"center":if(B){I-=F}else{E-=F}}G.attr("transform","t"+E+","+I)},_paintFace:function(){var F=this,C,G=F.options,H=F._innerBbox.width,D=F._innerBbox.height,B=F._innerBbox.left,E=F._innerBbox.top;if(G.face&&G.face.template&&A.isFunction(G.face.template)){return G.face.call(F,H,D,B,E)}C=F.canvas.rect(B,E,H,D,5);G.face&&G.face.style&&C.attr(G.face.style);A.wijraphael.addClass(A(C.node),"wijmo-wijlineargauge-face");return C},_paintPointer:function(){var J=this,E=J.options,L=J._valueToPoint(0,0),C=J._innerBbox.width,F=J._innerBbox.height,G=J._innerBbox.left,H=J._innerBbox.top,I=E.pointer,B,M,K,D;if(!I.visible){return}D=E.orientation==="horizontal"?F:C;K=D*I.offset;M=D*I.length;if(I.template&&A.isFunction(I.template)){B=I.template.call(J.canvas,L,A.extend({},E.pointer,{offset:K,length:M}))}else{if(E.orientation==="horizontal"){if(I.shape==="rect"){B=J.canvas.rect(L.x-I.width/2,F-M-K+H,I.width,M)}else{B=J.canvas.isoTri(L.x-I.width/2,F-M-K+H,I.width,M,"north")}}else{if(I.shape==="rect"){B=J.canvas.rect(C-M-K+G,L.y-I.width/2,M,I.width)}else{B=J.canvas.isoTri(C-M-K+G,L.y-I.width/2,M,I.width)}}B.attr(I.style)}A.wijraphael.addClass(A(B.node),"wijmo-wijlineargauge-pointer");J.pointer=B},_setPointer:function(){var F=this,E=F.options,D=E.orientation,B=D==="horizontal"?F._minScreenPoint(0).x:F._minScreenPoint(0).y,C=D==="horizontal"?F._maxScreenPoint(0).x:F._maxScreenPoint(0).y;if(!F.pointer){return}F._setLinearPointer(B,C,E.value)},_setLinearPointer:function(C,D,I){var E=this,H=E.options,B=E._valueToPoint(I,0),F=E.pointer.wijGetBBox(),J=H.animation,G={x:0,y:0};if(H.orientation==="horizontal"){G.x=B.x-F.x-F.width/2}else{G.y=B.y-F.y-F.height/2}if(J.enabled){E.pointer.wijAnimate({transform:"...t"+G.x+","+G.y},J.duration,J.easing)}else{E.pointer.attr("transform","...t"+G.x+","+G.y)}},_minScreenPoint:function(C){var F=this,D=F.options,B=F._innerBbox.width,I=F._innerBbox.height,G=F._innerBbox.left,H=F._innerBbox.top,E=D.yAxisLocation+C;return D.orientation==="horizontal"?{x:B*D.xAxisLocation+G,y:I*E+H}:{x:B*E+G,y:I*(1-D.xAxisLocation)+H}},_maxScreenPoint:function(D){var G=this,E=G.options,B=G._innerBbox.width,J=G._innerBbox.height,H=G._innerBbox.left,C=G._innerBbox.top,F=E.yAxisLocation+D,I=E.xAxisLocation+E.xAxisLength;return E.orientation==="horizontal"?{x:B*I+H,y:J*F+C}:{x:B*F+H,y:J*(1-I)+C}},_paintRange:function(I){var K=this,L=K.options,G=isNaN(I.startValue)?0:I.startValue,H=isNaN(I.endValue)?0:I.endValue,E=isNaN(I.startWidth)?isNaN(I.width)?0:I.width:I.startWidth,F=isNaN(I.endWidth)?isNaN(I.width)?0:I.width:I.endWidth,C=I.startDistance||0,D=I.endDistance||0,B,J;if(G!==H){if(H>G){B=Math.max(G,L.min);J=Math.min(L.max,H)}else{B=Math.max(L.min,H);J=Math.min(L.max,G)}K._drawRange(B,J,C,D,E,F,I)}},_drawRange:function(C,I,X,U,N,O,F){var R=this,G=R.options,H=G.orientation,K=R._innerBbox.width,J=R._innerBbox.height,E=R._innerBbox.left,B=R._innerBbox.top,T=R._valueToPoint(C,0),W=R._valueToPoint(I,0),P,Q,D,M,V,L;if(H==="horizontal"){V=N*J;L=O*J;if(X!==0){T.y=X*J+B}if(U!==0){W.y=U*J+B}P={x:T.x,y:T.y-V};Q={x:W.x,y:W.y-L}}else{V=N*K;L=O*K;if(X!==0){T.x=X*K+E}if(U!==0){W.x=U*K+E}P={x:T.x-V,y:T.y};Q={x:W.x-L,y:W.y}}D=["M",T.x,T.y,"L",W.x,W.y,"L",Q.x,Q.y,"L",P.x,P.y,"Z"];M=R.canvas.path(D.concat(" "));M.attr(F.style);A.wijraphael.addClass(A(M.node),"wijmo-wijlineargauge-range");R.ranges.push(M)},_valueToPoint:function(B,D){var E=this,H=E.options,G,C,F;if(H.max===H.min){return{x:0,y:0}}G=E._valueToLogical(B);C=E._minScreenPoint(D);F=E._maxScreenPoint(D);return{x:C.x*(1-G)+F.x*G,y:C.y*(1-G)+F.y*G}}})})(jQuery);(function(D){var C=180,B=9,A=5;D.widget("wijmo.wijradialgauge",D.wijmo.wijgauge,{options:{radius:"auto",startAngle:0,sweepAngle:180,pointer:{length:0.8,style:{fill:"#1E395B",stroke:"#1E395B"},width:8,offset:0.15},origin:{x:0.5,y:0.5},labels:{style:{fill:"#1E395B","font-size":"12pt","font-weight":"800"},offset:30},tickMinor:{position:"inside",offset:30,style:{fill:"#1E395B"},visible:true},tickMajor:{position:"inside",offset:27,style:{fill:"#1E395B",stroke:"#1E395B","stroke-width":"1"},visible:true},cap:{radius:15,style:{fill:"#1E395B",stroke:"#1E395B"},behindPointer:false,visible:true,template:null},face:{style:{fill:"r(0.9, 0.60)#FFFFFF-#D9E3F0",stroke:"#7BA0CC","stroke-width":"4"}}},_create:function(){var E=this;D.wijmo.wijgauge.prototype._create.apply(E,arguments);E.element.addClass("wijmo-wijradialgauge")},_init:function(){var F=this,E=F.options;E.max=E.max>360?360:E.max;D.wijmo.wijgauge.prototype._init.apply(F,arguments)},_set_radius:function(){var E=this;E._redrawMarksAndLabels();E.pointer.remove();E._paintPointer();E._setPointer()},_set_startAngle:function(){var E=this;E._redrawMarksAndLabels();E._setPointer()},_set_sweepAngle:function(E){var F=this;if(E>360){F.options.endAngle=360}F._redrawMarksAndLabels();F._setPointer()},_set_ranges:function(){var E=this;E._removeRanges();E._paintRanges()},_set_width:function(){var E=this;E._autoCalculate();D.wijmo.wijgauge.prototype._set_width.apply(E,arguments)},_set_height:function(){var E=this;E._autoCalculate();D.wijmo.wijgauge.prototype._set_width.apply(E,arguments)},_set_origin:function(){var E=this;E._autoCalculate();D.wijmo.wijgauge.prototype._set_width.apply(E,arguments)},_set_cap:function(){var E=this;E.pointer.remove();E._paintPointer();E._setPointer()},_valueToAngleIncludeOffset:function(E){return D.wijgauge.math.mod360(this._valueToAngle(E)+C)},_valueToAngle:function(F){var G=this,E=G._valueToLogical(F);return G._logicalToAngle(E)},_angleToValue:function(F){var G=this,E=G._angleToLogical(F);return G._logicalToValue(E)},_logicalToAngle:function(G){var F=this,H=F.options,I=H.startAngle,E=H.sweepAngle;return I*(1-G)+(I+E)*G},_angleToLogical:function(F){var G=this,J=G.options,K=J.startAngle,I=D.wijgauge.math.mod360(F-K),H=J.sweepAngle,L,E;if(H===0||I===0){return 0}if(H<0){I=360-I;H=-H}L=I-H;if(L>0){E=360-I;return L<E?1:0}return I/H},_generatePoints:function(N,P,O,J){for(var K=this,L=parseInt(B+B*(Math.abs(parseInt(P-N,10))/(B*A)),10),I=[],M,H,G,F,E=0;E<L;E++){M=E/(L-1);H=O+(J-O)*M;F=N+(P-N)*M;G=K._angleToValue(F);I.push(K._valueToPoint(G,H))}return I},_valueToPoint:function(E,H){var F=this,G=F._valueToAngleIncludeOffset(E)*Math.PI/180,I=H;return{x:I*Math.cos(G),y:I*Math.sin(G)}},_pointToValue:function(E){var F=D.wijgauge.math.mod360(Math.atan2(E.x,-E.y)*180/Math.PI);return this._angleToValue(F)},_radiusScreen:function(G){var E=this,F=E.options;return Math.max(F.radius*G,0)},_autoCalculate:function(){var M=this,L=M.options,K=L.width,J=L.height,E,N,O,G=D.wijgauge.formatString(L.max,L.labels.format),P=0,I,H=J-L.marginTop-L.marginBottom,F=K-L.marginLeft-L.marginRight;M.centerPoint={x:L.marginLeft+F*L.origin.x,y:L.marginTop+H*L.origin.y};M.radius=L.radius;if(L.radius==="auto"){M.faceRadius=Math.min(F,H)/2;I=M._getFaceBorder();M.faceRadius-=I;if(L.tickMajor.position==="inside"){M.faceRadius-=M._getMaxRangeWidth()}E=M._getMarkerbbox(L.tickMajor).width;N=M._getMarkerbbox(L.tickMinor).width;O=M._getLabelBBox(G).width;if(L.tickMajor.position==="center"){P-=E/2;P-=O}else{if(L.tickMajor.position==="outside"){P-=E;P-=O}}if(L.tickMinor.position==="center"){P=Math.min(P,-N/2)}else{if(L.tickMinor.position==="outside"){P=Math.min(P,-N)}}M.radius=M.faceRadius+P}},_getMaxRangeWidth:function(){var G=this,E=G.options,F=0;D.each(E.ranges,function(H,I){F=Math.max(F,I.width||0);F=Math.max(F,I.startWidth||0);F=Math.max(F,I.endWidth||0)});return F},_getMarkerbbox:function(E){var G=this,F=G._paintMarkEle(E),H=F.wijGetBBox();F.remove();return{width:H.width,height:H.height}},_getFaceBorder:function(){var F=this,G=F._paintFace(),E=G.attr("stroke-width")||1;if(G.type==="set"){E=G[0].attr("stroke-width")||1}G.remove();return E},_paintMarks:function(){var E=this;E.markBbox=null;D.wijmo.wijgauge.prototype._paintMarks.apply(E,arguments)},_paintMark:function(G,I){var F=this,H,J=I.position||"inside",E=I.offset||0;H=F._paintMarkEle(I);H.attr(I.style);D.wijraphael.addClass(D(H.node),"wijmo-wijradialgauge-mark");D(H.node).data("value",G);F._applyAlignment(H,J,E);F._setMarkValue(G,H);return H},_applyAlignment:function(G,F,E){if(!G){return}var J=G.wijGetBBox(),H=J.width/2,I=0;switch(F){case"outside":I-=H+E;break;case"inside":I+=H+E}G.transform("t"+I+",0")},_paintMarkEle:function(J){var H=this,G=H.options,L={x:H.centerPoint.x-H.radius,y:H.centerPoint.y},I=J.marker||"circle",K=I==="rect"?5:2,F=2,E;E=K*J.factor;return D.isFunction(I)?I.call(H,H.canvas,L,G):D.wijgauge.paintMarker(H.canvas,I,L.x,L.y,E,F)},_setMarkValue:function(G,E){var H=this,F=H._valueToAngle(G);E.transform(Raphael.format("r{0},{1},{2}...",F,H.centerPoint.x,H.centerPoint.y))},_paintLabel:function(J,R){var O=this,L=O._valueToAngle(J),H=R.format,F=R.style,K=R.offset,G=J,M=O.options.tickMajor,N=M.position||"inside",I,Q,T,P,E;if(H!==""){G=D.wijgauge.formatString(J,H)}T=O._getMarkerBbox();E=O._getLabelBBox(G);switch(N){case"inside":P=T.x+T.width+E.width/2;break;case"outside":P=T.x-E.width/2;break;default:P=T.x-E.width/2}P=O.centerPoint.x-P+K;I=D.wijmo.wijradialgauge.utility.getPositionByAngle(O.centerPoint.x,O.centerPoint.y,P,L);Q=O.canvas.text(I.x,I.y,G);Q.attr(F);D.wijraphael.addClass(D(Q.node),"wijmo-wijradialgauge-label");return Q},_getLabelBBox:function(E){var H=this,F=H.options,I,G;I=H.canvas.text(0,0,E);I.attr(F.gaugeLableStyle);G=I.wijGetBBox();I.remove();return G},_getMarkerBbox:function(){var H=this,E=H.options,G=E.tickMajor,F;if(!H.markBbox){F=H._paintMarkEle(G,true);H._applyAlignment(F,G.position,G.offset||0);H.markBbox=F.wijGetBBox();F.remove()}return H.markBbox},_paintFace:function(){var G=this,H=G.options,F=Math.min(H.width,H.height)/2,E,I;if(G.faceRadius){F=G.faceRadius}if(H.face&&H.face.template&&D.isFunction(H.face.template)){I={canvas:G.canvas,r:F,origin:{x:G.centerPoint.x,y:G.centerPoint.y}};return H.face.template.call(G,I)}E=G.canvas.circle(G.centerPoint.x,G.centerPoint.y,F);H.face&&H.face.style&&E.attr(H.face.style);D.wijraphael.addClass(D(E.node),"wijmo-wijradialgauge-face");return E},_paintPointer:function(){var I=this,F=I.options,H=F.pointer,E=I.radius*H.length,J={x:I.centerPoint.x-E+H.offset*I.radius,y:I.centerPoint.y-H.width/2},G;if(!H.visible){return}F.cap&&F.cap.behindPointer&&F.cap.visible&&I._paintCap();if(H.template&&D.isFunction(H.template)){G=H.template.call(I.canvas,J,D.extend({},H,{length:E}))}else{if(H.shape==="rect"){G=I.canvas.rect(J.x-H.width/2,J.y,E,H.width)}else{G=I.canvas.isoTri(J.x-H.width/2,J.y,E,H.width)}G.attr(H.style)}I.pointer=G;D.wijraphael.addClass(D(G.node),"wijmo-wijradialgauge-pointer");(!F.cap||!F.cap.behindPointer)&&F.cap.visible&&I._paintCap()},_paintCap:function(){var G=this,F=G.options,H=F.cap,E;if(H&&H.template&&D.isFunction(H.template)){E={canvas:G.canvas,origin:{x:G.centerPoint.x,y:G.centerPoint.y}};G.cap=H.template.call(G,E);return G.cap}G.cap=G.canvas.circle(G.centerPoint.x,G.centerPoint.y,H.radius);H&&H.style&&G.cap.attr(H.style);D.wijraphael.addClass(D(G.cap.node),"wijmo-wijradialgauge-cap");return G.cap},_paintRange:function(L){var O=this,E=O.options,J=isNaN(L.startValue)?0:L.startValue,K=isNaN(L.endValue)?0:L.endValue,F=isNaN(L.startWidth)?isNaN(L.width)?0:L.width:L.startWidth,G=isNaN(L.endWidth)?isNaN(L.width)?0:L.width:L.endWidth,M=L.startDistance||1,H=L.endDistance||1,N,I;if(J!==K){if(K>J){N=Math.max(J,E.min);I=Math.min(E.max,K)}else{N=Math.max(E.min,K);I=Math.min(E.max,J)}M=M*O.radius;H=H*O.radius;O._drawRange(N,I,M,H,F,G,L)}},_drawRange:function(L,F,R,I,M,N,K){var O=this,J=O._valueToAngle(L),G=O._valueToAngle(F),H=O._generatePoints(J,G,M+R,N+I),Q=O._generatePoints(J,G,R,I),T,E,P="";D.each(H,function(U,V){if(U===0){P+="M"+(V.x+O.centerPoint.x)+" "+(V.y+O.centerPoint.y)}else{P+="L"+(V.x+O.centerPoint.x)+" "+(V.y+O.centerPoint.y)}});for(T=Q.length-1;T>=0;T--){P+="L"+(Q[T].x+O.centerPoint.x)+" "+(Q[T].y+O.centerPoint.y)}P+="Z";E=O.canvas.path(P);E.attr(K.style);O.ranges.push(E);D.wijraphael.addClass(D(E.node),"wijmo-wijradialgauge-range")},_setOffPointerValue:function(){var F=this,E=F._valueToAngle(0);F.pointer.transform(Raphael.format("r{0},{1},{2}",E,F.centerPoint.x,F.centerPoint.y))},_setPointer:function(){var H=this,E=H.options,G=H._valueToAngle(E.value),F=E.animation;if(!H.pointer){return}if(F.enabled){H.pointer.wijAnimate({transform:"r"+G+","+H.centerPoint.x+","+H.centerPoint.y},F.duration,F.easing)}else{H.pointer.transform(Raphael.format("r{0},{1},{2}",G,H.centerPoint.x,H.centerPoint.y))}}});D.wijmo.wijradialgauge.utility={pointers:{donut:function(G,O,R,N,H,P,Q){var E=D.wijmo.wijradialgauge.utility.getPositionByAngle,I=E(O,R,N,P),J=E(O,R,N,Q),M=E(O,R,H,P),L=E(O,R,H,Q),F=Q-P>180,K;if((Q-P)%360!==0){K=["M",I.x,I.y,"A",N,N,0,+F,1,J.x,J.y,"L",L.x,L.y,"A",H,H,0,+F,1,M.x,M.y,"L",I.x,I.y,"z"];G.path(K)}else{G.circle(O,R,N)}}},getPositionByAngle:function(F,J,H,E){var I={},G=Raphael.rad(E);I.x=F-H*Math.cos(G);I.y=J-H*Math.sin(G);return I}}})(jQuery);(function(A){A.widget("wijmo.wijlightbox",{options:{textPosition:"overlay",width:600,height:400,autoSize:true,player:"",groupItems:[],rootUrl:"",ctrlButtons:"",dialogButtons:"close",counterType:"default",counterFormat:"[i] of [n]",counterLimit:10,showCounter:true,showNavButtons:true,showTimer:false,controlsPosition:"inside",showControlsOnHover:true,clickPause:false,keyNav:false,modal:false,position:{my:"center",at:"center",of:window,collision:"fit",using:function(C){var B=A(this).css(C).offset().top;B<0&&A(this).css("top",C.top-B)}},zIndex:1000,closeOnEscape:true,closeOnOuterClick:true,autoPlay:false,delay:2000,loop:true,cookie:null,transAnimation:{animated:"fade",duration:400,easing:"easeInQuad"},slideDirection:"horizontal",resizeAnimation:{animated:"sync",duration:400},textShowOption:{duration:300,easing:"easeInQuad"},textHideOption:{duration:300,easing:"easeInQuad"},showMovieControls:true,autoPlayMovies:true,flashParams:{bgcolor:"#000000",allowfullscreen:true},flashVars:{},flashVersion:"9.0.115",flvPlayer:"player\\player.swf",flashInstall:"player\\expressInstall.swf",beforeShow:null,show:null,open:null,beforeClose:null,close:null},_keyDownHandler:function(C){var B=this.options,D=this;if(C.keyCode&&C.keyCode===A.ui.keyCode.ESCAPE){if(D.isFullSize()){D.toggleFullSize()}else{B.closeOnEscape&&D.close()}C.preventDefault();return}if(B.keyNav){if(C.keyCode){switch(C.keyCode){case A.ui.keyCode.LEFT:case A.ui.keyCode.DOWN:D.back();C.preventDefault();break;case A.ui.keyCode.RIGHT:case A.ui.keyCode.UP:D.next();C.preventDefault();break;case A.ui.keyCode.HOME:B.groupItems.length>0&&D.show(0);C.preventDefault();break;case A.ui.keyCode.END:B.groupItems.length>0&&D.show(B.groupItems.length-1);C.preventDefault()}}}},_create:function(){var B=this.options,C=this;this._defaults={transAnimation:{animated:"fade",duration:400,easing:"easeInQuad"},resizeAnimation:{animated:"sync",duration:400},textShowOption:{duration:300,easing:"easeInQuad"},textHideOption:{duration:300,easing:"easeInQuad"}};this._parse();this.container=A("<div/>").addClass("wijmo-wijlightbox ui-widget wijmo-wijlightbox-controls-"+B.controlsPosition).css("z-index",B.zIndex).attr({tabIndex:-1,role:"dialog"}).bind("keydown.wijlightbox",A.proxy(C,"_keyDownHandler")).appendTo(document.body).hide();this.frame=A("<div></div>").addClass("wijmo-wijlightbox-frame ui-widget-content ui-corner-all ui-helper-clearfix").appendTo(this.container);this.content=A("<div></div>").addClass("wijmo-wijlightbox-content").appendTo(this.frame);if(B.clickPause){this._groupMode()&&(B.autoPlay||this.ctrlButtons&&this.ctrlButtons.indexOf("play")>=0)&&this.content.click(function(){C[!C.isPlaying()?"play":"stop"]()})}else{this._groupMode()&&this.content.click(function(D){var E=A.extend({},A(this).offset(),{width:A(this).outerWidth(true),height:A(this).outerHeight(true)});if(D.pageX>=E.left&&D.pageX<E.left+E.width/2){C.back()}else{C.next()}})}if(B.activeIndex===undefined){if(typeof B.activeIndex!=="number"&&B.cookie){B.activeIndex=parseInt(C._cookie(),10)}B.activeIndex=B.activeIndex||(B.groupItems.length?0:-1)}else{if(B.activeIndex===null){B.activeIndex=-1}}B.activeIndex=B.activeIndex>=0&&B.groupItems[B.activeIndex]||B.activeIndex<0?B.activeIndex:0;this._createTimerBar();this._createDialogButtons();this._createCtrlButtons();this._createText();this._createCounter();this._refreshCounter();this.toolBox&&this.toolBox.find(".wijmo-wijlightbox-toolbox-button").bind({mouseover:function(){C._addState("hover",A(this))},mouseout:function(){C._removeState("hover",A(this))},mousedown:function(){C._addState("active",A(this))},mouseup:function(){C._removeState("active",A(this))}});this._groupMode()&&this._createNavButtons();B.showControlsOnHover&&this.frame.bind({mouseenter:function(){if(C.container.data("moving.wijlightbox")){return false}C._showAccessories(true)},mouseleave:function(){if(C.container.data("moving.wijlightbox")){return false}C._hideAccessories(true)},mousemove:function(){C.container.data("moving.wijlightbox")===false&&C.container.data("accessvisible.wijlightbox")===false&&C.frame.trigger("mouseenter")}});this.container.width(this.frame.outerWidth())},destroy:function(){var C=this.options,B=this;this._hideWaiting();this._hideOverlay();C.cookie&&this._cookie(null,C.cookie);this.container.remove();A.Widget.prototype.destroy.apply(B,arguments);return B},_setOption:function(C,B){A.Widget.prototype._setOption.apply(this,arguments);switch(C){case"groupItems":if(this.options.activeIndex>=B.length){this.show(B.length-1)}else{if(this.options.activeIndex<0&&B.length){this.show(0)}else{this.show(this.options.activeIndex)}}break;case"activeIndex":this.show(B);break;case"textPosition":this._resetText()}},_getPlugins:function(){var E=this.container.data("plugins.wijlightbox");if(!E){E={};if(window.navigator.plugins&&window.navigator.plugins.length){var D=[];A.each(window.navigator.plugins,function(F,G){D.push(G.name)});D=D.join(",");var C=D.indexOf("Flip4Mac")>-1;E={fla:D.indexOf("Shockwave Flash")>-1,qt:D.indexOf("QuickTime")>-1,wmp:!C&&D.indexOf("Windows Media")>-1,f4m:C}}else{var B=function(F){var H;try{H=new ActiveXObject(F)}catch(G){}return !!H};E={fla:B("ShockwaveFlash.ShockwaveFlash"),qt:B("QuickTime.QuickTime"),wmp:B("wmplayer.ocx"),f4m:false}}this.container.data("plugins.wijlightbox",E)}return E},_sanitizeSelector:function(B){return B.replace(/:/g,"\\:")},_getFragmentId:function(B){var F=/^#.+/,D=A(B).attr("href")||"",E=D.split("#")[0],C=A("base")[0];if(E&&(E===window.location.toString().split("#")[0]||C&&E===C.href)){D=B.hash;B.href=D}return F.test(D)?this._sanitizeSelector(D):""},_parseLink:function(C){var B=this,J=this.options,H=A(C);if(H.length>0&&H[0].tagName.toLowerCase()==="a"){var I=H.attr("rel"),G={},D=["href","player","title","alt","height","width","gallery"];A.each(D,function(L,M){G[M]=H.attr(M)||""});if(!G.href){return}if(!G.player){G.player=J.player||B._getPlayerName(G.href)}var K=H.find("img");if(K){A.each(["title","alt"],function(L,M){G[M]=K.attr(M)||G[M]});G.img=K}if(I){var E=I.match(/\[(.*?)\]/);if(E){G.gallery=E[1]||G.gallery}A.each(I.split(";"),function(L,M){var N=M.match(/\s*([a-z_]*?)\s*=\s*(.+)\s*/);if(N){G[N[1]]=N[2]}})}if(G.player==="inline"){G.href=B._getFragmentId(C)}if(!G.gallery){H.bind({click:function(){B.open(K,G);return false}})}else{var F=J.groupItems.length;J.groupItems[F]=G;H.bind({click:function(){B.open(K,F);return false}})}}},_parse:function(){var C=this,B=this.options;this._parseLink(this.element);this.element.find('a[rel^="wijlightbox"], a[rel^="lightbox"]').each(function(){C._parseLink(this)})},_showAccessories:function(B){this.container.data("accessvisible.wijlightbox",true);this._showNavButtons(B);this._showToolboxButtons(B);this._showCounter(B)},_hideAccessories:function(B){this.container.data("accessvisible.wijlightbox",false);this._hideNavButtons(B);this._hideToolboxButtons(B);this._hideCounter(B)},_groupMode:function(){var B=this,C=this.options;return C.groupItems&&C.groupItems.length>0},_resetText:function(){this._removeText();this._createText()},_createText:function(){var B=this,G=this.options;if(G.textPosition==="none"){return}if(this.container.find(".wijmo-wijlightbox-text").length){return}var D=G.textPosition.toLowerCase(),F=A("<div></div>").addClass("wijmo-wijlightbox-text wijmo-wijlightbox-text-"+D+" ui-widget-content ui-helper-clearfix"),H=A("<h3></h3>").addClass("wijmo-wijlightbox-title wijmo-wijlightbox-title-"+D+" ui-helper-clearfix").appendTo(F),C=A("<p></p>").addClass("wijmo-wijlightbox-detail wijmo-wijlightbox-detail-"+D+" ui-helper-clearfix").appendTo(F);if(G.textPosition==="inside"){F.addClass("ui-widget-content ui-helper-clearfix").width(this.frame.width()).appendTo(this.frame)}else{if(G.textPosition==="outside"){F.addClass("ui-widget-content ui-corner-all ui-helper-clearfix").width(this.frame.width()).appendTo(this.container)}else{if(G.textPosition==="overlay"||G.textPosition==="titleOverlay"){var E=A("<div></div>").addClass("wijmo-wijlightbox-mask wijmo-wijlightbox-mask-"+D+" ui-helper-clearfix").width(this.frame.width()).appendTo(this.frame);F.width(this.frame.width()).appendTo(this.frame);G.textPosition==="titleOverlay"&&F.bind({mouseenter:function(){E.stop();F.stop();var J=H.outerHeight(true)+C.outerHeight(true),I=A.extend({},B._defaults.textShowOption,G.textShowOption,{queue:false});E.animate({height:J},I);F.animate({height:J},I)},mouseleave:function(){E.stop();F.stop();var J=H.height(),I=A.extend({},B._defaults.textHideOption,G.textHideOption,{queue:false});E.animate({height:J},I);F.animate({height:J},I)}})}}}this._refreshText()},_removeText:function(){var B=this.container.find(".wijmo-wijlightbox-text"),C=this.container.find(".wijmo-wijlightbox-mask");B&&B.remove();C&&C.remove()},_getActiveItem:function(){var B=this,C=this.options;return C.groupItems&&C.groupItems.length&&C.activeIndex>=0&&C.activeIndex<C.groupItems.length?C.groupItems[C.activeIndex]:null},_refreshText:function(){var G=this,J=this.options;if(J.textPosition==="none"){return}var L=this.container.data("item.wijlightbox")||this._getActiveItem();if(!L){return}var I=this.container.find(".wijmo-wijlightbox-text"),D=this.container.find(".wijmo-wijlightbox-title"),C=this.container.find(".wijmo-wijlightbox-detail"),K=this.container.find(".wijmo-wijlightbox-mask");K.stop();I.stop();D.html(L.title);C.html(L.alt);var M=D.outerHeight(true),E=C.outerHeight(true),H=J.textPosition==="titleOverlay"?M:I.height(),B=A.extend({},G._defaults.textShowOption,J.textShowOption,{queue:false});if(J.textPosition==="overlay"||J.textPosition==="titleOverlay"){var F=M+(J.textPosition==="overlay"?E:0);I.height(0);K.height(0);I.animate({height:F},B);K.animate({height:F},B)}else{I.height(0);I.animate({height:M+E},B)}},_addState:function(B,C){C.is(":not(.ui-state-disabled)")&&C.addClass("ui-state-"+B)},_removeState:function(C,B){B.removeClass("ui-state-"+C)},_createNavButtons:function(){var B=this,C=this.options;if(!C.showNavButtons||!this._groupMode()){this._removeNavButtons();return}if(!this.backBtn){this.backBtn=A("<a href='#'/>").addClass("wijmo-wijlightbox-button wijmo-wijlightbox-button-prev ui-state-default"+(C.controlsPosition==="inside"?" ui-corner-right":" ui-corner-left")).append("<span class='ui-icon ui-icon-triangle-1-w'></span>").hide().appendTo(this.frame).bind({click:function(){!A(this).hasClass("ui-state-disabled")&&B.back();return false},mouseover:function(){B._addState("hover",A(this))},mouseout:function(){B._removeState("hover",A(this))},mousedown:function(){B._addState("active",A(this))},mouseup:function(){B._removeState("active",A(this))}})}if(!this.nextBtn){this.nextBtn=A("<a href='#'/>").addClass("wijmo-wijlightbox-button wijmo-wijlightbox-button-next ui-state-default"+(C.controlsPosition==="inside"?" ui-corner-left":" ui-corner-right")).append("<span class='ui-icon ui-icon-triangle-1-e'></span>").hide().appendTo(this.frame).bind({click:function(){!A(this).hasClass("ui-state-disabled")&&B.next();return false},mouseover:function(){B._addState("hover",A(this))},mouseout:function(){B._removeState("hover",A(this))},mousedown:function(){B._addState("active",A(this))},mouseup:function(){B._removeState("active",A(this))}})}},_removeNavButtons:function(){if(this.backBtn){this.backBtn.remove();this.backBtn=undefined}if(this.nextBtn){this.nextBtn.remove();this.nextBtn=undefined}},_refreshNavButtons:function(){var B=this.options;this.backBtn&&this.backBtn[B.activeIndex===0?"addClass":"removeClass"]("ui-state-disabled");this.nextBtn&&this.nextBtn[B.activeIndex>=B.groupItems.length-1?"addClass":"removeClass"]("ui-state-disabled")},_showNavButtons:function(B){if(this.isPlaying()){return}this.container.find(".wijmo-wijlightbox-button").stop(true,true).fadeIn(B?600:0,function(){A(this).css("opacity","")})},_hideNavButtons:function(B){this.container.find(".wijmo-wijlightbox-button").stop(true,true).fadeOut(B?600:0)},_createToolbox:function(){if(!this.toolBox){this.toolBox=A("<div></div>").addClass("wijmo-wijlightbox-toolbox").appendTo(this.frame)}},_showToolboxButtons:function(B){this.container.find(".wijmo-wijlightbox-toolbox-button").stop(true,true).fadeIn(B?600:0,function(){A(this).css("opacity","")})},_hideToolboxButtons:function(B){this.container.find(".wijmo-wijlightbox-toolbox-button").stop(true,true).fadeOut(B?600:0)},_createCtrlButtons:function(){var C=this,D=this.options;if(!D.ctrlButtons||D.ctrlButtons.length===0||!this._groupMode()){this._removeCtrlButtons();return}this._createToolbox();var B=D.ctrlButtons.split("|");if(B.length===1&&B[0]===D.ctrlButtons){B=D.ctrlButtons.split(",")}A.each(B,function(F,E){E=A.trim(E);if(E==="play"&&!this.playBtn){C.playBtn=A("<a href='#'/>").addClass("wijmo-wijlightbox-toolbox-button wijmo-wijlightbox-toolbox-button-play ui-state-default ui-corner-all").append("<span class='ui-icon ui-icon-play'></span>").hide().click(function(){if(C.isPlaying()){C.stop()}else{D.activeIndex>=D.groupItems.length-1&&C.show(0);C.play()}return false})}else{if(E==="stop"&&!this.stopBtn){C.stopBtn=A("<a href='#'/>").addClass("wijmo-wijlightbox-toolbox-button wijmo-wijlightbox-toolbox-button-stop ui-state-default ui-state-disabled ui-corner-all").append("<span class='ui-icon ui-icon-stop'></span>").hide().click(function(){if(C.isPlaying()){C.stop();C.show(0)}return false})}}});this.stopBtn&&this.stopBtn.appendTo(this.toolBox);this.playBtn&&this.playBtn.appendTo(this.toolBox)},_removeCtrlButtons:function(){if(this.playBtn){this.playBtn.remove();this.playBtn=undefined}if(this.stopBtn){this.stopBtn.remove();this.stopBtn=undefined}},_refreshCtrlButtons:function(){if(this.playBtn){var B=this.playBtn.find(".ui-icon");if(B){B.removeClass("ui-icon-play ui-icon-pause");B.addClass(this.isPlaying()?"ui-icon-pause":"ui-icon-play")}}this.stopBtn&&this.stopBtn[!this.isPlaying()?"addClass":"removeClass"]("ui-state-disabled")},_createDialogButtons:function(){var B=this,C=this.options;if(!C.dialogButtons||C.dialogButtons.length===0){this._removeDialogButtons();return}this._createToolbox();var D=C.dialogButtons.split("|");if(D.length===1&&D[0]===C.dialogButtons){D=C.dialogButtons.split(",")}A.each(D,function(F,E){E=A.trim(E);if(E==="close"&&!this.closeBtn){B.closeBtn=A("<a href='#'/>").addClass("wijmo-wijlightbox-toolbox-button wijmo-wijlightbox-toolbox-button-close ui-state-default ui-corner-all").append("<span class='ui-icon ui-icon-close'></span>").hide().click(function(){B.close();return false})}else{if(E==="fullSize"&&!this.fullBtn){B.fullBtn=A("<a href='#'/>").addClass("wijmo-wijlightbox-toolbox-button wijmo-wijlightbox-toolbox-button-fullsize ui-state-default ui-corner-all").append("<span class='ui-icon ui-icon-arrow-4-diag'></span>").hide().click(function(){B.toggleFullSize();return false})}}});this.closeBtn&&this.closeBtn.appendTo(this.toolBox);this.fullBtn&&this.fullBtn.appendTo(this.toolBox);if(!this.btnSep){this.btnSep=A("<a href='#'/>").addClass("wijmo-wijlightbox-toolbox-separator").appendTo(this.toolBox)}},_removeDialogButtons:function(){if(this.closeBtn){this.closeBtn.remove();this.closeBtn=undefined}if(this.fullBtn){this.fullBtn.remove();this.fullBtn=undefined}},_refreshDialogButtons:function(){if(this.fullBtn){var B=this.fullBtn.find(".ui-icon");if(B){B.removeClass("ui-icon-arrow-4-diag ui-icon-newwin");B.addClass(this.isFullSize()?"ui-icon-newwin":"ui-icon-arrow-4-diag")}}},_createTimerBar:function(){var C=this,B=this.options;if(!B.showTimer||!this._groupMode()){this._removeTimerBar();return}this._createToolbox();if(!this.timerBar){this.timerBar=A("<div></div>").addClass("wijmo-wijlightbox-timerbar ui-widget-content ui-priority-secondary ui-corner-all").appendTo(this.toolBox);this.timerMeter=A("<div></div>").addClass("wijmo-wijlightbox-timermeter ui-progressbar-value ui-widget-content ui-corner-all").appendTo(this.toolBox)}},_removeTimerBar:function(){if(this.timerMeter){this.timerMeter.remove();this.timerMeter=undefined}if(this.timerBar){this.timerBar.remove();this.timerBar=undefined}},_createCounter:function(){var C=this,B=this.options;if(!B.showCounter||!this._groupMode()){this._removeCounter();return}if(!this.counter){this.counter=A("<div></div>").addClass("wijmo-wijlightbox-counter ui-state-default"+(B.controlsPosition==="inside"?"  ui-corner-tl":" ui-corner-all")).hide().appendTo(this.frame)}},_removeCounter:function(){if(this.counter){this.counter.remove();this.counter=undefined}},_refreshCounter:function(K){var F=this,G=this.options,I="";if(!this.counter||!this._groupMode()){return}this.counter.empty();if(G.showCounter&&G.groupItems.length>1&&this.counter){if(K===undefined){K=G.activeIndex}var E=G.groupItems.length;if(G.counterType==="sequence"){var H=0,J=E,B=parseInt(G.counterLimit,10)||0;if(B>=2&&B<E){var D=Math.floor(B/2);H=Math.min(J-B,Math.max(H,K-D));J=Math.min(J,H+B)}while(H!==J){A("<a></a>").addClass("wijmo-wijlightbox-counter-item ui-corner-all ui-state-default"+(H===K?" wijmo-wijlightbox-counter-active ui-state-active":"")).text(++H).appendTo(this.counter)}this.counter.find("a").click(function(){if(A(this).hasClass("wijmo-wijlightbox-counter-active")){return false}F.show(parseInt(A(this).text(),10)-1)})}else{var C=G.counterFormat||"[i] of [n]";I=C.replace("[i]",K+1);I=I.replace("[n]",E);A("<span></span>").text(I).appendTo(this.counter)}}},_showCounter:function(B){this.container.find(".wijmo-wijlightbox-counter").stop(true,true).fadeIn(B?600:0,function(){A(this).css("opacity","")})},_hideCounter:function(B){this.container.find(".wijmo-wijlightbox-counter").stop(true,true).fadeOut(B?600:0)},_cookie:function(){var B=this.cookie||(this.cookie=this.options.cookie.name);return A.cookie.apply(null,[B].concat(A.makeArray(arguments)))},_showOverlay:function(){if(this.container.data("overlay.wijlightbox")){return}this.container.data("overlay.wijlightbox",new A.wijmo.wijlightbox.overlay(this))},_hideOverlay:function(){var B=this.container.data("overlay.wijlightbox");if(!B){return}B.close();this.container.removeData("overlay.wijlightbox")},_hasOverlay:function(){return this.container.hasData("overlay.wijlightbox")},_showWaiting:function(){if(this.container.data("waiting.wijlightbox")){return}this.container.data("waiting.wijlightbox",new A.wijmo.wijlightbox.overlay(this,true))},_hideWaiting:function(){var B=this.container.data("waiting.wijlightbox");if(!B){return}B.close();this.container.removeData("waiting.wijlightbox")},_hasWaiting:function(){return this.container.hasData("waiting.wijlightbox")},_getUrl:function(D){var B=this.options,C=D.href,E=B.rootUrl;if(E&&E.length>0){if(E.indexOf("//")===-1){E=window.location.protocol+"//"+window.location.host+(E.startsWith("/")?"":"/")+E}if(E.substr(E.length-1,1)!=="/"){E+="/"}C=E+(C.substr(0,1)==="/"?C.substr(1):C)}return C},_preload:function(){for(var C=this.options,B=Math.max(0,C.activeIndex);B<Math.min(C.activeIndex+5,C.groupItems.length);B++){if(!C.groupItems[B].image){C.groupItems[B].image=new Image;C.groupItems[B].image.src=this._getUrl(C.groupItems[B])}}},_slideTo:function(H,I,D,O,F){var G=this.options,C=this,K=H.getElement(),L,N;if(K.parent().is(".wijmo-wijlightbox-aniwrapper")){L=K.parent()}else{L=A.effects.createWrapper(K).css({overflow:"hidden"});L.removeClass("ui-effects-wrapper");L.addClass("wijmo-wijlightbox-aniwrapper")}if(L.parent().is(".wijmo-wijlightbox-aniwrapper")){N=L.parent()}else{N=A.effects.createWrapper(L).css({overflow:"hidden"});N.removeClass("ui-effects-wrapper");N.addClass("wijmo-wijlightbox-aniwrapper")}var E=G.slideDirection||"horizontal",B=K.outerWidth(),M=K.outerHeight();if(E==="horizontal"){K.width(B).css("float",O?"left":"right");L.width(2*B).css({left:O?0:-1*B,position:"absolute"})}else{K.height(M);L.width(B).css({top:O?0:-1*M,position:"absolute"}).height(2*M)}I.appendTo(L);var J=I.getElement();if(E==="horizontal"){J.width(B).css("float",O?"left":"right")}else{J.height(M)}this.container.data("animating.wijlightbox",true);L.effect("slide",{mode:"hide",direction:E==="horizontal"?O?"left":"right":O?"up":"down",easing:D.easing,distance:E==="horizontal"?B:M,duration:D.duration},function(){K=L.children(":last");while(K.parent().is(".wijmo-wijlightbox-aniwrapper")){K.parent().replaceWith(K)}K.css({"float":"",width:"",height:""});if(G.autoSize&&!C.isFullSize()){C._resize(F)}else{A.isFunction(F)&&F.apply(C)}})},_moveFrom:function(D,F,C){var E=this,B=this.options;if(A.isFunction(F)){C=F;F=A.extend({},E._defaults.resizeAnimation,B.resizeAnimation)}else{F=A.extend({},E._defaults.resizeAnimation,B.resizeAnimation,F)}E._removeText();if(F.animated==="none"||F.duration<=0){E._createText();A.isFunction(C)&&C.apply(E);this.container.data("moving.wijlightbox",false);return}var G=A.extend({width:E.frame.width(),height:E.frame.height()},E.container.offset());E.frame.width(D.width).height(D.height);E.container.css({left:D.left,top:D.top,width:E.frame.outerWidth(),position:"absolute",opacity:""});E._moveTo(G,F,function(){E.frame.width(G.width);E.container.width(E.frame.outerWidth());E._createText();E.container.data("moving.wijlightbox",false);A.isFunction(C)&&C.apply(E)})},_moveTo:function(M,I,K){var J=this,F=this.options;if(A.isFunction(I)){K=I;I=A.extend({},J._defaults.resizeAnimation,F.resizeAnimation)}else{I=A.extend({},J._defaults.resizeAnimation,F.resizeAnimation,I)}var L=I.duration/2,B=I.animated,E=J.isOpen(),G=B==="wh"?{left:M.left}:{top:M.top},H=B==="wh"?{top:M.top}:{left:M.left},C=B==="wh"?{width:M.width}:{height:M.height},D=B==="wh"?{height:M.height}:{width:M.width};if(B==="wh"||B==="hw"){E&&J.container.animate(G,{duration:L,easing:I.easing,queue:true});J.frame.animate(C,{duration:L,easing:I.easing,complete:function(){E&&J.container.animate(H,{duration:L,easing:I.easing,queue:true});J.frame.animate(D,{duration:L,easing:I.easing,complete:function(){J.container.data("moving.wijlightbox",false);A.isFunction(K)&&K.apply(J)}})}});return}E&&J.container.animate({left:M.left,top:M.top},{duration:I.duration,easing:I.easing,queue:true});J.frame.animate({width:M.width,height:M.height,opacity:1},{duration:I.duration,easing:I.easing,complete:function(){J.container.data("moving.wijlightbox",false);A.isFunction(K)&&K.apply(J)}})},show:function(B){this._show(B);return this},_resize:function(E){var D=this,C=this.options,B=A.extend({},D.container.offset(),{width:D.frame.width(),height:D.frame.height()});D._size();D.isOpen()&&D._position();D._moveFrom(B,E)},_onAfterShow:function(){var D=this,B=this.options;D._refreshNavButtons();D.container.data("animating.wijlightbox",false);!B.modal&&D._hideOverlay();var C={index:B.activeIndex,item:B.groupItems[B.activeIndex]};D._trigger("show",null,C);D._startTimer()},_show:function(K,L,F){var I=this,J=this.options;if(this.container.data("showing.wijlightbox")){var H=[function(){I._show(K,L,F)}];this.container.queue("showqueue",H);return this}var M=J.activeIndex;if(!A.isPlainObject(K)){M=K;if(M<0||M>=J.groupItems.length){return this}K=J.groupItems[M]}K&&this.container.data("item.wijlightbox",K);this._groupMode()&&this._preload();if(A.isFunction(L)){F=L;L=undefined}if(!F){F=I._onAfterShow}var G={index:M,item:K};if(I._trigger("beforeShow",null,G)===false){return this}this.container.data("showing.wijlightbox",true);var C=function(){A.isFunction(F)&&F.apply(I);I.container.data("showing.wijlightbox",false);I.container.dequeue("showqueue");I.container.clearQueue("showqueue")};I._refreshCounter(M);var E=this.container.data("player.wijlightbox"),B,D=function(){I.container.data("playerwidth.wijlightbox",B.width);I.container.data("playerheight.wijlightbox",B.height);var P=A.extend({},I._defaults.transAnimation,J.transAnimation);if(J.activeIndex===M||P.animated==="none"||P.duration<=0||!I.isOpen()){J.activeIndex=M;E&&E.remove();B.appendTo(I.content);C();return}J.cookie&&I._cookie(J.activeIndex,J.cookie);if(P.animated==="slide"){L=L===undefined?M>J.activeIndex:L;I._slideTo(E,B,P,L,C);J.activeIndex=M}else{J.activeIndex=M;var N=function(){if(B){B.appendTo(I.content,true);B.fadeIn(P.duration,C)}};A.browser.msie&&I.frame.trigger("mouseleave");var O=function(){E&&E.remove();if(J.autoSize&&!I.isFullSize()){I._resize(N)}else{N()}};if(E){E.fadeOut(P.duration*0.4,O)}else{O()}}};B=this._createPlayer(K,D);return this},next:function(){var B=this.options;if(!this._groupMode()){return false}var C=B.activeIndex+1;if(B.loop){C=C%B.groupItems.length}if(C<B.groupItems.length){this._show(C,true);return true}return false},back:function(){var B=this.options;if(!this._groupMode()){return false}var C=B.activeIndex-1;if(B.loop){C=C<0?B.groupItems.length-1:C}if(C>=0){this._show(C,false);return true}return false},isPlaying:function(){return !!this.container.data("playing.wijlightbox")},_startTimer:function(){if(!this.isPlaying()||!this._groupMode()){return}var B=this.options,D=this;if(B.showTimer===true){!this.timerMeter&&this._createTimerBar();var C=this.timerBar.width();D.timerMeter.width("0");D.timerMeter.animate({width:C},B.delay,function(){D.isPlaying()&&!D.next()&&D.stop()})}else{window.setTimeout(function(){D.isPlaying()&&!D.next()&&D.stop()},B.delay)}},play:function(){if(!this._groupMode()){return false}!this.container.data("playing.wijlightbox")&&this.container.data("playing.wijlightbox",true);this._refreshCtrlButtons();this._hideNavButtons();this._startTimer()},stop:function(){this.container.removeData("playing.wijlightbox");this._refreshCtrlButtons();this._removeTimerBar()},_size:function(K,E){var J=this.options,D=this,H=J.width,G=J.height,I=this.container.data("playerwidth.wijlightbox")||H,B=this.container.data("playerheight.wijlightbox")||G,C=B/I;if(typeof K==="boolean"){E=K}else{if(A.isPlainObject(K)&&"width" in K&&"height" in K){H=K.width;G=K.height}else{var F=this.container.data("player.wijlightbox");if(J.autoSize&&F&&F.name==="img"){if(I>H){I=H;B=Math.round(H*C)}if(B>G){B=G;I=Math.round(G/C)}}H=I;G=B;if(E){return{width:H,height:G}}}}this.frame.width(H).height(G);this.container.width(this.frame.outerWidth(true))},_position:function(){var G=this.options,B=this,F=[],D=[0,0],C,E=G.position;if(E){if(typeof E==="string"||typeof E==="object"&&"0" in E){F=E.split?E.split(" "):[E[0],E[1]];if(F.length===1){F[1]=F[0]}A.each(["left","top"],function(I,H){if(+F[I]===F[I]){D[I]=F[I];F[I]=H}});E={my:F.join(" "),at:F.join(" "),offset:D.join(" ")}}E=A.extend({},G.position,E)}C=this.container.is(":visible");!C&&this.container.show();this.container.css({top:0,left:0}).position(E);!C&&this.container.hide()},_getRelRect:function(B){var C;if(B){if(A.isPlainObject(B)&&"left" in B&&"top" in B&&"width" in B&&"height" in B){C=A.merge({},B)}else{B=A(B)}if(B.jquery&&B.length){C=A.extend({},B.offset(),{width:B.width(),height:B.height()})}}return C},close:function(F){var B=this.options,E=this;if(!this.isOpen()){return}var G={rel:F};if(false===this._trigger("beforeClose",null,G)){return}F=G.rel;if(!F&&this._groupMode()){F=B.groupItems[B.activeIndex].img}this.container.data("moving.wijlightbox",true);this._hideAccessories(false);this._hideWaiting();this._hideOverlay();this.stop();var D=function(){E._removePlayer();E.container.hide();E._trigger("close");E.container.unbind("keypress.wijlightbox");E.container.removeData("open.wijlightbox");E.container.removeData("rect.wijlightbox");E.container.removeData("moving.wijlightbox");A(document).unbind("keydown.wijlightbox").unbind("click.wijlightbox")},C=this._getRelRect(F);if(!C){if(this.container.data("rect.wijlightbox")){C=this.container.data("rect.wijlightbox")}}this._removeText();if(C){this._moveTo(C,{animated:"sync",duration:200},D);return}D.call();return this},isOpen:function(){return !!this.container.data("open.wijlightbox")},open:function(B,F){if(this.isOpen()){return}var E=this.options,D=this;if(this.isFullSize()){this.toolBox&&this.toolBox.css({top:"",right:""})}var C=function(){E.modal&&D._showOverlay();if(E.showControlsOnHover){this._hideAccessories(false)}else{this._showAccessories(false)}var G=D._getRelRect(B);D.container.css("opacity",0);D.container.show();D._size();D._position();D.container.data("open.wijlightbox",true);if(B&&G){D.container.data("rect.wijlightbox",G);D._moveFrom(G,{animated:"sync"})}else{var H=A.extend({},D._defaults.transAnimation,E.transAnimation);if(H.animated==="fade"){D.container.hide();D.container.fadeIn(H.duration,function(){D._createText()})}else{D._createText()}this.container.data("moving.wijlightbox",false)}A(document).bind("keydown.wijlightbox",A.proxy(D,"_keyDownHandler")).bind("click.wijlightbox",function(J){var I=J.target||J.srcElement;if(D.isOpen()&&!!E.closeOnOuterClick){I!==D.container.get(0)&&A(I).parents().index(D.container)<0&&D.close()}});E.autoPlay&&this.play();D._refreshNavButtons();D._trigger("open")};this.container.data("moving.wijlightbox",true);this._show(F,true,C);return this},_getWinRect:function(){var B=A(window);return A.extend({width:B.width(),height:B.height()},B.offset()||{left:2,top:2})},_resizeHandler:function(){var B=this.options,C=this;C._removeText();C._size(C._getWinRect());C._createText()},isFullSize:function(){return !!this.container.data("fullsize.wijlightbox")},toggleFullSize:function(){var F=this.options,D=this;if(!D.isOpen()){return}var B=A(window);if(this.isFullSize()){D.toolBox&&D.toolBox.css({top:"",right:""});this.container.data("fullsize.wijlightbox",false);B.unbind("resize.wijlightbox",A.proxy(this,"_resizeHandler"));D._resize()}else{this.container.data("fullsize.wijlightbox",true);B.bind("resize.wijlightbox",A.proxy(this,"_resizeHandler"));var E=D._getWinRect(),C=this.frame.borderSize();E.width-=C.width;E.height-=C.height;D._removeText();D._moveTo(E,{animated:"sync"},function(){D.toolBox&&D.toolBox.css({top:"2px",right:"4px"});D.frame.width(E.width);D.container.width(D.frame.outerWidth());D._createText()})}this._refreshDialogButtons()},_getExt:function(F){var D,C=/[0-9a-z]+$/i,B=F.indexOf("?");if(B>-1){F=F.substring(0,B)}var E=F.match(C);if(E){D=E[0].toLowerCase()}return D},_getPlayerName:function(G){if(G.indexOf("#")===0||G.indexOf("#")>0&&G.indexOf(document.location.href)===0){return"inline"}var D=["bmp","gif","jpg","jpeg","png"],H=["swf"],C=["flv","m4v"],B=["dv","mov","moov","movie","mp4","avi","mpg","mpeg"],E=["asf","avi","mpg","mpeg","wm","wmv"],F=this._getExt(G);if(F){if(A.inArray(F,D)>=0){return"img"}if(A.inArray(F,H)>=0){return"swf"}if(A.inArray(F,C)>=0){return"flv"}if(A.inArray(F,E)>=0){return"wmp"}if(A.inArray(F,B)>=0){return"qt"}}return"iframe"},_removePlayer:function(){var B=this.container.data("player.wijlightbox");if(B){B.remove();this.container.data("player.wijlightbox",null)}},_createPlayer:function(D,H,J){var F=D.player;if(!A.isFunction(A.wijmo.wijlightbox[F])){throw"unknown player "+F}var G=this,B=false,C=function(){B=true;this._hideWaiting();A.isFunction(H)&&window.setTimeout(function(){H.apply(G)},1)},E=function(){this._hideWaiting();A.isFunction(J)&&J.apply(G)},I=new A.wijmo.wijlightbox[F](this,D,C,E);this.container.data("player.wijlightbox",I);window.setTimeout(function(){B===false&&G._showWaiting()},200);return I}});A.extend(A.wijmo.wijlightbox,{img:function(F,E,D,C){this.name="img";this.lightbox=F;this.item=E;this.url=this.lightbox._getUrl(E);var G=this,B=A("<img></img>").css({width:"auto",height:"auto",display:"none"}).appendTo(document.body).bind({load:function(){var H=A(this);G.width=E.width?parseInt(E.width,10):H.width();G.height=E.height?parseInt(E.height,10):H.height();H.remove();D&&A.isFunction(D)&&D.apply(F)},error:function(){A(this).remove();C&&A.isFunction(C)&&C.apply(F)}}).attr("src",this.url)},swf:function(E,D,B){this.name="swf";var C=E.options;this.id="flashhost";this.lightbox=E;this.item=D;this.url=this.lightbox._getUrl(D);this.width=D.width?parseInt(D.width,10):C.width;this.height=D.height?parseInt(D.height,10):C.height;B&&A.isFunction(B)&&B.apply(E)},iframe:function(D,C,B){this.name="swf";var E=D.options;this.lightbox=D;this.item=C;this.url=this.lightbox._getUrl(C);if(C.width){this.width=parseInt(C.width,10)}if(C.height){this.height=parseInt(C.height,10)}this.$iframe=A("<iframe></iframe>").addClass("wijmo-wijlightbox-iframe").attr({frameborder:"0",marginwidth:"0",marginheight:"0",scrolling:"auto",allowtransparency:"true"}).hide().appendTo(D.content).bind("load",function(){B&&A.isFunction(B)&&B.apply(D)}).attr("src",this.url)},inline:function(E,D,B){this.name="inline";var F=E.options;this.lightbox=E;this.item=D;this.width=D.width?parseInt(D.width,10):F.width;if(D.height){this.height=parseInt(D.height,10)}else{var C=A(this.item.href).clone().show().append('<br clear="all" />').wrap('<div class="wijmo-wijlightbox ui-widget"><div class="wijmo-wijlightbox-frame ui-widget-content ui-corner-all ui-helper-clearfix"><div class="wijmo-wijlightbox-frame ui-widget-content ui-corner-all ui-helper-clearfix"><div class="wijmo-wijlightbox-content"> </div></div></div></div>').appendTo(document.body).width(this.width);this.height=C.outerHeight(true)+10;C.unwrap();C.remove()}B&&A.isFunction(B)&&B.apply(E)},flv:function(E,D,B){this.name="flv";var C=E.options;this.id="flvhost";this.lightbox=E;this.item=D;this.url=this.lightbox._getUrl(D);var F=20;this.width=D.width?parseInt(D.width,10):C.width;this.height=D.height?parseInt(D.height,10):C.height;if(C.showMovieControls){this.height+=F}B&&A.isFunction(B)&&B.apply(E)},wmp:function(E,D,B){this.name="wmp";var C=E.options;this.id="wmphost";this.lightbox=E;this.item=D;this.url=this.lightbox._getUrl(D);var F=A.browser.msie?70:45;this.width=D.width?parseInt(D.width,10):C.width;this.height=D.height?parseInt(D.height,10):C.height;if(C.showMovieControls){this.height+=F}B&&A.isFunction(B)&&B.apply(E)},qt:function(E,D,B){this.name="qt";var C=E.options;this.id="qthost";this.lightbox=E;this.item=D;this.url=this.lightbox._getUrl(D);var F=16;this.width=D.width?parseInt(D.width,10):C.width;this.height=D.height?parseInt(D.height,10):C.height;if(C.showMovieControls){this.height+=F}B&&A.isFunction(B)&&B.apply(E)}});A.extend(A.wijmo.wijlightbox.img.prototype,{appendTo:function(B,C){this.$element=A("<img></img>").addClass("wijmo-wijlightbox-image").attr("src",this.url);C&&this.$element.hide();this.$element.appendTo(B)},remove:function(){this.$element&&this.$element.remove()},fadeOut:function(B,C){this.$element&&this.$element.fadeOut(B,C)},fadeIn:function(B,C){this.$element&&this.$element.fadeIn(B,C)},getElement:function(){return this.$element}});A.extend(A.wijmo.wijlightbox.swf.prototype,{appendTo:function(C){this.$container=A("<div/>").css({width:"100%",height:"100%",overflow:"hidden"}).attr("id",this.id).appendTo(C);var E=this.lightbox.options,D=E.flashInstall,G=E.flashVersion,F=E.flashVars,B=E.flashParams;S.flash.embedSWF(this.item.href,this.id,"100%","100%",G,D,F,B)},remove:function(){S.flash.expressInstallCallback();S.flash.removeSWF(this.id);this.$container.remove()},fadeOut:function(B,C){this.$container&&this.$container.fadeOut(B,C)},fadeIn:function(B,C){this.$container&&this.$container.fadeIn(B,C)},getElement:function(){return this.$container}});A.extend(A.wijmo.wijlightbox.iframe.prototype,{appendTo:function(B,C){!C&&this.$iframe.show()},remove:function(){this.$iframe&&this.$iframe.remove()},fadeOut:function(B,C){this.$iframe&&this.$iframe.fadeOut(B,C)},fadeIn:function(B,C){this.$iframe&&this.$iframe.fadeIn(B,C)},getElement:function(){return this.$iframe}});A.extend(A.wijmo.wijlightbox.inline.prototype,{appendTo:function(B,C){this.$element=A(this.item.href).clone().appendTo(B);!C&&this.$element.show()},remove:function(){this.$element&&this.$element.remove()},fadeOut:function(B,C){this.$element&&this.$element.fadeOut(B,C)},fadeIn:function(B,C){this.$element&&this.$element.fadeIn(B,C)},getElement:function(){return this.$element}});A.extend(A.wijmo.wijlightbox.flv.prototype,{appendTo:function(H){this.$container=A("<div/>").css({width:"100%",height:"100%",overflow:"hidden"}).attr("id",this.id).appendTo(H);var F=this.lightbox.options,J="100%",G="100%",C=F.flvPlayer,I=F.flashInstall,D=F.flashVersion,B=A.extend({file:this.url,width:J,height:G,autostart:F.autoPlayMovies?"true":"false",controlbar:F.showMovieControls?"bottom":"none",backcolor:"0x000000",frontcolor:"0xCCCCCC",lightcolor:"0x557722"},F.flashVars),E=A.extend({autostart:F.autoPlayMovies?"true":"false",allowscriptaccess:"always"},F.flashParams);S.flash.embedSWF(C,this.id,J,G,D,I,B,E)},remove:function(){S.flash.expressInstallCallback();S.flash.removeSWF(this.id);this.$container.remove()},fadeOut:function(B,C){this.$container&&this.$container.fadeOut(B,C)},fadeIn:function(B,C){this.$container&&this.$container.fadeIn(B,C)},getElement:function(){return this.$container}});A.extend(A.wijmo.wijlightbox.wmp.prototype,{appendTo:function(F){this.$container=A("<div/>").css({width:"100%",height:"100%",overflow:"hidden"}).appendTo(F);var B=this.lightbox.options,D='<object id="'+this.id+'" name="'+this.id+'" height="'+this.height+'" width="'+this.width+'"',E={autostart:B.autoPlayMovies?1:0},C;if(A.browser.msie){D+=' classid="clsid:6BF52A52-394A-11d3-B153-00C04F79FAA6"';E.url=this.url;E.uimode=B.showMovieControls?"full":"none"}else{D+=' type="video/x-ms-wmv"';D+=' data="'+this.url+'"';E.showcontrols=B.showMovieControls?1:0}D+=">";for(C in E){D+='<param name="'+C+'" value="'+E[C]+'">'}D+="</object>";this.$container.html(D)},remove:function(){if(A.browser.msie){try{window[this.id].controls.stop();window[this.id].URL="movie"+now()+".wmv";window[this.id]=function(){}}catch(B){}}this.$container.remove()},fadeOut:function(B,C){this.$container&&this.$container.fadeOut(B,C)},fadeIn:function(B,C){this.$container&&this.$container.fadeIn(B,C)},getElement:function(){return this.$container}});A.extend(A.wijmo.wijlightbox.qt.prototype,{appendTo:function(D){this.$container=A("<div/>").css({width:"100%",height:"100%",overflow:"hidden"}).appendTo(D);var I=this.lightbox.options,E=I.autoPlayMovies?"true":"false",C=I.showMovieControls?"true":"false",G="<object",F={id:this.id,name:this.id,width:this.width,height:this.height,kioskmode:"true"},J,B;if(A.browser.msie){F.classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B";F.codebase="http://www.apple.com/qtactivex/qtplugin.cab#version=6,0,2,0"}else{F.type="video/quicktime";F.data=this.url}for(J in F){G+=" "+J+'="'+F[J]+'"'}G+=">";var H={src:this.url,scale:"aspect",controller:C,autoplay:E};for(B in H){G+='<param name="'+B+'" value="'+H[B]+'">'}G+="</object>";this.$container.html(G)},remove:function(){try{document[this.id].Stop()}catch(B){}this.$container.remove()},fadeOut:function(B,C){this.$container&&this.$container.fadeOut(B,C)},fadeIn:function(B,C){this.$container&&this.$container.fadeIn(B,C)},getElement:function(){return this.$container}});A.extend(A.wijmo.wijlightbox,{overlay:function(B,D){this.mask=A("<div></div>").addClass("ui-widget-overlay wijmo-wijlightbox-overlay"+(D?" wijmo-wijlightbox-waitingoverlay":"")).appendTo(document.body).css({width:this.width(),height:this.height()});A.fn.bgiframe&&this.mask.bgiframe();if(D){this.mask.css("z-index",this.zIndex);var C=A("<div></div>").addClass("wijmo-wijlightbox-waiting").css("z-index",this.zIndex+1).appendTo(this.mask);C.css({left:(this.mask.width()-C.width())/2,top:(this.mask.height()-C.height())/2})}A(window).bind("resize.wijlightbox-overlay",A.proxy(this,"resize"));window.setTimeout(function(){this.mask&&A(document).bind(A.wijmo.wijlightbox.overlay.events,function(E){if(A(E.target).zIndex()<A.wijmo.wijlightbox.overlay.zIndex){return false}})},1)}});A.extend(A.wijmo.wijlightbox.overlay.prototype,{mask:null,zIndex:1000,events:A.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(B){return B+".wijlightbox-overlay"}).join(" "),close:function(){A([document,window]).unbind(".wijlightbox-overlay");this.mask.remove();this.mask=undefined},height:function(){var B,C;if(A.browser.msie&&A.browser.version<7){B=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight);C=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight);return B<C?A(window).height():B}else{return A(document).height()}},width:function(){var B,C;if(A.browser.msie&&A.browser.version<7){B=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth);C=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth);return B<C?A(window).width():B}else{return A(document).width()}},resize:function(){this.mask&&this.mask.css({width:this.width(),height:this.height()})}})})(jQuery);(function(A){A.widget("wijmo.wijcompositechart",A.wijmo.wijchartcore,{options:{stacked:false,clusterOverlap:0,clusterWidth:85,clusterRadius:0,clusterSpacing:0,seriesList:[],animation:{enabled:true,duration:400,easing:">"},seriesTransition:{enabled:true,duration:400,easing:">"},mouseDown:null,mouseUp:null,mouseOver:null,mouseOut:null,mouseMove:null,click:null},_create:function(){var C=this,D=C.options,B=C._getDefFill();A.each(D.seriesList,function(E,F){if(F.type==="bar"){A.extend(true,D.axis,{x:{compass:"west"},y:{compass:"south"}});return true}else{if(F.type==="pie"&&F.pieSeriesList){F.data=F.pieSeriesList}}});A.extend(true,{compass:"east"},D.hint);A.each(D.seriesStyles,function(E,F){if(!F.fill){F.fill=B[E]}});A.wijmo.wijchartcore.prototype._create.apply(C,arguments);C.chartElement.addClass("wijmo-wijcompositechart")},destroy:function(){var C=this,E=C.chartElement,B=E.data("fields"),D=B&&B.bars;E.removeClass("wijmo-wijcompositechart");A.wijmo.wijchartcore.prototype.destroy.apply(this,arguments);D&&D.length&&A.each(D,function(F,G){G=null});E.data("fields",null)},_isBarChart:function(){return true},getElement:function(G,D,E){var B=this.chartElement,C=B.data("fields"),F=C.chartElements;switch(G){case"bar":case"column":return F.bars[D];case"line":return F.paths[D];case"linemarkers":return F.markersSet[D];case"pie":return this._getPie(F,D,E)}return null},_getPie:function(D,C,B){if(B!==undefined){return D["sectors"+B]?D["sectors"+B][C]:null}else{var E=[];A.each(D,function(G,F){/sectors/.test(G)&&G!=="sectors"&&A.each(F,function(H,I){E.push(I)})});if(E.length===0){E=D.sectors}return E[C]}},_isSeriesDataEmpty:function(){var C=this,B=C.options.seriesList;if(!B||B.length===0){return true}A.each(B,function(D,E){return E.type==="pie"&&(!E.data||!E.label||E.label.length===0)?true:!E.data||(!E.data.x||!E.data.y)&&!E.data.xy?true:void 0});return false},_showSerieEles:function(B){var F=B.type,D=B.eles,C=this.options.showChartLabels,E;switch(F){case"pie":if(D.sector){D.sector.show();D.sector.shadow&&D.sector.shadow.show();D.sector.tracker&&D.sector.tracker.show()}D.label&&D.label.show();break;case"line":case"spline":case"bezier":D.markers&&A.each(D.markers,function(G,H){E=A(H.node).data("wijchartDataObj");if(E&&E.lineSeries&&E.lineSeries.markers){if(!E.lineSeries.markers.visible){return true}}H.show()});D.dcl&&A.each(D.dcl,function(G,H){C&&H.show()});if(D.path){E=A(D.path.node).data("wijchartDataObj");if(E.visible||E.display==="show"){D.path.show();D.path.shadow&&D.path.shadow.show();D.path.area&&D.path.area.show();D.path.tracker&&D.path.tracker.hide()}}break;case"bar":case"column":A.each(D,function(G,H){if(H.bar){H.bar.show();H.bar.shadow&&H.bar.shadow.show();H.bar.tracker&&H.bar.tracker.show()}H.dcl&&H.dcl.show();H.animatedBar&&H.animatedBar.show()});break;case"scatter":A.each(D,function(G,H){H.show()})}},_hideSerieEles:function(D){var B=D.type,C=D.eles;switch(B){case"pie":if(C.sector){C.sector.hide();C.sector.shadow&&C.sector.shadow.hide();C.sector.tracker&&C.sector.tracker.hide()}C.label&&C.label.hide();break;case"line":case"spline":case"bezier":C.markers&&A.each(C.markers,function(E,F){F.hide()});C.dcl&&A.each(C.dcl,function(E,F){F.hide()});if(C.path){C.path.hide();C.path.shadow&&C.path.shadow.hide();C.path.area&&C.path.area.hide();C.path.tracker&&C.path.tracker.hide()}break;case"bar":case"column":A.each(C,function(E,F){if(F.bar){F.bar.hide();F.bar.shadow&&F.bar.shadow.hide();F.bar.tracker&&F.bar.tracker.hide()}F.dcl&&F.dcl.hide();F.animatedBar&&F.animatedBar.hide()});break;case"scatter":A.each(C,function(E,F){F.hide()})}},_paintTooltip:function(){var D=this,B=D.chartElement,C=B.data("fields"),E=C.ctracers||[];A.wijmo.wijchartcore.prototype._paintTooltip.apply(this,arguments);D.tooltip&&A.each(E,function(F,G){if(G.trackers&&G.trackers.length){F===0&&D.tooltip.setOptions({relatedElement:G.trackers[0]})}})},_paintPlotArea:function(){var L=this,M=L.options,O="seriesList",N="seriesStyles",B="seriesHoverStyles",C=M[N],H=M[B],G=L.canvasBounds,K={},F=0,E={canvas:L.canvas,tooltip:L.tooltip,bounds:G,widgetName:L.widgetName,seriesTransition:M.seriesTransition,showChartLabels:M.showChartLabels,textStyle:M.textStyle,chartLabelStyle:M.chartLabelStyle,chartLabelFormatString:M.chartLabelFormatString,shadow:M.shadow,hint:M.hint,animation:M.animation,disabled:M.disabled,mouseDown:function(Q,R){L._trigger("mouseDown",Q,R)},mouseUp:function(Q,R){L._trigger("mouseUp",Q,R)},mouseOver:function(Q,R){L._trigger("mouseOver",Q,R)},mouseOut:function(Q,R){L._trigger("mouseOut",Q,R)},mouseMove:function(Q,R){L._trigger("mouseMove",Q,R)},click:function(Q,R){L._trigger("click",Q,R)}},P,I,D,J;A.each(M[O],function(Q,U){var R=U.type,X={},T=R,Y={},V=C[F],W=H[F];if(!R||R.length===0){return true}if(T==="spline"||T==="bezier"){T="line"}X=K[T];if(!X){if(R==="pie"){X=[]}else{X={}}K[T]=X;if(U.hint){X.hint=U.hint;if(!M.hint.content){M.hint.content=U.hint.content}if(!M.hint.title){M.hint.title=U.hint.title}}}if(R==="pie"){A.each(U.data,function(Z,c){V=C[F];W=H[F];if(!Y[O]){Y[O]=[]}if(!Y[N]){Y[N]=[]}if(!Y[B]){Y[B]=[]}c.pieID=Q+1;Y[O].push(c);Y[N].push(V);Y[B].push(W);F++});Y.radius=U.radius;Y.center=U.center;Y.label=U.label;X.push(Y);return true}else{if(R==="column"){X.horizontal=false}else{if(R==="bar"){X.horizontal=true}else{if(R==="spline"){U.fitType="spline"}else{if(R==="bezier"){U.fitType="bezier"}}}}}if(R==="line"||R==="spline"||R==="bezier"){delete V.fill;delete W.fill}if(!X[O]){X[O]=[]}if(!X[N]){X[N]=[]}if(!X[B]){X[B]=[]}X[O].push(U);X[N].push(V);X[B].push(W);F++});A.each(K,function(R,Q){switch(R){case"pie":A.each(Q,function(T,X){var U=X.center,W=X.radius||50,V=U?{startX:U.x-W,startY:U.y-W,endX:U.x+W,endY:U.y+W}:{startX:G.startX+10,startY:G.startY+10,endX:G.startX+10+2*W,endY:G.startY+10+2*W};P=A.extend(true,{},E,{bounds:V,radius:W},X);L.chartElement.wijpie(P)});break;case"bar":case"column":P=A.extend(true,{},E,{stacked:M.stacked,axis:M.axis,clusterOverlap:M.clusterOverlap,clusterWidth:M.clusterWidth,clusterSpacing:M.clusterSpacing,is100Percent:M.is100Percent,clusterRadius:M.clusterRadius,isYTime:L.axisInfo.y.isTime,isXTime:L.axisInfo.x.isTime},Q);L.chartElement.wijbar(P);break;case"line":case"spline":case"bezier":if(!L.aniPathsAttr){L.aniPathsAttr=[]}P=A.extend(true,{},E,{axis:M.axis,isXTime:L.axisInfo.x.isTime,isYTime:L.axisInfo.y.isTime,aniPathsAttr:L.aniPathsAttr,chartLabelEles:L.chartLabelEles},Q);L.chartElement.wijline(P);break;case"scatter":P=A.extend(true,{},E,{axis:M.axis,isXTime:L.axisInfo.x.isTime,isYTime:L.axisInfo.y.isTime,zoomOnHover:M.zoomOnHover},Q);L.chartElement.wijscatter(P)}D=L.chartElement.data("fields");I=D.seriesEles;A.each(I,function(T,U){L.seriesEles.push({eles:U,type:R})});J=D.ctracers||[];J.push({trackers:D.trackers,type:R});D.ctracers=J});L.chartElement.data("fields").seriesEles=null;L._bindtooltip()},_bindtooltip:function(){var C=this,D=C.widgetName,B=C.chartElement.data("fields");A.each(B.ctracers,function(E,F){F.trackers&&F.trackers.toFront()});C.chartElement.delegate(".linetracker, .bartracker, .pietracker, .wijscatterchart","mouseover."+D,A.proxy(C._tooltipMouseOver,C));C.chartElement.delegate(".linetracker, .bartracker, .pietracker, .wijscatterchart","mouseout."+D,A.proxy(C._tooltipMouseOut,C));C.chartElement.delegate(".linetracker, .bartracker, .pietracker, .wijscatterchart","mousemove."+D,A.proxy(C._tooltipMouseMove,C))},_tooltipMouseOver:function(L){var N=L.target,J=this,G=J.tooltip,I=J.options.hint,B=null,H=I.title,D=I.content,C=A.isFunction(H),F=A.isFunction(D),K,M,E;E=A(J.canvas.canvas.parentNode).offset();if(A(N).data("owner")){N=A(N).data("owner")}N=A(N);K=N.data("wijchartDataObj");if(J.tooltip){B=G.getOptions();if(C||F){if(C){B.title=A.proxy(H,K)}if(F){B.content=A.proxy(D,K)}}if(K.type==="line"){if(K.path.removed){return}if(J.hoverLine!==K){J.isNewLine=true;if(J.hoverLine){if(!J.hoverLine.path.removed){J.hoverLine.path.wijAttr(J.hoverLine.lineStyle);if(J.hoverPoint&&!J.hoverPoint.isSymbol){J.hoverPoint.marker.wijAttr(J.hoverPoint.markerStyle);J.hoverPoint.marker.transform("s1")}}}K.lineHoverStyle&&K.path.wijAttr(K.lineHoverStyle);J.hoverLine=K;J.hoverPoint=null}}else{if(K.type==="scatter"){J._clearHoverState();M=K.dot.getBBox();B.style.stroke=N.attr("stroke");J.tooltip.showAt({x:M.x+M.width/2,y:M.y},L)}else{J._clearHoverState();B.style.stroke=N.attr("stroke");J.tooltip.showAt({x:L.pageX-E.left,y:L.pageY-E.top},L)}}}},_tooltipMouseMove:function(E){var C=this,D=E.target,B,F=A(C.canvas.canvas.parentNode).offset();if(A(D).data("owner")){D=A(D).data("owner")}D=A(D);B=D.data("wijchartDataObj");if(C.tooltip){B.type!=="line"&&B.type!=="scatter"&&C.tooltip.showAt({x:E.pageX-F.left,y:E.pageY-F.top},E)}},_tooltipMouseOut:function(C){var B=this,D=C.target,E;if(A(D).data("owner")){D=A(D).data("owner")}D=A(D);E=D.data("wijchartDataObj");if(E.type!=="line"){B.tooltip&&B.tooltip.hide()}},_mouseMoveInsidePlotArea:function(F,C){var O=this,Q=O.tooltip,I=O.options.hint,R,T=0,M,U,G,H,B=null,P=null,J=null,E=I.title,D=I.content,K=A.isFunction(E),N=A.isFunction(D),L=0;if(Q){J=Q.getOptions()}if(O.hoverLine){if(O.isNewLine){I.enable&&Q&&Q.hide();O.isNewLine=false}R=O.hoverLine.lineMarkers;T=-1;M={x:0,y:0};A.each(R,function(Z,W){if(W.removed){return true}var Y=W.wijGetBBox(),V=Y.x+Y.width/2,X=Math.abs(V-C.left);if(Z===0||X<L){L=X;T=Z;M={x:V,y:Y.y+Y.height/2}}});if(O.hoverPoint&&O.hoverPoint.index===T){return}if(T>-1){if(R[T].removed){return}U=A(R[T].node).data("wijchartDataObj");if(U){if(O.hoverPoint&&!O.hoverPoint.isSymbol){if(!O.hoverPoint.removed){O.hoverPoint.marker.wijAttr(O.hoverPoint.markerStyle);O.hoverPoint.marker.transform("s1")}}if(!U.isSymbol){!U.marker.removed&&U.marker.wijAttr(U.markerHoverStyle)}}O.hoverPoint=U}if(Q){P=O.hoverPoint;G=P.valX;H=P.valY;if(K||N){if(K){J.title=function(){var W={pointIndex:T,lineIndex:P.lineSeries.index,x:G,y:H,label:P.lineSeries.label,data:P,fmt:E},V=A.proxy(W.fmt,W),X=V();return X}}if(N){J.content=function(){var W={pointIndex:T,lineIndex:P.lineSeries.index,x:G,y:H,label:P.lineSeries.label,data:P,fmt:D},X=A.proxy(W.fmt,W),V=X();return V}}}B=A.extend({stroke:O.hoverLine.path.attr("stroke")},I.style);J.style.stroke=B.stroke;Q.showAt(M)}}A.wijmo.wijchartcore.prototype._mouseMoveInsidePlotArea.apply(O,arguments)},_mouseMoveOutsidePlotArea:function(){var B=this;B._clearHoverState();A.wijmo.wijchartcore.prototype._mouseMoveOutsidePlotArea.apply(B,arguments)},_clearHoverState:function(){var D=this,B=D.tooltip,C=D.options.hint;C.enable&&B&&B.hide();if(D.hoverLine){if(!D.hoverLine.path.removed){D.hoverLine.path.wijAttr(D.hoverLine.lineStyle);if(D.hoverPoint&&!D.hoverPoint.isSymbol){D.hoverPoint.marker.wijAttr(D.hoverPoint.markerStyle);D.hoverPoint.marker.transform("s1")}}}D.hoverLine=null;D.hoverPoint=null},_getTooltipText:function(){return""},_calculateParameters:function(C,B){var D=this,G=false,F,E;A.wijmo.wijchartcore.prototype._calculateParameters.apply(D,arguments);A.each(D.options.seriesList,function(H,I){if(I.type==="column"||I.type==="bar"){G=true;return false}});if(!G){return}if(C.id==="x"){F=B.unitMinor;E=D._getBarAdjustment(C);if(E===0){E=F}else{if(F<E&&F!==0){E=Math.floor(E/F)*F}}C.min-=E;C.max+=E;D._calculateMajorMinor(B,C)}},_getBarAdjustment:function(C){var E=0,B=this.options,G=C.max,F=C.min,D=0;A.each(B.seriesList,function(H,I){if(I.type==="pie"){return true}D=I.data.x.length;if(E<D){E=D}});if(E>1){return(G-F)/E*B.clusterWidth*0.0125}else{if(E===1){if(F===0&&G===1){F=-1;C.min=F}return(G-F)*0.0125}else{return 0}}}})})(jQuery);(function(A){A.widget("wijmo.wijdatepager",{options:{culture:"",firstDayOfWeek:0,selectedDate:new Date,viewType:"day"},_setOption:function(C,B){A.Widget.prototype._setOption.apply(this,arguments);switch(C){case"selectedDate":this.options.selectedDate=B;this._initBackground();break;case"disabled":if(B){this._disable()}else{this._enable()}break;case"viewType":this.options.viewType=B;this._initBackground()}return this},_disable:function(){this.element.addClass("ui-state-disabled");this.element.find(".wijmo-wijdatepager-decrement").button("option","disabled",true);this.element.find(".wijmo-wijdatepager-increment").button("option","disabled",true)},_enable:function(){this.element.removeClass("ui-state-disabled");this.element.find(".wijmo-wijdatepager-decrement").button("option","disabled",false);this.element.find(".wijmo-wijdatepager-increment").button("option","disabled",false)},_create:function(){var B=this.options,C;if(!B.selectedDate){B.selectedDate=new Date}this._dtpagernamespacekey="dtpager"+ +new Date;this.element.addClass("wijmo-wijdatepager ui-widget ui-helper-clearfix");C=A.proxy(this.invalidate,this);A(window).bind("resize."+this._dtpagernamespacekey,C);this.element.disableSelection();this.element.append(A('<a class="wijmo-wijdatepager-decrement"><span>left</span></a>')).append('<div class="wijmo-wijdatepager-container ui-widget-content"><div class="wijmo-wijdatepager-pages"></div></div><a class="wijmo-wijdatepager-increment"><span>right</span></a>');A.Widget.prototype._create.apply(this,arguments);this.element.find(".wijmo-wijdatepager-decrement").button({icons:{primary:"ui-icon-triangle-1-w"},text:false}).click(A.proxy(this.goLeft,this));this.element.find(".wijmo-wijdatepager-increment").button({icons:{primary:"ui-icon-triangle-1-e"},text:false}).click(A.proxy(this.goRight,this));this._initBackground();B.disabled&&this._disable()},destroy:function(){this.element.removeClass("wijmo-wijdatepager");A(window).unbind("."+this._dtpagernamespacekey)},refresh:function(){this.invalidate()},invalidate:function(){var B=A(this.element.find(".wijmo-wijdatepager-pagelabel")[this._index]),G=this.element.find(".wijmo-wijdatepager-container"),D=this.element.find(".wijmo-wijdatepager-decrement"),H=this.element.find(".wijmo-wijdatepager-increment"),F=this.element.innerWidth(),C=D.is(":visible")?D.outerWidth(true):0,E=H.is(":visible")?H.outerWidth(true):0;this.element.find(".wijmo-wijdatepager-pagelabel.ui-state-active").removeClass("ui-state-active");B.addClass("ui-state-active");G.css("left",C);this.element.removeClass("wijmo-wijdatepager-width-smallest wijmo-wijdatepager-width-small wijmo-wijdatepager-width-medium wijmo-wijdatepager-width-normal");if(F<300){this.element.addClass("wijmo-wijdatepager-width-smallest")}else{if(F<475){this.element.addClass("wijmo-wijdatepager-width-small")}else{if(F<600){this.element.addClass("wijmo-wijdatepager-width-medium")}else{this.element.addClass("wijmo-wijdatepager-width-normal")}}}G.outerWidth(F-C-E)},goLeft:function(){var B=this.options;if(B.disabled){return}this._setSelectedIndex(this._index-1,true)},goRight:function(){var B=this.options;if(B.disabled){return}this._setSelectedIndex(this._index+1)},_getCulture:function(B){return Globalize.findClosestCulture(B||this.options.culture)},_isRTL:function(){return !!this._getCulture().isRTL},_initBackground:function(C,F){var J,L,I,H,K,E,D=this.options,G=D.viewType.toLowerCase();if(this._isInAnimate){return}this._index=0;this._datesDef=this._getDatesDefinition();this._min=0;this._max=this._datesDef.length-1;J="";for(L=0;L<this._datesDef.length;L+=1){J+='<div class="wijmo-wijdatepager-pagelabel'+(L==0?" wijmo-wijdatepager-pagelabel-first":"")+(this._datesDef[L].range?" wijmo-wijdatepager-pagerange":"")+(this._datesDef[L].header?" wijmo-wijdatepager-pageheader ui-state-highlight":"")+(L==this._datesDef.length-1?" wijmo-wijdatepager-pagelabel-last":"")+'">'+this._datesDef[L].l+"</div>"}H=this.element.find(".wijmo-wijdatepager-pages");if(C){this._isInAnimate=true;I=H.clone(true);H.html(J);K=H.find(".wijmo-wijdatepager-pagelabel");var B=this;if(!F){I.insertBefore(H);E=A(K[this._index]).offset().left;H.css("opacity",0).css("left",I.outerWidth(true)).stop().animate({left:"0px",opacity:100});I.stop().animate({left:"-"+I.outerWidth(true)+"px",opacity:0},function(){I.remove();B._isInAnimate=false;B.invalidate()})}else{I.insertAfter(H);E=A(K[this._index]).offset().left;H.css("opacity",0).css("left",-I.outerWidth(true)).stop().animate({left:"0px",opacity:100});I.css("left",0).stop().animate({left:I.outerWidth(true)+"px",opacity:0},function(){I.remove();B._isInAnimate=false;B.invalidate()})}}else{H.html(J);this.invalidate()}H.find(".wijmo-wijdatepager-pagelabel").hover(A.proxy(this._pagelabelHover,this),A.proxy(this._pagelabelHout,this));H.find(".wijmo-wijdatepager-pagelabel").bind("mousedown",A.proxy(this._pagelabelMouseDown,this));H.find(".wijmo-wijdatepager-pagelabel").click(A.proxy(function(M){var O=A(M.target),N;N=this.element.find(".wijmo-wijdatepager-pagelabel").index(O);this._setSelectedIndex(N)},this))},_addDays:function(C,B){return new Date(C.getFullYear(),C.getMonth(),C.getDate()+B)},_getDatesDefinition:function(){var J=this.options,E=J.viewType.toLowerCase(),K,G,H,I,D,B=[],F=J.selectedDate,C=J.firstDayOfWeek;switch(E){case"week":H=new Date(F.getFullYear(),F.getMonth(),-6);K=J.firstDayOfWeek-H.getDay();if(Math.abs(K)>6){K=H.getDay()-J.firstDayOfWeek}H=this._addDays(H,K);D=new Date(F.getFullYear(),F.getMonth()+1,7);K=0;while(H<D||H.getMonth()===F.getMonth()){I=this._addDays(H,7);B.push({l:Globalize.format(H,"MMM",this._getCulture())+" "+Globalize.format(H,"dd",this._getCulture())+"-"+Globalize.format(this._addDays(H,6),"dd",this._getCulture()),d:H,d2:this._addDays(H,6)});if(F>=H&&F<=I){this._index=K}H=I;K+=1}break;case"month":G=new Date(F.getFullYear()-2,0,1);B.push({l:G.getFullYear(),d:G,range:true});G=new Date(F.getFullYear()-1,0,1);B.push({l:G.getFullYear(),d:G,header:true});for(K=0;K<12;K+=1){G=new Date(F.getFullYear(),K,1);B.push({l:Globalize.format(G,"MMM",this._getCulture()),d:G});I=new Date(F.getFullYear(),K+1,1);if(F>=G&&F<=I){this._index=K+2}}G=new Date(F.getFullYear()+1,0,1);B.push({l:G.getFullYear(),d:G,range:true});break;default:case"day":G=new Date(F.getFullYear(),F.getMonth()-1,1);B.push({l:Globalize.format(G,"MMM",this._getCulture()),d:G,range:true});G=new Date(F.getFullYear(),F.getMonth(),1);B.push({l:Globalize.format(G,"MMM",this._getCulture()),d:G,header:true});H=G;K=2;while(H.getMonth()===F.getMonth()){I=new Date(H.getFullYear(),H.getMonth(),H.getDate()+1);B.push({l:Globalize.format(H,"d ",this._getCulture()),d:H});if(F>=H&&F<=I){this._index=K}H=I;K+=1}G=new Date(F.getFullYear(),F.getMonth()+1,1);B.push({l:Globalize.format(G,"MMM",this._getCulture()),d:G,range:true})}return B},_setSelectedIndex:function(B,C){var D=this.options;if(D.disabled){return}if(B>=this._min&&B<=this._max){this._dragActivated&&this._showTooltip(B);if(this._index!==B){if(this._datesDef[B].header){if(C){B=B-1}else{return}}this._index=B;D.selectedDate=this._datesDef[B].d;if(this._index===this._max){if(D.viewType==="week"){D.selectedDate=new Date(D.selectedDate.getFullYear(),D.selectedDate.getMonth(),D.selectedDate.getDate()+7)}}else{if(this._index===0){if(D.viewType==="day"){D.selectedDate=new Date(D.selectedDate.getFullYear(),D.selectedDate.getMonth(),0)}}}if(this._max>2&&this._index===0){this._initBackground(true,true)}else{if(this._index===this._max){this._initBackground(true,false)}else{this.invalidate()}}this._trigger("selectedDateChanged",null,{selectedDate:D.selectedDate})}}},_pagelabelHover:function(D){var C=A(D.target),B;if(C.hasClass("wijmo-wijdatepager-pageheader")){return}C.addClass("ui-state-hover")},_showTooltip:function(C){var B=this.options,E=this._datesDef[C],D=B.viewType,F,G=this.element.find(".wijmo-wijdatepager-pagelabel")[C];if(!this._tooltip){this._tooltip=A('<div class="wijmo-wijdatepager-tooltip"><div class="wijmo-wijdatepager-tooltip-inner"></div><div class="wijmo-wijdatepager-triangle"></div></div>');this.element.append(this._tooltip);this._tooltip.wijpopup()}F="";switch(D){case"day":F=Globalize.format(E.d,"dddd, MMMM d, yyyy",this._getCulture());break;case"week":F=Globalize.format(E.d,"MMMM d - ",this._getCulture())+Globalize.format(E.d2,E.d.getMonth()!==E.d2.getMonth()?"MMMM d, yyyy":"d, yyyy",this._getCulture());break;case"month":F=Globalize.format(E.d,"MMMM yyyy",this._getCulture())}this._tooltip.wijpopup("show",{of:G,my:"center bottom",at:"center top",offset:"-10 -10"});this._tooltip.find(".wijmo-wijdatepager-tooltip-inner").html(F)},_hideTooltip:function(){this._tooltip.wijpopup("hide")},_pagelabelHout:function(B){A(B.target).removeClass("ui-state-hover")},_pagelabelMouseDown:function(D){this._dragActivated=false;if(this.options.disabled){return}D.preventDefault();var B=A(D.target),C;if(B.hasClass("wijmo-wijdatepager-pageheader")){return}C=this.element.find(".wijmo-wijdatepager-pagelabel").index(B);this._dragActivated=true;this._setSelectedIndex(C);this._startClientX=D.pageX;this._startInd=C;A(document).bind("mousemove."+this._dtpagernamespacekey,A.proxy(this._pageindicatorMouseMove,this));A(document).bind("mouseup."+this._dtpagernamespacekey,A.proxy(this._pageindicatorMouseUp,this))},_pageindicatorMouseMove:function(D){D.preventDefault();if(this._isInAnimate){return}var C=this.element.find(".wijmo-wijdatepager-pagelabel")[this._startInd],B=C.offsetLeft+Math.round(C.offsetWidth/2)+(D.pageX-this._startClientX),E=this._findClosesPageIndexByPos(B);E!==-1&&E!==this._index&&this._setSelectedIndex(E)},_pageindicatorMouseUp:function(){this._dragActivated=false;A(document).unbind("."+this._dtpagernamespacekey);this._hideTooltip()},_findClosesPageIndexByPos:function(D){for(var C=this.element.find(".wijmo-wijdatepager-pages").find(".wijmo-wijdatepager-pagelabel"),B,E=0;E<C.length;E+=1){if(C[E].offsetLeft<D&&C[E].offsetLeft+C[E].offsetWidth>D){return E}}return -1}})})(jQuery);(function(E){function H(I){return new Date(I.getFullYear(),I.getMonth(),I.getDate())}function B(){var I,J,K;I="";for(K=0;K<32;K++){if(K==8||K==12||K==16||K==20){I=I+"-"}J=Math.floor(Math.random()*16).toString(16).toUpperCase();I=I+J}return I}var A,F=false,C;function G(J,I,K){if(F){C=amplify.store("wijevcal_tables1");if(!C){C={}}if(!C[J]){C[J]={fields:I};amplify.store("wijevcal_tables1",C);amplify.store("wijevcal_tbl_"+J,{})}K&&K()}else{A&&A.transaction(function(L){L.executeSql("SELECT COUNT(*) FROM "+J,[],function(){K&&K()},function(M){M.executeSql("CREATE TABLE "+J+" "+I,[],K,K)})})}}function D(R,X,V,W){var Y={rowsAffected:0,rows:[]},U,b,M,y,K,I,T,Q,P,e,J,L,O,Z,f;if(!X){X=[]}if(!Y.rows.item){Y.rows.item=function(c){return this[c]}}if(F){try{K=new RegExp("(SELECT) *(.*) *FROM (\\w+)");I=new RegExp("(INSERT OR REPLACE|INSERT) *(.*) *INTO *(\\w*) *\\(([\\w|,| ]*)\\)");if(R.match(I)){T=I.exec(R);if(T&&T.length>1){Q=T[3];P=C[Q];e=amplify.store("wijevcal_tbl_"+Q);if(e){L=T[4].split(",");U={};for(b=0;b<L.length;b+=1){if(L[b]){if(b===0){e[X[b]]=U}O=L[b].replace(" ","");U[O]=X[b]}}}amplify.store("wijevcal_tbl_"+Q,e)}}else{if(R.match(K)){T=K.exec(R);if(T&&T.length>1){Q=T[3];P=C[Q];e=amplify.store("wijevcal_tbl_"+Q);if(e){Z=R.replace(K,"");if(Z.toUpperCase().indexOf(" WHERE ")===0){Z=Z.substr(7);f=Z.split(" OR ");for(b=0;b<f.length;b+=1){f[b]=f[b].split("=");Z=f[b][1];if(Z.indexOf("'")===0){Z=Z.substring(1,Z.length-1);f[b][1]=Z}else{f[b][1]=parseFloat(Z)}}}for(J in e){if(e.hasOwnProperty(J)){U=e[J];if(U){if(f){for(b=0;b<f.length;b+=1){U[f[b][0]]===f[b][1]&&Y.rows.push(U)}}else{Y.rows.push(U)}}}}}}}}V&&V(Y)}catch(N){W&&W(N)}}else{if(!A){return}A.transaction(function(c){c.executeSql(R,X,function(d,g){V&&V(g)},function(d,g){W&&W(g.message);return})})}}E.widget("wijmo.wijevcal",{options:{culture:"",webServiceUrl:"",colors:["red","darkorchid","green","blue","cornflowerblue","yellow","bronze"],dataStorage:{addEvent:null,updateEvent:null,deleteEvent:null,loadEvents:null,addCalendar:null,updateCalendar:null,deleteCalendar:null,loadCalendars:null},appointments:[],calendars:[],disabled:false,editCalendarTemplate:"",enableLogs:false,eventTitleFormat:"{2}",titleFormat:{day:false,week:"_formatWeekTitle",month:"{0:MMMM yyyy}",list:false},firstDayOfWeek:0,headerBarVisible:true,navigationBarVisible:true,rightPaneVisible:false,selectedDate:null,selectedDates:null,statusBarVisible:false,timeInterval:30,timeIntervalHeight:15,timeRulerInterval:60,timeRulerFormat:"{0:h tt}",dayHeaderFormat:"{0:d }",firstRowDayHeaderFormat:"{0:ddd d}",dayViewHeaderFormat:{day:"all-day events",week:"{0:d dddd}",list:"{0:d dddd}"},viewType:"day",visibleCalendars:["Default"]},_setOption:function(I,J){var K=this.options;switch(I){case"appointments":K.appointments=J;this._onAppointmentsChanged();break;case"disabled":if(K.disabled!==J){K.disabled=J;if(J){this.element.addClass("ui-state-disabled");this.element.find(".ui-button").button("option","disabled",true);this.element.find(".ui-buttonset").buttonset("option","disabled",true);this._unbindEvents()}else{this.element.removeClass("ui-state-disabled");this.element.find(".ui-button").button("option","disabled",false);this.element.find(".ui-buttonset").buttonset("option","disabled",false);this._bindEvents()}}break;case"enableLogs":K.enableLogs=J;this._initLogPanel();break;case"selectedDate":if(J){J=H(J);if(K.selectedDates[0].getTime()!==J.getTime()){K.selectedDates[0]=J;this._onSelectedDatesChanged()}}return;case"selectedDates":if(J){K.selectedDates=J;this._onSelectedDatesChanged()}return;case"statusBarVisible":K.statusBarVisible=J;this._initStatusbar();this.invalidate();return;case"headerBarVisible":K.headerBarVisible=J;this._initHeaderbar();this.invalidate();return;case"navigationBarVisible":K.navigationBarVisible=J;this._initNavigationbar();this.invalidate();return;case"rightPaneVisible":K.rightPaneVisible=J;this._initRightPane();this.invalidate();return;case"timeInterval":if(K.timeInterval!==J){K.timeInterval=J;this._redrawActiveView()}break;case"timeIntervalHeight":if(K.timeIntervalHeight!==J){K.timeIntervalHeight=J;this._redrawActiveView()}break;case"timeRulerInterval":if(K.timeRulerInterval!==J){K.timeRulerInterval=J;this._redrawActiveView()}break;case"viewType":if(K.viewType!==J){K.viewType=J;this._onViewTypeChanged()}}E.Widget.prototype._setOption.apply(this,arguments)},_onViewTypeChanged:function(){this._renderActiveView();this._updateTitleText();this._trigger("viewTypeChanged",null,this.options.viewType);this.element.find(".wijmo-wijev-datepager").wijdatepager("option","viewType",this.options.viewType)},_onSelectedDatesChanged:function(){var I=this.options;I.selectedDate=I.selectedDates[0];this.element.find(".wijmo-wijev-datepager").wijdatepager("option","selectedDate",I.selectedDate);this._trigger("selectedDatesChanged",null,{selectedDates:I.selectedDates});this._renderActiveView();this._updateTitleText()},_updateHeaderTitleText:function(){var L=this.options,J=L.titleFormat,K=L.selectedDates[0],I=L.selectedDates[L.selectedDates.length-1];if(J[L.viewType]){J=J[L.viewType]}else{if(J[L.viewType]===false){this.element.find(".wijmo-wijev-view .wijmo-wijev-header-title").hide();return}else{J=J.toString()}}if(L.viewType==="list"){I=this._addDays(K,14)}this.element.find(".wijmo-wijev-view .wijmo-wijev-header-title").show().html(this._formatString(J,K,I))},_updateTitleText:function(){var M=this.options,L=M.selectedDates[0],J=M.selectedDates[M.selectedDates.length-1],K=new Date,I=false;if(M.viewType==="list"){J=this._addDays(L,14)}I=this._compareDayDates(L,K)===0||L<K&&J>K;this.element.find(".wijmo-wijev-navigationbar .wijmo-wijev-today").button("option","disabled",I);this._updateHeaderTitleText()},_create:function(){var I,J,K=this.options;if(!this.wijevcalnamespacekey){this.wijevcalnamespacekey="wijevcal"+ +new Date}if(!this.element[0].id){this.element[0].id="wijevcal_dynid_"+ +new Date}this._uidPref=this.element[0].id+"evcdynid";this.element.addClass("wijmo-wijevcal wijmo-wijev ui-widget ui-helper-reset ui-state-default");E('<div class="wijmo-wijev-headerbar ui-widget-header ui-corner-top"><span class="wijmo-wijev-tools"><input id="'+this._uidPref+'_daybtn" name="viewselection" type="radio" class="wijmo-wijev-day" /><label for="'+this._uidPref+'_daybtn">Day</label><input id="'+this._uidPref+'_weekbtn" name="viewselection" type="radio" class="wijmo-wijev-week" /><label for="'+this._uidPref+'_weekbtn">Week</label><input id="'+this._uidPref+'_monthbtn" name="viewselection" type="radio" class="wijmo-wijev-month" /><label for="'+this._uidPref+'_monthbtn">Month</label><input id="'+this._uidPref+'_listbtn" name="viewselection" type="radio" class="wijmo-wijev-list" /><label for="'+this._uidPref+'_listbtn">List</label></span></div>').appendTo(this.element);E('<div class="wijmo-wijev-view-container"><div class="wijmo-wijev-leftpane wijmo-wijev-viewdetails ui-widget-content wijmo-wijev-day-details"><div class="wijmo-wijev-leftpane-inner"><div class="wijmo-wijev-daycalendar"></div><div class="wijmo-wijev-monthday-container"><div class="wijmo-wijev-monthday-label">...</div><div class="wijmo-wijev-fulldate-label">Loading...</div><div class="wijmo-wijev-year-label">...</div></div><div class="wijmo-wijev-agenda-container ui-widget-content ui-corner-all ui-helper-clearfix"></div></div></div><div class="wijmo-wijev-leftpane wijmo-wijev-viewdetails ui-widget-content wijmo-wijev-list-details"><div class="wijmo-wijev-leftpane-inner"><div class="wijmo-wijev-agenda-container ui-widget-content ui-corner-all ui-helper-clearfix">&nbsp;</div></div></div><div class="wijmo-wijev-rightpane">&nbsp;</div></div>').appendTo(this.element);E('<div class="wijmo-wijev-loading-modal-frame"></div><div class="wijmo-wijev-loading"><div class="wijmo-wijev-loading-text">Loading...</div></div>').appendTo(this.element);E('<div class="wijmo-wijev-navigationbar ui-widget-header ui-corner-bottom ui-helper-clearfix"><a class="wijmo-wijev-today">today</a><div class="wijmo-wijev-datepager"></div></div>').appendTo(this.element);E('<div class="wijmo-wijev-statusbar ui-widget-header ui-corner-bottom"></div>').appendTo(this.element);I=this.element.find(".wijmo-wijev-navigationbar");J=this.element.find(".wijmo-wijev-headerbar .wijmo-wijev-tools");I.find(".wijmo-wijev-today").button({text:"today"}).click(E.proxy(this._onTodayClick,this));this.element.find(".wijmo-wijev-datepager").wijdatepager({selectedDate:K.selectedDate,culture:K.culture,viewType:K.viewType,firstDayOfWeek:K.firstDayOfWeek,selectedDateChanged:E.proxy(function(L,M){this.goToDate(M.selectedDate)},this)});J.find(".wijmo-wijev-day").button().click(E.proxy(this._onDayViewClick,this));J.find(".wijmo-wijev-week").button().click(E.proxy(this._onWeekViewClick,this));J.find(".wijmo-wijev-month").button().click(E.proxy(this._onMonthViewClick,this));J.find(".wijmo-wijev-list").button().click(E.proxy(this._onListViewClick,this));J.buttonset();this.showLoadingLabel()},showLoadingLabel:function(J,I){if(J===false){this.element.find(".wijmo-wijev-loading-text").hide()}else{this.element.find(".wijmo-wijev-loading-text").show();if(!J){J="Loading..."}}(I===undefined||I===true)&&this.element.find(".wijmo-wijev-loading-modal-frame").show();this.element.find(".wijmo-wijev-loading").show();this.element.find(".wijmo-wijev-loading-text").html(J)},hideLoadingLabel:function(){this.element.find(".wijmo-wijev-loading-modal-frame").hide();this.element.find(".wijmo-wijev-loading").hide()},_init:function(){var I=this.options;if(I.selectedDates&&I.selectedDates.length>0){I.selectedDate=I.selectedDates[0]=H(I.selectedDates[0])}else{if(I.selectedDate){I.selectedDate=H(I.selectedDate);if(!I.selectedDates){I.selectedDates=[]}I.selectedDates[0]=I.selectedDate}else{I.selectedDate=H(new Date);I.selectedDates=[I.selectedDate]}}I.disabled&&this.element.addClass("ui-state-disabled");this._initHeaderbar();this._initNavigationbar();this._initStatusbar();this._initRightPane();I.fullScreen&&this._onFullScreenModeChanged(I.fullScreen);this._initLogPanel();this._initLocalDataStorage();this.element.ajaxError(jQuery.proxy(this._onAjaxError,this));E(window).resize(E.proxy(this._onWindowResize,this));this._bindEvents();this._renderActiveView();this._updateTitleText()},_initLocalDataStorage:function(){try{if(window.openDatabase){this.log("Using Web SQL Database for the local data storage.");A=window.openDatabase("EventsCalendarDB","1.1","Wijmo Events Calendar Offline DB",200000);!A&&alert("Failed to open the database on disk. This is probably because the version was bad or there is not enough space left in this domain's quota")}else{if(window.amplify&&window.amplify.store){this.log("Using amplify.store for the local data storage");F=true}else{this.log("Couldn't open built-in local data storage. Please, add amplify.store references.");this._loadData();return}}G("calendars","(id TEXT PRIMARY KEY, name TEXT, location TEXT, description TEXT, color TEXT, tag TEXT)");G("events","(id TEXT PRIMARY KEY, calendar TEXT, subject TEXT, location TEXT, start TIMESTAMP, end TIMESTAMP, description TEXT, color TEXT, allday INTEGER, properties TEXT, tag TEXT)",E.proxy(this._loadData,this))}catch(I){alert(I)}},_initStatusbar:function(){var I=this.element.find(".wijmo-wijev-statusbar");if(!this.options.statusBarVisible){I.hide();return}else{I.show()}if(this.statusbarEventsAdded){return true}this.statusbarEventsAdded=true},_initHeaderbar:function(){var I=this.element.find(".wijmo-wijev-headerbar");if(!this.options.headerBarVisible){I.hide();return}else{I.show()}},_initNavigationbar:function(){var I=this.element.find(".wijmo-wijev-navigationbar");if(!this.options.navigationBarVisible){I.hide();return}else{I.show()}},_initRightPane:function(){var I=this.element.find(".wijmo-wijev-rightpane");if(!this.options.rightPaneVisible){I.hide();return}else{I.show()}},_initLogPanel:function(){if(this.options.enableLogs){this._createLogPanel();this.log=this._log}else{this.logDialog&&this.logDialog.wijdialog("close");this.log=function(){}}},_handleServerError:function(I){if(I&&I.toString().indexOf("error:")===0){this.status(I.toString(),"error");return true}return false},_loadData:function(){var R=this.options,U=this,I,M,T,Q,P,O,J,N,K,L;this.showLoadingLabel();L=function(){U.hideLoadingLabel()};R.calendars=[];P=this._calendarsById={};var N=function(W){if(!W){return}if(typeof W==="string"){if(U._handleServerError(W)){L(W);return}try{W=U._jsonParse(W)}catch(V){U.status("Unable to parse received calendars data. "+V,"error");return}}if(W.calendars&&W.calendars.length){W=W.calendars}for(I=0;I<W.length;I+=1){T=U._cloneObj(W[I]);T.prevData=U._cloneObj(T);R.calendars.push(T);P[T.id]=T}U._onCalendarsChanged()};if(R.dataStorage.loadCalendars){R.dataStorage.loadCalendars(N,L)}else{if(R.webServiceUrl){E.getJSON(R.webServiceUrl+"?clientId="+this.element[0].id+"&command=loadCalendars&calendars="+R.calendars,N)}else{D("SELECT * FROM calendars",[],function(V){for(I=0,M=V.rows.length;I<M;I+=1){T=U._cloneObj(V.rows.item(I));T.prevData=U._cloneObj(T);R.calendars.push(T);P[T.id]=T}U._onCalendarsChanged()},L)}}R.appointments=[];O=this._appointmentsById={};K=function(W){if(!W){return}if(typeof W==="string"){if(U._handleServerError(W)){L(W);return}try{W=U._jsonParse(W)}catch(V){U.log("Unable to parse received calendars data. "+V);return}}if(W.events&&W.events.length){W=W.events}for(I=0;I<W.length;I+=1){Q=U._cloneObj(W[I]);Q.start=new Date(Q.start);Q.end=new Date(Q.end);if(typeof Q.allday==="string"){if(Q.allday==="false"){Q.allday=false}if(Q.allday==="true"){Q.allday=true}}U._deSerializeProperties(Q.properties,Q);Q.prevData=U._cloneObj(Q);R.appointments.push(Q);O[Q.id]=Q}U._onAppointmentsChanged();U._trigger("initialized");U.hideLoadingLabel()};if(R.dataStorage.loadEvents){R.dataStorage.loadEvents(R.visibleCalendars,K,L)}else{if(R.webServiceUrl){E.ajax({url:R.webServiceUrl+"?clientId="+this.element[0].id+"&command=loadEvents&visibleCalendars="+R.visibleCalendars,dataType:"text",success:K})}else{J="SELECT * FROM events where ";for(I=0;I<R.visibleCalendars.length;I+=1){if(I>0){J+=" OR "}J+="calendar='"+R.visibleCalendars[I]+"'"}D(J,[],function(V){for(I=0,M=V.rows.length;I<M;I+=1){Q=U._cloneObj(V.rows.item(I));Q.start=new Date(Q.start);Q.end=new Date(Q.end);if(typeof Q.allday==="string"){if(Q.allday==="false"){Q.allday=false}if(Q.allday==="true"){Q.allday=true}}U._deSerializeProperties(Q.properties,Q);Q.prevData=U._cloneObj(Q);R.appointments.push(Q);O[Q.id]=Q}U._onAppointmentsChanged();U._trigger("initialized");U.hideLoadingLabel()},L)}}},_prepareEventsForView:function(){this._eventsView=[];var O=this.options,J=O.appointments,Q,R,U,M,P,K,L,N=100,T,V,I;for(M=0,K=J.length;M<K;M++){Q=J[M];if(Q.recurrenceState==="master"){U=Q.recurrencePattern;L=U.occurrences||N;T=U.patternStartDate||Q.start;V=U.startTime||Q.start;I=U.endTime||Q.end;switch(U.recurrenceType){case"daily":for(P=0;P<L;P++){R=this._cloneObj(Q);R.parentRecurrenceId=Q.id;R.recurrenceState="occurrence";R.start=this._setTime(this._addDays(T,P),V);R.end=this._setTime(R.start,I,V);R.recurrencePattern=null;this._eventsView.push(R)}break;case"workdays":for(P=0;P<L;P++){R=this._cloneObj(Q);R.parentRecurrenceId=Q.id;R.recurrenceState="occurrence";R.start=this._setTime(this._addDays(T,P),V);if(R.start.getDay()===0||R.start.getDay()===6){continue}R.end=this._setTime(R.start,I,V);R.recurrencePattern=null;this._eventsView.push(R)}break;case"weekly":for(P=0;P<L;P++){R=this._cloneObj(Q);R.parentRecurrenceId=Q.id;R.recurrenceState="occurrence";R.start=this._setTime(this._addDays(T,P*7),V);R.end=this._setTime(R.start,I,V);R.recurrencePattern=null;this._eventsView.push(R)}break;case"monthly":for(P=0;P<L;P++){R=this._cloneObj(Q);R.parentRecurrenceId=Q.id;R.recurrenceState="occurrence";R.start=this._setTime(new Date(T),V);R.start.setMonth(R.start.getMonth()+P);R.end=this._setTime(R.start,I,V);R.recurrencePattern=null;this._eventsView.push(R)}break;case"yearly":for(P=0;P<L;P++){R=this._cloneObj(Q);R.parentRecurrenceId=Q.id;R.recurrenceState="occurrence";R.start=this._setTime(new Date(T),V);R.start.setYear(R.start.getFullYear()+P);R.end=this._setTime(R.start,I,V);R.recurrencePattern=null;this._eventsView.push(R)}}}else{this._eventsView.push(Q)}}},_cloneObj:function(I){var J={},K;for(K in I){if(I.hasOwnProperty(K)){J[K]=I[K]}}return J},_onDayViewClick:function(){var I=this.options;if(I.viewType!=="day"){I.viewType="day";this._onViewTypeChanged()}I.selectedDates=[I.selectedDate];this._onSelectedDatesChanged()},_onWeekViewClick:function(){var J=this.options,K,I,L;if(J.viewType!=="week"){J.viewType="week";this._onViewTypeChanged()}K=J.selectedDate;L=J.firstDayOfWeek-K.getDay();if(Math.abs(L)>6){L=K.getDay()-J.firstDayOfWeek}K=this._addDays(K,L);J.selectedDates=[];for(L=0;L<7;L+=1){I=this._addDays(K,L);J.selectedDates.push(I)}this._onSelectedDatesChanged()},_onMonthViewClick:function(){var I=this.options;if(I.viewType!=="month"){I.viewType="month";this._onViewTypeChanged()}},_onListViewClick:function(){var I=this.options;if(I.viewType!=="list"){I.viewType="list";this._onViewTypeChanged()}I.selectedDates=[I.selectedDate];this._onSelectedDatesChanged()},_ensureEditCalendarDialogCreated:function(){var J=this.options,I;if(!this._editCalendarDialog){I=J.editCalendarTemplate;if(!I){I='<p><label>Calendar name</label><input type="text" class="wijmo-wijev-name" value=""></p><p><label>Location</label><input type="text" class="wijmo-wijev-location" value=""></p><p><label>Description</label><textarea class="wijmo-wijev-description" /></p><p><label>Color</label><select class="wijmo-wijev-color"></p>'}this._editCalendarDialog=E('<div class="wijmo-wijev-editcalendar-dialog">'+I+"</div>");this.element.append(this._editCalendarDialog);this._editCalendarDialog.wijdialog({autoOpen:true,height:600,width:700,modal:true,title:"Edit calendar",buttons:{Save:E.proxy(function(){var K=this._editCalendarDialog,L=K.cal||{};L.name=K.find(".wijmo-wijev-name").val();L.location=K.find(".wijmo-wijev-location").val();L.description=K.find(".wijmo-wijev-description").val();L.color=K.find(".wijmo-wijev-color").val();if(L.prevData){this.updateCalendar(L)}else{this.addCalendar(L)}K.wijdialog("close")},this)},captionButtons:{pin:{visible:false},refresh:{visible:false},toggle:{visible:false},minimize:{visible:false},maximize:{visible:false}}})}},_ensureEditEventDialogCreated:function(){if(!this._editEventDialog){var I=this.options.editEventDialogTemplate;if(!I){I='<div class="wijmo-wijev-event-dialog ui-widget-content ui-corner-all"><ul class="wijmo-wijev-brief-content"><li><label>Name</label><input type="text" name="subject" class="wijmo-wijev-subject" value=""><div class="wijmo-wijev-color-button"><div class="wijmo-wijev-color ui-wijmo-wijev-event-color-default">&nbsp;</div></div></li><li><label for="'+this._uidPref+'_alldaybtn">all-day</label><input type="checkbox" class="wijmo-wijev-allday" id="'+this._uidPref+'_alldaybtn" /></li><li><label>Starts</label><input type="text" class="wijmo-wijev-start" value=""><input type="text" class="wijmo-wijev-start-time" value=""></li><li><label>Ends</label><input type="text" class="wijmo-wijev-end" value=""><input type="text" class="wijmo-wijev-end-time" value=""></li></ul><ul class="wijmo-wijev-detailed-content ui-corner-all"><li><label>Location</label><input type="text" class="wijmo-wijev-location" value=""></li><li><label>Repeat</label><select class="wijmo-wijev-repeat"><option value="none">None</option><option value="daily">Every Day</option><option value="workdays">Work days</option><option value="weekly">Every Week</option><option value="monthly">Every Month</option><option value="yearly">Every Year</option></select></li><li><label>Calendar</label><select class="wijmo-wijev-calendar"></select></li><li class="wijmo-wijev-description-item"><label>Description</label><textarea class="wijmo-wijev-description" /></li></ul><div class="footer"><a href="#" class="wijmo-wijev-delete">Delete</a><a href="#" class="wijmo-wijev-save">OK</a><a href="#" class="wijmo-wijev-cancel">Cancel</a></div><div class="wijmo-wijev-angle"></div></div>'}this._editEventDialog=E(I);this.element.append(this._editEventDialog);this._editEventDialog.find(".wijmo-wijev-color-button").button({icons:{primary:"ui-icon-triangle-1-s"}}).click(E.proxy(this._onColorButtonClick,this));this._editEventDialog.find(".wijmo-wijev-delete").button().click(E.proxy(function(){this.deleteEvent(this._editEventDialog.appt);this._editEventDialog.wijpopup("hide")},this));this._editEventDialog.find(".wijmo-wijev-cancel").button().click(E.proxy(function(){this._editEventDialog.wijpopup("hide")},this));this._editEventDialog.find(".wijmo-wijev-start").width(114).wijinputdate({culture:this.options.culture,showTrigger:true,dateFormat:"d",dateChanged:E.proxy(function(K,L){var J=this._editEventDialog.find(".wijmo-wijev-end").wijinputdate("option","date");L.date>J&&this._editEventDialog.find(".wijmo-wijev-end").wijinputdate("option","date",L.date)},this)});this._editEventDialog.find(".wijmo-wijev-start-time").width(80).wijinputdate({culture:this.options.culture,dateFormat:"t",dateChanged:E.proxy(function(J,M){var L=this._editEventDialog.find(".wijmo-wijev-end-time").wijinputdate("option","date"),K=this._editEventDialog.find(".wijmo-wijev-start").wijinputdate("option","date");if(M.date.getDate()!=K.getDate()){M.date.setDate(K.getDate());this._editEventDialog.find(".wijmo-wijev-start-time").wijinputdate("option","date",M.date)}M.date>L&&this._editEventDialog.find(".wijmo-wijev-end-time").wijinputdate("option","date",M.date)},this)});this._editEventDialog.find(".wijmo-wijev-end").width(114).wijinputdate({culture:this.options.culture,showTrigger:true,dateFormat:"d",dateChanged:E.proxy(function(K,L){var J=this._editEventDialog.find(".wijmo-wijev-start").wijinputdate("option","date");L.date<J&&this._editEventDialog.find(".wijmo-wijev-start").wijinputdate("option","date",L.date)},this)});this._editEventDialog.find(".wijmo-wijev-end-time").width(80).wijinputdate({culture:this.options.culture,dateFormat:"t",dateChanged:E.proxy(function(J,M){var L=this._editEventDialog.find(".wijmo-wijev-start-time").wijinputdate("option","date"),K=this._editEventDialog.find(".wijmo-wijev-end").wijinputdate("option","date");if(M.date.getDate()!=K.getDate()){M.date.setDate(K.getDate());this._editEventDialog.find(".wijmo-wijev-end-time").wijinputdate("option","date",M.date)}M.date<L&&this._editEventDialog.find(".wijmo-wijev-start-time").wijinputdate("option","date",M.date)},this)});this._editEventDialog.find(".wijmo-wijev-allday").wijcheckbox();this._editEventDialog.find(".wijmo-wijev-subject,.wijmo-wijev-location,.wijmo-wijev-description").wijtextbox();this._editEventDialog.find(".wijmo-wijev-save").button().click(E.proxy(function(){var J=this._editEventDialog.appt;this._readApptDialogFields(this._editEventDialog,J);if(J.prevData){this.updateEvent(J)}else{this.addEvent(J)}this._editEventDialog.wijpopup("hide")},this));this._editEventDialog.wijpopup({autoHide:true,hiding:E.proxy(function(){this._colorMenu&&this._colorMenu.wijpopup("hide");this.element.find(".wijmo-wijev-dayview .ui-selected").removeClass("ui-selected")},this),shown:E.proxy(function(){var J=this;if(!this._dropDownInitialized){this._editEventDialog.find(".wijmo-wijev-calendar").wijdropdown().bind("change",function(){var K=J._calendarsById[this.value];if(K&&K.color){J._addColorClass(J._editEventDialog.find(".wijmo-wijev-color"),K.color)}else{J._editEventDialog.appt&&J._editEventDialog.appt.color&&J._addColorClass(J._editEventDialog.find(".wijmo-wijev-color"),J._editEventDialog.appt.color)}});this._editEventDialog.find(".wijmo-wijev-repeat").wijdropdown().bind("change",function(){var L=this.value,K=J._editEventDialog.appt;switch(L){case"none":K.recurrenceState=null;K.recurrencePattern=null;break;case"daily":K.recurrenceState="master";K.recurrencePattern={parentRecurrenceId:K.id,recurrenceType:"daily",startTime:K.start,endTime:K.end,patternStartDate:K.start};break;case"workdays":K.recurrenceState="master";K.recurrencePattern={parentRecurrenceId:K.id,recurrenceType:"workdays",startTime:K.start,endTime:K.end,patternStartDate:K.start};break;case"weekly":K.recurrenceState="master";K.recurrencePattern={parentRecurrenceId:K.id,recurrenceType:"weekly",startTime:K.start,endTime:K.end,patternStartDate:K.start};break;case"monthly":K.recurrenceState="master";K.recurrencePattern={parentRecurrenceId:K.id,recurrenceType:"monthly",startTime:K.start,endTime:K.end,patternStartDate:K.start};break;case"yearly":K.recurrenceState="master";K.recurrencePattern={parentRecurrenceId:K.id,recurrenceType:"yearly",startTime:K.start,endTime:K.end,patternStartDate:K.start};break;case"custom":alert("show custom recurrence pattern.")}});this._dropDownInitialized=true}else{this._editEventDialog.find(".wijmo-wijev-calendar").wijdropdown("refresh");this._editEventDialog.find(".wijmo-wijev-repeat").wijdropdown("refresh")}this._editEventDialog.find(".wijmo-wijev-subject").focus();this._updateEditEventPopupCallout()},this)})}},_updateEditEventPopupCallout:function(){if(this._editEventDialog&&this._editEventDialog._arrowTarget){var K=this._editEventDialog,M=E(K._arrowTarget),L=M.offset(),J=K.offset(),I;if(L.left<J.left){K.removeClass("wijmo-wijev-rightangle").addClass("wijmo-wijev-leftangle")}else{K.removeClass("wijmo-wijev-leftangle").addClass("wijmo-wijev-rightangle")}I=Math.round(L.top-J.top+M.outerHeight(true)/2);this._editEventDialog.find(".wijmo-wijev-angle").css("top",I)}},_onColorButtonClick:function(){var L,J=this.options,K=J.colors,I="";if(K&&K.length>0){for(L=0;L<K.length;L++){I+='<span class="wijmo-wijev-listcolor wijmo-wijev-event-color-'+K[L]+'">&nbsp;</span>'}}if(!this._colorMenu){this._colorMenu=E('<div class="wijmo-wijev-color-menu ui-widget-content ui-corner-all"></div>');this._editEventDialog.append(this._colorMenu);this._colorMenu.wijpopup({autoHide:true})}this._colorMenu.html(I);this._colorMenu.find(".wijmo-wijev-listcolor").click(E.proxy(function(M){this._addColorClass(this._editEventDialog.find(".wijmo-wijev-color"),this._readColorFromClass(E(M.target),"default"));this._colorMenu.wijpopup("hide")},this));this._colorMenu.wijpopup("show",{of:this._editEventDialog.find(".wijmo-wijev-color-button"),my:"left top",at:"left bottom"})},_readApptDialogFields:function(J,L){var K,I;L.subject=J.find(".wijmo-wijev-subject").val();L.location=J.find(".wijmo-wijev-location").val();L.start=J.find(".wijmo-wijev-start").wijinputdate("option","date");L.end=J.find(".wijmo-wijev-end").wijinputdate("option","date");if(J.find(".wijmo-wijev-allday").length>0){L.allday=J.find(".wijmo-wijev-allday")[0].checked}if(!L.allday){K=J.find(".wijmo-wijev-start-time").wijinputdate("option","date");L.start=new Date(L.start.getFullYear(),L.start.getMonth(),L.start.getDate(),K.getHours(),K.getMinutes(),K.getSeconds());I=J.find(".wijmo-wijev-end-time").wijinputdate("option","date");L.end=new Date(L.end.getFullYear(),L.end.getMonth(),L.end.getDate(),I.getHours(),I.getMinutes(),I.getSeconds())}L.calendar=J.find(".wijmo-wijev-calendar").val();L.description=J.find(".wijmo-wijev-description").val();L.color=this._readColorFromClass(J.find(".wijmo-wijev-color"),L.color)},_bindApptToDialog:function(K){if(!K){return}var M=this._editEventDialog,I,L;M.appt=K;M.find(".wijmo-wijev-subject").val(K.subject||"");M.find(".wijmo-wijev-location").val(K.location||"");try{M.find(".wijmo-wijev-start").wijinputdate("option","date",K.start);M.find(".wijmo-wijev-start-time").wijinputdate("option","date",K.start);M.find(".wijmo-wijev-end").wijinputdate("option","date",K.end);M.find(".wijmo-wijev-end-time").wijinputdate("option","date",K.end)}catch(J){alert("[e0001a] wijinputdate/wijtextselection firefox error\n"+J)}if(M.find(".wijmo-wijev-allday").length>0){M.find(".wijmo-wijev-allday")[0].checked=K.allday}M.find(".wijmo-wijev-allday").wijcheckbox("refresh");this._fillCalendarsSelect(M.find(".wijmo-wijev-calendar"),K.calendar);this._loadRepeatValue(K,M.find(".wijmo-wijev-repeat"));M.find(".wijmo-wijev-description").val(K.description||"");if(!K.prevData){M.find(".wijmo-wijev-delete").hide()}else{M.find(".wijmo-wijev-delete").show()}I=this._calendarsById[M.find(".wijmo-wijev-calendar")[0].value];L=K.color;if(!L&&I&&I.color){L=I.color}this._addColorClass(M.find(".wijmo-wijev-color"),L)},_loadRepeatValue:function(I,J){var K="none";if(I.recurrenceState==="master"&&I.recurrencePattern){switch(I.recurrencePattern.recurrenceType){case"daily":K="daily";break;case"workdays":K="workdays";break;case"weekly":K="weekly";break;case"monthly":K="monthly";break;case"yearly":K="yearly";break;default:K="custom"}}J.val(K)},_addColorClass:function(L,I){var J,K=new RegExp("wijmo-wijev-event-color-(\\w+)\\s*");if(L.length>0){J=L[0].className;L[0].className=J.replace(K,"");L.addClass("wijmo-wijev-event-color-"+(I||"default"))}},_readColorFromClass:function(J,K){var I=new RegExp("wijmo-wijev-event-color-(\\w+)\\s*"),L;if(J.length>0){L=I.exec(J[0].className);if(L!=null&&L.length>1){return L[1]}}return K},_fillCalendarsSelect:function(O,K){var J="",P=this.options,N,Q,I,L=P.calendars.slice(0),M=P.visibleCalendars;if(M&&M.length>0){for(N=0;N<M.length;N+=1){I=false;for(Q=0;Q<L.length;Q+=1){if(L[Q].name===M[N]){I=true}}!I&&L.push({id:M[N],name:M[N]})}}if(L.length===0){O.html("");return}for(N=0;N<L.length;N+=1){J+='<option value="'+L[N].id+'">'+L[N].name+"</option>"}O.html(J).val(K)},_fillColorSelect:function(){},_bindCalendarToDialog:function(I){if(!I){return}this._editCalendarDialog.cal=I;this._editCalendarDialog.find(".wijmo-wijev-name").val(I.name||"");this._editCalendarDialog.find(".wijmo-wijev-location").val(I.location||"");this._editCalendarDialog.find(".wijmo-wijev-description").val(I.description||"");this._fillColorSelect(this._editCalendarDialog.find(".color"),I.color)},_onTodayClick:function(){this.goToday();return false},_bindEvents:function(){if(!this._eventsAttached){this.element.find(".wijmo-wijev-appointment").live("click."+this.wijevcalnamespacekey,E.proxy(this._onAppointmentClick,this));this.element.find(".wijmo-wijev-dayview .wijmo-wijev-daycolumn .wijmo-wijev-appointment").live("mousedown."+this.wijevcalnamespacekey,E.proxy(this._onDayViewAppointmentMouseDown,this));this.element.find(".wijmo-wijev-dayview .wijmo-wijev-timeinterval").live("click."+this.wijevcalnamespacekey,E.proxy(this._onDayViewTimeIntervalClick,this));this.element.find(".wijmo-wijev-dayview .wijmo-wijev-allday-cell").live("click."+this.wijevcalnamespacekey,E.proxy(this._onDayViewAllDayCellClick,this));this.element.find(".wijmo-wijev-monthview .wijmo-wijev-monthcellheader").live("click."+this.wijevcalnamespacekey,E.proxy(this._onMonthViewDayLabelClick,this));this.element.find(".wijmo-wijev-monthview .wijmo-wijev-monthcell").live("click."+this.wijevcalnamespacekey,E.proxy(this._onMonthViewCellClick,this));this._eventsAttached=true}},_unbindEvents:function(){if(this._eventsAttached){this.element.find(".wijmo-wijev-appointment").die("click."+this.wijevcalnamespacekey);this.element.find(".wijmo-wijev-dayview .wijmo-wijev-daycolumn .wijmo-wijev-appointment").die("mousedown."+this.wijevcalnamespacekey);this.element.find(".wijmo-wijev-dayview .wijmo-wijev-dayheadercolumn .wijmo-wijev-daylabel").die("click."+this.wijevcalnamespacekey);this.element.find(".wijmo-wijev-dayview .wijmo-wijev-timeinterval").die("click."+this.wijevcalnamespacekey);this.element.find(".wijmo-wijev-dayview .wijmo-wijev-allday-cell").die("click."+this.wijevcalnamespacekey);this.element.find(".wijmo-wijev-monthview .wijmo-wijev-monthcellheader").die("click."+this.wijevcalnamespacekey);this._eventsAttached=false}},destroy:function(){this.element.removeClass("wijmo-wijev wijmo-wijevcal ui-widget ui-helper-reset");this._unbindEvents();E.Widget.prototype.destroy.apply(this,arguments)},deleteCalendar:function(Q,J,K){for(var L=this.options.calendars,M=Q.name||Q,O=false,T,R,P,U=this,I=0;I<L.length;I+=1){if(L[I].name===M){O=true;Q=L[I];if(!this._trigger("beforeDeleteCalendar",null,{data:Q})){return false}delete this._calendarsById[Q.id];L.splice(I,1);break}}if(!O){this.status("Calendar with name '"+M+"' not found.");return false}this.showLoadingLabel("Deleting calendar...");T=function(V){U.status("Calendar '"+Q.name+"' deleted.");U._onCalendarsChanged();U.hideLoadingLabel();J&&J(V)};R=function(V){U.status("Unable to delete calendar '"+Q.name+"': "+V);U.hideLoadingLabel();K&&K(V)};if(this.options.dataStorage.deleteCalendar){this.options.dataStorage.deleteCalendar(Q,T,R)}else{if(this.options.webServiceUrl){try{P=this._jsonStringify(Q)}catch(N){this.status("Unable to prepare calendar data for server. "+N,"error");R("Unable to prepare calendar data for server. "+N);return}E.ajax({url:this.options.webServiceUrl+"?clientId="+this.element[0].id+"&command=deleteCalendar",dataType:"text",data:{calendar:P},success:T})}else{D("DELETE FROM calendars WHERE name='"+M+"'",[],T,R)}}},addCalendar:function(M,K,L){var O,I,N,P=this;if(!this._trigger("beforeAddCalendar",null,{data:M,prevData:M.prevData||{}})){if(M.prevData){for(I in M.prevData){if(M.prevData.hasOwnProperty(I)){M[I]=M.prevData[I]}}}return false}if(!M.id){if(!this._dynIdCounter){this._dynIdCounter=0}this._dynIdCounter+=1;M.id="dynid"+this._dynIdCounter+"ts"+ +new Date}this.showLoadingLabel("Creating calendar...");O=function(Q){if(P._handleServerError(Q)){N(Q);return}P._readUpdatedServerDataIfAny(Q,M);if(!P._calendarsById[M.id]){P.options.calendars.push(M);P._calendarsById[M.id]=M;P.status("Calendar '"+M.name+"' added.")}else{P.status("Calendar '"+M.name+"' added.")}M.prevData=P._cloneObj(M);P._onCalendarsChanged();P.hideLoadingLabel();K&&K(Q)};N=function(Q){P.status("Unable to add calendar '"+M.name+"': "+Q);P.hideLoadingLabel();L&&L(Q)};if(this.options.dataStorage.addCalendar){this.options.dataStorage.addCalendar(M,O,N)}else{if(this.options.webServiceUrl){try{I=this._jsonStringify(M)}catch(J){this.status("Unable prepare calendar data for server."+J,"error");N("Unable to prepare calendar data for server."+J);return}E.ajax({url:this.options.webServiceUrl+"?clientId="+this.element[0].id+"&command=addCalendar",dataType:"text",data:{calendar:I},success:O})}else{D("INSERT OR REPLACE INTO calendars (id, name, location, description, color, tag) VALUES(?,?,?,?,?,?);",[M.id,M.name,M.location,M.description,M.color,M.tag],O,N)}}},updateCalendar:function(M,K,L){var O,I,N,P=this;if(!this._trigger("beforeUpdateCalendar",null,{data:M,prevData:M.prevData||{}})){if(M.prevData){for(I in M.prevData){if(M.prevData.hasOwnProperty(I)){M[I]=M.prevData[I]}}}return false}if(!M.id){if(!this._dynIdCounter){this._dynIdCounter=0}this._dynIdCounter+=1;M.id="dynid"+this._dynIdCounter+"ts"+ +new Date}this.showLoadingLabel("Updating calendar...");O=function(Q){if(P._handleServerError(Q)){N(Q);return}P._readUpdatedServerDataIfAny(Q,M);if(!P._calendarsById[M.id]){P.options.calendars.push(M);P._calendarsById[M.id]=M;P.status("Calendar '"+M.name+"' added.")}else{P.status("Calendar '"+M.name+"' updated.")}M.prevData=P._cloneObj(M);P._onCalendarsChanged();P.hideLoadingLabel();K&&K(Q)};N=function(Q){P.status("Unable to update calendar '"+M.name+"': "+Q);P.hideLoadingLabel();L&&L(Q)};if(this.options.dataStorage.updateCalendar){this.options.dataStorage.updateCalendar(M,O,N)}else{if(this.options.webServiceUrl){try{I=this._jsonStringify(M)}catch(J){this.status("Unable prepare calendar data for server. "+J,"error");N("Unable to prepare calendar data for server. "+J);return}E.ajax({url:this.options.webServiceUrl+"?clientId="+this.element[0].id+"&command=updateCalendar",dataType:"text",data:{calendar:I},success:O})}else{D("INSERT OR REPLACE INTO calendars (id, name, location, description, color, tag) VALUES(?,?,?,?,?,?);",[M.id,M.name,M.location,M.description,M.color,M.tag],O,N)}}},addEvent:function(M,L,J){var O,N,I,P=this;if(!this._trigger("beforeAddEvent",null,{data:M,prevData:M.prevData||{}})){if(M.prevData){for(I in M.prevData){if(M.prevData.hasOwnProperty(I)){M[I]=M.prevData[I]}}}return false}if(!M.id){if(!this._dynIdCounter){this._dynIdCounter=0}this._dynIdCounter+=1;M.id=B()}if(!M.calendar){M.calendar="Default"}this.showLoadingLabel("Creating event...");var N=function(Q){P.hideLoadingLabel();P.status("Unable to add event '"+M.subject+"': "+Q,"error");if(M.prevData){for(I in M.prevData){if(M.prevData.hasOwnProperty(I)){M[I]=M.prevData[I]}}}J&&J(Q)},O=function(Q){if(P._handleServerError(Q)){N(Q);return}P._readUpdatedServerDataIfAny(Q,M);if(!P._appointmentsById[M.id]){P.options.appointments.push(M);P._appointmentsById[M.id]=M;P.status("Event '"+M.subject+"' added.")}else{P.status("Event '"+M.subject+"' added.")}M.prevData=P._cloneObj(M);P._onAppointmentsChanged();P.hideLoadingLabel();L&&L(Q)};if(this.options.dataStorage.addEvent){this.options.dataStorage.addEvent(M,O,N)}else{if(this.options.webServiceUrl){try{I=this._jsonStringify(M)}catch(K){this.status("Unable prepare event data for server. "+K,"error");N("Unable to prepare event data for server. "+K);return}E.ajax({url:this.options.webServiceUrl+"?clientId="+this.element[0].id+"&command=addEvent",dataType:"text",data:{event:I},success:O})}else{D("INSERT OR REPLACE INTO events (id, calendar, subject, location, start, end, description, color, allday, properties, tag) VALUES(?,?,?,?,?,?,?,?,?,?,?);",[M.id,M.calendar,M.subject,M.location,M.start.getTime(),M.end.getTime(),M.description,M.color,M.allday,this._serializeProperties(M),M.tag],O,N)}}},_readUpdatedServerDataIfAny:function(M,I){var K=null,L;if(typeof M==="string"&&M.indexOf("update:")===0){M=M.toString().substr("update:".length);try{K=this._jsonParse(M)}catch(J){self.status("Unable to read updated server data. "+J,"warning")}if(K){for(L in K){if(K[L]){I[L]=K[L]}}}}},updateEvent:function(M,K,L){var O,N,I,P=this;if(!this._trigger("beforeUpdateEvent",null,{data:M,prevData:M.prevData||{}})){if(M.prevData){for(I in M.prevData){if(M.prevData.hasOwnProperty(I)){M[I]=M.prevData[I]}}}this._updateAppointmentVisual(M);return false}if(!M.calendar){M.calendar="Default"}this.showLoadingLabel("Updating event...");var N=function(Q){P.hideLoadingLabel();P.status("Unable to update event '"+M.subject+"': "+Q,"error");if(M.prevData){for(I in M.prevData){if(M.prevData.hasOwnProperty(I)){M[I]=M.prevData[I]}}}P._updateAppointmentVisual(M);L&&L(Q)};if(!M.id){N("id is empty");return}var O=function(Q){if(P._handleServerError(Q)){N(Q);return}P._readUpdatedServerDataIfAny(Q,M);if(!P._appointmentsById[M.id]){P.options.appointments.push(M);P._appointmentsById[M.id]=M;P.status("Event '"+M.subject+"' added.")}else{P.status("Event '"+M.subject+"' updated.")}M.prevData=P._cloneObj(M);P._onAppointmentsChanged();P.hideLoadingLabel();K&&K(Q)};if(this.options.dataStorage.updateEvent){this.options.dataStorage.updateEvent(M,O,N)}else{if(this.options.webServiceUrl){try{I=this._jsonStringify(M)}catch(J){this.status("Unable prepare event data for server. "+J,"error");N("Unable to prepare event data for server. "+J);return}E.ajax({url:this.options.webServiceUrl+"?clientId="+this.element[0].id+"&command=updateEvent",dataType:"text",data:{event:I},success:O})}else{D("INSERT OR REPLACE INTO events (id, calendar, subject, location, start, end, description, color, allday, properties, tag) VALUES(?,?,?,?,?,?,?,?,?,?,?);",[M.id,M.calendar,M.subject,M.location,M.start.getTime(),M.end.getTime(),M.description,M.color,M.allday,this._serializeProperties(M),M.tag],O,N)}}},_serializeProperties:function(J){var K="",L={};L.parentRecurrenceId=J.parentRecurrenceId;L.recurrenceState=J.recurrenceState;L.recurrencePattern=J.recurrencePattern;L.color=J.color;L.allday=J.allday;try{K=this._jsonStringify(L)}catch(I){this.status("Unable save additional event properties. "+I,"error")}return K},_deSerializeProperties:function(K,J){var L={};if(!K){return}if(typeof K==="string"){try{L=this._jsonParse(K)}catch(I){this.status("Unable to load additional event properties. "+I,"error");return}}else{L=K}if(L.parentRecurrenceId){J.parentRecurrenceId=L.parentRecurrenceId}if(L.recurrenceState){J.recurrenceState=L.recurrenceState}if(L.recurrencePattern){J.recurrencePattern=L.recurrencePattern}if(L.color){J.color=L.color}if(L.allday){J.allday=L.allday}},_jsonStringify:function(I){var J;if(window.__JSONC1){J=__JSONC1.stringify(I)}else{if(window.JSON){J=JSON.stringify(I)}else{throw"JSON not found."}}return J},_jsonParse:function(J){var L;if(window.__JSONC1){L=window.__JSONC1.parse(J)}else{if(window.JSON){var I=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)Z$/,K=/^\/Date\((d|-|.*)\)\/$/;L=window.JSON.parse(J,function(P,N){if(typeof N==="string"){var O=I.exec(N);if(O){return new Date(Date.UTC(+O[1],+O[2]-1,+O[3],+O[4],+O[5],+O[6]))}O=K.exec(N);if(O){var M=O[1].split(/[-,.]/);return new Date(+M[0])}}return N})}else{throw"JSON variable not found."}}return L},deleteEvent:function(I,J,M){if(I.id){I=I.id}var R=this._appointmentsById[I],P,L,K,Q,O=this;if(!this._trigger("beforeDeleteEvent",null,{data:R})){return false}this.showLoadingLabel("Deleting event...");Q=function(T){O.status("Unable to delete event '"+R.subject+"': "+T);O.hideLoadingLabel();M&&M(T)};K=function(T){if(O._handleServerError(T)){Q(T);return}if(O._appointmentsById[R.id]){L=O.options.appointments;for(P=0;P<L.length;P=P+1){L[P].id===I&&L.splice(P,1)}delete O._appointmentsById[R.id];O.status("Event '"+R.subject+"' deleted.")}else{O.status("Event '"+R.subject+"' deleted.")}R.prevData=O._cloneObj(R);O._onAppointmentsChanged();O.hideLoadingLabel();J&&J(T)};if(this.options.dataStorage.deleteEvent){this.options.dataStorage.deleteEvent(R,K,Q)}else{if(this.options.webServiceUrl){try{k=this._jsonStringify(R)}catch(N){this.status("Unable prepare event data for server. "+N,"error");Q("Unable prepare event data for server. "+N);return}E.ajax({url:this.options.webServiceUrl+"?clientId="+this.element[0].id+"&command=deleteEvent",dataType:"text",data:{event:k},success:K})}else{D("DELETE FROM events WHERE id='"+I+"'",[],K,Q)}}},beginUpdate:function(){this._isUpdating=true;this.showLoadingLabel("Updating...")},endUpdate:function(){this._isUpdating=false;this._pendingRedrawActiveView&&this._redrawActiveView();this.hideLoadingLabel()},goToEvent:function(L){if(L.id){L=L.id}var I=this.options,J,K=this.findEventById(L);switch(I.viewType){case"day":case"week":case"list":J=this.element.find(".wijmo-wijev-dayview .wijmo-wijev-daycolumn ."+this._eventIdToCssClass(L));if(J.length>0){this.element.find(".wijmo-wijev-scrollpanel").wijsuperpanel("scrollChildIntoView",J)}else{this._dayViewScrollToEvent=K;this.goToDate(K.start)}break;case"month":this.goToDate(K.start)}},isAllDayEvent:function(I){var J=I;if(!I.id){J=this.findEventById(I)}return J.allday?(J.end.getTime()-J.start.getTime())/86400000>=1?true:true:false},goToDate:function(L){L=H(L);var N=this.options,I=L.getDay(),M,J,K=N.selectedDates;if(K&&K.length>0){if(this._isContainsDayDate(K,L)){return}else{J=(L-K[0].getTime())/86400000;if(N.viewType==="week"){for(M=0;M<K.length;M+=1){if(K[M].getDay()===I){J=J-M;break}}}for(M=0;M<K.length;M+=1){K[M]=this._addDays(K[M],J)}this._onSelectedDatesChanged()}}else{N.selectedDates=[L];this._onSelectedDatesChanged()}},goToday:function(){this.goToDate(new Date)},goLeft:function(){var J,K=this.options,I=K.viewType,L=K.selectedDates;if(I==="month"){this.goToDate(this._addMonths(L[0],-1))}else{J=-7;if(L.length===1){J=-1}this.goToDate(this._addDays(L[0],J))}},goRight:function(){var J,K=this.options,I=K.viewType,L=K.selectedDates;if(I==="month"){this.goToDate(this._addMonths(L[0],1))}else{J=7;if(L.length===1){J=1}this.goToDate(this._addDays(L[0],J))}},update:function(){this.invalidate()},invalidate:function(){var I=this.options;switch(I.viewType.toLowerCase()){case"list":case"day":case"week":this._invalidateDayView();break;case"month":this._invalidateMonthView()}},showEditCalendarDialog:function(L){var I=this.options,K=I.calendars,J;if(!L){L={name:"",description:"",location:"",color:""}}else{if(!L.name){for(J=0;J<K.length;J+=1){if(K[J].name===L){L=K[J];break}}}}this._ensureEditCalendarDialogCreated();this._bindCalendarToDialog(L);this._editCalendarDialog.wijdialog("open")},showEditEventDialog:function(N,I,K){var O=this.options,J,L,M=I?E(I):K?E(K.target):null;this._ensureEditEventDialogCreated();this.element.find(".wijmo-wijev-dayview .ui-selected").removeClass("ui-selected");if(M&&M.hasClass("wijmo-wijev-daylabel")){M=M.parent(".wijmo-wijev-allday-cell")}if(!N){N={subject:"New Event"};if(M&&M.length>0){this._editEventDialog._arrowTarget=M;M.addClass("ui-selected");J=M.parent(".wijmo-wijev-daycolumn");if(J.length<1){J=M.parent(".wijmo-wijev-dayheadercolumn")}J=J[0];if(M.hasClass("wijmo-wijev-allday-cell")){N.allday=true}else{if(M.hasClass("wijmo-wijev-monthcellcontainer")){J=M[0];N.allday=true}else{N.allday=false}}if(J){L=this._parseDateFromClass(J.className,N.allday?null:M[0].className);N.start=L;if(N.allday){N.end=this._addMinutes(N.start,1440)}else{N.end=this._addMinutes(N.start,O.timeInterval)}}}else{N.start=new Date(O.selectedDates[0]);N.end=this._addMinutes(N.start,O.timeInterval)}}this._bindApptToDialog(N);this._editEventDialog.wijpopup("show",{of:M,my:"left center",at:"right center",offset:(M&&K?Math.round(K.offsetX-M.width()):10)+" 0"})},_renderActiveView:function(){var J=this.options,I=this.element.find(".wijmo-wijev-headerbar .wijmo-wijev-tools");this.element.find(".wijmo-wijev-view").hide();this.element.find(".wijmo-wijev-viewdetails").hide();this.element.find(".wijmo-wijev-"+J.viewType.toLowerCase()+"-details").show();switch(J.viewType.toLowerCase()){case"day":case"week":case"list":this.element.find(".wijmo-wijev-view.wijmo-wijev-dayview").show();this._renderDayView();break;case"month":this.element.find(".wijmo-wijev-view.wijmo-wijev-monthview").show();this._renderMonthView()}I.find(".wijmo-wijev-"+J.viewType.toLowerCase())[0].checked=true;I.buttonset("refresh")},_redrawActiveView:function(){if(this._isUpdating){this._pendingRedrawActiveView=true;return}switch(this.options.viewType.toLowerCase()){case"day":case"week":this._clearViewsCache();this._templateDayColumn=null}this._renderActiveView()},_renderDayView:function(){var v=this.options,Q=0,N=1440,U,V,K,P=v.selectedDates,Z,X,Y,w,W=new Date,J,I=false,R=this.element.find(".wijmo-wijev-dayview"),L,O,M,a=0,T;if(!P){P=[new Date]}if(R.length===0){R=E('<div class="wijmo-wijev-view wijmo-wijev-dayview ui-widget-content"><h3 class="wijmo-wijev-header-title">title</h3><div class="wijmo-wijev-dayview-inner"><div class="wijmo-wijev-headercontainer"><div class="wijmo-wijev-sizer"><div class="wijmo-wijev-gmtlabel">all-day</div></div></div><div class="wijmo-wijev-scrollpanel"><div class="wijmo-wijev-scrollcontent"><div class="wijmo-wijev-timeruler"><div class="wijmo-wijev-currenttime-indicator"><div class="wijmo-wijev-currenttime-indicator-arrow ui-state-error"></div><div class="wijmo-wijev-currenttime-indicator-line ui-state-error"></div></div></div></div></div></div></div>');R.appendTo(this.element.find(".wijmo-wijev-view-container"));this.element.find(".wijmo-wijev-scrollpanel").wijsuperpanel({hScroller:{scrollBarVisibility:"hidden"}})}R.removeClass("wijmo-wijev-weekview wijmo-wijev-listview");R.addClass("wijmo-wijev-"+v.viewType.toLowerCase()+"view");L=this.element.find(".wijmo-wijev-headercontainer");O=this.element.find(".wijmo-wijev-scrollcontent");M=O.find(".wijmo-wijev-timeruler");if(!this._templateDayColumn){M.find(".wijmo-wijev-timerulerinterval").remove();U='<div class="wijmo-wijev-daycolumn">';T=true;while(Q<N){V="wijmo-wijev-timeinterval ui-widget-content wijmo-wijev-minute-"+Q;if(T){V+=" wijmo-wijev-oddrow"}T=!T;K="wijmo-wijev-timerulerinterval ui-widget-content wijmo-wijev-minute-"+Q;U+='<div class="'+V+'" style="height: '+v.timeIntervalHeight+'px"></div>';Q+=v.timeInterval;a+=v.timeInterval;if(a>=v.timeRulerInterval){V+=" wijmo-wijev-timeinterval-hourstart";K+=" wijmo-wijev-timerulerinterval-hourstart";M.append(E('<div class="'+K+'" style="height:'+a/v.timeInterval*v.timeIntervalHeight+'px">'+this._formatString(v.timeRulerFormat,new Date(W.getFullYear(),W.getMonth(),W.getDate(),0,Q-a))+"</div>"));a=0}}U+="</div>";this._templateDayColumn=E(U);this._templateDayHeader=E('<div class="wijmo-wijev-dayheadercolumn ui-widget-content"><div class="wijmo-wijev-allday-cell ui-widget-content"><div class="wijmo-wijev-daylabel">3 Monday</div></div></div>')}L.find(".wijmo-wijev-dayheadercolumn").remove();O.find(".wijmo-wijev-daycolumn").remove();for(Z=0,J=P.length;Z<J;Z=Z+1){w=P[Z];X=this._getCachedDayHeader(w);Y=this._getCachedDayColumn(w);if(!X){X=this._templateDayHeader.clone(true);Y=this._templateDayColumn.clone(true);X.addClass(this._dayDateToCssClass(w));X.find(".wijmo-wijev-daylabel").html(this._formatDayHeaderDate(w));Y.addClass(this._dayDateToCssClass(w));if(I){I=false}else{Y.addClass("wijmo-wijev-leftborder");X.addClass("wijmo-wijev-leftborder")}if(this._compareDayDates(w,W)===0){Y.addClass("wijmo-wijev-today ui-state-highlight");Y.addClass("wijmo-wijev-leftborder");Y.addClass("wijmo-wijev-rightborder");X.addClass("wijmo-wijev-today").find(".wijmo-wijev-allday-cell").addClass("ui-state-highlight");X.addClass("wijmo-wijev-leftborder");X.addClass("wijmo-wijev-rightborder");I=true}if(Z===J-1){Y.addClass("wijmo-wijev-rightborder");X.addClass("wijmo-wijev-rightborder")}}else{X=E(X);X.find(".wijmo-wijev-daylabel").html(this._formatDayHeaderDate(w))}L.append(X);O.append(Y)}this._invalidateDayView();this._renderDayViewAppointments()},_getCachedDayHeader:function(J){var I=null;if(this._dayViewCache){if(this._dayViewCache[J]){I=this._dayViewCache[J].h}}return I},_getCachedDayColumn:function(J){var I=null;if(this._dayViewCache){if(this._dayViewCache[J]){I=this._dayViewCache[J].c}}return I},_storeDayCache:function(K,J,I){if(!this._dayViewCache){this._dayViewCache={}}this._dayViewCache[K]={h:J,c:I}},_clearViewsCache:function(){this._dayViewCache={}},_invalidateDayView:function(){var V=this.element.find(".wijmo-wijev-headercontainer"),N=this.element.find(".wijmo-wijev-scrollcontent"),J=N.find(".wijmo-wijev-timeruler"),M=V.find(".wijmo-wijev-dayheadercolumn"),R=N.find(".wijmo-wijev-daycolumn"),K=this.element.find(".wijmo-wijev-view .wijmo-wijev-header-title"),I=K.is(":visible")?K.outerHeight(true):0,Z,T,W,Q,X,O,L=J.outerWidth(),Y,a,U,P;this._invalidateView();if(!this._maxAllDayEventCount){this._maxAllDayEventCount=0}W=V.find(".wijmo-wijev-dayheadercolumn .wijmo-wijev-appointment").outerHeight(true);if(!W){W=17}Q=V.find(".wijmo-wijev-daylabel").outerHeight(true);X=0;for(Y=0;Y<M.length;Y+=1){O=E(M[Y]).find(".wijmo-wijev-allday-cell .wijmo-wijev-appointment").length;if(O>X){X=O}}T=W*X+Q+W;V.outerHeight(T+Math.round(W/2));V.find(".wijmo-wijev-allday-cell").outerHeight(T);Z=this.element.find(".wijmo-wijev-view").innerWidth();a=Z-L;a=a-18;U=this.element.find(".wijmo-wijev-view").innerHeight()-V.outerHeight(true)-I;P=Math.floor(a/R.length);V.outerWidth(Z);N.outerWidth(Z);M.outerWidth(P);R.outerWidth(P);this._invalidateCurrentTimeIndicator();this.element.find(".wijmo-wijev-scrollpanel").outerWidth(Z).outerHeight(U).wijsuperpanel("refresh");switch(this.options.viewType.toLowerCase()){case"day":this._updateDayViewDetails();break;case"list":this._updateListViewDetails()}},_updateDayViewDetails:function(){var J=this.options,I=J.selectedDate;if(!this._dayViewDetailsInit){this._dayViewDetailsInit=true;this.element.find(".wijmo-wijev-day-details .wijmo-wijev-daycalendar").wijcalendar({culture:J.culture,showTitle:false,showOtherMonthDays:false,showWeekNumbers:false,selectionMode:{day:true,days:false},selectedDatesChanged:E.proxy(function(K,L){L.dates&&this.goToDate(L.dates[0])},this)});this.element.find(".wijmo-wijev-day-details .wijmo-wijev-agenda-container").wijsuperpanel()}this.element.find(".wijmo-wijev-day-details .wijmo-wijev-daycalendar").wijcalendar("option","displayDate",I).wijcalendar("unSelectAll").wijcalendar("selectDate",I);this.element.find(".wijmo-wijev-day-details .wijmo-wijev-daycalendar").wijcalendar("refresh");this.element.find(".wijmo-wijev-day-details .wijmo-wijev-monthday-label").html(I.getDate());this.element.find(".wijmo-wijev-day-details .wijmo-wijev-fulldate-label").html(this._formatString("{0:dddd, MMMM d}",I));this.element.find(".wijmo-wijev-day-details .wijmo-wijev-year-label").html(I.getFullYear());this._loadAgendaList(this.element.find(".wijmo-wijev-day-details  .wijmo-wijev-agenda-container"),I,I,false)},_updateListViewDetails:function(){var I=this.options;if(!this._listViewDetailsInit){this._listViewDetailsInit=true;this.element.find(".wijmo-wijev-list-details .wijmo-wijev-agenda-container").wijsuperpanel()}this._loadAgendaList(this.element.find(".wijmo-wijev-list-details  .wijmo-wijev-agenda-container"),null,null,true)},_loadAgendaList:function(P,J,M,K){var O=this._eventsView,Y,X,N,I,R=0,U,a="",Z="",Q=null,V=null,W,L,T=false;if(P.find(".wijmo-wijsuperpanel-templateouterwrapper").length>0){P=P.find(".wijmo-wijsuperpanel-templateouterwrapper");T=true}P.html("");if(J){Q=H(J);V=this._addDays(H(M),1);I=(V.getTime()-Q.getTime())/86400000}if(O){N=O.length;if(!Q){Z="";for(X=0;X<N;X+=1){Y=O[X];if(X===0||W.getDate()!==Y.start.getDate()){W=Y.start;if(X!==0){a+='<ul class="wijmo-wijev-agenda-list">'+Z+"</ul>";a+="</div>"}a+='<div class="wijmo-wijev-agenda-day-container '+this._dayDateToCssClass(W)+'">';if(K){a+=this._renderAgendaDayHeader(W)}Z=""}Z+=this._renderAgendaAppointmentVisual(Y);U+=1;if(X===N-1){a+='<ul class="wijmo-wijev-agenda-list">'+Z+"</ul>";a+="</div>"}}}else{while(R<I){W=this._addDays(Q,R);W=new Date(W.getFullYear(),W.getMonth(),W.getDate());L=new Date(W.getFullYear(),W.getMonth(),W.getDate(),23,59,59);U=0;Z="";for(X=0;X<N;X+=1){Y=O[X];if(Y.start<V&&Y.end>Q&&Y.start<L&&Y.start>=W){Z+=this._renderAgendaAppointmentVisual(Y);U+=1}}if(Z!==""){a+='<div class="wijmo-wijev-agenda-day-container '+this._dayDateToCssClass(W)+'">';if(K){a+=this._renderAgendaDayHeader(W)}a+='<ul class="wijmo-wijev-agenda-list">'+Z+"</ul>";a+="</div>"}R+=1}}E(a).appendTo(P)}P.find(".wijmo-wijev-agenda-event").click(E.proxy(this._onAgendaEventClick,this)).hover(function(){E(this).addClass("ui-state-hover")},function(){E(this).removeClass("ui-state-hover").removeClass("ui-state-active")}).mousedown(function(){E(this).addClass("ui-state-active")}).mouseup(function(){E(this).removeClass("ui-state-active")});T&&P.parents(".wijmo-wijsuperpanel").wijsuperpanel("refresh")},_renderAgendaDayHeader:function(I){return'<div class="wijmo-wijev-agenda-header ui-widget-header"><div class="wijmo-wijev-weekday">'+this._formatString("{0:dddd}",I)+'</div><div class="wijmo-wijev-date">'+this._formatString("{0:MMMM d, yyyy}",I)+"</div></div>"},_onAgendaEventClick:function(J){var I=E(J.target);if(!I.hasClass("wijmo-wijev-agenda-event")){I=I.parent(".wijmo-wijev-agenda-event")}I.length>0&&this.goToEvent(this._parseEventIdFromClass(I[0].className))},_renderAgendaAppointmentVisual:function(I){return'<li class="wijmo-wijev-agenda-event '+this._dayDateToCssClass(I.start)+" "+this._eventIdToCssClass(I.id)+' ui-state-default ui-helper-clearfix"><div class="wijmo-wijev-agenda-event-color wijmo-wijev-event-color-'+(I.color||"default")+'"><div></div></div><div class="wijmo-wijev-agenda-event-title">'+I.subject+'</div><div class="wijmo-wijev-agenda-event-time">'+(this.isAllDayEvent(I)?"all-day":this._formatString("{0:hh:mm tt} to {1:hh:mm tt}",I.start,I.end))+"</div></li>"},_invalidateCurrentTimeIndicator:function(){var J=this.element.find(".wijmo-wijev-timeruler .wijmo-wijev-currenttime-indicator"),K=new Date,I=this.options;K=K.getMinutes()+K.getHours()*60;J.css("top",K/I.timeInterval*I.timeIntervalHeight)},_onAppointmentsChanged:function(){this._clearViewsCache();this._prepareEventsForView();this._renderActiveView()},_onCalendarsChanged:function(){this._trigger("calendarsChanged",null,{calendars:this.options.calendars})},_renderDayViewAppointments:function(){var W=this._eventsView,Z,Y,Ac,M,N,Ag=this.element.find(".wijmo-wijev-headercontainer"),Ah=this.element.find(".wijmo-wijev-scrollcontent"),L=Ag.find(".wijmo-wijev-dayheadercolumn"),U=Ah.find(".wijmo-wijev-daycolumn"),a,X,T=this.options,Aa=T.selectedDates,Af=Aa[0],Ab,K,Ad,Q,R,J,O,V,P,I=[],Ae=T.eventTitleFormat;Ab=Aa[Aa.length-1];Ab=new Date(Ab.getFullYear(),Ab.getMonth(),Ab.getDate(),23,59,59);if(W){for(Ac=0,N=Aa.length;Ac<N;Ac+=1){if(!U[Ac]._cached){a=Aa[Ac];a=new Date(a.getFullYear(),a.getMonth(),a.getDate());X=new Date(a.getFullYear(),a.getMonth(),a.getDate(),23,59,59);for(Y=0,M=W.length;Y<M;Y+=1){Z=W[Y];if(Z.start<Ab&&Z.end>Af&&Z.start<X&&Z.end>a){if(this.isAllDayEvent(Z)){K=true;Ad=E('<div class="wijmo-wijev-appointment '+this._eventIdToCssClass(Z.id)+'"><div class=" wijmo-wijev-colordot wijmo-wijev-event-color-'+(Z.color||"default")+'"></div><div class="wijmo-wijev-event-title">'+Z.subject+"</div></div>");E(L[Ac]).find(".wijmo-wijev-allday-cell").append(Ad)}else{Q=Z.start;R=Z.end;if(Q<a){Q=a}if(R>X){R=X}J=(Q-a)/60000;O=(R-a)/60000;V=Math.round(J*T.timeIntervalHeight/T.timeInterval);P=Math.round(O*T.timeIntervalHeight/T.timeInterval);Ad=E('<div class="wijmo-wijev-appointment wijmo-wijev-event-color-'+(Z.color||"default")+" "+this._eventIdToCssClass(Z.id)+'"><div class="wijmo-wijev-content"><div class="wijmo-wijev-title">'+this._formatString(Ae,Z.start,Z.end,Z.subject,Z.location,"")+'</div></div><div class="wijmo-wijev-resizer"><div class="ui-icon ui-icon-grip-solid-horizontal">&nbsp;</div></div></div>');Ad.css("top",V);Ad.outerHeight(P-V);E(U[Ac]).append(Ad)}}}this._storeDayCache(Aa[Ac],L[Ac],U[Ac]);U[Ac]._cached=true;I.push(U[Ac])}}}this._dayColumnsToResolve=I;this._dayColumnResolveIdx=0;if(!this._resolveDayApptConflictsTimeout){clearTimeout(this._resolveDayApptConflictsTimeout);this._resolveDayApptConflictsTimeout=null}this._resolveDayApptConflictsTimeout=setTimeout(E.proxy(this._resolveDayViewAppointmentConflictsCb1,this),1);K&&this._invalidateDayView(true);if(this._dayViewScrollToEvent){Ad=this.element.find(".wijmo-wijev-dayview .wijmo-wijev-daycolumn ."+this._eventIdToCssClass(this._dayViewScrollToEvent.id));Ad.length>0&&this.element.find(".wijmo-wijev-scrollpanel").wijsuperpanel("scrollChildIntoView",Ad)}},_resolveDayViewAppointmentConflictsCb1:function(){this._resolveDayApptConflictsTimeout=null;if(!this._dayColumnsToResolve||this._dayColumnResolveIdx>=this._dayColumnsToResolve.length){return}this._resolveDayViewAppointmentConflicts(this._dayColumnsToResolve[this._dayColumnResolveIdx]);this._dayColumnResolveIdx=this._dayColumnResolveIdx+1;setTimeout(E.proxy(this._resolveDayViewAppointmentConflictsCb1,this),1)},_resolveDayViewAppointmentConflicts:function(N){var J=E(N).find(".wijmo-wijev-appointment"),Q=[],I,O,T,P,L,R,M,K;for(O=0,R=J.length;O<R;O+=1){P=J[O];for(T=0;T<R;T+=1){if(T!==O){L=J[T];if(P.offsetTop<L.offsetTop+L.offsetHeight&&P.offsetTop+P.offsetHeight>L.offsetTop){if(!Q[O]){Q[O]=[P]}Q[O].push(L)}}}}for(O=0,R=Q.length;O<R;O+=1){I=Q[O];if(I){P=I[0];M=I.length;P.style.width=Math.ceil(100/M)+"%";I.sort(this._sortOffsetTop);for(T=0;T<M;T+=1){P=I[T];K=Math.floor(100*T/M);P.style.marginLeft=K+"%";P.style.zIndex=K}}}},_sortOffsetTop:function(J,I){return J.offsetTop<I.offsetTop?-1:J.offsetTop>I.offsetTop?1:0},_onDayViewTimeIntervalClick:function(I){this.showEditEventDialog(null,I.target,I)},_onDayViewAllDayCellClick:function(I){var J=E(I.target);if(J.hasClass("wijmo-wijev-appointment")||J.parents(".wijmo-wijev-appointment").length>0){return}this.showEditEventDialog(null,I.target,I)},_onMonthViewDayLabelClick:function(J){var I=E(J.target).parent(".wijmo-wijev-monthcellcontainer"),K=this.options,L;L=this._parseDateFromClass(I[0].className);if(K.viewType!=="day"){K.viewType="day";this._onViewTypeChanged()}K.selectedDates=[new Date(L)];this._onSelectedDatesChanged()},_onMonthViewCellClick:function(J){var I=E(J.target).parent(".wijmo-wijev-monthcellcontainer");if(I.length<1){return}this.showEditEventDialog(null,I,J)},_onAppointmentClick:function(I){var J=E(I.target),K;if(this._apptDragResizeFlag){return}if(!J.hasClass("wijmo-wijev-appointment")){J=J.parents(".wijmo-wijev-appointment")}if(J.length>0){K=this.findEventById(J[0].className);this._ensureEditEventDialogCreated();this._bindApptToDialog(K);this._editEventDialog._arrowTarget=J;this._editEventDialog.wijpopup("show",{of:J,my:"left center",at:"right center",offset:"-10 0"})}},findEventById:function(J){var I;if(J){I=J.indexOf("apptid_");if(I!==-1){J=this._parseEventIdFromClass(J)}if(this._appointmentsById){return this._appointmentsById[J]}}return null},_onDayViewAppointmentMouseDown:function(I){var K=E(I.target),L=K.hasClass("wijmo-wijev-appointment")?K:K.parents(".wijmo-wijev-appointment"),J=K.hasClass("wijmo-wijev-resizer")||K.parents(".wijmo-wijev-resizer").length>0;this._isApptResize=J;I.preventDefault();if(this._isApptResize){this.__startApptH=L[0].offsetHeight;this.__startApptY=L[0].offsetTop}else{this.__startApptY=L[0].offsetTop}this.__startClientY=I.clientY;this.__targetAppt=L;E(document).bind("mousemove.tmp_wijevcal",E.proxy(this._onDayViewAppointmentMouseMove,this));E(document).bind("mouseup.tmp_wijevcal",E.proxy(this._onDayViewAppointmentMouseUp,this));this.element.find(".wijmo-wijev-dayview .wijmo-wijev-daycolumn").bind("mouseover.tmp_wijevcal",E.proxy(this._onDayViewColumnMouseOver,this))},_onDayViewAppointmentMouseMove:function(I){I.preventDefault();var L=I.clientY-this.__startClientY,K,J=this.options,M;if(!I.ctrlKey){L=Math.round(L/J.timeIntervalHeight)*J.timeIntervalHeight}if(L!==0&&!this._apptDragResizeFlag){this._apptDragResizeFlag=true;this.__targetAppt.addClass("wijmo-wijev-dragging");this.__targetAppt.css("width","100%").css("margin-left","0").css("z-index","1000")}if(this._apptDragResizeFlag){if(this._isApptResize){M=this.__startApptH+L;if(M<0){M=Math.abs(M);K=this.__startApptY-M;if(K>=0){this.__targetAppt.css("height",M);this.__targetAppt.css("top",K)}}else{this.__targetAppt.css("height",M)}}else{K=this.__startApptY+L;if(K<0){K=0}this.__targetAppt.css("top",K)}this._onApptVisualDargOrResize(this.__targetAppt,this.findEventById(this.__targetAppt[0].className))}},_onDayViewAppointmentMouseUp:function(){this.__targetAppt&&this.__targetAppt.removeClass("wijmo-wijev-dragging");E(document).unbind(".tmp_wijevcal");this.element.find(".wijmo-wijev-dayview .wijmo-wijev-daycolumn").unbind(".tmp_wijevcal");this._resolveDayViewAppointmentConflicts(this.__targetAppt.parents(".wijmo-wijev-daycolumn"));if(this._apptDragResizeFlag){var I=this.findEventById(this.__targetAppt[0].className);this._onApptVisualDargOrResize(this.__targetAppt,I);this.updateEvent(I);window.setTimeout(E.proxy(function(){if(this.__targetAppt&&!this.__targetAppt.hasClass("wijmo-wijev-dragging")){this._apptDragResizeFlag=false}},this),1)}},_updateAppointmentVisual:function(O){var Q=this.element.find(".wijmo-wijev-dayview ."+this._eventIdToCssClass(O.id)),P=this.options,L,M,T,J,I,R,K,N;if(Q.length===1){this._addColorClass(Q,O.color);Q.find(".wijmo-wijev-title").html(this._formatString(P.eventTitleFormat,O.start,O.end,O.subject,O.location,""));I=H(O.start);L=(O.start-I)/60000;M=(O.end-I)/60000;T=Math.round(L*P.timeIntervalHeight/P.timeInterval);J=Math.round(M*P.timeIntervalHeight/P.timeInterval);Q.css("top",T);Q.css("height",J-T);R=this._dayDateToCssClass(I);if(Q.parents(".wijmo-wijev-daycolumn."+R).length!==1){K=Q[0].parentNode;N=this.element.find(".wijmo-wijev-daycolumn."+R);K.removeChild(Q[0]);Q.appendTo(N)}}},_onApptVisualDargOrResize:function(N,O){var M=this.options,Q=N[0].offsetTop,J=Q+N[0].offsetHeight,I,K,P,L,R;R=this._parseDateFromClass(N.parents(".wijmo-wijev-daycolumn")[0].className,null);I=Math.round(Q*M.timeInterval/M.timeIntervalHeight);K=Math.round(J*M.timeInterval/M.timeIntervalHeight);P=new Date(I*60000+R.getTime());L=new Date(K*60000+R.getTime());if(O){O.start=P;O.end=L;N.find(".wijmo-wijev-title").html(this._formatString(M.eventTitleFormat,O.start,O.end,O.subject,O.location,""))}},_onDayViewColumnMouseOver:function(I){var K=E(I.target).parents(".wijmo-wijev-daycolumn"),J=this.__targetAppt.parents(".wijmo-wijev-daycolumn");if(K.length>0&&J.length>0&&K[0].className!==J[0].className){this.__targetAppt[0].parentNode.removeChild(this.__targetAppt[0]);this._resolveDayViewAppointmentConflicts(J);this.__targetAppt.appendTo(K)}},_renderMonthView:function(){var W=this.options,v=W.selectedDate,M=W.firstDayOfWeek,R=false,O=false,Y,a,Q,N=new Date,w,K,U=false,Z,L=["","","","","","",""],X,V,P=this.element.find(".wijmo-wijev-view.wijmo-wijev-monthview"),T,J=W.dayHeaderFormat,I=W.firstRowDayHeaderFormat;if(!v){v=new Date}a=new Date(v.getFullYear(),v.getMonth(),1);while(a.getDay()!==M){a=this._addDays(a,-1)}Q=new Date(v.getFullYear(),v.getMonth(),this._daysInMonth(v.getMonth(),v.getFullYear()));Y=a;w=0;K=0;while(Y<Q||w<7){if(Y>Q){Q=Y}X="";Z="wijmo-wijev-monthcellcontainer ui-widget-content "+this._dayDateToCssClass(Y);O=Y.getMonth()!==v.getMonth();if(O){Z+=" wijmo-wijev-othermonth"}if(U){U=false}else{Z+=" wijmo-wijev-leftborder";if(w===6){Z+=" wijmo-wijev-rightborder"}}R=this._compareDayDates(Y,N)===0;if(R){Z+=" wijmo-wijev-today";Z+=" wijmo-wijev-rightborder";U=true}X+='<div class="'+Z+'">';X+='<div class="wijmo-wijev-monthcellheader';if(O){X+=" ui-priority-secondary"}if(R){X+=" ui-state-highlight"}X+='">';if(R){X+='<span class="wijmo-wijev-todaylabel">Today</span>'}if(K===0){X+=this._formatString(I,Y)}else{X+=this._formatString(J,Y)}X+="</div>";X+='<div class="wijmo-wijev-monthcell';if(O){X+=" ui-priority-secondary"}if(R){X+=" ui-state-highlight"}X+='"></div>';X+="</div>";L[w]=L[w]+X;w+=1;Y=this._addDays(Y,1);if(w>6){if(Y>Q){break}w=0;K+=1}}if(P.length===0){P=E('<div class="wijmo-wijev-view wijmo-wijev-monthview ui-widget-content"><h3 class="wijmo-wijev-header-title">title</h3><div class="wijmo-wijev-monthview-inner"></div></div>');P.appendTo(this.element.find(".wijmo-wijev-view-container"))}T=P.find(".wijmo-wijev-monthview-inner");T.find(".wijmo-wijev-monthcolumn").remove();Y=a;for(V=0;V<7;V+=1){T.append('<div class="wijmo-wijev-monthcolumn">'+L[V]+"</div>");Y=this._addDays(Y,1)}this._invalidateMonthView();this._renderMonthViewAppointments()},_invalidateMonthView:function(){var T=this.element.find(".wijmo-wijev-monthview"),R=T.find(".wijmo-wijev-monthview-inner"),Q=T.find(".wijmo-wijev-monthcolumn"),M=T.find(".wijmo-wijev-monthcellcontainer"),N=this.element.find(".wijmo-wijev-monthview .wijmo-wijev-header-title"),V,I,U,L,K,P,O,J;this._invalidateView();if(Q.length<1){return}V=T.innerWidth();I=T.innerHeight()-N.outerHeight(true);R.outerWidth(V);R.outerHeight(I);V=V-(R.outerWidth(true)-R.innerWidth());I=I-(R.outerHeight(true)-R.innerHeight());U=Math.floor(V/Q.length);Q.outerWidth(U);J=V-U*Q.length;J>0&&E(Q[Q.length-1]).outerWidth(U+J);O=E(Q[0]).find(".wijmo-wijev-weekdayname").outerHeight(true);L=Math.floor((I-O)/E(Q[0]).find(".wijmo-wijev-monthcellcontainer").length);M.height(L);K=E(M[0]).find(".wijmo-wijev-monthcellheader").outerHeight(true);P=L-K;M.find(".wijmo-wijev-monthcell").outerHeight(P)},_renderMonthViewAppointments:function(){var U=this._eventsView,Q,V,I,M,O,L=this.element.find(".wijmo-wijev-monthcellcontainer"),T,R,K,P=this.options,J,N=P.eventTitleFormat;if(U){for(I=0,O=L.length;I<O;I+=1){T=L[I];R=this._parseDateFromClass(T.className);K=new Date(R.getFullYear(),R.getMonth(),R.getDate(),23,59,59);for(V=0,M=U.length;V<M;V+=1){Q=U[V];if(Q.start<K&&Q.end>R){J=E('<div class="wijmo-wijev-appointment '+this._eventIdToCssClass(Q.id)+'"><div class=" wijmo-wijev-colordot wijmo-wijev-event-color-'+(Q.color||"default")+'"></div><div class="wijmo-wijev-event-title">'+Q.subject+"</div></div>");E(T).find(".wijmo-wijev-monthcell").append(J)}}}}},log:function(){},_log:function(I,K){var J;if(this.logPanel){J=new Date;this.logPanel.prepend(E('<span class="'+(K?K:"wijmo-wijev-information")+'">['+J.getHours()+":"+J.getMinutes()+":"+J.getSeconds()+"] "+I+"</span><br/>"))}},_createLogPanel:function(){if(!this.logPanel){this.logDialog=E('<div title="Log"><div class="wijmo-wijev-log"></div></div>');this.logDialog.appendTo(this.element);this.logPanel=this.logDialog.wijdialog({captionButtons:{},buttons:{"Clear All":function(){E(this).find(".wijmo-wijev-log").html("")},Close:function(){E(this).wijdialog("close")}},width:600,height:420,position:["right","top"]}).find(".wijmo-wijev-log")}this.logDialog.wijdialog("open")},status:function(I,J){this.element.find(".wijmo-wijev-statusbar").html("<span class='"+(J?J:"wijmo-wijev-status")+"'>"+I+"</span>");this.log(I,J?J:"wijmo-wijev-status")},_invalidateView:function(){var Q=this.element.find(".wijmo-wijev-rightpane"),W=this.element.find(".wijmo-wijev-leftpane"),L=W.find(".wijmo-wijev-agenda-container"),K=this.element.find(".wijmo-wijev-headerbar"),N=this.element.find(".wijmo-wijev-navigationbar"),R=this.element.find(".wijmo-wijev-statusbar"),V=this.element.find(".wijmo-wijev-view-container"),J=this.element.find(".wijmo-wijev-view"),T,Z,M,Y,P,I,O,a,U,X;T=this.element.innerWidth()-(V.outerWidth(true)-V.innerWidth());Z=this.element.innerHeight()-(V.outerHeight(true)-V.innerHeight());M=K.is(":visible")?K.outerHeight(true):0;Y=N.is(":visible")?N.outerHeight(true):0;P=R.is(":visible")?R.outerHeight(true):0;V.outerWidth(T);V.outerHeight(Z-M-Y-P);a=0;for(X=0;X<W.length;X+=1){if(E(W[X]).is(":visible")){a+=E(W[X]).outerWidth()}}U=Q.is(":visible")?Q.outerWidth():0;I=Z-M-Y-P;O=T-U-a;J.outerHeight(I);J.outerWidth(O);K.outerWidth(O+a);N.outerWidth(this.element.innerWidth());R.outerWidth(O+a+U);W.outerHeight(Z-M-Y-P);L.outerHeight(W.innerHeight()-L[0].offsetTop);Q.outerHeight(Z+100);this.element.find(".wijmo-wijev-datepager").wijdatepager("refresh")},_daysInMonth:function(K,I){var J=new Date(I,K+1,0);return J.getDate()},_addMinutes:function(J,I){return new Date(J.getFullYear(),J.getMonth(),J.getDate(),J.getHours(),J.getMinutes()+I)},_addDays:function(J,I){return new Date(J.getFullYear(),J.getMonth(),J.getDate()+I)},_setTime:function(J,I){J=new Date(J);J.setHours(I.getHours());J.setMinutes(I.getMinutes());J.setSeconds(I.getSeconds());J.setMilliseconds(I.getMilliseconds());return J},_addMonths:function(J,I){return new Date(J.getFullYear(),J.getMonth()+I,J.getDate())},_compareDayDates:function(J,I){J=new Date(J.getFullYear(),J.getMonth(),J.getDate());I=new Date(I.getFullYear(),I.getMonth(),I.getDate());return J<I?-1:J>I?1:0},_dayDateToCssClass:function(I){return"wijmo-wijev-date_"+I.getFullYear()+"_"+I.getMonth()+"_"+I.getDate()},_parseDateFromClass:function(I,P,O){var L,M,K,J=new RegExp("wijmo-wijev-minute-(\\d+)\\s"),N=new RegExp("wijmo-wijev-date_(\\d+_\\d+_\\d+)\\s");if(I){K=N.exec(I+" ")[1].split("_");L=new Date(parseInt(K[0],10),parseInt(K[1],10),parseInt(K[2],10));if(P){M=J.exec(P+" ");if(M){M=parseInt(M[1],10);L.setMinutes(M)}}return L}else{return O||null}},_eventIdToCssClass:function(I){return"apptid_"+I},_parseEventIdFromClass:function(I){var K="",J,L;J=new RegExp("apptid_(\\S+)");L=J.exec(I);if(L&&L.length>1){K=L[1]}return K},_isContainsDayDate:function(I,J){var K;if(I){for(K=0;K<I.length;K+=1){if(this._compareDayDates(I[K],J)===0){return true}}}else{return false}},_formatString:function(M){var J,K=arguments,L,I,N=this;if(K.length<=1){return Globalize.format(K)}if(typeof M==="string"){if(M==="_formatWeekTitle"){M=this._formatWeekTitle}else{if(typeof window[M]==="function"){M=window[M]}}}if(typeof M==="function"){I=[];for(L=1;L<K.length;L++){I[L-1]=K[L]}return M.apply(this,I)}J=new RegExp("\\{(\\d+)(?:,([-+]?\\d+))?(?:\\:([^(^}]+)(?:\\(((?:\\\\\\)|[^)])+)\\)){0,1}){0,1}\\}","g");return M.replace(J,function(R,P,O,Q){R=K[Number(P)+1];return Q?Globalize.format(R,Q,N._getCulture()):R})},_formatWeekTitle:function(J,I){return J.getMonth()!=I.getMonth()?this._formatString("{0:MMMM} - {1:MMMM yyyy}",J,I):this._formatString("{0:MMMM yyyy}",J)},_formatDayHeaderDate:function(K){var I=this.options,J=I.viewType.toLowerCase(),L=this.options.dayViewHeaderFormat;if(L[J]){L=L[J]}else{if(!L[J]){return""}}return this._formatString(L,K)},_getCulture:function(I){return Globalize.findClosestCulture(I||this.options.culture)},_isRTL:function(){return !!this._getCulture().isRTL},_onAjaxError:function(I,K,J){if(K){this.status("Ajax error "+K.status+" ("+K.statusText+")","error");this.log("Error, requested url: "+J.url,"error")}else{this.status("Ajax error detected.","error");this.log("Error, requested url: "+J.url,"error")}},_onWindowResize:function(){this.invalidate()}})})(jQuery);