(function(A){A.fn.extend({jresize:function(B){if(typeof B=="string"){if(B=="destroy"){return this.each(function(){var C=this;A("div[class^='resizable']",C).each(function(){A(this).hide()})})}}return this.each(function(){var D=A(this);var C=A(".resizable");A("div[class^='resizable']",D).each(function(){var E=this;A(E).mousedown(function(F){A.pdialog.switchDialog(D);A.resizeTool.start(C,D,F,A(E).attr("tar"));return false}).show()})})}});A.resizeTool={start:function(B,E,C,D){A.pdialog.initResize(B,E,D);A.data(B[0],"layer-drag",{options:A.extend(A.pdialog._op,{target:D,dialog:E,stop:A.resizeTool.stop})});A.layerdrag.start(B[0],C,A.pdialog._op)},stop:function(){var B=A.data(arguments[0],"layer-drag");A.pdialog.resizeDialog(arguments[0],B.options.dialog,B.options.target);A("body").css("cursor","");A(arguments[0]).hide()}};A.layerdrag={start:function(B,C,D){if(!A.layerdrag.current){A.layerdrag.current={el:B,oleft:parseInt(B.style.left)||0,owidth:parseInt(B.style.width)||0,otop:parseInt(B.style.top)||0,oheight:parseInt(B.style.height)||0,ox:C.pageX||C.screenX,oy:C.pageY||C.clientY};A(document).bind("mouseup",A.layerdrag.stop);A(document).bind("mousemove",A.layerdrag.drag)}return A.layerdrag.preventEvent(C)},drag:function(B){if(!B){var B=window.event}var I=A.layerdrag.current;var D=A.data(I.el,"layer-drag");var E=(B.pageX||B.screenX)-I.ox;var F=(B.pageY||B.clientY)-I.oy;if((B.pageY||B.clientY)<=0||(B.pageY||B.clientY)>=(A(window).height()-A(".dialogHeader",A(D.options.dialog)).outerHeight())){return false}var H=D.options.target;var G=I.owidth;var C=I.oheight;if(H!="n"&&H!="s"){G+=(H.indexOf("w")>=0)?-E:E}if(G>=A.pdialog._op.minW){if(H.indexOf("w")>=0){I.el.style.left=(I.oleft+E)+"px"}if(H!="n"&&H!="s"){I.el.style.width=G+"px"}}if(H!="w"&&H!="e"){C+=(H.indexOf("n")>=0)?-F:F}if(C>=A.pdialog._op.minH){if(H.indexOf("n")>=0){I.el.style.top=(I.otop+F)+"px"}if(H!="w"&&H!="e"){I.el.style.height=C+"px"}}return A.layerdrag.preventEvent(B)},stop:function(B){var C=A.layerdrag.current;var D=A.data(C.el,"layer-drag");A(document).unbind("mousemove",A.layerdrag.drag);A(document).unbind("mouseup",A.layerdrag.stop);if(D.options.stop){D.options.stop.apply(C.el,[C.el])}A.layerdrag.current=null;return A.layerdrag.preventEvent(B)},preventEvent:function(B){if(B.stopPropagation){B.stopPropagation()}if(B.preventDefault){B.preventDefault()}return false}}})(jQuery);