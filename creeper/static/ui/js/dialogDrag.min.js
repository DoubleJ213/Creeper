(function(A){A.fn.dialogDrag=function(B){if(typeof B=="string"){if(B=="destroy"){return this.each(function(){var C=this;A("div.dialogHeader",C).unbind("mousedown")})}}return this.each(function(){var C=A(this);A("div.dialogHeader",C).mousedown(function(D){A.pdialog.switchDialog(C);C.data("task",true);setTimeout(function(){if(C.data("task")){A.dialogDrag.start(C,D)}},100);return false}).mouseup(function(D){C.data("task",false);return false})})};A.dialogDrag={currId:null,_init:function(C){this.currId=new Date().getTime();var B=A("#dialogProxy");if(!B.size()){B=A(DWZ.frag["dialogProxy"]);A("body").append(B)}A("h1",B).html(A(".dialogHeader h1",C).text())},start:function(D,C){this._init(D);var B=A("#dialogProxy");B.css({left:D.css("left"),top:D.css("top"),height:D.css("height"),width:D.css("width"),zIndex:parseInt(D.css("zIndex"))+1}).show();A("div.dialogContent",B).css("height",A("div.dialogContent",D).css("height"));B.data("dialog",D);D.css({left:"-10000px",top:"-10000px"});A(".shadow").hide();A(B).jDrag({selector:".dialogHeader",stop:this.stop,event:C});return false},stop:function(){var B=A(arguments[0]);var C=B.data("dialog");A(C).css({left:A(B).css("left"),top:A(B).css("top")});A.pdialog.attachShadow(C);A(B).hide()}}})(jQuery);