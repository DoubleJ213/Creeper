(function(G){var D=new Map();G.dwz=G.dwz||{};G(window).resize(function(){setTimeout(function(){for(var I=0;I<D.size();I++){F(D.element(I).key)}},100)});G.fn.extend({accordion:function(I,K){var J=Array.prototype.slice.call(arguments,1);return this.each(function(){if(I.fillSpace){D.put(I.fillSpace,this)}if(typeof I=="string"){var L=G.data(this,"dwz-accordion");L[I].apply(L,J)}else{if(!G(this).is(".dwz-accordion")){G.data(this,"dwz-accordion",new G.dwz.accordion(this,I))}}})},activate:function(I){return this.accordion("activate",I)}});G.dwz.accordion=function(J,I){this.options=I=G.extend({},G.dwz.accordion.defaults,I);this.element=J;G(J).addClass("dwz-accordion");if(I.navigation){var K=G(J).find("a").filter(I.navigationFilter);if(K.length){if(K.filter(I.header).length){I.active=K}else{I.active=K.parent().parent().prev();K.addClass("current")}}}I.headers=G(J).find(I.header);I.active=A(I.headers,I.active);if(I.fillSpace){F(I.fillSpace)}else{if(I.autoheight){var L=0;I.headers.next().each(function(){L=Math.max(L,G(this).outerHeight())}).height(L)}}I.headers.not(I.active||"").next().hide();I.active.find("h2").addClass(I.selectedClass);if(I.event){G(J).bind((I.event)+".dwz-accordion",B)}};G.dwz.accordion.prototype={activate:function(I){B.call(this.element,{target:A(this.options.headers,I)[0]})},enable:function(){this.options.disabled=false},disable:function(){this.options.disabled=true},destroy:function(){this.options.headers.next().css("display","");if(this.options.fillSpace||this.options.autoheight){this.options.headers.next().css("height","")}G.removeData(this.element,"dwz-accordion");G(this.element).removeClass("dwz-accordion").unbind(".dwz-accordion")}};function E(I,J){return function(){return I.apply(J,arguments)}}function H(K){if(!G.data(this,"dwz-accordion")){return}var I=G.data(this,"dwz-accordion");var J=I.options;J.running=K?0:--J.running;if(J.running){return}if(J.clearStyle){J.toShow.add(J.toHide).css({height:"",overflow:""})}G(this).triggerHandler("change.dwz-accordion",[J.data],J.change)}function F(I){var J=D.get(I);if(!J){return}var M=G(J).parent();var L=M.height()-((G(".accordionHeader",J).size())*(G(".accordionHeader:first-child",J).outerHeight()))-2;var K=M.children().not(J);G.each(K,function(N){L-=G(K[N]).outerHeight()});G(".accordionContent",J).height(L)}function C(O,M,K,N,I){var L=G.data(this,"dwz-accordion").options;L.toShow=O;L.toHide=M;L.data=K;var J=E(H,this);L.running=M.size()==0?O.size():M.size();if(L.animated){if(!L.alwaysOpen&&N){G.dwz.accordion.animations[L.animated]({toShow:jQuery([]),toHide:M,complete:J,down:I,autoheight:L.autoheight})}else{G.dwz.accordion.animations[L.animated]({toShow:O,toHide:M,complete:J,down:I,autoheight:L.autoheight})}}else{if(!L.alwaysOpen&&N){O.toggle()}else{M.hide();O.show()}J(true)}}function B(L){var N=G.data(this,"dwz-accordion").options;if(N.disabled){return false}if(!L.target&&!N.alwaysOpen){N.active.find("h2").toggleClass(N.selectedClass);var O=N.active.next(),K={instance:this,options:N,newHeader:jQuery([]),oldHeader:N.active,newContent:jQuery([]),oldContent:O},P=N.active=G([]);C.call(this,P,O,K);return false}var I=G(L.target);if(I.parents(N.header).length){while(!I.is(N.header)){I=I.parent()}}var M=I[0]==N.active[0];if(N.running||(N.alwaysOpen&&M)){return false}if(!I.is(N.header)){return}N.active.find("h2").toggleClass(N.selectedClass);if(!M){I.find("h2").addClass(N.selectedClass)}var P=I.next(),O=N.active.next(),K={instance:this,options:N,newHeader:I,oldHeader:N.active,newContent:P,oldContent:O},J=N.headers.index(N.active[0])>N.headers.index(I[0]);N.active=M?G([]):I;C.call(this,P,O,K,M,J);return false}function A(I,J){return J!=undefined?typeof J=="number"?I.filter(":eq("+J+")"):I.not(I.not(J)):J===false?G([]):I.filter(":eq(0)")}G.extend(G.dwz.accordion,{defaults:{selectedClass:"collapsable",alwaysOpen:true,animated:"slide",event:"click",header:".accordionHeader",autoheight:true,running:0,navigationFilter:function(){return this.href.toLowerCase()==location.href.toLowerCase()}},animations:{slide:function(L,K){L=G.extend({easing:"swing",duration:300},L,K);if(!L.toHide.size()){L.toShow.animate({height:"show"},L);return}var M=L.toHide.height(),J=L.toShow.height(),I=J/M;L.toShow.css({height:0}).show();L.toHide.filter(":hidden").each(L.complete).end().filter(":visible").animate({height:"hide"},{step:function(O){var N=(M-O)*I;if(G.browser.msie||G.browser.opera){N=Math.ceil(N)}L.toShow.height(N)},duration:L.duration,easing:L.easing,complete:function(){if(!L.autoheight){L.toShow.css({height:"auto"})}L.toShow.css({overflow:"auto"});L.complete()}})},bounceslide:function(I){this.slide(I,{easing:I.down?"bounceout":"swing",duration:I.down?1000:200})},easeslide:function(I){this.slide(I,{easing:"easeinout",duration:700})}}})})(jQuery);