(function(F){var A,B,D;F.fn.extend({contextMenu:function(J,H){var G=F.extend({shadow:true,bindings:{},ctrSub:null},H);if(!A){A=F('<div id="contextmenu"></div>').appendTo("body").hide()}if(!B){B=F('<div id="contextmenuShadow"></div>').appendTo("body").hide()}D=D||[];D.push({id:J,shadow:G.shadow,bindings:G.bindings||{},ctrSub:G.ctrSub});var I=D.length-1;F(this).bind("contextmenu",function(K){C(I,this,K,G);return false});return this}});function C(J,G,K,M){var H=D[J];var L=F(DWZ.frag[H.id]);L.find("li").hoverClass();A.html(L);F.each(H.bindings,function(P,O){F("[rel='"+P+"']",A).bind("click",function(Q){E();O(F(G),F("#"+H.id))})});var N=K.pageX;var I=K.pageY;if(F(window).width()<N+A.width()){N-=A.width()}if(F(window).height()<I+A.height()){I-=A.height()}A.css({"left":N,"top":I}).show();if(H.shadow){B.css({width:A.width(),height:A.height(),left:N+3,top:I+3}).show()}F(document).one("click",E);if(F.isFunction(H.ctrSub)){H.ctrSub(F(G),F("#"+H.id))}}function E(){A.hide();B.hide()}})(jQuery);