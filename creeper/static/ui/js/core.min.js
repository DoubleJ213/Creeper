var DWZ={keyCode:{ENTER:13,ESC:27,END:35,HOME:36,SHIFT:16,TAB:9,LEFT:37,RIGHT:39,UP:38,DOWN:40,DELETE:46,BACKSPACE:8},eventType:{pageClear:"pageClear",resizeGrid:"resizeGrid"},isOverAxis:function(C,B,A){return(C>B)&&(C<(B+A))},isOver:function(E,D,C,B,A,F){return this.isOverAxis(E,C,A)&&this.isOverAxis(D,B,F)},pageInfo:{pageNum:"pageNum",numPerPage:"numPerPage",orderField:"orderField",orderDirection:"orderDirection"},statusCode:{ok:200,error:300,timeout:301},ui:{sbar:true},frag:{},_msg:{},_set:{loginUrl:"",loginTitle:"",debug:false},msg:function(A,C){var B=function(F,G){G=G||[];var E=F||"";for(var D=0;D<G.length;D++){E=E.replace(new RegExp("\\{"+D+"\\}","g"),G[D])}return E};return B(this._msg[A],C)},debug:function(A){if(this._set.debug){if(typeof(console)!="undefined"){console.log(A)}else{alert(A)}}},loadLogin:function(){if($.pdialog&&DWZ._set.loginTitle){$.pdialog.open(DWZ._set.loginUrl,"login",DWZ._set.loginTitle,{mask:true,width:520,height:260})}else{window.location=DWZ._set.loginUrl}},obj2str:function(C){var A=[];if(typeof C=="string"){return'"'+C.replace(/([\'\"\\])/g,"\\$1").replace(/(\n)/g,"\\n").replace(/(\r)/g,"\\r").replace(/(\t)/g,"\\t")+'"'}if(typeof C=="object"){if(!C.sort){for(var B in C){A.push(B+":"+DWZ.obj2str(C[B]))}if(!!document.all&&!/^\n?function\s*toString\(\)\s*\{\n?\s*\[native code\]\n?\s*\}\n?\s*$/.test(C.toString)){A.push("toString:"+C.toString.toString())}A="{"+A.join()+"}"}else{for(var B=0;B<C.length;B++){A.push(DWZ.obj2str(C[B]))}A="["+A.join()+"]"}return A}return C.toString()},jsonEval:function(data){try{if($.type(data)=="string"){return eval("("+data+")")}else{return data}}catch(e){return{}}},ajaxError:function(C,B,A){if(C.status==401){alertMsg.error(C.responseText)}else{if(C.status==403){window.location.href="/authorize_manage/tips/"}else{if(alertMsg){alertMsg.error(C.responseText)}else{alert("Http status: "+C.status+" "+C.statusText+"\najaxOptions: "+B+"\nthrownError:"+A+"\n"+C.responseText)}}}},ajaxError_cover:function(C,B,A){if($("#progressBar")){$("#progressBar").css("display","none")}if($("#background")){$("#background").css("display","none")}if(alertMsg){alertMsg.error("<div>Http status: "+C.status+" "+C.statusText+"</div><div>ajaxOptions: "+B+"</div><div>thrownError: "+A+"</div><div>"+C.responseText+"</div>")}else{alert("Http status: "+C.status+" "+C.statusText+"\najaxOptions: "+B+"\nthrownError:"+A+"\n"+C.responseText)}},ajaxError2:function(C,B,A){if(C.status==401){alertMsg.error(C.responseText)}else{if(C.status==403){window.location.href="/authorize_manage/tips/"}else{if(alertMsg){alertMsg.error(C.responseText)}else{alert("Http status: "+C.status+" "+C.statusText+"\najaxOptions: "+B+"\nthrownError:"+A+"\n"+C.responseText)}if($("#progressBar")){$("#progressBar").css("display","none")}if($("#background")){$("#background").css("display","none")}}}},ajaxDone:function(A){if(A.statusCode===undefined&&A.message===undefined){if(alertMsg){return alertMsg.error(A)}else{return alert(A)}}if(A.statusCode==DWZ.statusCode.error){if(A.message&&alertMsg){alertMsg.error(A.message)}}else{if(A.statusCode==DWZ.statusCode.timeout){if(alertMsg){alertMsg.error(A.message||DWZ.msg("sessionTimout"),{okCall:DWZ.loadLogin})}else{DWZ.loadLogin()}}else{if(A.message&&alertMsg){alertMsg.correct(A.message)}}}},ajaxDone2:function(A){if(A.statusCode===undefined&&A.message===undefined){if(alertMsg){return alertMsg.error(A)}else{return alert(A)}}if(A.statusCode==DWZ.statusCode.error){if(A.message&&alertMsg){alertMsg.error(A.message)}}else{if(A.statusCode==DWZ.statusCode.timeout){if(alertMsg){alertMsg.error(A.message||DWZ.msg("sessionTimout"),{okCall:DWZ.loadLogin})}else{DWZ.loadLogin()}}else{if(A.message&&alertMsg){alertMsg.correct(A.message)}}}},init:function(A,D){var C=$.extend({loginUrl:"login.html",loginTitle:null,callback:null,debug:false,statusCode:{}},D);this._set.loginUrl=C.loginUrl;this._set.loginTitle=C.loginTitle;this._set.debug=C.debug;$.extend(DWZ.statusCode,C.statusCode);$.extend(DWZ.pageInfo,C.pageInfo);jQuery.ajax({type:"GET",url:A,dataType:"xml",timeout:50000,cache:false,error:function(E){alert("Error loading XML document: "+A+"\nHttp status: "+E.status+" "+E.statusText)},success:function(E){$(E).find("_PAGE_").each(function(){var F=$(this).attr("id");if(F){DWZ.frag[F]=$(this).text()}});$(E).find("_MSG_").each(function(){var F=$(this).attr("id");if(F){DWZ._msg[F]=$(this).text()}});if(jQuery.isFunction(C.callback)){C.callback()}}});var B=$(document);if(!B.isBind(DWZ.eventType.pageClear)){B.bind(DWZ.eventType.pageClear,function(F){var E=F.target;if($.fn.xheditor){$("textarea.editor",E).xheditor(false)}})}}};(function(A){A.setRegional=function(B,C){if(!A.regional){A.regional={}}A.regional[B]=C};A.fn.extend({ajaxUrl:function(C){var B=A(this);B.trigger(DWZ.eventType.pageClear);A.ajax({type:C.type||"GET",url:C.url,data:C.data,cache:false,success:function(E){var D=DWZ.jsonEval(E);if(D.statusCode==DWZ.statusCode.timeout){alertMsg.error(D.message||DWZ.msg("sessionTimout"),{okCall:function(){if(A.pdialog){A.pdialog.checkTimeout()}if(navTab){navTab.checkTimeout()}DWZ.loadLogin()}})}if(D.statusCode==DWZ.statusCode.error){if(D.message){alertMsg.error(D.message)}}else{B.html(E).initUI();if(A.isFunction(C.callback)){C.callback(E)}}},error:DWZ.ajaxError,statusCode:{503:function(F,E,D){alert(DWZ.msg("statusCode_503")||D)}}})},ajaxUrl_cover:function(C){var B=A(this);if(A("#background")){A("#background").css("display","block")}if(A("#progressBar")){A("#progressBar").css("display","block")}B.trigger(DWZ.eventType.pageClear);A.ajax({type:C.type||"GET",url:C.url,data:C.data,cache:false,success:function(E){var D=DWZ.jsonEval(E);if(A("#background")){A("#background").css("display","none")}if(A("#progressBar")){A("#progressBar").css("display","none")}if(D.statusCode==DWZ.statusCode.timeout){alertMsg.error(D.message||DWZ.msg("sessionTimout"),{okCall:function(){if(A.pdialog){A.pdialog.checkTimeout()}if(navTab){navTab.checkTimeout()}DWZ.loadLogin()}})}if(D.statusCode==DWZ.statusCode.error){if(D.message){alertMsg.error(D.message)}}else{B.html(E).initUI();if(A.isFunction(C.callback)){C.callback(E)}}},error:DWZ.ajaxError_cover,statusCode:{503:function(F,E,D){alert(DWZ.msg("statusCode_503")||D)}}})},loadUrl:function(C,D,B){A(this).ajaxUrl({url:C,data:D,callback:B})},initUI:function(){return this.each(function(){if(A.isFunction(initUI)){initUI(this)}})},layoutH:function(B){return this.each(function(){var I=A(this);if(!B){B=I.parents("div.layoutBox:first")}var J=B.height();var D=parseInt(I.attr("layoutH"));var E=I.attr("overflow")||"auto";var C=J-D>50?J-D:50;if(I.isTag("table")){I.removeAttr("layoutH").wrap('<div layoutH="'+D+'" style="overflow:auto;height:'+C+'px"></div>')}else{var G=0;var F=["volume_div","snapshot_div"];var H=I.parent().parent().parent().attr("id");I.parent().parent().parent().siblings().each(function(){if(A(this).attr("id")){var M=Math.ceil(J/2);var K=Math.floor(J/2);if(navigator.userAgent.toLowerCase().indexOf("ie")!=-1){A("#snapshot_div").height(Math.ceil(J/2));A("#volume_div").height(Math.floor(J/2))}var L=A("#"+H).parent().parent();if(L.css("display")=="none"){if(H=="snapshot_div"){G+=M}else{if(H=="volume_div"){G+=K}}}else{if(F.indexOf(A(this).attr("id"))!=-1){G+=A(this).height()}}}});I.height(C-G).css("overflow",E);if(navigator.userAgent.toLowerCase().indexOf("ie")!=-1){if(A("#snapshot_div,#volume_div")){A("#snapshot_div,#volume_div").css("height","50%")}}}})},hoverClass:function(B,C){var D=B||"hover";return this.each(function(){var E=A(this),F;E.hover(function(){if(F){clearTimeout(F)}E.addClass(D)},function(){F=setTimeout(function(){E.removeClass(D)},C||10)})})},focusClass:function(B){var C=B||"textInputFocus";return this.each(function(){A(this).focus(function(){A(this).addClass(C)}).blur(function(){A(this).removeClass(C)})})},inputAlert:function(){return this.each(function(){var C=A(this);function B(){return C.parent().find("label.alt")}function E(G){var F=C.position();return{width:C.width(),top:F.top+"px",left:F.left+"px",opacity:G||1}}if(B().size()<1){if(!C.attr("id")){C.attr("id",C.attr("name")+"_"+Math.round(Math.random()*10000))}var D=A('<label class="alt" for="'+C.attr("id")+'">'+C.attr("alt")+"</label>").appendTo(C.parent());D.css(E(1));if(C.val()){D.hide()}}C.focus(function(){B().css(E(0.3))}).blur(function(){if(!A(this).val()){B().show().css("opacity",1)}}).keydown(function(){B().hide()})})},isTag:function(B){if(!B){return false}return A(this)[0].tagName.toLowerCase()==B?true:false},isBind:function(B){var C=A(this).data("events");return C&&B&&C[B]},log:function(B){return this.each(function(){if(console){console.log("%s: %o",B,this)}})}});A.extend(String.prototype,{isPositiveInteger:function(){return(new RegExp(/^[1-9]\d*$/).test(this))},isInteger:function(){return(new RegExp(/^\d+$/).test(this))},isNumber:function(B,C){return(new RegExp(/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/).test(this))},trim:function(){return this.replace(/(^\s*)|(\s*$)|\r|\n/g,"")},startsWith:function(B){return this.indexOf(B)===0},endsWith:function(C){var B=this.length-C.length;return B>=0&&this.lastIndexOf(C)===B},replaceSuffix:function(B){return this.replace(/\[[0-9]+\]/,"["+B+"]").replace("#index#",B)},trans:function(){return this.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"')},encodeTXT:function(){return(this).replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll(" ","&nbsp;")},replaceAll:function(C,B){return this.replace(new RegExp(C,"gm"),B)},replaceTm:function(B){if(!B){return this}return this.replace(RegExp("({[A-Za-z_]+[A-Za-z0-9_]*})","g"),function(C){return B[C.replace(/[{}]+/g,"")]})},replaceTmById:function(C){var B=C||A(document);return this.replace(RegExp("({[A-Za-z_]+[A-Za-z0-9_]*})","g"),function(E){var D=B.find("#"+E.replace(/[{}]+/g,""));return D.val()?D.val():E})},isFinishedTm:function(){return !(new RegExp("{[A-Za-z_]+[A-Za-z0-9_]*}").test(this))},skipChar:function(B){if(!this||this.length===0){return""}if(this.charAt(0)===B){return this.substring(1).skipChar(B)}return this},isValidPwd:function(){return(new RegExp(/^([_]|[a-zA-Z0-9]){6,32}$/).test(this))},isValidMail:function(){return(new RegExp(/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/).test(this.trim()))},isSpaces:function(){for(var B=0;B<this.length;B+=1){var C=this.charAt(B);if(C!=" "&&C!="\n"&&C!="\t"&&C!="\r"){return false}}return true},isPhone:function(){return(new RegExp(/(^([0-9]{3,4}[-])?\d{3,8}(-\d{1,6})?$)|(^\([0-9]{3,4}\)\d{3,8}(\(\d{1,6}\))?$)|(^\d{3,8}$)/).test(this))},isUrl:function(){return(new RegExp(/^[a-zA-z]+:\/\/([a-zA-Z0-9\-\.]+)([-\w .\/?%&=:]*)$/).test(this))},isExternalUrl:function(){return this.isUrl()&&this.indexOf("://"+document.domain)==-1}})})(jQuery);function Map(){this.elements=new Array();this.size=function(){return this.elements.length};this.isEmpty=function(){return(this.elements.length<1)};this.clear=function(){this.elements=new Array()};this.put=function(B,A){this.remove(B);this.elements.push({key:B,value:A})};this.remove=function(B){try{for(i=0;i<this.elements.length;i++){if(this.elements[i].key==B){this.elements.splice(i,1);return true}}}catch(A){return false}return false};this.get=function(B){try{for(i=0;i<this.elements.length;i++){if(this.elements[i].key==B){return this.elements[i].value}}}catch(A){return null}};this.element=function(A){if(A<0||A>=this.elements.length){return null}return this.elements[A]};this.containsKey=function(B){try{for(i=0;i<this.elements.length;i++){if(this.elements[i].key==B){return true}}}catch(A){return false}return false};this.values=function(){var A=new Array();for(i=0;i<this.elements.length;i++){A.push(this.elements[i].value)}return A};this.keys=function(){var A=new Array();for(i=0;i<this.elements.length;i++){A.push(this.elements[i].key)}return A}};
